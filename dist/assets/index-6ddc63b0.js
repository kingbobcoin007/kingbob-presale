var gO=Object.defineProperty;var yO=(n,e,t)=>e in n?gO(n,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):n[e]=t;var B=(n,e,t)=>(yO(n,typeof e!="symbol"?e+"":e,t),t),h0=(n,e,t)=>{if(!e.has(n))throw TypeError("Cannot "+t)};var y=(n,e,t)=>(h0(n,e,"read from private field"),t?t.call(n):e.get(n)),U=(n,e,t)=>{if(e.has(n))throw TypeError("Cannot add the same private member more than once");e instanceof WeakSet?e.add(n):e.set(n,t)},k=(n,e,t,r)=>(h0(n,e,"write to private field"),r?r.call(n,t):e.set(n,t),t);var oh=(n,e,t,r)=>({set _(i){k(n,e,i,t)},get _(){return y(n,e,r)}}),K=(n,e,t)=>(h0(n,e,"access private method"),t);function wO(n,e){for(var t=0;t<e.length;t++){const r=e[t];if(typeof r!="string"&&!Array.isArray(r)){for(const i in r)if(i!=="default"&&!(i in n)){const s=Object.getOwnPropertyDescriptor(r,i);s&&Object.defineProperty(n,i,s.get?s:{enumerable:!0,get:()=>r[i]})}}}return Object.freeze(Object.defineProperty(n,Symbol.toStringTag,{value:"Module"}))}(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))r(i);new MutationObserver(i=>{for(const s of i)if(s.type==="childList")for(const o of s.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&r(o)}).observe(document,{childList:!0,subtree:!0});function t(i){const s={};return i.integrity&&(s.integrity=i.integrity),i.referrerPolicy&&(s.referrerPolicy=i.referrerPolicy),i.crossOrigin==="use-credentials"?s.credentials="include":i.crossOrigin==="anonymous"?s.credentials="omit":s.credentials="same-origin",s}function r(i){if(i.ep)return;i.ep=!0;const s=t(i);fetch(i.href,s)}})();function vO(n){return n&&n.__esModule&&Object.prototype.hasOwnProperty.call(n,"default")?n.default:n}var dS={exports:{}},Ug={},fS={exports:{}},Ee={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var wf=Symbol.for("react.element"),_O=Symbol.for("react.portal"),EO=Symbol.for("react.fragment"),AO=Symbol.for("react.strict_mode"),IO=Symbol.for("react.profiler"),TO=Symbol.for("react.provider"),bO=Symbol.for("react.context"),xO=Symbol.for("react.forward_ref"),SO=Symbol.for("react.suspense"),PO=Symbol.for("react.memo"),RO=Symbol.for("react.lazy"),QI=Symbol.iterator;function CO(n){return n===null||typeof n!="object"?null:(n=QI&&n[QI]||n["@@iterator"],typeof n=="function"?n:null)}var pS={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},mS=Object.assign,gS={};function Cc(n,e,t){this.props=n,this.context=e,this.refs=gS,this.updater=t||pS}Cc.prototype.isReactComponent={};Cc.prototype.setState=function(n,e){if(typeof n!="object"&&typeof n!="function"&&n!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,n,e,"setState")};Cc.prototype.forceUpdate=function(n){this.updater.enqueueForceUpdate(this,n,"forceUpdate")};function yS(){}yS.prototype=Cc.prototype;function S_(n,e,t){this.props=n,this.context=e,this.refs=gS,this.updater=t||pS}var P_=S_.prototype=new yS;P_.constructor=S_;mS(P_,Cc.prototype);P_.isPureReactComponent=!0;var qI=Array.isArray,wS=Object.prototype.hasOwnProperty,R_={current:null},vS={key:!0,ref:!0,__self:!0,__source:!0};function _S(n,e,t){var r,i={},s=null,o=null;if(e!=null)for(r in e.ref!==void 0&&(o=e.ref),e.key!==void 0&&(s=""+e.key),e)wS.call(e,r)&&!vS.hasOwnProperty(r)&&(i[r]=e[r]);var a=arguments.length-2;if(a===1)i.children=t;else if(1<a){for(var l=Array(a),c=0;c<a;c++)l[c]=arguments[c+2];i.children=l}if(n&&n.defaultProps)for(r in a=n.defaultProps,a)i[r]===void 0&&(i[r]=a[r]);return{$$typeof:wf,type:n,key:s,ref:o,props:i,_owner:R_.current}}function kO(n,e){return{$$typeof:wf,type:n.type,key:e,ref:n.ref,props:n.props,_owner:n._owner}}function C_(n){return typeof n=="object"&&n!==null&&n.$$typeof===wf}function NO(n){var e={"=":"=0",":":"=2"};return"$"+n.replace(/[=:]/g,function(t){return e[t]})}var WI=/\/+/g;function d0(n,e){return typeof n=="object"&&n!==null&&n.key!=null?NO(""+n.key):e.toString(36)}function jp(n,e,t,r,i){var s=typeof n;(s==="undefined"||s==="boolean")&&(n=null);var o=!1;if(n===null)o=!0;else switch(s){case"string":case"number":o=!0;break;case"object":switch(n.$$typeof){case wf:case _O:o=!0}}if(o)return o=n,i=i(o),n=r===""?"."+d0(o,0):r,qI(i)?(t="",n!=null&&(t=n.replace(WI,"$&/")+"/"),jp(i,e,t,"",function(c){return c})):i!=null&&(C_(i)&&(i=kO(i,t+(!i.key||o&&o.key===i.key?"":(""+i.key).replace(WI,"$&/")+"/")+n)),e.push(i)),1;if(o=0,r=r===""?".":r+":",qI(n))for(var a=0;a<n.length;a++){s=n[a];var l=r+d0(s,a);o+=jp(s,e,t,l,i)}else if(l=CO(n),typeof l=="function")for(n=l.call(n),a=0;!(s=n.next()).done;)s=s.value,l=r+d0(s,a++),o+=jp(s,e,t,l,i);else if(s==="object")throw e=String(n),Error("Objects are not valid as a React child (found: "+(e==="[object Object]"?"object with keys {"+Object.keys(n).join(", ")+"}":e)+"). If you meant to render a collection of children, use an array instead.");return o}function op(n,e,t){if(n==null)return n;var r=[],i=0;return jp(n,r,"","",function(s){return e.call(t,s,i++)}),r}function DO(n){if(n._status===-1){var e=n._result;e=e(),e.then(function(t){(n._status===0||n._status===-1)&&(n._status=1,n._result=t)},function(t){(n._status===0||n._status===-1)&&(n._status=2,n._result=t)}),n._status===-1&&(n._status=0,n._result=e)}if(n._status===1)return n._result.default;throw n._result}var vn={current:null},zp={transition:null},OO={ReactCurrentDispatcher:vn,ReactCurrentBatchConfig:zp,ReactCurrentOwner:R_};function ES(){throw Error("act(...) is not supported in production builds of React.")}Ee.Children={map:op,forEach:function(n,e,t){op(n,function(){e.apply(this,arguments)},t)},count:function(n){var e=0;return op(n,function(){e++}),e},toArray:function(n){return op(n,function(e){return e})||[]},only:function(n){if(!C_(n))throw Error("React.Children.only expected to receive a single React element child.");return n}};Ee.Component=Cc;Ee.Fragment=EO;Ee.Profiler=IO;Ee.PureComponent=S_;Ee.StrictMode=AO;Ee.Suspense=SO;Ee.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=OO;Ee.act=ES;Ee.cloneElement=function(n,e,t){if(n==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+n+".");var r=mS({},n.props),i=n.key,s=n.ref,o=n._owner;if(e!=null){if(e.ref!==void 0&&(s=e.ref,o=R_.current),e.key!==void 0&&(i=""+e.key),n.type&&n.type.defaultProps)var a=n.type.defaultProps;for(l in e)wS.call(e,l)&&!vS.hasOwnProperty(l)&&(r[l]=e[l]===void 0&&a!==void 0?a[l]:e[l])}var l=arguments.length-2;if(l===1)r.children=t;else if(1<l){a=Array(l);for(var c=0;c<l;c++)a[c]=arguments[c+2];r.children=a}return{$$typeof:wf,type:n.type,key:i,ref:s,props:r,_owner:o}};Ee.createContext=function(n){return n={$$typeof:bO,_currentValue:n,_currentValue2:n,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},n.Provider={$$typeof:TO,_context:n},n.Consumer=n};Ee.createElement=_S;Ee.createFactory=function(n){var e=_S.bind(null,n);return e.type=n,e};Ee.createRef=function(){return{current:null}};Ee.forwardRef=function(n){return{$$typeof:xO,render:n}};Ee.isValidElement=C_;Ee.lazy=function(n){return{$$typeof:RO,_payload:{_status:-1,_result:n},_init:DO}};Ee.memo=function(n,e){return{$$typeof:PO,type:n,compare:e===void 0?null:e}};Ee.startTransition=function(n){var e=zp.transition;zp.transition={};try{n()}finally{zp.transition=e}};Ee.unstable_act=ES;Ee.useCallback=function(n,e){return vn.current.useCallback(n,e)};Ee.useContext=function(n){return vn.current.useContext(n)};Ee.useDebugValue=function(){};Ee.useDeferredValue=function(n){return vn.current.useDeferredValue(n)};Ee.useEffect=function(n,e){return vn.current.useEffect(n,e)};Ee.useId=function(){return vn.current.useId()};Ee.useImperativeHandle=function(n,e,t){return vn.current.useImperativeHandle(n,e,t)};Ee.useInsertionEffect=function(n,e){return vn.current.useInsertionEffect(n,e)};Ee.useLayoutEffect=function(n,e){return vn.current.useLayoutEffect(n,e)};Ee.useMemo=function(n,e){return vn.current.useMemo(n,e)};Ee.useReducer=function(n,e,t){return vn.current.useReducer(n,e,t)};Ee.useRef=function(n){return vn.current.useRef(n)};Ee.useState=function(n){return vn.current.useState(n)};Ee.useSyncExternalStore=function(n,e,t){return vn.current.useSyncExternalStore(n,e,t)};Ee.useTransition=function(){return vn.current.useTransition()};Ee.version="18.3.1";fS.exports=Ee;var G=fS.exports;const AS=vO(G),LO=wO({__proto__:null,default:AS},[G]);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var VO=G,MO=Symbol.for("react.element"),BO=Symbol.for("react.fragment"),FO=Object.prototype.hasOwnProperty,UO=VO.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,jO={key:!0,ref:!0,__self:!0,__source:!0};function IS(n,e,t){var r,i={},s=null,o=null;t!==void 0&&(s=""+t),e.key!==void 0&&(s=""+e.key),e.ref!==void 0&&(o=e.ref);for(r in e)FO.call(e,r)&&!jO.hasOwnProperty(r)&&(i[r]=e[r]);if(n&&n.defaultProps)for(r in e=n.defaultProps,e)i[r]===void 0&&(i[r]=e[r]);return{$$typeof:MO,type:n,key:s,ref:o,props:i,_owner:UO.current}}Ug.Fragment=BO;Ug.jsx=IS;Ug.jsxs=IS;dS.exports=Ug;var C=dS.exports,pw={},TS={exports:{}},qn={},bS={exports:{}},xS={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(n){function e(Q,ee){var ae=Q.length;Q.push(ee);e:for(;0<ae;){var _e=ae-1>>>1,me=Q[_e];if(0<i(me,ee))Q[_e]=ee,Q[ae]=me,ae=_e;else break e}}function t(Q){return Q.length===0?null:Q[0]}function r(Q){if(Q.length===0)return null;var ee=Q[0],ae=Q.pop();if(ae!==ee){Q[0]=ae;e:for(var _e=0,me=Q.length,ke=me>>>1;_e<ke;){var _t=2*(_e+1)-1,Ft=Q[_t],Zt=_t+1,mt=Q[Zt];if(0>i(Ft,ae))Zt<me&&0>i(mt,Ft)?(Q[_e]=mt,Q[Zt]=ae,_e=Zt):(Q[_e]=Ft,Q[_t]=ae,_e=_t);else if(Zt<me&&0>i(mt,ae))Q[_e]=mt,Q[Zt]=ae,_e=Zt;else break e}}return ee}function i(Q,ee){var ae=Q.sortIndex-ee.sortIndex;return ae!==0?ae:Q.id-ee.id}if(typeof performance=="object"&&typeof performance.now=="function"){var s=performance;n.unstable_now=function(){return s.now()}}else{var o=Date,a=o.now();n.unstable_now=function(){return o.now()-a}}var l=[],c=[],h=1,d=null,p=3,g=!1,A=!1,v=!1,x=typeof setTimeout=="function"?setTimeout:null,w=typeof clearTimeout=="function"?clearTimeout:null,E=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function T(Q){for(var ee=t(c);ee!==null;){if(ee.callback===null)r(c);else if(ee.startTime<=Q)r(c),ee.sortIndex=ee.expirationTime,e(l,ee);else break;ee=t(c)}}function L(Q){if(v=!1,T(Q),!A)if(t(l)!==null)A=!0,ne(F);else{var ee=t(c);ee!==null&&de(L,ee.startTime-Q)}}function F(Q,ee){A=!1,v&&(v=!1,w(_),_=-1),g=!0;var ae=p;try{for(T(ee),d=t(l);d!==null&&(!(d.expirationTime>ee)||Q&&!D());){var _e=d.callback;if(typeof _e=="function"){d.callback=null,p=d.priorityLevel;var me=_e(d.expirationTime<=ee);ee=n.unstable_now(),typeof me=="function"?d.callback=me:d===t(l)&&r(l),T(ee)}else r(l);d=t(l)}if(d!==null)var ke=!0;else{var _t=t(c);_t!==null&&de(L,_t.startTime-ee),ke=!1}return ke}finally{d=null,p=ae,g=!1}}var M=!1,b=null,_=-1,S=5,P=-1;function D(){return!(n.unstable_now()-P<S)}function N(){if(b!==null){var Q=n.unstable_now();P=Q;var ee=!0;try{ee=b(!0,Q)}finally{ee?R():(M=!1,b=null)}}else M=!1}var R;if(typeof E=="function")R=function(){E(N)};else if(typeof MessageChannel<"u"){var Te=new MessageChannel,q=Te.port2;Te.port1.onmessage=N,R=function(){q.postMessage(null)}}else R=function(){x(N,0)};function ne(Q){b=Q,M||(M=!0,R())}function de(Q,ee){_=x(function(){Q(n.unstable_now())},ee)}n.unstable_IdlePriority=5,n.unstable_ImmediatePriority=1,n.unstable_LowPriority=4,n.unstable_NormalPriority=3,n.unstable_Profiling=null,n.unstable_UserBlockingPriority=2,n.unstable_cancelCallback=function(Q){Q.callback=null},n.unstable_continueExecution=function(){A||g||(A=!0,ne(F))},n.unstable_forceFrameRate=function(Q){0>Q||125<Q?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):S=0<Q?Math.floor(1e3/Q):5},n.unstable_getCurrentPriorityLevel=function(){return p},n.unstable_getFirstCallbackNode=function(){return t(l)},n.unstable_next=function(Q){switch(p){case 1:case 2:case 3:var ee=3;break;default:ee=p}var ae=p;p=ee;try{return Q()}finally{p=ae}},n.unstable_pauseExecution=function(){},n.unstable_requestPaint=function(){},n.unstable_runWithPriority=function(Q,ee){switch(Q){case 1:case 2:case 3:case 4:case 5:break;default:Q=3}var ae=p;p=Q;try{return ee()}finally{p=ae}},n.unstable_scheduleCallback=function(Q,ee,ae){var _e=n.unstable_now();switch(typeof ae=="object"&&ae!==null?(ae=ae.delay,ae=typeof ae=="number"&&0<ae?_e+ae:_e):ae=_e,Q){case 1:var me=-1;break;case 2:me=250;break;case 5:me=1073741823;break;case 4:me=1e4;break;default:me=5e3}return me=ae+me,Q={id:h++,callback:ee,priorityLevel:Q,startTime:ae,expirationTime:me,sortIndex:-1},ae>_e?(Q.sortIndex=ae,e(c,Q),t(l)===null&&Q===t(c)&&(v?(w(_),_=-1):v=!0,de(L,ae-_e))):(Q.sortIndex=me,e(l,Q),A||g||(A=!0,ne(F))),Q},n.unstable_shouldYield=D,n.unstable_wrapCallback=function(Q){var ee=p;return function(){var ae=p;p=ee;try{return Q.apply(this,arguments)}finally{p=ae}}}})(xS);bS.exports=xS;var zO=bS.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var GO=G,Kn=zO;function J(n){for(var e="https://reactjs.org/docs/error-decoder.html?invariant="+n,t=1;t<arguments.length;t++)e+="&args[]="+encodeURIComponent(arguments[t]);return"Minified React error #"+n+"; visit "+e+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var SS=new Set,sd={};function tl(n,e){ic(n,e),ic(n+"Capture",e)}function ic(n,e){for(sd[n]=e,n=0;n<e.length;n++)SS.add(e[n])}var $i=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),mw=Object.prototype.hasOwnProperty,HO=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,JI={},YI={};function $O(n){return mw.call(YI,n)?!0:mw.call(JI,n)?!1:HO.test(n)?YI[n]=!0:(JI[n]=!0,!1)}function KO(n,e,t,r){if(t!==null&&t.type===0)return!1;switch(typeof e){case"function":case"symbol":return!0;case"boolean":return r?!1:t!==null?!t.acceptsBooleans:(n=n.toLowerCase().slice(0,5),n!=="data-"&&n!=="aria-");default:return!1}}function QO(n,e,t,r){if(e===null||typeof e>"u"||KO(n,e,t,r))return!0;if(r)return!1;if(t!==null)switch(t.type){case 3:return!e;case 4:return e===!1;case 5:return isNaN(e);case 6:return isNaN(e)||1>e}return!1}function _n(n,e,t,r,i,s,o){this.acceptsBooleans=e===2||e===3||e===4,this.attributeName=r,this.attributeNamespace=i,this.mustUseProperty=t,this.propertyName=n,this.type=e,this.sanitizeURL=s,this.removeEmptyString=o}var Bt={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(n){Bt[n]=new _n(n,0,!1,n,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(n){var e=n[0];Bt[e]=new _n(e,1,!1,n[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(n){Bt[n]=new _n(n,2,!1,n.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(n){Bt[n]=new _n(n,2,!1,n,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(n){Bt[n]=new _n(n,3,!1,n.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(n){Bt[n]=new _n(n,3,!0,n,null,!1,!1)});["capture","download"].forEach(function(n){Bt[n]=new _n(n,4,!1,n,null,!1,!1)});["cols","rows","size","span"].forEach(function(n){Bt[n]=new _n(n,6,!1,n,null,!1,!1)});["rowSpan","start"].forEach(function(n){Bt[n]=new _n(n,5,!1,n.toLowerCase(),null,!1,!1)});var k_=/[\-:]([a-z])/g;function N_(n){return n[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(n){var e=n.replace(k_,N_);Bt[e]=new _n(e,1,!1,n,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(n){var e=n.replace(k_,N_);Bt[e]=new _n(e,1,!1,n,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(n){var e=n.replace(k_,N_);Bt[e]=new _n(e,1,!1,n,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(n){Bt[n]=new _n(n,1,!1,n.toLowerCase(),null,!1,!1)});Bt.xlinkHref=new _n("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(n){Bt[n]=new _n(n,1,!1,n.toLowerCase(),null,!0,!0)});function D_(n,e,t,r){var i=Bt.hasOwnProperty(e)?Bt[e]:null;(i!==null?i.type!==0:r||!(2<e.length)||e[0]!=="o"&&e[0]!=="O"||e[1]!=="n"&&e[1]!=="N")&&(QO(e,t,i,r)&&(t=null),r||i===null?$O(e)&&(t===null?n.removeAttribute(e):n.setAttribute(e,""+t)):i.mustUseProperty?n[i.propertyName]=t===null?i.type===3?!1:"":t:(e=i.attributeName,r=i.attributeNamespace,t===null?n.removeAttribute(e):(i=i.type,t=i===3||i===4&&t===!0?"":""+t,r?n.setAttributeNS(r,e,t):n.setAttribute(e,t))))}var ts=GO.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,ap=Symbol.for("react.element"),Ol=Symbol.for("react.portal"),Ll=Symbol.for("react.fragment"),O_=Symbol.for("react.strict_mode"),gw=Symbol.for("react.profiler"),PS=Symbol.for("react.provider"),RS=Symbol.for("react.context"),L_=Symbol.for("react.forward_ref"),yw=Symbol.for("react.suspense"),ww=Symbol.for("react.suspense_list"),V_=Symbol.for("react.memo"),ys=Symbol.for("react.lazy"),CS=Symbol.for("react.offscreen"),XI=Symbol.iterator;function ah(n){return n===null||typeof n!="object"?null:(n=XI&&n[XI]||n["@@iterator"],typeof n=="function"?n:null)}var tt=Object.assign,f0;function Th(n){if(f0===void 0)try{throw Error()}catch(t){var e=t.stack.trim().match(/\n( *(at )?)/);f0=e&&e[1]||""}return`
`+f0+n}var p0=!1;function m0(n,e){if(!n||p0)return"";p0=!0;var t=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(e)if(e=function(){throw Error()},Object.defineProperty(e.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(e,[])}catch(c){var r=c}Reflect.construct(n,[],e)}else{try{e.call()}catch(c){r=c}n.call(e.prototype)}else{try{throw Error()}catch(c){r=c}n()}}catch(c){if(c&&r&&typeof c.stack=="string"){for(var i=c.stack.split(`
`),s=r.stack.split(`
`),o=i.length-1,a=s.length-1;1<=o&&0<=a&&i[o]!==s[a];)a--;for(;1<=o&&0<=a;o--,a--)if(i[o]!==s[a]){if(o!==1||a!==1)do if(o--,a--,0>a||i[o]!==s[a]){var l=`
`+i[o].replace(" at new "," at ");return n.displayName&&l.includes("<anonymous>")&&(l=l.replace("<anonymous>",n.displayName)),l}while(1<=o&&0<=a);break}}}finally{p0=!1,Error.prepareStackTrace=t}return(n=n?n.displayName||n.name:"")?Th(n):""}function qO(n){switch(n.tag){case 5:return Th(n.type);case 16:return Th("Lazy");case 13:return Th("Suspense");case 19:return Th("SuspenseList");case 0:case 2:case 15:return n=m0(n.type,!1),n;case 11:return n=m0(n.type.render,!1),n;case 1:return n=m0(n.type,!0),n;default:return""}}function vw(n){if(n==null)return null;if(typeof n=="function")return n.displayName||n.name||null;if(typeof n=="string")return n;switch(n){case Ll:return"Fragment";case Ol:return"Portal";case gw:return"Profiler";case O_:return"StrictMode";case yw:return"Suspense";case ww:return"SuspenseList"}if(typeof n=="object")switch(n.$$typeof){case RS:return(n.displayName||"Context")+".Consumer";case PS:return(n._context.displayName||"Context")+".Provider";case L_:var e=n.render;return n=n.displayName,n||(n=e.displayName||e.name||"",n=n!==""?"ForwardRef("+n+")":"ForwardRef"),n;case V_:return e=n.displayName||null,e!==null?e:vw(n.type)||"Memo";case ys:e=n._payload,n=n._init;try{return vw(n(e))}catch{}}return null}function WO(n){var e=n.type;switch(n.tag){case 24:return"Cache";case 9:return(e.displayName||"Context")+".Consumer";case 10:return(e._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return n=e.render,n=n.displayName||n.name||"",e.displayName||(n!==""?"ForwardRef("+n+")":"ForwardRef");case 7:return"Fragment";case 5:return e;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return vw(e);case 8:return e===O_?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e}return null}function ho(n){switch(typeof n){case"boolean":case"number":case"string":case"undefined":return n;case"object":return n;default:return""}}function kS(n){var e=n.type;return(n=n.nodeName)&&n.toLowerCase()==="input"&&(e==="checkbox"||e==="radio")}function JO(n){var e=kS(n)?"checked":"value",t=Object.getOwnPropertyDescriptor(n.constructor.prototype,e),r=""+n[e];if(!n.hasOwnProperty(e)&&typeof t<"u"&&typeof t.get=="function"&&typeof t.set=="function"){var i=t.get,s=t.set;return Object.defineProperty(n,e,{configurable:!0,get:function(){return i.call(this)},set:function(o){r=""+o,s.call(this,o)}}),Object.defineProperty(n,e,{enumerable:t.enumerable}),{getValue:function(){return r},setValue:function(o){r=""+o},stopTracking:function(){n._valueTracker=null,delete n[e]}}}}function lp(n){n._valueTracker||(n._valueTracker=JO(n))}function NS(n){if(!n)return!1;var e=n._valueTracker;if(!e)return!0;var t=e.getValue(),r="";return n&&(r=kS(n)?n.checked?"true":"false":n.value),n=r,n!==t?(e.setValue(n),!0):!1}function Tm(n){if(n=n||(typeof document<"u"?document:void 0),typeof n>"u")return null;try{return n.activeElement||n.body}catch{return n.body}}function _w(n,e){var t=e.checked;return tt({},e,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:t??n._wrapperState.initialChecked})}function ZI(n,e){var t=e.defaultValue==null?"":e.defaultValue,r=e.checked!=null?e.checked:e.defaultChecked;t=ho(e.value!=null?e.value:t),n._wrapperState={initialChecked:r,initialValue:t,controlled:e.type==="checkbox"||e.type==="radio"?e.checked!=null:e.value!=null}}function DS(n,e){e=e.checked,e!=null&&D_(n,"checked",e,!1)}function Ew(n,e){DS(n,e);var t=ho(e.value),r=e.type;if(t!=null)r==="number"?(t===0&&n.value===""||n.value!=t)&&(n.value=""+t):n.value!==""+t&&(n.value=""+t);else if(r==="submit"||r==="reset"){n.removeAttribute("value");return}e.hasOwnProperty("value")?Aw(n,e.type,t):e.hasOwnProperty("defaultValue")&&Aw(n,e.type,ho(e.defaultValue)),e.checked==null&&e.defaultChecked!=null&&(n.defaultChecked=!!e.defaultChecked)}function e1(n,e,t){if(e.hasOwnProperty("value")||e.hasOwnProperty("defaultValue")){var r=e.type;if(!(r!=="submit"&&r!=="reset"||e.value!==void 0&&e.value!==null))return;e=""+n._wrapperState.initialValue,t||e===n.value||(n.value=e),n.defaultValue=e}t=n.name,t!==""&&(n.name=""),n.defaultChecked=!!n._wrapperState.initialChecked,t!==""&&(n.name=t)}function Aw(n,e,t){(e!=="number"||Tm(n.ownerDocument)!==n)&&(t==null?n.defaultValue=""+n._wrapperState.initialValue:n.defaultValue!==""+t&&(n.defaultValue=""+t))}var bh=Array.isArray;function Zl(n,e,t,r){if(n=n.options,e){e={};for(var i=0;i<t.length;i++)e["$"+t[i]]=!0;for(t=0;t<n.length;t++)i=e.hasOwnProperty("$"+n[t].value),n[t].selected!==i&&(n[t].selected=i),i&&r&&(n[t].defaultSelected=!0)}else{for(t=""+ho(t),e=null,i=0;i<n.length;i++){if(n[i].value===t){n[i].selected=!0,r&&(n[i].defaultSelected=!0);return}e!==null||n[i].disabled||(e=n[i])}e!==null&&(e.selected=!0)}}function Iw(n,e){if(e.dangerouslySetInnerHTML!=null)throw Error(J(91));return tt({},e,{value:void 0,defaultValue:void 0,children:""+n._wrapperState.initialValue})}function t1(n,e){var t=e.value;if(t==null){if(t=e.children,e=e.defaultValue,t!=null){if(e!=null)throw Error(J(92));if(bh(t)){if(1<t.length)throw Error(J(93));t=t[0]}e=t}e==null&&(e=""),t=e}n._wrapperState={initialValue:ho(t)}}function OS(n,e){var t=ho(e.value),r=ho(e.defaultValue);t!=null&&(t=""+t,t!==n.value&&(n.value=t),e.defaultValue==null&&n.defaultValue!==t&&(n.defaultValue=t)),r!=null&&(n.defaultValue=""+r)}function n1(n){var e=n.textContent;e===n._wrapperState.initialValue&&e!==""&&e!==null&&(n.value=e)}function LS(n){switch(n){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function Tw(n,e){return n==null||n==="http://www.w3.org/1999/xhtml"?LS(e):n==="http://www.w3.org/2000/svg"&&e==="foreignObject"?"http://www.w3.org/1999/xhtml":n}var up,VS=function(n){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(e,t,r,i){MSApp.execUnsafeLocalFunction(function(){return n(e,t,r,i)})}:n}(function(n,e){if(n.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in n)n.innerHTML=e;else{for(up=up||document.createElement("div"),up.innerHTML="<svg>"+e.valueOf().toString()+"</svg>",e=up.firstChild;n.firstChild;)n.removeChild(n.firstChild);for(;e.firstChild;)n.appendChild(e.firstChild)}});function od(n,e){if(e){var t=n.firstChild;if(t&&t===n.lastChild&&t.nodeType===3){t.nodeValue=e;return}}n.textContent=e}var jh={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},YO=["Webkit","ms","Moz","O"];Object.keys(jh).forEach(function(n){YO.forEach(function(e){e=e+n.charAt(0).toUpperCase()+n.substring(1),jh[e]=jh[n]})});function MS(n,e,t){return e==null||typeof e=="boolean"||e===""?"":t||typeof e!="number"||e===0||jh.hasOwnProperty(n)&&jh[n]?(""+e).trim():e+"px"}function BS(n,e){n=n.style;for(var t in e)if(e.hasOwnProperty(t)){var r=t.indexOf("--")===0,i=MS(t,e[t],r);t==="float"&&(t="cssFloat"),r?n.setProperty(t,i):n[t]=i}}var XO=tt({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function bw(n,e){if(e){if(XO[n]&&(e.children!=null||e.dangerouslySetInnerHTML!=null))throw Error(J(137,n));if(e.dangerouslySetInnerHTML!=null){if(e.children!=null)throw Error(J(60));if(typeof e.dangerouslySetInnerHTML!="object"||!("__html"in e.dangerouslySetInnerHTML))throw Error(J(61))}if(e.style!=null&&typeof e.style!="object")throw Error(J(62))}}function xw(n,e){if(n.indexOf("-")===-1)return typeof e.is=="string";switch(n){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Sw=null;function M_(n){return n=n.target||n.srcElement||window,n.correspondingUseElement&&(n=n.correspondingUseElement),n.nodeType===3?n.parentNode:n}var Pw=null,eu=null,tu=null;function r1(n){if(n=Ef(n)){if(typeof Pw!="function")throw Error(J(280));var e=n.stateNode;e&&(e=$g(e),Pw(n.stateNode,n.type,e))}}function FS(n){eu?tu?tu.push(n):tu=[n]:eu=n}function US(){if(eu){var n=eu,e=tu;if(tu=eu=null,r1(n),e)for(n=0;n<e.length;n++)r1(e[n])}}function jS(n,e){return n(e)}function zS(){}var g0=!1;function GS(n,e,t){if(g0)return n(e,t);g0=!0;try{return jS(n,e,t)}finally{g0=!1,(eu!==null||tu!==null)&&(zS(),US())}}function ad(n,e){var t=n.stateNode;if(t===null)return null;var r=$g(t);if(r===null)return null;t=r[e];e:switch(e){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(r=!r.disabled)||(n=n.type,r=!(n==="button"||n==="input"||n==="select"||n==="textarea")),n=!r;break e;default:n=!1}if(n)return null;if(t&&typeof t!="function")throw Error(J(231,e,typeof t));return t}var Rw=!1;if($i)try{var lh={};Object.defineProperty(lh,"passive",{get:function(){Rw=!0}}),window.addEventListener("test",lh,lh),window.removeEventListener("test",lh,lh)}catch{Rw=!1}function ZO(n,e,t,r,i,s,o,a,l){var c=Array.prototype.slice.call(arguments,3);try{e.apply(t,c)}catch(h){this.onError(h)}}var zh=!1,bm=null,xm=!1,Cw=null,eL={onError:function(n){zh=!0,bm=n}};function tL(n,e,t,r,i,s,o,a,l){zh=!1,bm=null,ZO.apply(eL,arguments)}function nL(n,e,t,r,i,s,o,a,l){if(tL.apply(this,arguments),zh){if(zh){var c=bm;zh=!1,bm=null}else throw Error(J(198));xm||(xm=!0,Cw=c)}}function nl(n){var e=n,t=n;if(n.alternate)for(;e.return;)e=e.return;else{n=e;do e=n,e.flags&4098&&(t=e.return),n=e.return;while(n)}return e.tag===3?t:null}function HS(n){if(n.tag===13){var e=n.memoizedState;if(e===null&&(n=n.alternate,n!==null&&(e=n.memoizedState)),e!==null)return e.dehydrated}return null}function i1(n){if(nl(n)!==n)throw Error(J(188))}function rL(n){var e=n.alternate;if(!e){if(e=nl(n),e===null)throw Error(J(188));return e!==n?null:n}for(var t=n,r=e;;){var i=t.return;if(i===null)break;var s=i.alternate;if(s===null){if(r=i.return,r!==null){t=r;continue}break}if(i.child===s.child){for(s=i.child;s;){if(s===t)return i1(i),n;if(s===r)return i1(i),e;s=s.sibling}throw Error(J(188))}if(t.return!==r.return)t=i,r=s;else{for(var o=!1,a=i.child;a;){if(a===t){o=!0,t=i,r=s;break}if(a===r){o=!0,r=i,t=s;break}a=a.sibling}if(!o){for(a=s.child;a;){if(a===t){o=!0,t=s,r=i;break}if(a===r){o=!0,r=s,t=i;break}a=a.sibling}if(!o)throw Error(J(189))}}if(t.alternate!==r)throw Error(J(190))}if(t.tag!==3)throw Error(J(188));return t.stateNode.current===t?n:e}function $S(n){return n=rL(n),n!==null?KS(n):null}function KS(n){if(n.tag===5||n.tag===6)return n;for(n=n.child;n!==null;){var e=KS(n);if(e!==null)return e;n=n.sibling}return null}var QS=Kn.unstable_scheduleCallback,s1=Kn.unstable_cancelCallback,iL=Kn.unstable_shouldYield,sL=Kn.unstable_requestPaint,lt=Kn.unstable_now,oL=Kn.unstable_getCurrentPriorityLevel,B_=Kn.unstable_ImmediatePriority,qS=Kn.unstable_UserBlockingPriority,Sm=Kn.unstable_NormalPriority,aL=Kn.unstable_LowPriority,WS=Kn.unstable_IdlePriority,jg=null,ni=null;function lL(n){if(ni&&typeof ni.onCommitFiberRoot=="function")try{ni.onCommitFiberRoot(jg,n,void 0,(n.current.flags&128)===128)}catch{}}var Cr=Math.clz32?Math.clz32:hL,uL=Math.log,cL=Math.LN2;function hL(n){return n>>>=0,n===0?32:31-(uL(n)/cL|0)|0}var cp=64,hp=4194304;function xh(n){switch(n&-n){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return n&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return n&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return n}}function Pm(n,e){var t=n.pendingLanes;if(t===0)return 0;var r=0,i=n.suspendedLanes,s=n.pingedLanes,o=t&268435455;if(o!==0){var a=o&~i;a!==0?r=xh(a):(s&=o,s!==0&&(r=xh(s)))}else o=t&~i,o!==0?r=xh(o):s!==0&&(r=xh(s));if(r===0)return 0;if(e!==0&&e!==r&&!(e&i)&&(i=r&-r,s=e&-e,i>=s||i===16&&(s&4194240)!==0))return e;if(r&4&&(r|=t&16),e=n.entangledLanes,e!==0)for(n=n.entanglements,e&=r;0<e;)t=31-Cr(e),i=1<<t,r|=n[t],e&=~i;return r}function dL(n,e){switch(n){case 1:case 2:case 4:return e+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function fL(n,e){for(var t=n.suspendedLanes,r=n.pingedLanes,i=n.expirationTimes,s=n.pendingLanes;0<s;){var o=31-Cr(s),a=1<<o,l=i[o];l===-1?(!(a&t)||a&r)&&(i[o]=dL(a,e)):l<=e&&(n.expiredLanes|=a),s&=~a}}function kw(n){return n=n.pendingLanes&-1073741825,n!==0?n:n&1073741824?1073741824:0}function JS(){var n=cp;return cp<<=1,!(cp&4194240)&&(cp=64),n}function y0(n){for(var e=[],t=0;31>t;t++)e.push(n);return e}function vf(n,e,t){n.pendingLanes|=e,e!==536870912&&(n.suspendedLanes=0,n.pingedLanes=0),n=n.eventTimes,e=31-Cr(e),n[e]=t}function pL(n,e){var t=n.pendingLanes&~e;n.pendingLanes=e,n.suspendedLanes=0,n.pingedLanes=0,n.expiredLanes&=e,n.mutableReadLanes&=e,n.entangledLanes&=e,e=n.entanglements;var r=n.eventTimes;for(n=n.expirationTimes;0<t;){var i=31-Cr(t),s=1<<i;e[i]=0,r[i]=-1,n[i]=-1,t&=~s}}function F_(n,e){var t=n.entangledLanes|=e;for(n=n.entanglements;t;){var r=31-Cr(t),i=1<<r;i&e|n[r]&e&&(n[r]|=e),t&=~i}}var Le=0;function YS(n){return n&=-n,1<n?4<n?n&268435455?16:536870912:4:1}var XS,U_,ZS,eP,tP,Nw=!1,dp=[],Ws=null,Js=null,Ys=null,ld=new Map,ud=new Map,_s=[],mL="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function o1(n,e){switch(n){case"focusin":case"focusout":Ws=null;break;case"dragenter":case"dragleave":Js=null;break;case"mouseover":case"mouseout":Ys=null;break;case"pointerover":case"pointerout":ld.delete(e.pointerId);break;case"gotpointercapture":case"lostpointercapture":ud.delete(e.pointerId)}}function uh(n,e,t,r,i,s){return n===null||n.nativeEvent!==s?(n={blockedOn:e,domEventName:t,eventSystemFlags:r,nativeEvent:s,targetContainers:[i]},e!==null&&(e=Ef(e),e!==null&&U_(e)),n):(n.eventSystemFlags|=r,e=n.targetContainers,i!==null&&e.indexOf(i)===-1&&e.push(i),n)}function gL(n,e,t,r,i){switch(e){case"focusin":return Ws=uh(Ws,n,e,t,r,i),!0;case"dragenter":return Js=uh(Js,n,e,t,r,i),!0;case"mouseover":return Ys=uh(Ys,n,e,t,r,i),!0;case"pointerover":var s=i.pointerId;return ld.set(s,uh(ld.get(s)||null,n,e,t,r,i)),!0;case"gotpointercapture":return s=i.pointerId,ud.set(s,uh(ud.get(s)||null,n,e,t,r,i)),!0}return!1}function nP(n){var e=Zo(n.target);if(e!==null){var t=nl(e);if(t!==null){if(e=t.tag,e===13){if(e=HS(t),e!==null){n.blockedOn=e,tP(n.priority,function(){ZS(t)});return}}else if(e===3&&t.stateNode.current.memoizedState.isDehydrated){n.blockedOn=t.tag===3?t.stateNode.containerInfo:null;return}}}n.blockedOn=null}function Gp(n){if(n.blockedOn!==null)return!1;for(var e=n.targetContainers;0<e.length;){var t=Dw(n.domEventName,n.eventSystemFlags,e[0],n.nativeEvent);if(t===null){t=n.nativeEvent;var r=new t.constructor(t.type,t);Sw=r,t.target.dispatchEvent(r),Sw=null}else return e=Ef(t),e!==null&&U_(e),n.blockedOn=t,!1;e.shift()}return!0}function a1(n,e,t){Gp(n)&&t.delete(e)}function yL(){Nw=!1,Ws!==null&&Gp(Ws)&&(Ws=null),Js!==null&&Gp(Js)&&(Js=null),Ys!==null&&Gp(Ys)&&(Ys=null),ld.forEach(a1),ud.forEach(a1)}function ch(n,e){n.blockedOn===e&&(n.blockedOn=null,Nw||(Nw=!0,Kn.unstable_scheduleCallback(Kn.unstable_NormalPriority,yL)))}function cd(n){function e(i){return ch(i,n)}if(0<dp.length){ch(dp[0],n);for(var t=1;t<dp.length;t++){var r=dp[t];r.blockedOn===n&&(r.blockedOn=null)}}for(Ws!==null&&ch(Ws,n),Js!==null&&ch(Js,n),Ys!==null&&ch(Ys,n),ld.forEach(e),ud.forEach(e),t=0;t<_s.length;t++)r=_s[t],r.blockedOn===n&&(r.blockedOn=null);for(;0<_s.length&&(t=_s[0],t.blockedOn===null);)nP(t),t.blockedOn===null&&_s.shift()}var nu=ts.ReactCurrentBatchConfig,Rm=!0;function wL(n,e,t,r){var i=Le,s=nu.transition;nu.transition=null;try{Le=1,j_(n,e,t,r)}finally{Le=i,nu.transition=s}}function vL(n,e,t,r){var i=Le,s=nu.transition;nu.transition=null;try{Le=4,j_(n,e,t,r)}finally{Le=i,nu.transition=s}}function j_(n,e,t,r){if(Rm){var i=Dw(n,e,t,r);if(i===null)S0(n,e,r,Cm,t),o1(n,r);else if(gL(i,n,e,t,r))r.stopPropagation();else if(o1(n,r),e&4&&-1<mL.indexOf(n)){for(;i!==null;){var s=Ef(i);if(s!==null&&XS(s),s=Dw(n,e,t,r),s===null&&S0(n,e,r,Cm,t),s===i)break;i=s}i!==null&&r.stopPropagation()}else S0(n,e,r,null,t)}}var Cm=null;function Dw(n,e,t,r){if(Cm=null,n=M_(r),n=Zo(n),n!==null)if(e=nl(n),e===null)n=null;else if(t=e.tag,t===13){if(n=HS(e),n!==null)return n;n=null}else if(t===3){if(e.stateNode.current.memoizedState.isDehydrated)return e.tag===3?e.stateNode.containerInfo:null;n=null}else e!==n&&(n=null);return Cm=n,null}function rP(n){switch(n){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(oL()){case B_:return 1;case qS:return 4;case Sm:case aL:return 16;case WS:return 536870912;default:return 16}default:return 16}}var $s=null,z_=null,Hp=null;function iP(){if(Hp)return Hp;var n,e=z_,t=e.length,r,i="value"in $s?$s.value:$s.textContent,s=i.length;for(n=0;n<t&&e[n]===i[n];n++);var o=t-n;for(r=1;r<=o&&e[t-r]===i[s-r];r++);return Hp=i.slice(n,1<r?1-r:void 0)}function $p(n){var e=n.keyCode;return"charCode"in n?(n=n.charCode,n===0&&e===13&&(n=13)):n=e,n===10&&(n=13),32<=n||n===13?n:0}function fp(){return!0}function l1(){return!1}function Wn(n){function e(t,r,i,s,o){this._reactName=t,this._targetInst=i,this.type=r,this.nativeEvent=s,this.target=o,this.currentTarget=null;for(var a in n)n.hasOwnProperty(a)&&(t=n[a],this[a]=t?t(s):s[a]);return this.isDefaultPrevented=(s.defaultPrevented!=null?s.defaultPrevented:s.returnValue===!1)?fp:l1,this.isPropagationStopped=l1,this}return tt(e.prototype,{preventDefault:function(){this.defaultPrevented=!0;var t=this.nativeEvent;t&&(t.preventDefault?t.preventDefault():typeof t.returnValue!="unknown"&&(t.returnValue=!1),this.isDefaultPrevented=fp)},stopPropagation:function(){var t=this.nativeEvent;t&&(t.stopPropagation?t.stopPropagation():typeof t.cancelBubble!="unknown"&&(t.cancelBubble=!0),this.isPropagationStopped=fp)},persist:function(){},isPersistent:fp}),e}var kc={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(n){return n.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},G_=Wn(kc),_f=tt({},kc,{view:0,detail:0}),_L=Wn(_f),w0,v0,hh,zg=tt({},_f,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:H_,button:0,buttons:0,relatedTarget:function(n){return n.relatedTarget===void 0?n.fromElement===n.srcElement?n.toElement:n.fromElement:n.relatedTarget},movementX:function(n){return"movementX"in n?n.movementX:(n!==hh&&(hh&&n.type==="mousemove"?(w0=n.screenX-hh.screenX,v0=n.screenY-hh.screenY):v0=w0=0,hh=n),w0)},movementY:function(n){return"movementY"in n?n.movementY:v0}}),u1=Wn(zg),EL=tt({},zg,{dataTransfer:0}),AL=Wn(EL),IL=tt({},_f,{relatedTarget:0}),_0=Wn(IL),TL=tt({},kc,{animationName:0,elapsedTime:0,pseudoElement:0}),bL=Wn(TL),xL=tt({},kc,{clipboardData:function(n){return"clipboardData"in n?n.clipboardData:window.clipboardData}}),SL=Wn(xL),PL=tt({},kc,{data:0}),c1=Wn(PL),RL={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},CL={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},kL={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function NL(n){var e=this.nativeEvent;return e.getModifierState?e.getModifierState(n):(n=kL[n])?!!e[n]:!1}function H_(){return NL}var DL=tt({},_f,{key:function(n){if(n.key){var e=RL[n.key]||n.key;if(e!=="Unidentified")return e}return n.type==="keypress"?(n=$p(n),n===13?"Enter":String.fromCharCode(n)):n.type==="keydown"||n.type==="keyup"?CL[n.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:H_,charCode:function(n){return n.type==="keypress"?$p(n):0},keyCode:function(n){return n.type==="keydown"||n.type==="keyup"?n.keyCode:0},which:function(n){return n.type==="keypress"?$p(n):n.type==="keydown"||n.type==="keyup"?n.keyCode:0}}),OL=Wn(DL),LL=tt({},zg,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),h1=Wn(LL),VL=tt({},_f,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:H_}),ML=Wn(VL),BL=tt({},kc,{propertyName:0,elapsedTime:0,pseudoElement:0}),FL=Wn(BL),UL=tt({},zg,{deltaX:function(n){return"deltaX"in n?n.deltaX:"wheelDeltaX"in n?-n.wheelDeltaX:0},deltaY:function(n){return"deltaY"in n?n.deltaY:"wheelDeltaY"in n?-n.wheelDeltaY:"wheelDelta"in n?-n.wheelDelta:0},deltaZ:0,deltaMode:0}),jL=Wn(UL),zL=[9,13,27,32],$_=$i&&"CompositionEvent"in window,Gh=null;$i&&"documentMode"in document&&(Gh=document.documentMode);var GL=$i&&"TextEvent"in window&&!Gh,sP=$i&&(!$_||Gh&&8<Gh&&11>=Gh),d1=String.fromCharCode(32),f1=!1;function oP(n,e){switch(n){case"keyup":return zL.indexOf(e.keyCode)!==-1;case"keydown":return e.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function aP(n){return n=n.detail,typeof n=="object"&&"data"in n?n.data:null}var Vl=!1;function HL(n,e){switch(n){case"compositionend":return aP(e);case"keypress":return e.which!==32?null:(f1=!0,d1);case"textInput":return n=e.data,n===d1&&f1?null:n;default:return null}}function $L(n,e){if(Vl)return n==="compositionend"||!$_&&oP(n,e)?(n=iP(),Hp=z_=$s=null,Vl=!1,n):null;switch(n){case"paste":return null;case"keypress":if(!(e.ctrlKey||e.altKey||e.metaKey)||e.ctrlKey&&e.altKey){if(e.char&&1<e.char.length)return e.char;if(e.which)return String.fromCharCode(e.which)}return null;case"compositionend":return sP&&e.locale!=="ko"?null:e.data;default:return null}}var KL={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function p1(n){var e=n&&n.nodeName&&n.nodeName.toLowerCase();return e==="input"?!!KL[n.type]:e==="textarea"}function lP(n,e,t,r){FS(r),e=km(e,"onChange"),0<e.length&&(t=new G_("onChange","change",null,t,r),n.push({event:t,listeners:e}))}var Hh=null,hd=null;function QL(n){vP(n,0)}function Gg(n){var e=Fl(n);if(NS(e))return n}function qL(n,e){if(n==="change")return e}var uP=!1;if($i){var E0;if($i){var A0="oninput"in document;if(!A0){var m1=document.createElement("div");m1.setAttribute("oninput","return;"),A0=typeof m1.oninput=="function"}E0=A0}else E0=!1;uP=E0&&(!document.documentMode||9<document.documentMode)}function g1(){Hh&&(Hh.detachEvent("onpropertychange",cP),hd=Hh=null)}function cP(n){if(n.propertyName==="value"&&Gg(hd)){var e=[];lP(e,hd,n,M_(n)),GS(QL,e)}}function WL(n,e,t){n==="focusin"?(g1(),Hh=e,hd=t,Hh.attachEvent("onpropertychange",cP)):n==="focusout"&&g1()}function JL(n){if(n==="selectionchange"||n==="keyup"||n==="keydown")return Gg(hd)}function YL(n,e){if(n==="click")return Gg(e)}function XL(n,e){if(n==="input"||n==="change")return Gg(e)}function ZL(n,e){return n===e&&(n!==0||1/n===1/e)||n!==n&&e!==e}var Nr=typeof Object.is=="function"?Object.is:ZL;function dd(n,e){if(Nr(n,e))return!0;if(typeof n!="object"||n===null||typeof e!="object"||e===null)return!1;var t=Object.keys(n),r=Object.keys(e);if(t.length!==r.length)return!1;for(r=0;r<t.length;r++){var i=t[r];if(!mw.call(e,i)||!Nr(n[i],e[i]))return!1}return!0}function y1(n){for(;n&&n.firstChild;)n=n.firstChild;return n}function w1(n,e){var t=y1(n);n=0;for(var r;t;){if(t.nodeType===3){if(r=n+t.textContent.length,n<=e&&r>=e)return{node:t,offset:e-n};n=r}e:{for(;t;){if(t.nextSibling){t=t.nextSibling;break e}t=t.parentNode}t=void 0}t=y1(t)}}function hP(n,e){return n&&e?n===e?!0:n&&n.nodeType===3?!1:e&&e.nodeType===3?hP(n,e.parentNode):"contains"in n?n.contains(e):n.compareDocumentPosition?!!(n.compareDocumentPosition(e)&16):!1:!1}function dP(){for(var n=window,e=Tm();e instanceof n.HTMLIFrameElement;){try{var t=typeof e.contentWindow.location.href=="string"}catch{t=!1}if(t)n=e.contentWindow;else break;e=Tm(n.document)}return e}function K_(n){var e=n&&n.nodeName&&n.nodeName.toLowerCase();return e&&(e==="input"&&(n.type==="text"||n.type==="search"||n.type==="tel"||n.type==="url"||n.type==="password")||e==="textarea"||n.contentEditable==="true")}function eV(n){var e=dP(),t=n.focusedElem,r=n.selectionRange;if(e!==t&&t&&t.ownerDocument&&hP(t.ownerDocument.documentElement,t)){if(r!==null&&K_(t)){if(e=r.start,n=r.end,n===void 0&&(n=e),"selectionStart"in t)t.selectionStart=e,t.selectionEnd=Math.min(n,t.value.length);else if(n=(e=t.ownerDocument||document)&&e.defaultView||window,n.getSelection){n=n.getSelection();var i=t.textContent.length,s=Math.min(r.start,i);r=r.end===void 0?s:Math.min(r.end,i),!n.extend&&s>r&&(i=r,r=s,s=i),i=w1(t,s);var o=w1(t,r);i&&o&&(n.rangeCount!==1||n.anchorNode!==i.node||n.anchorOffset!==i.offset||n.focusNode!==o.node||n.focusOffset!==o.offset)&&(e=e.createRange(),e.setStart(i.node,i.offset),n.removeAllRanges(),s>r?(n.addRange(e),n.extend(o.node,o.offset)):(e.setEnd(o.node,o.offset),n.addRange(e)))}}for(e=[],n=t;n=n.parentNode;)n.nodeType===1&&e.push({element:n,left:n.scrollLeft,top:n.scrollTop});for(typeof t.focus=="function"&&t.focus(),t=0;t<e.length;t++)n=e[t],n.element.scrollLeft=n.left,n.element.scrollTop=n.top}}var tV=$i&&"documentMode"in document&&11>=document.documentMode,Ml=null,Ow=null,$h=null,Lw=!1;function v1(n,e,t){var r=t.window===t?t.document:t.nodeType===9?t:t.ownerDocument;Lw||Ml==null||Ml!==Tm(r)||(r=Ml,"selectionStart"in r&&K_(r)?r={start:r.selectionStart,end:r.selectionEnd}:(r=(r.ownerDocument&&r.ownerDocument.defaultView||window).getSelection(),r={anchorNode:r.anchorNode,anchorOffset:r.anchorOffset,focusNode:r.focusNode,focusOffset:r.focusOffset}),$h&&dd($h,r)||($h=r,r=km(Ow,"onSelect"),0<r.length&&(e=new G_("onSelect","select",null,e,t),n.push({event:e,listeners:r}),e.target=Ml)))}function pp(n,e){var t={};return t[n.toLowerCase()]=e.toLowerCase(),t["Webkit"+n]="webkit"+e,t["Moz"+n]="moz"+e,t}var Bl={animationend:pp("Animation","AnimationEnd"),animationiteration:pp("Animation","AnimationIteration"),animationstart:pp("Animation","AnimationStart"),transitionend:pp("Transition","TransitionEnd")},I0={},fP={};$i&&(fP=document.createElement("div").style,"AnimationEvent"in window||(delete Bl.animationend.animation,delete Bl.animationiteration.animation,delete Bl.animationstart.animation),"TransitionEvent"in window||delete Bl.transitionend.transition);function Hg(n){if(I0[n])return I0[n];if(!Bl[n])return n;var e=Bl[n],t;for(t in e)if(e.hasOwnProperty(t)&&t in fP)return I0[n]=e[t];return n}var pP=Hg("animationend"),mP=Hg("animationiteration"),gP=Hg("animationstart"),yP=Hg("transitionend"),wP=new Map,_1="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function _o(n,e){wP.set(n,e),tl(e,[n])}for(var T0=0;T0<_1.length;T0++){var b0=_1[T0],nV=b0.toLowerCase(),rV=b0[0].toUpperCase()+b0.slice(1);_o(nV,"on"+rV)}_o(pP,"onAnimationEnd");_o(mP,"onAnimationIteration");_o(gP,"onAnimationStart");_o("dblclick","onDoubleClick");_o("focusin","onFocus");_o("focusout","onBlur");_o(yP,"onTransitionEnd");ic("onMouseEnter",["mouseout","mouseover"]);ic("onMouseLeave",["mouseout","mouseover"]);ic("onPointerEnter",["pointerout","pointerover"]);ic("onPointerLeave",["pointerout","pointerover"]);tl("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));tl("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));tl("onBeforeInput",["compositionend","keypress","textInput","paste"]);tl("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));tl("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));tl("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Sh="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),iV=new Set("cancel close invalid load scroll toggle".split(" ").concat(Sh));function E1(n,e,t){var r=n.type||"unknown-event";n.currentTarget=t,nL(r,e,void 0,n),n.currentTarget=null}function vP(n,e){e=(e&4)!==0;for(var t=0;t<n.length;t++){var r=n[t],i=r.event;r=r.listeners;e:{var s=void 0;if(e)for(var o=r.length-1;0<=o;o--){var a=r[o],l=a.instance,c=a.currentTarget;if(a=a.listener,l!==s&&i.isPropagationStopped())break e;E1(i,a,c),s=l}else for(o=0;o<r.length;o++){if(a=r[o],l=a.instance,c=a.currentTarget,a=a.listener,l!==s&&i.isPropagationStopped())break e;E1(i,a,c),s=l}}}if(xm)throw n=Cw,xm=!1,Cw=null,n}function Ge(n,e){var t=e[Uw];t===void 0&&(t=e[Uw]=new Set);var r=n+"__bubble";t.has(r)||(_P(e,n,2,!1),t.add(r))}function x0(n,e,t){var r=0;e&&(r|=4),_P(t,n,r,e)}var mp="_reactListening"+Math.random().toString(36).slice(2);function fd(n){if(!n[mp]){n[mp]=!0,SS.forEach(function(t){t!=="selectionchange"&&(iV.has(t)||x0(t,!1,n),x0(t,!0,n))});var e=n.nodeType===9?n:n.ownerDocument;e===null||e[mp]||(e[mp]=!0,x0("selectionchange",!1,e))}}function _P(n,e,t,r){switch(rP(e)){case 1:var i=wL;break;case 4:i=vL;break;default:i=j_}t=i.bind(null,e,t,n),i=void 0,!Rw||e!=="touchstart"&&e!=="touchmove"&&e!=="wheel"||(i=!0),r?i!==void 0?n.addEventListener(e,t,{capture:!0,passive:i}):n.addEventListener(e,t,!0):i!==void 0?n.addEventListener(e,t,{passive:i}):n.addEventListener(e,t,!1)}function S0(n,e,t,r,i){var s=r;if(!(e&1)&&!(e&2)&&r!==null)e:for(;;){if(r===null)return;var o=r.tag;if(o===3||o===4){var a=r.stateNode.containerInfo;if(a===i||a.nodeType===8&&a.parentNode===i)break;if(o===4)for(o=r.return;o!==null;){var l=o.tag;if((l===3||l===4)&&(l=o.stateNode.containerInfo,l===i||l.nodeType===8&&l.parentNode===i))return;o=o.return}for(;a!==null;){if(o=Zo(a),o===null)return;if(l=o.tag,l===5||l===6){r=s=o;continue e}a=a.parentNode}}r=r.return}GS(function(){var c=s,h=M_(t),d=[];e:{var p=wP.get(n);if(p!==void 0){var g=G_,A=n;switch(n){case"keypress":if($p(t)===0)break e;case"keydown":case"keyup":g=OL;break;case"focusin":A="focus",g=_0;break;case"focusout":A="blur",g=_0;break;case"beforeblur":case"afterblur":g=_0;break;case"click":if(t.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":g=u1;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":g=AL;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":g=ML;break;case pP:case mP:case gP:g=bL;break;case yP:g=FL;break;case"scroll":g=_L;break;case"wheel":g=jL;break;case"copy":case"cut":case"paste":g=SL;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":g=h1}var v=(e&4)!==0,x=!v&&n==="scroll",w=v?p!==null?p+"Capture":null:p;v=[];for(var E=c,T;E!==null;){T=E;var L=T.stateNode;if(T.tag===5&&L!==null&&(T=L,w!==null&&(L=ad(E,w),L!=null&&v.push(pd(E,L,T)))),x)break;E=E.return}0<v.length&&(p=new g(p,A,null,t,h),d.push({event:p,listeners:v}))}}if(!(e&7)){e:{if(p=n==="mouseover"||n==="pointerover",g=n==="mouseout"||n==="pointerout",p&&t!==Sw&&(A=t.relatedTarget||t.fromElement)&&(Zo(A)||A[Ki]))break e;if((g||p)&&(p=h.window===h?h:(p=h.ownerDocument)?p.defaultView||p.parentWindow:window,g?(A=t.relatedTarget||t.toElement,g=c,A=A?Zo(A):null,A!==null&&(x=nl(A),A!==x||A.tag!==5&&A.tag!==6)&&(A=null)):(g=null,A=c),g!==A)){if(v=u1,L="onMouseLeave",w="onMouseEnter",E="mouse",(n==="pointerout"||n==="pointerover")&&(v=h1,L="onPointerLeave",w="onPointerEnter",E="pointer"),x=g==null?p:Fl(g),T=A==null?p:Fl(A),p=new v(L,E+"leave",g,t,h),p.target=x,p.relatedTarget=T,L=null,Zo(h)===c&&(v=new v(w,E+"enter",A,t,h),v.target=T,v.relatedTarget=x,L=v),x=L,g&&A)t:{for(v=g,w=A,E=0,T=v;T;T=wl(T))E++;for(T=0,L=w;L;L=wl(L))T++;for(;0<E-T;)v=wl(v),E--;for(;0<T-E;)w=wl(w),T--;for(;E--;){if(v===w||w!==null&&v===w.alternate)break t;v=wl(v),w=wl(w)}v=null}else v=null;g!==null&&A1(d,p,g,v,!1),A!==null&&x!==null&&A1(d,x,A,v,!0)}}e:{if(p=c?Fl(c):window,g=p.nodeName&&p.nodeName.toLowerCase(),g==="select"||g==="input"&&p.type==="file")var F=qL;else if(p1(p))if(uP)F=XL;else{F=JL;var M=WL}else(g=p.nodeName)&&g.toLowerCase()==="input"&&(p.type==="checkbox"||p.type==="radio")&&(F=YL);if(F&&(F=F(n,c))){lP(d,F,t,h);break e}M&&M(n,p,c),n==="focusout"&&(M=p._wrapperState)&&M.controlled&&p.type==="number"&&Aw(p,"number",p.value)}switch(M=c?Fl(c):window,n){case"focusin":(p1(M)||M.contentEditable==="true")&&(Ml=M,Ow=c,$h=null);break;case"focusout":$h=Ow=Ml=null;break;case"mousedown":Lw=!0;break;case"contextmenu":case"mouseup":case"dragend":Lw=!1,v1(d,t,h);break;case"selectionchange":if(tV)break;case"keydown":case"keyup":v1(d,t,h)}var b;if($_)e:{switch(n){case"compositionstart":var _="onCompositionStart";break e;case"compositionend":_="onCompositionEnd";break e;case"compositionupdate":_="onCompositionUpdate";break e}_=void 0}else Vl?oP(n,t)&&(_="onCompositionEnd"):n==="keydown"&&t.keyCode===229&&(_="onCompositionStart");_&&(sP&&t.locale!=="ko"&&(Vl||_!=="onCompositionStart"?_==="onCompositionEnd"&&Vl&&(b=iP()):($s=h,z_="value"in $s?$s.value:$s.textContent,Vl=!0)),M=km(c,_),0<M.length&&(_=new c1(_,n,null,t,h),d.push({event:_,listeners:M}),b?_.data=b:(b=aP(t),b!==null&&(_.data=b)))),(b=GL?HL(n,t):$L(n,t))&&(c=km(c,"onBeforeInput"),0<c.length&&(h=new c1("onBeforeInput","beforeinput",null,t,h),d.push({event:h,listeners:c}),h.data=b))}vP(d,e)})}function pd(n,e,t){return{instance:n,listener:e,currentTarget:t}}function km(n,e){for(var t=e+"Capture",r=[];n!==null;){var i=n,s=i.stateNode;i.tag===5&&s!==null&&(i=s,s=ad(n,t),s!=null&&r.unshift(pd(n,s,i)),s=ad(n,e),s!=null&&r.push(pd(n,s,i))),n=n.return}return r}function wl(n){if(n===null)return null;do n=n.return;while(n&&n.tag!==5);return n||null}function A1(n,e,t,r,i){for(var s=e._reactName,o=[];t!==null&&t!==r;){var a=t,l=a.alternate,c=a.stateNode;if(l!==null&&l===r)break;a.tag===5&&c!==null&&(a=c,i?(l=ad(t,s),l!=null&&o.unshift(pd(t,l,a))):i||(l=ad(t,s),l!=null&&o.push(pd(t,l,a)))),t=t.return}o.length!==0&&n.push({event:e,listeners:o})}var sV=/\r\n?/g,oV=/\u0000|\uFFFD/g;function I1(n){return(typeof n=="string"?n:""+n).replace(sV,`
`).replace(oV,"")}function gp(n,e,t){if(e=I1(e),I1(n)!==e&&t)throw Error(J(425))}function Nm(){}var Vw=null,Mw=null;function Bw(n,e){return n==="textarea"||n==="noscript"||typeof e.children=="string"||typeof e.children=="number"||typeof e.dangerouslySetInnerHTML=="object"&&e.dangerouslySetInnerHTML!==null&&e.dangerouslySetInnerHTML.__html!=null}var Fw=typeof setTimeout=="function"?setTimeout:void 0,aV=typeof clearTimeout=="function"?clearTimeout:void 0,T1=typeof Promise=="function"?Promise:void 0,lV=typeof queueMicrotask=="function"?queueMicrotask:typeof T1<"u"?function(n){return T1.resolve(null).then(n).catch(uV)}:Fw;function uV(n){setTimeout(function(){throw n})}function P0(n,e){var t=e,r=0;do{var i=t.nextSibling;if(n.removeChild(t),i&&i.nodeType===8)if(t=i.data,t==="/$"){if(r===0){n.removeChild(i),cd(e);return}r--}else t!=="$"&&t!=="$?"&&t!=="$!"||r++;t=i}while(t);cd(e)}function Xs(n){for(;n!=null;n=n.nextSibling){var e=n.nodeType;if(e===1||e===3)break;if(e===8){if(e=n.data,e==="$"||e==="$!"||e==="$?")break;if(e==="/$")return null}}return n}function b1(n){n=n.previousSibling;for(var e=0;n;){if(n.nodeType===8){var t=n.data;if(t==="$"||t==="$!"||t==="$?"){if(e===0)return n;e--}else t==="/$"&&e++}n=n.previousSibling}return null}var Nc=Math.random().toString(36).slice(2),Jr="__reactFiber$"+Nc,md="__reactProps$"+Nc,Ki="__reactContainer$"+Nc,Uw="__reactEvents$"+Nc,cV="__reactListeners$"+Nc,hV="__reactHandles$"+Nc;function Zo(n){var e=n[Jr];if(e)return e;for(var t=n.parentNode;t;){if(e=t[Ki]||t[Jr]){if(t=e.alternate,e.child!==null||t!==null&&t.child!==null)for(n=b1(n);n!==null;){if(t=n[Jr])return t;n=b1(n)}return e}n=t,t=n.parentNode}return null}function Ef(n){return n=n[Jr]||n[Ki],!n||n.tag!==5&&n.tag!==6&&n.tag!==13&&n.tag!==3?null:n}function Fl(n){if(n.tag===5||n.tag===6)return n.stateNode;throw Error(J(33))}function $g(n){return n[md]||null}var jw=[],Ul=-1;function Eo(n){return{current:n}}function He(n){0>Ul||(n.current=jw[Ul],jw[Ul]=null,Ul--)}function Ue(n,e){Ul++,jw[Ul]=n.current,n.current=e}var fo={},Xt=Eo(fo),Cn=Eo(!1),La=fo;function sc(n,e){var t=n.type.contextTypes;if(!t)return fo;var r=n.stateNode;if(r&&r.__reactInternalMemoizedUnmaskedChildContext===e)return r.__reactInternalMemoizedMaskedChildContext;var i={},s;for(s in t)i[s]=e[s];return r&&(n=n.stateNode,n.__reactInternalMemoizedUnmaskedChildContext=e,n.__reactInternalMemoizedMaskedChildContext=i),i}function kn(n){return n=n.childContextTypes,n!=null}function Dm(){He(Cn),He(Xt)}function x1(n,e,t){if(Xt.current!==fo)throw Error(J(168));Ue(Xt,e),Ue(Cn,t)}function EP(n,e,t){var r=n.stateNode;if(e=e.childContextTypes,typeof r.getChildContext!="function")return t;r=r.getChildContext();for(var i in r)if(!(i in e))throw Error(J(108,WO(n)||"Unknown",i));return tt({},t,r)}function Om(n){return n=(n=n.stateNode)&&n.__reactInternalMemoizedMergedChildContext||fo,La=Xt.current,Ue(Xt,n),Ue(Cn,Cn.current),!0}function S1(n,e,t){var r=n.stateNode;if(!r)throw Error(J(169));t?(n=EP(n,e,La),r.__reactInternalMemoizedMergedChildContext=n,He(Cn),He(Xt),Ue(Xt,n)):He(Cn),Ue(Cn,t)}var yi=null,Kg=!1,R0=!1;function AP(n){yi===null?yi=[n]:yi.push(n)}function dV(n){Kg=!0,AP(n)}function Ao(){if(!R0&&yi!==null){R0=!0;var n=0,e=Le;try{var t=yi;for(Le=1;n<t.length;n++){var r=t[n];do r=r(!0);while(r!==null)}yi=null,Kg=!1}catch(i){throw yi!==null&&(yi=yi.slice(n+1)),QS(B_,Ao),i}finally{Le=e,R0=!1}}return null}var jl=[],zl=0,Lm=null,Vm=0,ir=[],sr=0,Va=null,Ni=1,Di="";function Bo(n,e){jl[zl++]=Vm,jl[zl++]=Lm,Lm=n,Vm=e}function IP(n,e,t){ir[sr++]=Ni,ir[sr++]=Di,ir[sr++]=Va,Va=n;var r=Ni;n=Di;var i=32-Cr(r)-1;r&=~(1<<i),t+=1;var s=32-Cr(e)+i;if(30<s){var o=i-i%5;s=(r&(1<<o)-1).toString(32),r>>=o,i-=o,Ni=1<<32-Cr(e)+i|t<<i|r,Di=s+n}else Ni=1<<s|t<<i|r,Di=n}function Q_(n){n.return!==null&&(Bo(n,1),IP(n,1,0))}function q_(n){for(;n===Lm;)Lm=jl[--zl],jl[zl]=null,Vm=jl[--zl],jl[zl]=null;for(;n===Va;)Va=ir[--sr],ir[sr]=null,Di=ir[--sr],ir[sr]=null,Ni=ir[--sr],ir[sr]=null}var $n=null,Gn=null,Qe=!1,Pr=null;function TP(n,e){var t=or(5,null,null,0);t.elementType="DELETED",t.stateNode=e,t.return=n,e=n.deletions,e===null?(n.deletions=[t],n.flags|=16):e.push(t)}function P1(n,e){switch(n.tag){case 5:var t=n.type;return e=e.nodeType!==1||t.toLowerCase()!==e.nodeName.toLowerCase()?null:e,e!==null?(n.stateNode=e,$n=n,Gn=Xs(e.firstChild),!0):!1;case 6:return e=n.pendingProps===""||e.nodeType!==3?null:e,e!==null?(n.stateNode=e,$n=n,Gn=null,!0):!1;case 13:return e=e.nodeType!==8?null:e,e!==null?(t=Va!==null?{id:Ni,overflow:Di}:null,n.memoizedState={dehydrated:e,treeContext:t,retryLane:1073741824},t=or(18,null,null,0),t.stateNode=e,t.return=n,n.child=t,$n=n,Gn=null,!0):!1;default:return!1}}function zw(n){return(n.mode&1)!==0&&(n.flags&128)===0}function Gw(n){if(Qe){var e=Gn;if(e){var t=e;if(!P1(n,e)){if(zw(n))throw Error(J(418));e=Xs(t.nextSibling);var r=$n;e&&P1(n,e)?TP(r,t):(n.flags=n.flags&-4097|2,Qe=!1,$n=n)}}else{if(zw(n))throw Error(J(418));n.flags=n.flags&-4097|2,Qe=!1,$n=n}}}function R1(n){for(n=n.return;n!==null&&n.tag!==5&&n.tag!==3&&n.tag!==13;)n=n.return;$n=n}function yp(n){if(n!==$n)return!1;if(!Qe)return R1(n),Qe=!0,!1;var e;if((e=n.tag!==3)&&!(e=n.tag!==5)&&(e=n.type,e=e!=="head"&&e!=="body"&&!Bw(n.type,n.memoizedProps)),e&&(e=Gn)){if(zw(n))throw bP(),Error(J(418));for(;e;)TP(n,e),e=Xs(e.nextSibling)}if(R1(n),n.tag===13){if(n=n.memoizedState,n=n!==null?n.dehydrated:null,!n)throw Error(J(317));e:{for(n=n.nextSibling,e=0;n;){if(n.nodeType===8){var t=n.data;if(t==="/$"){if(e===0){Gn=Xs(n.nextSibling);break e}e--}else t!=="$"&&t!=="$!"&&t!=="$?"||e++}n=n.nextSibling}Gn=null}}else Gn=$n?Xs(n.stateNode.nextSibling):null;return!0}function bP(){for(var n=Gn;n;)n=Xs(n.nextSibling)}function oc(){Gn=$n=null,Qe=!1}function W_(n){Pr===null?Pr=[n]:Pr.push(n)}var fV=ts.ReactCurrentBatchConfig;function dh(n,e,t){if(n=t.ref,n!==null&&typeof n!="function"&&typeof n!="object"){if(t._owner){if(t=t._owner,t){if(t.tag!==1)throw Error(J(309));var r=t.stateNode}if(!r)throw Error(J(147,n));var i=r,s=""+n;return e!==null&&e.ref!==null&&typeof e.ref=="function"&&e.ref._stringRef===s?e.ref:(e=function(o){var a=i.refs;o===null?delete a[s]:a[s]=o},e._stringRef=s,e)}if(typeof n!="string")throw Error(J(284));if(!t._owner)throw Error(J(290,n))}return n}function wp(n,e){throw n=Object.prototype.toString.call(e),Error(J(31,n==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":n))}function C1(n){var e=n._init;return e(n._payload)}function xP(n){function e(w,E){if(n){var T=w.deletions;T===null?(w.deletions=[E],w.flags|=16):T.push(E)}}function t(w,E){if(!n)return null;for(;E!==null;)e(w,E),E=E.sibling;return null}function r(w,E){for(w=new Map;E!==null;)E.key!==null?w.set(E.key,E):w.set(E.index,E),E=E.sibling;return w}function i(w,E){return w=no(w,E),w.index=0,w.sibling=null,w}function s(w,E,T){return w.index=T,n?(T=w.alternate,T!==null?(T=T.index,T<E?(w.flags|=2,E):T):(w.flags|=2,E)):(w.flags|=1048576,E)}function o(w){return n&&w.alternate===null&&(w.flags|=2),w}function a(w,E,T,L){return E===null||E.tag!==6?(E=V0(T,w.mode,L),E.return=w,E):(E=i(E,T),E.return=w,E)}function l(w,E,T,L){var F=T.type;return F===Ll?h(w,E,T.props.children,L,T.key):E!==null&&(E.elementType===F||typeof F=="object"&&F!==null&&F.$$typeof===ys&&C1(F)===E.type)?(L=i(E,T.props),L.ref=dh(w,E,T),L.return=w,L):(L=Xp(T.type,T.key,T.props,null,w.mode,L),L.ref=dh(w,E,T),L.return=w,L)}function c(w,E,T,L){return E===null||E.tag!==4||E.stateNode.containerInfo!==T.containerInfo||E.stateNode.implementation!==T.implementation?(E=M0(T,w.mode,L),E.return=w,E):(E=i(E,T.children||[]),E.return=w,E)}function h(w,E,T,L,F){return E===null||E.tag!==7?(E=Ca(T,w.mode,L,F),E.return=w,E):(E=i(E,T),E.return=w,E)}function d(w,E,T){if(typeof E=="string"&&E!==""||typeof E=="number")return E=V0(""+E,w.mode,T),E.return=w,E;if(typeof E=="object"&&E!==null){switch(E.$$typeof){case ap:return T=Xp(E.type,E.key,E.props,null,w.mode,T),T.ref=dh(w,null,E),T.return=w,T;case Ol:return E=M0(E,w.mode,T),E.return=w,E;case ys:var L=E._init;return d(w,L(E._payload),T)}if(bh(E)||ah(E))return E=Ca(E,w.mode,T,null),E.return=w,E;wp(w,E)}return null}function p(w,E,T,L){var F=E!==null?E.key:null;if(typeof T=="string"&&T!==""||typeof T=="number")return F!==null?null:a(w,E,""+T,L);if(typeof T=="object"&&T!==null){switch(T.$$typeof){case ap:return T.key===F?l(w,E,T,L):null;case Ol:return T.key===F?c(w,E,T,L):null;case ys:return F=T._init,p(w,E,F(T._payload),L)}if(bh(T)||ah(T))return F!==null?null:h(w,E,T,L,null);wp(w,T)}return null}function g(w,E,T,L,F){if(typeof L=="string"&&L!==""||typeof L=="number")return w=w.get(T)||null,a(E,w,""+L,F);if(typeof L=="object"&&L!==null){switch(L.$$typeof){case ap:return w=w.get(L.key===null?T:L.key)||null,l(E,w,L,F);case Ol:return w=w.get(L.key===null?T:L.key)||null,c(E,w,L,F);case ys:var M=L._init;return g(w,E,T,M(L._payload),F)}if(bh(L)||ah(L))return w=w.get(T)||null,h(E,w,L,F,null);wp(E,L)}return null}function A(w,E,T,L){for(var F=null,M=null,b=E,_=E=0,S=null;b!==null&&_<T.length;_++){b.index>_?(S=b,b=null):S=b.sibling;var P=p(w,b,T[_],L);if(P===null){b===null&&(b=S);break}n&&b&&P.alternate===null&&e(w,b),E=s(P,E,_),M===null?F=P:M.sibling=P,M=P,b=S}if(_===T.length)return t(w,b),Qe&&Bo(w,_),F;if(b===null){for(;_<T.length;_++)b=d(w,T[_],L),b!==null&&(E=s(b,E,_),M===null?F=b:M.sibling=b,M=b);return Qe&&Bo(w,_),F}for(b=r(w,b);_<T.length;_++)S=g(b,w,_,T[_],L),S!==null&&(n&&S.alternate!==null&&b.delete(S.key===null?_:S.key),E=s(S,E,_),M===null?F=S:M.sibling=S,M=S);return n&&b.forEach(function(D){return e(w,D)}),Qe&&Bo(w,_),F}function v(w,E,T,L){var F=ah(T);if(typeof F!="function")throw Error(J(150));if(T=F.call(T),T==null)throw Error(J(151));for(var M=F=null,b=E,_=E=0,S=null,P=T.next();b!==null&&!P.done;_++,P=T.next()){b.index>_?(S=b,b=null):S=b.sibling;var D=p(w,b,P.value,L);if(D===null){b===null&&(b=S);break}n&&b&&D.alternate===null&&e(w,b),E=s(D,E,_),M===null?F=D:M.sibling=D,M=D,b=S}if(P.done)return t(w,b),Qe&&Bo(w,_),F;if(b===null){for(;!P.done;_++,P=T.next())P=d(w,P.value,L),P!==null&&(E=s(P,E,_),M===null?F=P:M.sibling=P,M=P);return Qe&&Bo(w,_),F}for(b=r(w,b);!P.done;_++,P=T.next())P=g(b,w,_,P.value,L),P!==null&&(n&&P.alternate!==null&&b.delete(P.key===null?_:P.key),E=s(P,E,_),M===null?F=P:M.sibling=P,M=P);return n&&b.forEach(function(N){return e(w,N)}),Qe&&Bo(w,_),F}function x(w,E,T,L){if(typeof T=="object"&&T!==null&&T.type===Ll&&T.key===null&&(T=T.props.children),typeof T=="object"&&T!==null){switch(T.$$typeof){case ap:e:{for(var F=T.key,M=E;M!==null;){if(M.key===F){if(F=T.type,F===Ll){if(M.tag===7){t(w,M.sibling),E=i(M,T.props.children),E.return=w,w=E;break e}}else if(M.elementType===F||typeof F=="object"&&F!==null&&F.$$typeof===ys&&C1(F)===M.type){t(w,M.sibling),E=i(M,T.props),E.ref=dh(w,M,T),E.return=w,w=E;break e}t(w,M);break}else e(w,M);M=M.sibling}T.type===Ll?(E=Ca(T.props.children,w.mode,L,T.key),E.return=w,w=E):(L=Xp(T.type,T.key,T.props,null,w.mode,L),L.ref=dh(w,E,T),L.return=w,w=L)}return o(w);case Ol:e:{for(M=T.key;E!==null;){if(E.key===M)if(E.tag===4&&E.stateNode.containerInfo===T.containerInfo&&E.stateNode.implementation===T.implementation){t(w,E.sibling),E=i(E,T.children||[]),E.return=w,w=E;break e}else{t(w,E);break}else e(w,E);E=E.sibling}E=M0(T,w.mode,L),E.return=w,w=E}return o(w);case ys:return M=T._init,x(w,E,M(T._payload),L)}if(bh(T))return A(w,E,T,L);if(ah(T))return v(w,E,T,L);wp(w,T)}return typeof T=="string"&&T!==""||typeof T=="number"?(T=""+T,E!==null&&E.tag===6?(t(w,E.sibling),E=i(E,T),E.return=w,w=E):(t(w,E),E=V0(T,w.mode,L),E.return=w,w=E),o(w)):t(w,E)}return x}var ac=xP(!0),SP=xP(!1),Mm=Eo(null),Bm=null,Gl=null,J_=null;function Y_(){J_=Gl=Bm=null}function X_(n){var e=Mm.current;He(Mm),n._currentValue=e}function Hw(n,e,t){for(;n!==null;){var r=n.alternate;if((n.childLanes&e)!==e?(n.childLanes|=e,r!==null&&(r.childLanes|=e)):r!==null&&(r.childLanes&e)!==e&&(r.childLanes|=e),n===t)break;n=n.return}}function ru(n,e){Bm=n,J_=Gl=null,n=n.dependencies,n!==null&&n.firstContext!==null&&(n.lanes&e&&(Sn=!0),n.firstContext=null)}function cr(n){var e=n._currentValue;if(J_!==n)if(n={context:n,memoizedValue:e,next:null},Gl===null){if(Bm===null)throw Error(J(308));Gl=n,Bm.dependencies={lanes:0,firstContext:n}}else Gl=Gl.next=n;return e}var ea=null;function Z_(n){ea===null?ea=[n]:ea.push(n)}function PP(n,e,t,r){var i=e.interleaved;return i===null?(t.next=t,Z_(e)):(t.next=i.next,i.next=t),e.interleaved=t,Qi(n,r)}function Qi(n,e){n.lanes|=e;var t=n.alternate;for(t!==null&&(t.lanes|=e),t=n,n=n.return;n!==null;)n.childLanes|=e,t=n.alternate,t!==null&&(t.childLanes|=e),t=n,n=n.return;return t.tag===3?t.stateNode:null}var ws=!1;function eE(n){n.updateQueue={baseState:n.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function RP(n,e){n=n.updateQueue,e.updateQueue===n&&(e.updateQueue={baseState:n.baseState,firstBaseUpdate:n.firstBaseUpdate,lastBaseUpdate:n.lastBaseUpdate,shared:n.shared,effects:n.effects})}function ji(n,e){return{eventTime:n,lane:e,tag:0,payload:null,callback:null,next:null}}function Zs(n,e,t){var r=n.updateQueue;if(r===null)return null;if(r=r.shared,Pe&2){var i=r.pending;return i===null?e.next=e:(e.next=i.next,i.next=e),r.pending=e,Qi(n,t)}return i=r.interleaved,i===null?(e.next=e,Z_(r)):(e.next=i.next,i.next=e),r.interleaved=e,Qi(n,t)}function Kp(n,e,t){if(e=e.updateQueue,e!==null&&(e=e.shared,(t&4194240)!==0)){var r=e.lanes;r&=n.pendingLanes,t|=r,e.lanes=t,F_(n,t)}}function k1(n,e){var t=n.updateQueue,r=n.alternate;if(r!==null&&(r=r.updateQueue,t===r)){var i=null,s=null;if(t=t.firstBaseUpdate,t!==null){do{var o={eventTime:t.eventTime,lane:t.lane,tag:t.tag,payload:t.payload,callback:t.callback,next:null};s===null?i=s=o:s=s.next=o,t=t.next}while(t!==null);s===null?i=s=e:s=s.next=e}else i=s=e;t={baseState:r.baseState,firstBaseUpdate:i,lastBaseUpdate:s,shared:r.shared,effects:r.effects},n.updateQueue=t;return}n=t.lastBaseUpdate,n===null?t.firstBaseUpdate=e:n.next=e,t.lastBaseUpdate=e}function Fm(n,e,t,r){var i=n.updateQueue;ws=!1;var s=i.firstBaseUpdate,o=i.lastBaseUpdate,a=i.shared.pending;if(a!==null){i.shared.pending=null;var l=a,c=l.next;l.next=null,o===null?s=c:o.next=c,o=l;var h=n.alternate;h!==null&&(h=h.updateQueue,a=h.lastBaseUpdate,a!==o&&(a===null?h.firstBaseUpdate=c:a.next=c,h.lastBaseUpdate=l))}if(s!==null){var d=i.baseState;o=0,h=c=l=null,a=s;do{var p=a.lane,g=a.eventTime;if((r&p)===p){h!==null&&(h=h.next={eventTime:g,lane:0,tag:a.tag,payload:a.payload,callback:a.callback,next:null});e:{var A=n,v=a;switch(p=e,g=t,v.tag){case 1:if(A=v.payload,typeof A=="function"){d=A.call(g,d,p);break e}d=A;break e;case 3:A.flags=A.flags&-65537|128;case 0:if(A=v.payload,p=typeof A=="function"?A.call(g,d,p):A,p==null)break e;d=tt({},d,p);break e;case 2:ws=!0}}a.callback!==null&&a.lane!==0&&(n.flags|=64,p=i.effects,p===null?i.effects=[a]:p.push(a))}else g={eventTime:g,lane:p,tag:a.tag,payload:a.payload,callback:a.callback,next:null},h===null?(c=h=g,l=d):h=h.next=g,o|=p;if(a=a.next,a===null){if(a=i.shared.pending,a===null)break;p=a,a=p.next,p.next=null,i.lastBaseUpdate=p,i.shared.pending=null}}while(1);if(h===null&&(l=d),i.baseState=l,i.firstBaseUpdate=c,i.lastBaseUpdate=h,e=i.shared.interleaved,e!==null){i=e;do o|=i.lane,i=i.next;while(i!==e)}else s===null&&(i.shared.lanes=0);Ba|=o,n.lanes=o,n.memoizedState=d}}function N1(n,e,t){if(n=e.effects,e.effects=null,n!==null)for(e=0;e<n.length;e++){var r=n[e],i=r.callback;if(i!==null){if(r.callback=null,r=t,typeof i!="function")throw Error(J(191,i));i.call(r)}}}var Af={},ri=Eo(Af),gd=Eo(Af),yd=Eo(Af);function ta(n){if(n===Af)throw Error(J(174));return n}function tE(n,e){switch(Ue(yd,e),Ue(gd,n),Ue(ri,Af),n=e.nodeType,n){case 9:case 11:e=(e=e.documentElement)?e.namespaceURI:Tw(null,"");break;default:n=n===8?e.parentNode:e,e=n.namespaceURI||null,n=n.tagName,e=Tw(e,n)}He(ri),Ue(ri,e)}function lc(){He(ri),He(gd),He(yd)}function CP(n){ta(yd.current);var e=ta(ri.current),t=Tw(e,n.type);e!==t&&(Ue(gd,n),Ue(ri,t))}function nE(n){gd.current===n&&(He(ri),He(gd))}var We=Eo(0);function Um(n){for(var e=n;e!==null;){if(e.tag===13){var t=e.memoizedState;if(t!==null&&(t=t.dehydrated,t===null||t.data==="$?"||t.data==="$!"))return e}else if(e.tag===19&&e.memoizedProps.revealOrder!==void 0){if(e.flags&128)return e}else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===n)break;for(;e.sibling===null;){if(e.return===null||e.return===n)return null;e=e.return}e.sibling.return=e.return,e=e.sibling}return null}var C0=[];function rE(){for(var n=0;n<C0.length;n++)C0[n]._workInProgressVersionPrimary=null;C0.length=0}var Qp=ts.ReactCurrentDispatcher,k0=ts.ReactCurrentBatchConfig,Ma=0,Ze=null,gt=null,It=null,jm=!1,Kh=!1,wd=0,pV=0;function Gt(){throw Error(J(321))}function iE(n,e){if(e===null)return!1;for(var t=0;t<e.length&&t<n.length;t++)if(!Nr(n[t],e[t]))return!1;return!0}function sE(n,e,t,r,i,s){if(Ma=s,Ze=e,e.memoizedState=null,e.updateQueue=null,e.lanes=0,Qp.current=n===null||n.memoizedState===null?wV:vV,n=t(r,i),Kh){s=0;do{if(Kh=!1,wd=0,25<=s)throw Error(J(301));s+=1,It=gt=null,e.updateQueue=null,Qp.current=_V,n=t(r,i)}while(Kh)}if(Qp.current=zm,e=gt!==null&&gt.next!==null,Ma=0,It=gt=Ze=null,jm=!1,e)throw Error(J(300));return n}function oE(){var n=wd!==0;return wd=0,n}function Ur(){var n={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return It===null?Ze.memoizedState=It=n:It=It.next=n,It}function hr(){if(gt===null){var n=Ze.alternate;n=n!==null?n.memoizedState:null}else n=gt.next;var e=It===null?Ze.memoizedState:It.next;if(e!==null)It=e,gt=n;else{if(n===null)throw Error(J(310));gt=n,n={memoizedState:gt.memoizedState,baseState:gt.baseState,baseQueue:gt.baseQueue,queue:gt.queue,next:null},It===null?Ze.memoizedState=It=n:It=It.next=n}return It}function vd(n,e){return typeof e=="function"?e(n):e}function N0(n){var e=hr(),t=e.queue;if(t===null)throw Error(J(311));t.lastRenderedReducer=n;var r=gt,i=r.baseQueue,s=t.pending;if(s!==null){if(i!==null){var o=i.next;i.next=s.next,s.next=o}r.baseQueue=i=s,t.pending=null}if(i!==null){s=i.next,r=r.baseState;var a=o=null,l=null,c=s;do{var h=c.lane;if((Ma&h)===h)l!==null&&(l=l.next={lane:0,action:c.action,hasEagerState:c.hasEagerState,eagerState:c.eagerState,next:null}),r=c.hasEagerState?c.eagerState:n(r,c.action);else{var d={lane:h,action:c.action,hasEagerState:c.hasEagerState,eagerState:c.eagerState,next:null};l===null?(a=l=d,o=r):l=l.next=d,Ze.lanes|=h,Ba|=h}c=c.next}while(c!==null&&c!==s);l===null?o=r:l.next=a,Nr(r,e.memoizedState)||(Sn=!0),e.memoizedState=r,e.baseState=o,e.baseQueue=l,t.lastRenderedState=r}if(n=t.interleaved,n!==null){i=n;do s=i.lane,Ze.lanes|=s,Ba|=s,i=i.next;while(i!==n)}else i===null&&(t.lanes=0);return[e.memoizedState,t.dispatch]}function D0(n){var e=hr(),t=e.queue;if(t===null)throw Error(J(311));t.lastRenderedReducer=n;var r=t.dispatch,i=t.pending,s=e.memoizedState;if(i!==null){t.pending=null;var o=i=i.next;do s=n(s,o.action),o=o.next;while(o!==i);Nr(s,e.memoizedState)||(Sn=!0),e.memoizedState=s,e.baseQueue===null&&(e.baseState=s),t.lastRenderedState=s}return[s,r]}function kP(){}function NP(n,e){var t=Ze,r=hr(),i=e(),s=!Nr(r.memoizedState,i);if(s&&(r.memoizedState=i,Sn=!0),r=r.queue,aE(LP.bind(null,t,r,n),[n]),r.getSnapshot!==e||s||It!==null&&It.memoizedState.tag&1){if(t.flags|=2048,_d(9,OP.bind(null,t,r,i,e),void 0,null),xt===null)throw Error(J(349));Ma&30||DP(t,e,i)}return i}function DP(n,e,t){n.flags|=16384,n={getSnapshot:e,value:t},e=Ze.updateQueue,e===null?(e={lastEffect:null,stores:null},Ze.updateQueue=e,e.stores=[n]):(t=e.stores,t===null?e.stores=[n]:t.push(n))}function OP(n,e,t,r){e.value=t,e.getSnapshot=r,VP(e)&&MP(n)}function LP(n,e,t){return t(function(){VP(e)&&MP(n)})}function VP(n){var e=n.getSnapshot;n=n.value;try{var t=e();return!Nr(n,t)}catch{return!0}}function MP(n){var e=Qi(n,1);e!==null&&kr(e,n,1,-1)}function D1(n){var e=Ur();return typeof n=="function"&&(n=n()),e.memoizedState=e.baseState=n,n={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:vd,lastRenderedState:n},e.queue=n,n=n.dispatch=yV.bind(null,Ze,n),[e.memoizedState,n]}function _d(n,e,t,r){return n={tag:n,create:e,destroy:t,deps:r,next:null},e=Ze.updateQueue,e===null?(e={lastEffect:null,stores:null},Ze.updateQueue=e,e.lastEffect=n.next=n):(t=e.lastEffect,t===null?e.lastEffect=n.next=n:(r=t.next,t.next=n,n.next=r,e.lastEffect=n)),n}function BP(){return hr().memoizedState}function qp(n,e,t,r){var i=Ur();Ze.flags|=n,i.memoizedState=_d(1|e,t,void 0,r===void 0?null:r)}function Qg(n,e,t,r){var i=hr();r=r===void 0?null:r;var s=void 0;if(gt!==null){var o=gt.memoizedState;if(s=o.destroy,r!==null&&iE(r,o.deps)){i.memoizedState=_d(e,t,s,r);return}}Ze.flags|=n,i.memoizedState=_d(1|e,t,s,r)}function O1(n,e){return qp(8390656,8,n,e)}function aE(n,e){return Qg(2048,8,n,e)}function FP(n,e){return Qg(4,2,n,e)}function UP(n,e){return Qg(4,4,n,e)}function jP(n,e){if(typeof e=="function")return n=n(),e(n),function(){e(null)};if(e!=null)return n=n(),e.current=n,function(){e.current=null}}function zP(n,e,t){return t=t!=null?t.concat([n]):null,Qg(4,4,jP.bind(null,e,n),t)}function lE(){}function GP(n,e){var t=hr();e=e===void 0?null:e;var r=t.memoizedState;return r!==null&&e!==null&&iE(e,r[1])?r[0]:(t.memoizedState=[n,e],n)}function HP(n,e){var t=hr();e=e===void 0?null:e;var r=t.memoizedState;return r!==null&&e!==null&&iE(e,r[1])?r[0]:(n=n(),t.memoizedState=[n,e],n)}function $P(n,e,t){return Ma&21?(Nr(t,e)||(t=JS(),Ze.lanes|=t,Ba|=t,n.baseState=!0),e):(n.baseState&&(n.baseState=!1,Sn=!0),n.memoizedState=t)}function mV(n,e){var t=Le;Le=t!==0&&4>t?t:4,n(!0);var r=k0.transition;k0.transition={};try{n(!1),e()}finally{Le=t,k0.transition=r}}function KP(){return hr().memoizedState}function gV(n,e,t){var r=to(n);if(t={lane:r,action:t,hasEagerState:!1,eagerState:null,next:null},QP(n))qP(e,t);else if(t=PP(n,e,t,r),t!==null){var i=mn();kr(t,n,r,i),WP(t,e,r)}}function yV(n,e,t){var r=to(n),i={lane:r,action:t,hasEagerState:!1,eagerState:null,next:null};if(QP(n))qP(e,i);else{var s=n.alternate;if(n.lanes===0&&(s===null||s.lanes===0)&&(s=e.lastRenderedReducer,s!==null))try{var o=e.lastRenderedState,a=s(o,t);if(i.hasEagerState=!0,i.eagerState=a,Nr(a,o)){var l=e.interleaved;l===null?(i.next=i,Z_(e)):(i.next=l.next,l.next=i),e.interleaved=i;return}}catch{}finally{}t=PP(n,e,i,r),t!==null&&(i=mn(),kr(t,n,r,i),WP(t,e,r))}}function QP(n){var e=n.alternate;return n===Ze||e!==null&&e===Ze}function qP(n,e){Kh=jm=!0;var t=n.pending;t===null?e.next=e:(e.next=t.next,t.next=e),n.pending=e}function WP(n,e,t){if(t&4194240){var r=e.lanes;r&=n.pendingLanes,t|=r,e.lanes=t,F_(n,t)}}var zm={readContext:cr,useCallback:Gt,useContext:Gt,useEffect:Gt,useImperativeHandle:Gt,useInsertionEffect:Gt,useLayoutEffect:Gt,useMemo:Gt,useReducer:Gt,useRef:Gt,useState:Gt,useDebugValue:Gt,useDeferredValue:Gt,useTransition:Gt,useMutableSource:Gt,useSyncExternalStore:Gt,useId:Gt,unstable_isNewReconciler:!1},wV={readContext:cr,useCallback:function(n,e){return Ur().memoizedState=[n,e===void 0?null:e],n},useContext:cr,useEffect:O1,useImperativeHandle:function(n,e,t){return t=t!=null?t.concat([n]):null,qp(4194308,4,jP.bind(null,e,n),t)},useLayoutEffect:function(n,e){return qp(4194308,4,n,e)},useInsertionEffect:function(n,e){return qp(4,2,n,e)},useMemo:function(n,e){var t=Ur();return e=e===void 0?null:e,n=n(),t.memoizedState=[n,e],n},useReducer:function(n,e,t){var r=Ur();return e=t!==void 0?t(e):e,r.memoizedState=r.baseState=e,n={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:n,lastRenderedState:e},r.queue=n,n=n.dispatch=gV.bind(null,Ze,n),[r.memoizedState,n]},useRef:function(n){var e=Ur();return n={current:n},e.memoizedState=n},useState:D1,useDebugValue:lE,useDeferredValue:function(n){return Ur().memoizedState=n},useTransition:function(){var n=D1(!1),e=n[0];return n=mV.bind(null,n[1]),Ur().memoizedState=n,[e,n]},useMutableSource:function(){},useSyncExternalStore:function(n,e,t){var r=Ze,i=Ur();if(Qe){if(t===void 0)throw Error(J(407));t=t()}else{if(t=e(),xt===null)throw Error(J(349));Ma&30||DP(r,e,t)}i.memoizedState=t;var s={value:t,getSnapshot:e};return i.queue=s,O1(LP.bind(null,r,s,n),[n]),r.flags|=2048,_d(9,OP.bind(null,r,s,t,e),void 0,null),t},useId:function(){var n=Ur(),e=xt.identifierPrefix;if(Qe){var t=Di,r=Ni;t=(r&~(1<<32-Cr(r)-1)).toString(32)+t,e=":"+e+"R"+t,t=wd++,0<t&&(e+="H"+t.toString(32)),e+=":"}else t=pV++,e=":"+e+"r"+t.toString(32)+":";return n.memoizedState=e},unstable_isNewReconciler:!1},vV={readContext:cr,useCallback:GP,useContext:cr,useEffect:aE,useImperativeHandle:zP,useInsertionEffect:FP,useLayoutEffect:UP,useMemo:HP,useReducer:N0,useRef:BP,useState:function(){return N0(vd)},useDebugValue:lE,useDeferredValue:function(n){var e=hr();return $P(e,gt.memoizedState,n)},useTransition:function(){var n=N0(vd)[0],e=hr().memoizedState;return[n,e]},useMutableSource:kP,useSyncExternalStore:NP,useId:KP,unstable_isNewReconciler:!1},_V={readContext:cr,useCallback:GP,useContext:cr,useEffect:aE,useImperativeHandle:zP,useInsertionEffect:FP,useLayoutEffect:UP,useMemo:HP,useReducer:D0,useRef:BP,useState:function(){return D0(vd)},useDebugValue:lE,useDeferredValue:function(n){var e=hr();return gt===null?e.memoizedState=n:$P(e,gt.memoizedState,n)},useTransition:function(){var n=D0(vd)[0],e=hr().memoizedState;return[n,e]},useMutableSource:kP,useSyncExternalStore:NP,useId:KP,unstable_isNewReconciler:!1};function wr(n,e){if(n&&n.defaultProps){e=tt({},e),n=n.defaultProps;for(var t in n)e[t]===void 0&&(e[t]=n[t]);return e}return e}function $w(n,e,t,r){e=n.memoizedState,t=t(r,e),t=t==null?e:tt({},e,t),n.memoizedState=t,n.lanes===0&&(n.updateQueue.baseState=t)}var qg={isMounted:function(n){return(n=n._reactInternals)?nl(n)===n:!1},enqueueSetState:function(n,e,t){n=n._reactInternals;var r=mn(),i=to(n),s=ji(r,i);s.payload=e,t!=null&&(s.callback=t),e=Zs(n,s,i),e!==null&&(kr(e,n,i,r),Kp(e,n,i))},enqueueReplaceState:function(n,e,t){n=n._reactInternals;var r=mn(),i=to(n),s=ji(r,i);s.tag=1,s.payload=e,t!=null&&(s.callback=t),e=Zs(n,s,i),e!==null&&(kr(e,n,i,r),Kp(e,n,i))},enqueueForceUpdate:function(n,e){n=n._reactInternals;var t=mn(),r=to(n),i=ji(t,r);i.tag=2,e!=null&&(i.callback=e),e=Zs(n,i,r),e!==null&&(kr(e,n,r,t),Kp(e,n,r))}};function L1(n,e,t,r,i,s,o){return n=n.stateNode,typeof n.shouldComponentUpdate=="function"?n.shouldComponentUpdate(r,s,o):e.prototype&&e.prototype.isPureReactComponent?!dd(t,r)||!dd(i,s):!0}function JP(n,e,t){var r=!1,i=fo,s=e.contextType;return typeof s=="object"&&s!==null?s=cr(s):(i=kn(e)?La:Xt.current,r=e.contextTypes,s=(r=r!=null)?sc(n,i):fo),e=new e(t,s),n.memoizedState=e.state!==null&&e.state!==void 0?e.state:null,e.updater=qg,n.stateNode=e,e._reactInternals=n,r&&(n=n.stateNode,n.__reactInternalMemoizedUnmaskedChildContext=i,n.__reactInternalMemoizedMaskedChildContext=s),e}function V1(n,e,t,r){n=e.state,typeof e.componentWillReceiveProps=="function"&&e.componentWillReceiveProps(t,r),typeof e.UNSAFE_componentWillReceiveProps=="function"&&e.UNSAFE_componentWillReceiveProps(t,r),e.state!==n&&qg.enqueueReplaceState(e,e.state,null)}function Kw(n,e,t,r){var i=n.stateNode;i.props=t,i.state=n.memoizedState,i.refs={},eE(n);var s=e.contextType;typeof s=="object"&&s!==null?i.context=cr(s):(s=kn(e)?La:Xt.current,i.context=sc(n,s)),i.state=n.memoizedState,s=e.getDerivedStateFromProps,typeof s=="function"&&($w(n,e,s,t),i.state=n.memoizedState),typeof e.getDerivedStateFromProps=="function"||typeof i.getSnapshotBeforeUpdate=="function"||typeof i.UNSAFE_componentWillMount!="function"&&typeof i.componentWillMount!="function"||(e=i.state,typeof i.componentWillMount=="function"&&i.componentWillMount(),typeof i.UNSAFE_componentWillMount=="function"&&i.UNSAFE_componentWillMount(),e!==i.state&&qg.enqueueReplaceState(i,i.state,null),Fm(n,t,i,r),i.state=n.memoizedState),typeof i.componentDidMount=="function"&&(n.flags|=4194308)}function uc(n,e){try{var t="",r=e;do t+=qO(r),r=r.return;while(r);var i=t}catch(s){i=`
Error generating stack: `+s.message+`
`+s.stack}return{value:n,source:e,stack:i,digest:null}}function O0(n,e,t){return{value:n,source:null,stack:t??null,digest:e??null}}function Qw(n,e){try{console.error(e.value)}catch(t){setTimeout(function(){throw t})}}var EV=typeof WeakMap=="function"?WeakMap:Map;function YP(n,e,t){t=ji(-1,t),t.tag=3,t.payload={element:null};var r=e.value;return t.callback=function(){Hm||(Hm=!0,rv=r),Qw(n,e)},t}function XP(n,e,t){t=ji(-1,t),t.tag=3;var r=n.type.getDerivedStateFromError;if(typeof r=="function"){var i=e.value;t.payload=function(){return r(i)},t.callback=function(){Qw(n,e)}}var s=n.stateNode;return s!==null&&typeof s.componentDidCatch=="function"&&(t.callback=function(){Qw(n,e),typeof r!="function"&&(eo===null?eo=new Set([this]):eo.add(this));var o=e.stack;this.componentDidCatch(e.value,{componentStack:o!==null?o:""})}),t}function M1(n,e,t){var r=n.pingCache;if(r===null){r=n.pingCache=new EV;var i=new Set;r.set(e,i)}else i=r.get(e),i===void 0&&(i=new Set,r.set(e,i));i.has(t)||(i.add(t),n=LV.bind(null,n,e,t),e.then(n,n))}function B1(n){do{var e;if((e=n.tag===13)&&(e=n.memoizedState,e=e!==null?e.dehydrated!==null:!0),e)return n;n=n.return}while(n!==null);return null}function F1(n,e,t,r,i){return n.mode&1?(n.flags|=65536,n.lanes=i,n):(n===e?n.flags|=65536:(n.flags|=128,t.flags|=131072,t.flags&=-52805,t.tag===1&&(t.alternate===null?t.tag=17:(e=ji(-1,1),e.tag=2,Zs(t,e,1))),t.lanes|=1),n)}var AV=ts.ReactCurrentOwner,Sn=!1;function an(n,e,t,r){e.child=n===null?SP(e,null,t,r):ac(e,n.child,t,r)}function U1(n,e,t,r,i){t=t.render;var s=e.ref;return ru(e,i),r=sE(n,e,t,r,s,i),t=oE(),n!==null&&!Sn?(e.updateQueue=n.updateQueue,e.flags&=-2053,n.lanes&=~i,qi(n,e,i)):(Qe&&t&&Q_(e),e.flags|=1,an(n,e,r,i),e.child)}function j1(n,e,t,r,i){if(n===null){var s=t.type;return typeof s=="function"&&!gE(s)&&s.defaultProps===void 0&&t.compare===null&&t.defaultProps===void 0?(e.tag=15,e.type=s,ZP(n,e,s,r,i)):(n=Xp(t.type,null,r,e,e.mode,i),n.ref=e.ref,n.return=e,e.child=n)}if(s=n.child,!(n.lanes&i)){var o=s.memoizedProps;if(t=t.compare,t=t!==null?t:dd,t(o,r)&&n.ref===e.ref)return qi(n,e,i)}return e.flags|=1,n=no(s,r),n.ref=e.ref,n.return=e,e.child=n}function ZP(n,e,t,r,i){if(n!==null){var s=n.memoizedProps;if(dd(s,r)&&n.ref===e.ref)if(Sn=!1,e.pendingProps=r=s,(n.lanes&i)!==0)n.flags&131072&&(Sn=!0);else return e.lanes=n.lanes,qi(n,e,i)}return qw(n,e,t,r,i)}function eR(n,e,t){var r=e.pendingProps,i=r.children,s=n!==null?n.memoizedState:null;if(r.mode==="hidden")if(!(e.mode&1))e.memoizedState={baseLanes:0,cachePool:null,transitions:null},Ue($l,zn),zn|=t;else{if(!(t&1073741824))return n=s!==null?s.baseLanes|t:t,e.lanes=e.childLanes=1073741824,e.memoizedState={baseLanes:n,cachePool:null,transitions:null},e.updateQueue=null,Ue($l,zn),zn|=n,null;e.memoizedState={baseLanes:0,cachePool:null,transitions:null},r=s!==null?s.baseLanes:t,Ue($l,zn),zn|=r}else s!==null?(r=s.baseLanes|t,e.memoizedState=null):r=t,Ue($l,zn),zn|=r;return an(n,e,i,t),e.child}function tR(n,e){var t=e.ref;(n===null&&t!==null||n!==null&&n.ref!==t)&&(e.flags|=512,e.flags|=2097152)}function qw(n,e,t,r,i){var s=kn(t)?La:Xt.current;return s=sc(e,s),ru(e,i),t=sE(n,e,t,r,s,i),r=oE(),n!==null&&!Sn?(e.updateQueue=n.updateQueue,e.flags&=-2053,n.lanes&=~i,qi(n,e,i)):(Qe&&r&&Q_(e),e.flags|=1,an(n,e,t,i),e.child)}function z1(n,e,t,r,i){if(kn(t)){var s=!0;Om(e)}else s=!1;if(ru(e,i),e.stateNode===null)Wp(n,e),JP(e,t,r),Kw(e,t,r,i),r=!0;else if(n===null){var o=e.stateNode,a=e.memoizedProps;o.props=a;var l=o.context,c=t.contextType;typeof c=="object"&&c!==null?c=cr(c):(c=kn(t)?La:Xt.current,c=sc(e,c));var h=t.getDerivedStateFromProps,d=typeof h=="function"||typeof o.getSnapshotBeforeUpdate=="function";d||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(a!==r||l!==c)&&V1(e,o,r,c),ws=!1;var p=e.memoizedState;o.state=p,Fm(e,r,o,i),l=e.memoizedState,a!==r||p!==l||Cn.current||ws?(typeof h=="function"&&($w(e,t,h,r),l=e.memoizedState),(a=ws||L1(e,t,a,r,p,l,c))?(d||typeof o.UNSAFE_componentWillMount!="function"&&typeof o.componentWillMount!="function"||(typeof o.componentWillMount=="function"&&o.componentWillMount(),typeof o.UNSAFE_componentWillMount=="function"&&o.UNSAFE_componentWillMount()),typeof o.componentDidMount=="function"&&(e.flags|=4194308)):(typeof o.componentDidMount=="function"&&(e.flags|=4194308),e.memoizedProps=r,e.memoizedState=l),o.props=r,o.state=l,o.context=c,r=a):(typeof o.componentDidMount=="function"&&(e.flags|=4194308),r=!1)}else{o=e.stateNode,RP(n,e),a=e.memoizedProps,c=e.type===e.elementType?a:wr(e.type,a),o.props=c,d=e.pendingProps,p=o.context,l=t.contextType,typeof l=="object"&&l!==null?l=cr(l):(l=kn(t)?La:Xt.current,l=sc(e,l));var g=t.getDerivedStateFromProps;(h=typeof g=="function"||typeof o.getSnapshotBeforeUpdate=="function")||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(a!==d||p!==l)&&V1(e,o,r,l),ws=!1,p=e.memoizedState,o.state=p,Fm(e,r,o,i);var A=e.memoizedState;a!==d||p!==A||Cn.current||ws?(typeof g=="function"&&($w(e,t,g,r),A=e.memoizedState),(c=ws||L1(e,t,c,r,p,A,l)||!1)?(h||typeof o.UNSAFE_componentWillUpdate!="function"&&typeof o.componentWillUpdate!="function"||(typeof o.componentWillUpdate=="function"&&o.componentWillUpdate(r,A,l),typeof o.UNSAFE_componentWillUpdate=="function"&&o.UNSAFE_componentWillUpdate(r,A,l)),typeof o.componentDidUpdate=="function"&&(e.flags|=4),typeof o.getSnapshotBeforeUpdate=="function"&&(e.flags|=1024)):(typeof o.componentDidUpdate!="function"||a===n.memoizedProps&&p===n.memoizedState||(e.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||a===n.memoizedProps&&p===n.memoizedState||(e.flags|=1024),e.memoizedProps=r,e.memoizedState=A),o.props=r,o.state=A,o.context=l,r=c):(typeof o.componentDidUpdate!="function"||a===n.memoizedProps&&p===n.memoizedState||(e.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||a===n.memoizedProps&&p===n.memoizedState||(e.flags|=1024),r=!1)}return Ww(n,e,t,r,s,i)}function Ww(n,e,t,r,i,s){tR(n,e);var o=(e.flags&128)!==0;if(!r&&!o)return i&&S1(e,t,!1),qi(n,e,s);r=e.stateNode,AV.current=e;var a=o&&typeof t.getDerivedStateFromError!="function"?null:r.render();return e.flags|=1,n!==null&&o?(e.child=ac(e,n.child,null,s),e.child=ac(e,null,a,s)):an(n,e,a,s),e.memoizedState=r.state,i&&S1(e,t,!0),e.child}function nR(n){var e=n.stateNode;e.pendingContext?x1(n,e.pendingContext,e.pendingContext!==e.context):e.context&&x1(n,e.context,!1),tE(n,e.containerInfo)}function G1(n,e,t,r,i){return oc(),W_(i),e.flags|=256,an(n,e,t,r),e.child}var Jw={dehydrated:null,treeContext:null,retryLane:0};function Yw(n){return{baseLanes:n,cachePool:null,transitions:null}}function rR(n,e,t){var r=e.pendingProps,i=We.current,s=!1,o=(e.flags&128)!==0,a;if((a=o)||(a=n!==null&&n.memoizedState===null?!1:(i&2)!==0),a?(s=!0,e.flags&=-129):(n===null||n.memoizedState!==null)&&(i|=1),Ue(We,i&1),n===null)return Gw(e),n=e.memoizedState,n!==null&&(n=n.dehydrated,n!==null)?(e.mode&1?n.data==="$!"?e.lanes=8:e.lanes=1073741824:e.lanes=1,null):(o=r.children,n=r.fallback,s?(r=e.mode,s=e.child,o={mode:"hidden",children:o},!(r&1)&&s!==null?(s.childLanes=0,s.pendingProps=o):s=Yg(o,r,0,null),n=Ca(n,r,t,null),s.return=e,n.return=e,s.sibling=n,e.child=s,e.child.memoizedState=Yw(t),e.memoizedState=Jw,n):uE(e,o));if(i=n.memoizedState,i!==null&&(a=i.dehydrated,a!==null))return IV(n,e,o,r,a,i,t);if(s){s=r.fallback,o=e.mode,i=n.child,a=i.sibling;var l={mode:"hidden",children:r.children};return!(o&1)&&e.child!==i?(r=e.child,r.childLanes=0,r.pendingProps=l,e.deletions=null):(r=no(i,l),r.subtreeFlags=i.subtreeFlags&14680064),a!==null?s=no(a,s):(s=Ca(s,o,t,null),s.flags|=2),s.return=e,r.return=e,r.sibling=s,e.child=r,r=s,s=e.child,o=n.child.memoizedState,o=o===null?Yw(t):{baseLanes:o.baseLanes|t,cachePool:null,transitions:o.transitions},s.memoizedState=o,s.childLanes=n.childLanes&~t,e.memoizedState=Jw,r}return s=n.child,n=s.sibling,r=no(s,{mode:"visible",children:r.children}),!(e.mode&1)&&(r.lanes=t),r.return=e,r.sibling=null,n!==null&&(t=e.deletions,t===null?(e.deletions=[n],e.flags|=16):t.push(n)),e.child=r,e.memoizedState=null,r}function uE(n,e){return e=Yg({mode:"visible",children:e},n.mode,0,null),e.return=n,n.child=e}function vp(n,e,t,r){return r!==null&&W_(r),ac(e,n.child,null,t),n=uE(e,e.pendingProps.children),n.flags|=2,e.memoizedState=null,n}function IV(n,e,t,r,i,s,o){if(t)return e.flags&256?(e.flags&=-257,r=O0(Error(J(422))),vp(n,e,o,r)):e.memoizedState!==null?(e.child=n.child,e.flags|=128,null):(s=r.fallback,i=e.mode,r=Yg({mode:"visible",children:r.children},i,0,null),s=Ca(s,i,o,null),s.flags|=2,r.return=e,s.return=e,r.sibling=s,e.child=r,e.mode&1&&ac(e,n.child,null,o),e.child.memoizedState=Yw(o),e.memoizedState=Jw,s);if(!(e.mode&1))return vp(n,e,o,null);if(i.data==="$!"){if(r=i.nextSibling&&i.nextSibling.dataset,r)var a=r.dgst;return r=a,s=Error(J(419)),r=O0(s,r,void 0),vp(n,e,o,r)}if(a=(o&n.childLanes)!==0,Sn||a){if(r=xt,r!==null){switch(o&-o){case 4:i=2;break;case 16:i=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:i=32;break;case 536870912:i=268435456;break;default:i=0}i=i&(r.suspendedLanes|o)?0:i,i!==0&&i!==s.retryLane&&(s.retryLane=i,Qi(n,i),kr(r,n,i,-1))}return mE(),r=O0(Error(J(421))),vp(n,e,o,r)}return i.data==="$?"?(e.flags|=128,e.child=n.child,e=VV.bind(null,n),i._reactRetry=e,null):(n=s.treeContext,Gn=Xs(i.nextSibling),$n=e,Qe=!0,Pr=null,n!==null&&(ir[sr++]=Ni,ir[sr++]=Di,ir[sr++]=Va,Ni=n.id,Di=n.overflow,Va=e),e=uE(e,r.children),e.flags|=4096,e)}function H1(n,e,t){n.lanes|=e;var r=n.alternate;r!==null&&(r.lanes|=e),Hw(n.return,e,t)}function L0(n,e,t,r,i){var s=n.memoizedState;s===null?n.memoizedState={isBackwards:e,rendering:null,renderingStartTime:0,last:r,tail:t,tailMode:i}:(s.isBackwards=e,s.rendering=null,s.renderingStartTime=0,s.last=r,s.tail=t,s.tailMode=i)}function iR(n,e,t){var r=e.pendingProps,i=r.revealOrder,s=r.tail;if(an(n,e,r.children,t),r=We.current,r&2)r=r&1|2,e.flags|=128;else{if(n!==null&&n.flags&128)e:for(n=e.child;n!==null;){if(n.tag===13)n.memoizedState!==null&&H1(n,t,e);else if(n.tag===19)H1(n,t,e);else if(n.child!==null){n.child.return=n,n=n.child;continue}if(n===e)break e;for(;n.sibling===null;){if(n.return===null||n.return===e)break e;n=n.return}n.sibling.return=n.return,n=n.sibling}r&=1}if(Ue(We,r),!(e.mode&1))e.memoizedState=null;else switch(i){case"forwards":for(t=e.child,i=null;t!==null;)n=t.alternate,n!==null&&Um(n)===null&&(i=t),t=t.sibling;t=i,t===null?(i=e.child,e.child=null):(i=t.sibling,t.sibling=null),L0(e,!1,i,t,s);break;case"backwards":for(t=null,i=e.child,e.child=null;i!==null;){if(n=i.alternate,n!==null&&Um(n)===null){e.child=i;break}n=i.sibling,i.sibling=t,t=i,i=n}L0(e,!0,t,null,s);break;case"together":L0(e,!1,null,null,void 0);break;default:e.memoizedState=null}return e.child}function Wp(n,e){!(e.mode&1)&&n!==null&&(n.alternate=null,e.alternate=null,e.flags|=2)}function qi(n,e,t){if(n!==null&&(e.dependencies=n.dependencies),Ba|=e.lanes,!(t&e.childLanes))return null;if(n!==null&&e.child!==n.child)throw Error(J(153));if(e.child!==null){for(n=e.child,t=no(n,n.pendingProps),e.child=t,t.return=e;n.sibling!==null;)n=n.sibling,t=t.sibling=no(n,n.pendingProps),t.return=e;t.sibling=null}return e.child}function TV(n,e,t){switch(e.tag){case 3:nR(e),oc();break;case 5:CP(e);break;case 1:kn(e.type)&&Om(e);break;case 4:tE(e,e.stateNode.containerInfo);break;case 10:var r=e.type._context,i=e.memoizedProps.value;Ue(Mm,r._currentValue),r._currentValue=i;break;case 13:if(r=e.memoizedState,r!==null)return r.dehydrated!==null?(Ue(We,We.current&1),e.flags|=128,null):t&e.child.childLanes?rR(n,e,t):(Ue(We,We.current&1),n=qi(n,e,t),n!==null?n.sibling:null);Ue(We,We.current&1);break;case 19:if(r=(t&e.childLanes)!==0,n.flags&128){if(r)return iR(n,e,t);e.flags|=128}if(i=e.memoizedState,i!==null&&(i.rendering=null,i.tail=null,i.lastEffect=null),Ue(We,We.current),r)break;return null;case 22:case 23:return e.lanes=0,eR(n,e,t)}return qi(n,e,t)}var sR,Xw,oR,aR;sR=function(n,e){for(var t=e.child;t!==null;){if(t.tag===5||t.tag===6)n.appendChild(t.stateNode);else if(t.tag!==4&&t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return;t=t.return}t.sibling.return=t.return,t=t.sibling}};Xw=function(){};oR=function(n,e,t,r){var i=n.memoizedProps;if(i!==r){n=e.stateNode,ta(ri.current);var s=null;switch(t){case"input":i=_w(n,i),r=_w(n,r),s=[];break;case"select":i=tt({},i,{value:void 0}),r=tt({},r,{value:void 0}),s=[];break;case"textarea":i=Iw(n,i),r=Iw(n,r),s=[];break;default:typeof i.onClick!="function"&&typeof r.onClick=="function"&&(n.onclick=Nm)}bw(t,r);var o;t=null;for(c in i)if(!r.hasOwnProperty(c)&&i.hasOwnProperty(c)&&i[c]!=null)if(c==="style"){var a=i[c];for(o in a)a.hasOwnProperty(o)&&(t||(t={}),t[o]="")}else c!=="dangerouslySetInnerHTML"&&c!=="children"&&c!=="suppressContentEditableWarning"&&c!=="suppressHydrationWarning"&&c!=="autoFocus"&&(sd.hasOwnProperty(c)?s||(s=[]):(s=s||[]).push(c,null));for(c in r){var l=r[c];if(a=i!=null?i[c]:void 0,r.hasOwnProperty(c)&&l!==a&&(l!=null||a!=null))if(c==="style")if(a){for(o in a)!a.hasOwnProperty(o)||l&&l.hasOwnProperty(o)||(t||(t={}),t[o]="");for(o in l)l.hasOwnProperty(o)&&a[o]!==l[o]&&(t||(t={}),t[o]=l[o])}else t||(s||(s=[]),s.push(c,t)),t=l;else c==="dangerouslySetInnerHTML"?(l=l?l.__html:void 0,a=a?a.__html:void 0,l!=null&&a!==l&&(s=s||[]).push(c,l)):c==="children"?typeof l!="string"&&typeof l!="number"||(s=s||[]).push(c,""+l):c!=="suppressContentEditableWarning"&&c!=="suppressHydrationWarning"&&(sd.hasOwnProperty(c)?(l!=null&&c==="onScroll"&&Ge("scroll",n),s||a===l||(s=[])):(s=s||[]).push(c,l))}t&&(s=s||[]).push("style",t);var c=s;(e.updateQueue=c)&&(e.flags|=4)}};aR=function(n,e,t,r){t!==r&&(e.flags|=4)};function fh(n,e){if(!Qe)switch(n.tailMode){case"hidden":e=n.tail;for(var t=null;e!==null;)e.alternate!==null&&(t=e),e=e.sibling;t===null?n.tail=null:t.sibling=null;break;case"collapsed":t=n.tail;for(var r=null;t!==null;)t.alternate!==null&&(r=t),t=t.sibling;r===null?e||n.tail===null?n.tail=null:n.tail.sibling=null:r.sibling=null}}function Ht(n){var e=n.alternate!==null&&n.alternate.child===n.child,t=0,r=0;if(e)for(var i=n.child;i!==null;)t|=i.lanes|i.childLanes,r|=i.subtreeFlags&14680064,r|=i.flags&14680064,i.return=n,i=i.sibling;else for(i=n.child;i!==null;)t|=i.lanes|i.childLanes,r|=i.subtreeFlags,r|=i.flags,i.return=n,i=i.sibling;return n.subtreeFlags|=r,n.childLanes=t,e}function bV(n,e,t){var r=e.pendingProps;switch(q_(e),e.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Ht(e),null;case 1:return kn(e.type)&&Dm(),Ht(e),null;case 3:return r=e.stateNode,lc(),He(Cn),He(Xt),rE(),r.pendingContext&&(r.context=r.pendingContext,r.pendingContext=null),(n===null||n.child===null)&&(yp(e)?e.flags|=4:n===null||n.memoizedState.isDehydrated&&!(e.flags&256)||(e.flags|=1024,Pr!==null&&(ov(Pr),Pr=null))),Xw(n,e),Ht(e),null;case 5:nE(e);var i=ta(yd.current);if(t=e.type,n!==null&&e.stateNode!=null)oR(n,e,t,r,i),n.ref!==e.ref&&(e.flags|=512,e.flags|=2097152);else{if(!r){if(e.stateNode===null)throw Error(J(166));return Ht(e),null}if(n=ta(ri.current),yp(e)){r=e.stateNode,t=e.type;var s=e.memoizedProps;switch(r[Jr]=e,r[md]=s,n=(e.mode&1)!==0,t){case"dialog":Ge("cancel",r),Ge("close",r);break;case"iframe":case"object":case"embed":Ge("load",r);break;case"video":case"audio":for(i=0;i<Sh.length;i++)Ge(Sh[i],r);break;case"source":Ge("error",r);break;case"img":case"image":case"link":Ge("error",r),Ge("load",r);break;case"details":Ge("toggle",r);break;case"input":ZI(r,s),Ge("invalid",r);break;case"select":r._wrapperState={wasMultiple:!!s.multiple},Ge("invalid",r);break;case"textarea":t1(r,s),Ge("invalid",r)}bw(t,s),i=null;for(var o in s)if(s.hasOwnProperty(o)){var a=s[o];o==="children"?typeof a=="string"?r.textContent!==a&&(s.suppressHydrationWarning!==!0&&gp(r.textContent,a,n),i=["children",a]):typeof a=="number"&&r.textContent!==""+a&&(s.suppressHydrationWarning!==!0&&gp(r.textContent,a,n),i=["children",""+a]):sd.hasOwnProperty(o)&&a!=null&&o==="onScroll"&&Ge("scroll",r)}switch(t){case"input":lp(r),e1(r,s,!0);break;case"textarea":lp(r),n1(r);break;case"select":case"option":break;default:typeof s.onClick=="function"&&(r.onclick=Nm)}r=i,e.updateQueue=r,r!==null&&(e.flags|=4)}else{o=i.nodeType===9?i:i.ownerDocument,n==="http://www.w3.org/1999/xhtml"&&(n=LS(t)),n==="http://www.w3.org/1999/xhtml"?t==="script"?(n=o.createElement("div"),n.innerHTML="<script><\/script>",n=n.removeChild(n.firstChild)):typeof r.is=="string"?n=o.createElement(t,{is:r.is}):(n=o.createElement(t),t==="select"&&(o=n,r.multiple?o.multiple=!0:r.size&&(o.size=r.size))):n=o.createElementNS(n,t),n[Jr]=e,n[md]=r,sR(n,e,!1,!1),e.stateNode=n;e:{switch(o=xw(t,r),t){case"dialog":Ge("cancel",n),Ge("close",n),i=r;break;case"iframe":case"object":case"embed":Ge("load",n),i=r;break;case"video":case"audio":for(i=0;i<Sh.length;i++)Ge(Sh[i],n);i=r;break;case"source":Ge("error",n),i=r;break;case"img":case"image":case"link":Ge("error",n),Ge("load",n),i=r;break;case"details":Ge("toggle",n),i=r;break;case"input":ZI(n,r),i=_w(n,r),Ge("invalid",n);break;case"option":i=r;break;case"select":n._wrapperState={wasMultiple:!!r.multiple},i=tt({},r,{value:void 0}),Ge("invalid",n);break;case"textarea":t1(n,r),i=Iw(n,r),Ge("invalid",n);break;default:i=r}bw(t,i),a=i;for(s in a)if(a.hasOwnProperty(s)){var l=a[s];s==="style"?BS(n,l):s==="dangerouslySetInnerHTML"?(l=l?l.__html:void 0,l!=null&&VS(n,l)):s==="children"?typeof l=="string"?(t!=="textarea"||l!=="")&&od(n,l):typeof l=="number"&&od(n,""+l):s!=="suppressContentEditableWarning"&&s!=="suppressHydrationWarning"&&s!=="autoFocus"&&(sd.hasOwnProperty(s)?l!=null&&s==="onScroll"&&Ge("scroll",n):l!=null&&D_(n,s,l,o))}switch(t){case"input":lp(n),e1(n,r,!1);break;case"textarea":lp(n),n1(n);break;case"option":r.value!=null&&n.setAttribute("value",""+ho(r.value));break;case"select":n.multiple=!!r.multiple,s=r.value,s!=null?Zl(n,!!r.multiple,s,!1):r.defaultValue!=null&&Zl(n,!!r.multiple,r.defaultValue,!0);break;default:typeof i.onClick=="function"&&(n.onclick=Nm)}switch(t){case"button":case"input":case"select":case"textarea":r=!!r.autoFocus;break e;case"img":r=!0;break e;default:r=!1}}r&&(e.flags|=4)}e.ref!==null&&(e.flags|=512,e.flags|=2097152)}return Ht(e),null;case 6:if(n&&e.stateNode!=null)aR(n,e,n.memoizedProps,r);else{if(typeof r!="string"&&e.stateNode===null)throw Error(J(166));if(t=ta(yd.current),ta(ri.current),yp(e)){if(r=e.stateNode,t=e.memoizedProps,r[Jr]=e,(s=r.nodeValue!==t)&&(n=$n,n!==null))switch(n.tag){case 3:gp(r.nodeValue,t,(n.mode&1)!==0);break;case 5:n.memoizedProps.suppressHydrationWarning!==!0&&gp(r.nodeValue,t,(n.mode&1)!==0)}s&&(e.flags|=4)}else r=(t.nodeType===9?t:t.ownerDocument).createTextNode(r),r[Jr]=e,e.stateNode=r}return Ht(e),null;case 13:if(He(We),r=e.memoizedState,n===null||n.memoizedState!==null&&n.memoizedState.dehydrated!==null){if(Qe&&Gn!==null&&e.mode&1&&!(e.flags&128))bP(),oc(),e.flags|=98560,s=!1;else if(s=yp(e),r!==null&&r.dehydrated!==null){if(n===null){if(!s)throw Error(J(318));if(s=e.memoizedState,s=s!==null?s.dehydrated:null,!s)throw Error(J(317));s[Jr]=e}else oc(),!(e.flags&128)&&(e.memoizedState=null),e.flags|=4;Ht(e),s=!1}else Pr!==null&&(ov(Pr),Pr=null),s=!0;if(!s)return e.flags&65536?e:null}return e.flags&128?(e.lanes=t,e):(r=r!==null,r!==(n!==null&&n.memoizedState!==null)&&r&&(e.child.flags|=8192,e.mode&1&&(n===null||We.current&1?yt===0&&(yt=3):mE())),e.updateQueue!==null&&(e.flags|=4),Ht(e),null);case 4:return lc(),Xw(n,e),n===null&&fd(e.stateNode.containerInfo),Ht(e),null;case 10:return X_(e.type._context),Ht(e),null;case 17:return kn(e.type)&&Dm(),Ht(e),null;case 19:if(He(We),s=e.memoizedState,s===null)return Ht(e),null;if(r=(e.flags&128)!==0,o=s.rendering,o===null)if(r)fh(s,!1);else{if(yt!==0||n!==null&&n.flags&128)for(n=e.child;n!==null;){if(o=Um(n),o!==null){for(e.flags|=128,fh(s,!1),r=o.updateQueue,r!==null&&(e.updateQueue=r,e.flags|=4),e.subtreeFlags=0,r=t,t=e.child;t!==null;)s=t,n=r,s.flags&=14680066,o=s.alternate,o===null?(s.childLanes=0,s.lanes=n,s.child=null,s.subtreeFlags=0,s.memoizedProps=null,s.memoizedState=null,s.updateQueue=null,s.dependencies=null,s.stateNode=null):(s.childLanes=o.childLanes,s.lanes=o.lanes,s.child=o.child,s.subtreeFlags=0,s.deletions=null,s.memoizedProps=o.memoizedProps,s.memoizedState=o.memoizedState,s.updateQueue=o.updateQueue,s.type=o.type,n=o.dependencies,s.dependencies=n===null?null:{lanes:n.lanes,firstContext:n.firstContext}),t=t.sibling;return Ue(We,We.current&1|2),e.child}n=n.sibling}s.tail!==null&&lt()>cc&&(e.flags|=128,r=!0,fh(s,!1),e.lanes=4194304)}else{if(!r)if(n=Um(o),n!==null){if(e.flags|=128,r=!0,t=n.updateQueue,t!==null&&(e.updateQueue=t,e.flags|=4),fh(s,!0),s.tail===null&&s.tailMode==="hidden"&&!o.alternate&&!Qe)return Ht(e),null}else 2*lt()-s.renderingStartTime>cc&&t!==1073741824&&(e.flags|=128,r=!0,fh(s,!1),e.lanes=4194304);s.isBackwards?(o.sibling=e.child,e.child=o):(t=s.last,t!==null?t.sibling=o:e.child=o,s.last=o)}return s.tail!==null?(e=s.tail,s.rendering=e,s.tail=e.sibling,s.renderingStartTime=lt(),e.sibling=null,t=We.current,Ue(We,r?t&1|2:t&1),e):(Ht(e),null);case 22:case 23:return pE(),r=e.memoizedState!==null,n!==null&&n.memoizedState!==null!==r&&(e.flags|=8192),r&&e.mode&1?zn&1073741824&&(Ht(e),e.subtreeFlags&6&&(e.flags|=8192)):Ht(e),null;case 24:return null;case 25:return null}throw Error(J(156,e.tag))}function xV(n,e){switch(q_(e),e.tag){case 1:return kn(e.type)&&Dm(),n=e.flags,n&65536?(e.flags=n&-65537|128,e):null;case 3:return lc(),He(Cn),He(Xt),rE(),n=e.flags,n&65536&&!(n&128)?(e.flags=n&-65537|128,e):null;case 5:return nE(e),null;case 13:if(He(We),n=e.memoizedState,n!==null&&n.dehydrated!==null){if(e.alternate===null)throw Error(J(340));oc()}return n=e.flags,n&65536?(e.flags=n&-65537|128,e):null;case 19:return He(We),null;case 4:return lc(),null;case 10:return X_(e.type._context),null;case 22:case 23:return pE(),null;case 24:return null;default:return null}}var _p=!1,Wt=!1,SV=typeof WeakSet=="function"?WeakSet:Set,ie=null;function Hl(n,e){var t=n.ref;if(t!==null)if(typeof t=="function")try{t(null)}catch(r){it(n,e,r)}else t.current=null}function Zw(n,e,t){try{t()}catch(r){it(n,e,r)}}var $1=!1;function PV(n,e){if(Vw=Rm,n=dP(),K_(n)){if("selectionStart"in n)var t={start:n.selectionStart,end:n.selectionEnd};else e:{t=(t=n.ownerDocument)&&t.defaultView||window;var r=t.getSelection&&t.getSelection();if(r&&r.rangeCount!==0){t=r.anchorNode;var i=r.anchorOffset,s=r.focusNode;r=r.focusOffset;try{t.nodeType,s.nodeType}catch{t=null;break e}var o=0,a=-1,l=-1,c=0,h=0,d=n,p=null;t:for(;;){for(var g;d!==t||i!==0&&d.nodeType!==3||(a=o+i),d!==s||r!==0&&d.nodeType!==3||(l=o+r),d.nodeType===3&&(o+=d.nodeValue.length),(g=d.firstChild)!==null;)p=d,d=g;for(;;){if(d===n)break t;if(p===t&&++c===i&&(a=o),p===s&&++h===r&&(l=o),(g=d.nextSibling)!==null)break;d=p,p=d.parentNode}d=g}t=a===-1||l===-1?null:{start:a,end:l}}else t=null}t=t||{start:0,end:0}}else t=null;for(Mw={focusedElem:n,selectionRange:t},Rm=!1,ie=e;ie!==null;)if(e=ie,n=e.child,(e.subtreeFlags&1028)!==0&&n!==null)n.return=e,ie=n;else for(;ie!==null;){e=ie;try{var A=e.alternate;if(e.flags&1024)switch(e.tag){case 0:case 11:case 15:break;case 1:if(A!==null){var v=A.memoizedProps,x=A.memoizedState,w=e.stateNode,E=w.getSnapshotBeforeUpdate(e.elementType===e.type?v:wr(e.type,v),x);w.__reactInternalSnapshotBeforeUpdate=E}break;case 3:var T=e.stateNode.containerInfo;T.nodeType===1?T.textContent="":T.nodeType===9&&T.documentElement&&T.removeChild(T.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(J(163))}}catch(L){it(e,e.return,L)}if(n=e.sibling,n!==null){n.return=e.return,ie=n;break}ie=e.return}return A=$1,$1=!1,A}function Qh(n,e,t){var r=e.updateQueue;if(r=r!==null?r.lastEffect:null,r!==null){var i=r=r.next;do{if((i.tag&n)===n){var s=i.destroy;i.destroy=void 0,s!==void 0&&Zw(e,t,s)}i=i.next}while(i!==r)}}function Wg(n,e){if(e=e.updateQueue,e=e!==null?e.lastEffect:null,e!==null){var t=e=e.next;do{if((t.tag&n)===n){var r=t.create;t.destroy=r()}t=t.next}while(t!==e)}}function ev(n){var e=n.ref;if(e!==null){var t=n.stateNode;switch(n.tag){case 5:n=t;break;default:n=t}typeof e=="function"?e(n):e.current=n}}function lR(n){var e=n.alternate;e!==null&&(n.alternate=null,lR(e)),n.child=null,n.deletions=null,n.sibling=null,n.tag===5&&(e=n.stateNode,e!==null&&(delete e[Jr],delete e[md],delete e[Uw],delete e[cV],delete e[hV])),n.stateNode=null,n.return=null,n.dependencies=null,n.memoizedProps=null,n.memoizedState=null,n.pendingProps=null,n.stateNode=null,n.updateQueue=null}function uR(n){return n.tag===5||n.tag===3||n.tag===4}function K1(n){e:for(;;){for(;n.sibling===null;){if(n.return===null||uR(n.return))return null;n=n.return}for(n.sibling.return=n.return,n=n.sibling;n.tag!==5&&n.tag!==6&&n.tag!==18;){if(n.flags&2||n.child===null||n.tag===4)continue e;n.child.return=n,n=n.child}if(!(n.flags&2))return n.stateNode}}function tv(n,e,t){var r=n.tag;if(r===5||r===6)n=n.stateNode,e?t.nodeType===8?t.parentNode.insertBefore(n,e):t.insertBefore(n,e):(t.nodeType===8?(e=t.parentNode,e.insertBefore(n,t)):(e=t,e.appendChild(n)),t=t._reactRootContainer,t!=null||e.onclick!==null||(e.onclick=Nm));else if(r!==4&&(n=n.child,n!==null))for(tv(n,e,t),n=n.sibling;n!==null;)tv(n,e,t),n=n.sibling}function nv(n,e,t){var r=n.tag;if(r===5||r===6)n=n.stateNode,e?t.insertBefore(n,e):t.appendChild(n);else if(r!==4&&(n=n.child,n!==null))for(nv(n,e,t),n=n.sibling;n!==null;)nv(n,e,t),n=n.sibling}var Ct=null,Sr=!1;function ls(n,e,t){for(t=t.child;t!==null;)cR(n,e,t),t=t.sibling}function cR(n,e,t){if(ni&&typeof ni.onCommitFiberUnmount=="function")try{ni.onCommitFiberUnmount(jg,t)}catch{}switch(t.tag){case 5:Wt||Hl(t,e);case 6:var r=Ct,i=Sr;Ct=null,ls(n,e,t),Ct=r,Sr=i,Ct!==null&&(Sr?(n=Ct,t=t.stateNode,n.nodeType===8?n.parentNode.removeChild(t):n.removeChild(t)):Ct.removeChild(t.stateNode));break;case 18:Ct!==null&&(Sr?(n=Ct,t=t.stateNode,n.nodeType===8?P0(n.parentNode,t):n.nodeType===1&&P0(n,t),cd(n)):P0(Ct,t.stateNode));break;case 4:r=Ct,i=Sr,Ct=t.stateNode.containerInfo,Sr=!0,ls(n,e,t),Ct=r,Sr=i;break;case 0:case 11:case 14:case 15:if(!Wt&&(r=t.updateQueue,r!==null&&(r=r.lastEffect,r!==null))){i=r=r.next;do{var s=i,o=s.destroy;s=s.tag,o!==void 0&&(s&2||s&4)&&Zw(t,e,o),i=i.next}while(i!==r)}ls(n,e,t);break;case 1:if(!Wt&&(Hl(t,e),r=t.stateNode,typeof r.componentWillUnmount=="function"))try{r.props=t.memoizedProps,r.state=t.memoizedState,r.componentWillUnmount()}catch(a){it(t,e,a)}ls(n,e,t);break;case 21:ls(n,e,t);break;case 22:t.mode&1?(Wt=(r=Wt)||t.memoizedState!==null,ls(n,e,t),Wt=r):ls(n,e,t);break;default:ls(n,e,t)}}function Q1(n){var e=n.updateQueue;if(e!==null){n.updateQueue=null;var t=n.stateNode;t===null&&(t=n.stateNode=new SV),e.forEach(function(r){var i=MV.bind(null,n,r);t.has(r)||(t.add(r),r.then(i,i))})}}function mr(n,e){var t=e.deletions;if(t!==null)for(var r=0;r<t.length;r++){var i=t[r];try{var s=n,o=e,a=o;e:for(;a!==null;){switch(a.tag){case 5:Ct=a.stateNode,Sr=!1;break e;case 3:Ct=a.stateNode.containerInfo,Sr=!0;break e;case 4:Ct=a.stateNode.containerInfo,Sr=!0;break e}a=a.return}if(Ct===null)throw Error(J(160));cR(s,o,i),Ct=null,Sr=!1;var l=i.alternate;l!==null&&(l.return=null),i.return=null}catch(c){it(i,e,c)}}if(e.subtreeFlags&12854)for(e=e.child;e!==null;)hR(e,n),e=e.sibling}function hR(n,e){var t=n.alternate,r=n.flags;switch(n.tag){case 0:case 11:case 14:case 15:if(mr(e,n),Br(n),r&4){try{Qh(3,n,n.return),Wg(3,n)}catch(v){it(n,n.return,v)}try{Qh(5,n,n.return)}catch(v){it(n,n.return,v)}}break;case 1:mr(e,n),Br(n),r&512&&t!==null&&Hl(t,t.return);break;case 5:if(mr(e,n),Br(n),r&512&&t!==null&&Hl(t,t.return),n.flags&32){var i=n.stateNode;try{od(i,"")}catch(v){it(n,n.return,v)}}if(r&4&&(i=n.stateNode,i!=null)){var s=n.memoizedProps,o=t!==null?t.memoizedProps:s,a=n.type,l=n.updateQueue;if(n.updateQueue=null,l!==null)try{a==="input"&&s.type==="radio"&&s.name!=null&&DS(i,s),xw(a,o);var c=xw(a,s);for(o=0;o<l.length;o+=2){var h=l[o],d=l[o+1];h==="style"?BS(i,d):h==="dangerouslySetInnerHTML"?VS(i,d):h==="children"?od(i,d):D_(i,h,d,c)}switch(a){case"input":Ew(i,s);break;case"textarea":OS(i,s);break;case"select":var p=i._wrapperState.wasMultiple;i._wrapperState.wasMultiple=!!s.multiple;var g=s.value;g!=null?Zl(i,!!s.multiple,g,!1):p!==!!s.multiple&&(s.defaultValue!=null?Zl(i,!!s.multiple,s.defaultValue,!0):Zl(i,!!s.multiple,s.multiple?[]:"",!1))}i[md]=s}catch(v){it(n,n.return,v)}}break;case 6:if(mr(e,n),Br(n),r&4){if(n.stateNode===null)throw Error(J(162));i=n.stateNode,s=n.memoizedProps;try{i.nodeValue=s}catch(v){it(n,n.return,v)}}break;case 3:if(mr(e,n),Br(n),r&4&&t!==null&&t.memoizedState.isDehydrated)try{cd(e.containerInfo)}catch(v){it(n,n.return,v)}break;case 4:mr(e,n),Br(n);break;case 13:mr(e,n),Br(n),i=n.child,i.flags&8192&&(s=i.memoizedState!==null,i.stateNode.isHidden=s,!s||i.alternate!==null&&i.alternate.memoizedState!==null||(dE=lt())),r&4&&Q1(n);break;case 22:if(h=t!==null&&t.memoizedState!==null,n.mode&1?(Wt=(c=Wt)||h,mr(e,n),Wt=c):mr(e,n),Br(n),r&8192){if(c=n.memoizedState!==null,(n.stateNode.isHidden=c)&&!h&&n.mode&1)for(ie=n,h=n.child;h!==null;){for(d=ie=h;ie!==null;){switch(p=ie,g=p.child,p.tag){case 0:case 11:case 14:case 15:Qh(4,p,p.return);break;case 1:Hl(p,p.return);var A=p.stateNode;if(typeof A.componentWillUnmount=="function"){r=p,t=p.return;try{e=r,A.props=e.memoizedProps,A.state=e.memoizedState,A.componentWillUnmount()}catch(v){it(r,t,v)}}break;case 5:Hl(p,p.return);break;case 22:if(p.memoizedState!==null){W1(d);continue}}g!==null?(g.return=p,ie=g):W1(d)}h=h.sibling}e:for(h=null,d=n;;){if(d.tag===5){if(h===null){h=d;try{i=d.stateNode,c?(s=i.style,typeof s.setProperty=="function"?s.setProperty("display","none","important"):s.display="none"):(a=d.stateNode,l=d.memoizedProps.style,o=l!=null&&l.hasOwnProperty("display")?l.display:null,a.style.display=MS("display",o))}catch(v){it(n,n.return,v)}}}else if(d.tag===6){if(h===null)try{d.stateNode.nodeValue=c?"":d.memoizedProps}catch(v){it(n,n.return,v)}}else if((d.tag!==22&&d.tag!==23||d.memoizedState===null||d===n)&&d.child!==null){d.child.return=d,d=d.child;continue}if(d===n)break e;for(;d.sibling===null;){if(d.return===null||d.return===n)break e;h===d&&(h=null),d=d.return}h===d&&(h=null),d.sibling.return=d.return,d=d.sibling}}break;case 19:mr(e,n),Br(n),r&4&&Q1(n);break;case 21:break;default:mr(e,n),Br(n)}}function Br(n){var e=n.flags;if(e&2){try{e:{for(var t=n.return;t!==null;){if(uR(t)){var r=t;break e}t=t.return}throw Error(J(160))}switch(r.tag){case 5:var i=r.stateNode;r.flags&32&&(od(i,""),r.flags&=-33);var s=K1(n);nv(n,s,i);break;case 3:case 4:var o=r.stateNode.containerInfo,a=K1(n);tv(n,a,o);break;default:throw Error(J(161))}}catch(l){it(n,n.return,l)}n.flags&=-3}e&4096&&(n.flags&=-4097)}function RV(n,e,t){ie=n,dR(n)}function dR(n,e,t){for(var r=(n.mode&1)!==0;ie!==null;){var i=ie,s=i.child;if(i.tag===22&&r){var o=i.memoizedState!==null||_p;if(!o){var a=i.alternate,l=a!==null&&a.memoizedState!==null||Wt;a=_p;var c=Wt;if(_p=o,(Wt=l)&&!c)for(ie=i;ie!==null;)o=ie,l=o.child,o.tag===22&&o.memoizedState!==null?J1(i):l!==null?(l.return=o,ie=l):J1(i);for(;s!==null;)ie=s,dR(s),s=s.sibling;ie=i,_p=a,Wt=c}q1(n)}else i.subtreeFlags&8772&&s!==null?(s.return=i,ie=s):q1(n)}}function q1(n){for(;ie!==null;){var e=ie;if(e.flags&8772){var t=e.alternate;try{if(e.flags&8772)switch(e.tag){case 0:case 11:case 15:Wt||Wg(5,e);break;case 1:var r=e.stateNode;if(e.flags&4&&!Wt)if(t===null)r.componentDidMount();else{var i=e.elementType===e.type?t.memoizedProps:wr(e.type,t.memoizedProps);r.componentDidUpdate(i,t.memoizedState,r.__reactInternalSnapshotBeforeUpdate)}var s=e.updateQueue;s!==null&&N1(e,s,r);break;case 3:var o=e.updateQueue;if(o!==null){if(t=null,e.child!==null)switch(e.child.tag){case 5:t=e.child.stateNode;break;case 1:t=e.child.stateNode}N1(e,o,t)}break;case 5:var a=e.stateNode;if(t===null&&e.flags&4){t=a;var l=e.memoizedProps;switch(e.type){case"button":case"input":case"select":case"textarea":l.autoFocus&&t.focus();break;case"img":l.src&&(t.src=l.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(e.memoizedState===null){var c=e.alternate;if(c!==null){var h=c.memoizedState;if(h!==null){var d=h.dehydrated;d!==null&&cd(d)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(J(163))}Wt||e.flags&512&&ev(e)}catch(p){it(e,e.return,p)}}if(e===n){ie=null;break}if(t=e.sibling,t!==null){t.return=e.return,ie=t;break}ie=e.return}}function W1(n){for(;ie!==null;){var e=ie;if(e===n){ie=null;break}var t=e.sibling;if(t!==null){t.return=e.return,ie=t;break}ie=e.return}}function J1(n){for(;ie!==null;){var e=ie;try{switch(e.tag){case 0:case 11:case 15:var t=e.return;try{Wg(4,e)}catch(l){it(e,t,l)}break;case 1:var r=e.stateNode;if(typeof r.componentDidMount=="function"){var i=e.return;try{r.componentDidMount()}catch(l){it(e,i,l)}}var s=e.return;try{ev(e)}catch(l){it(e,s,l)}break;case 5:var o=e.return;try{ev(e)}catch(l){it(e,o,l)}}}catch(l){it(e,e.return,l)}if(e===n){ie=null;break}var a=e.sibling;if(a!==null){a.return=e.return,ie=a;break}ie=e.return}}var CV=Math.ceil,Gm=ts.ReactCurrentDispatcher,cE=ts.ReactCurrentOwner,lr=ts.ReactCurrentBatchConfig,Pe=0,xt=null,ht=null,Vt=0,zn=0,$l=Eo(0),yt=0,Ed=null,Ba=0,Jg=0,hE=0,qh=null,bn=null,dE=0,cc=1/0,pi=null,Hm=!1,rv=null,eo=null,Ep=!1,Ks=null,$m=0,Wh=0,iv=null,Jp=-1,Yp=0;function mn(){return Pe&6?lt():Jp!==-1?Jp:Jp=lt()}function to(n){return n.mode&1?Pe&2&&Vt!==0?Vt&-Vt:fV.transition!==null?(Yp===0&&(Yp=JS()),Yp):(n=Le,n!==0||(n=window.event,n=n===void 0?16:rP(n.type)),n):1}function kr(n,e,t,r){if(50<Wh)throw Wh=0,iv=null,Error(J(185));vf(n,t,r),(!(Pe&2)||n!==xt)&&(n===xt&&(!(Pe&2)&&(Jg|=t),yt===4&&Es(n,Vt)),Nn(n,r),t===1&&Pe===0&&!(e.mode&1)&&(cc=lt()+500,Kg&&Ao()))}function Nn(n,e){var t=n.callbackNode;fL(n,e);var r=Pm(n,n===xt?Vt:0);if(r===0)t!==null&&s1(t),n.callbackNode=null,n.callbackPriority=0;else if(e=r&-r,n.callbackPriority!==e){if(t!=null&&s1(t),e===1)n.tag===0?dV(Y1.bind(null,n)):AP(Y1.bind(null,n)),lV(function(){!(Pe&6)&&Ao()}),t=null;else{switch(YS(r)){case 1:t=B_;break;case 4:t=qS;break;case 16:t=Sm;break;case 536870912:t=WS;break;default:t=Sm}t=_R(t,fR.bind(null,n))}n.callbackPriority=e,n.callbackNode=t}}function fR(n,e){if(Jp=-1,Yp=0,Pe&6)throw Error(J(327));var t=n.callbackNode;if(iu()&&n.callbackNode!==t)return null;var r=Pm(n,n===xt?Vt:0);if(r===0)return null;if(r&30||r&n.expiredLanes||e)e=Km(n,r);else{e=r;var i=Pe;Pe|=2;var s=mR();(xt!==n||Vt!==e)&&(pi=null,cc=lt()+500,Ra(n,e));do try{DV();break}catch(a){pR(n,a)}while(1);Y_(),Gm.current=s,Pe=i,ht!==null?e=0:(xt=null,Vt=0,e=yt)}if(e!==0){if(e===2&&(i=kw(n),i!==0&&(r=i,e=sv(n,i))),e===1)throw t=Ed,Ra(n,0),Es(n,r),Nn(n,lt()),t;if(e===6)Es(n,r);else{if(i=n.current.alternate,!(r&30)&&!kV(i)&&(e=Km(n,r),e===2&&(s=kw(n),s!==0&&(r=s,e=sv(n,s))),e===1))throw t=Ed,Ra(n,0),Es(n,r),Nn(n,lt()),t;switch(n.finishedWork=i,n.finishedLanes=r,e){case 0:case 1:throw Error(J(345));case 2:Fo(n,bn,pi);break;case 3:if(Es(n,r),(r&130023424)===r&&(e=dE+500-lt(),10<e)){if(Pm(n,0)!==0)break;if(i=n.suspendedLanes,(i&r)!==r){mn(),n.pingedLanes|=n.suspendedLanes&i;break}n.timeoutHandle=Fw(Fo.bind(null,n,bn,pi),e);break}Fo(n,bn,pi);break;case 4:if(Es(n,r),(r&4194240)===r)break;for(e=n.eventTimes,i=-1;0<r;){var o=31-Cr(r);s=1<<o,o=e[o],o>i&&(i=o),r&=~s}if(r=i,r=lt()-r,r=(120>r?120:480>r?480:1080>r?1080:1920>r?1920:3e3>r?3e3:4320>r?4320:1960*CV(r/1960))-r,10<r){n.timeoutHandle=Fw(Fo.bind(null,n,bn,pi),r);break}Fo(n,bn,pi);break;case 5:Fo(n,bn,pi);break;default:throw Error(J(329))}}}return Nn(n,lt()),n.callbackNode===t?fR.bind(null,n):null}function sv(n,e){var t=qh;return n.current.memoizedState.isDehydrated&&(Ra(n,e).flags|=256),n=Km(n,e),n!==2&&(e=bn,bn=t,e!==null&&ov(e)),n}function ov(n){bn===null?bn=n:bn.push.apply(bn,n)}function kV(n){for(var e=n;;){if(e.flags&16384){var t=e.updateQueue;if(t!==null&&(t=t.stores,t!==null))for(var r=0;r<t.length;r++){var i=t[r],s=i.getSnapshot;i=i.value;try{if(!Nr(s(),i))return!1}catch{return!1}}}if(t=e.child,e.subtreeFlags&16384&&t!==null)t.return=e,e=t;else{if(e===n)break;for(;e.sibling===null;){if(e.return===null||e.return===n)return!0;e=e.return}e.sibling.return=e.return,e=e.sibling}}return!0}function Es(n,e){for(e&=~hE,e&=~Jg,n.suspendedLanes|=e,n.pingedLanes&=~e,n=n.expirationTimes;0<e;){var t=31-Cr(e),r=1<<t;n[t]=-1,e&=~r}}function Y1(n){if(Pe&6)throw Error(J(327));iu();var e=Pm(n,0);if(!(e&1))return Nn(n,lt()),null;var t=Km(n,e);if(n.tag!==0&&t===2){var r=kw(n);r!==0&&(e=r,t=sv(n,r))}if(t===1)throw t=Ed,Ra(n,0),Es(n,e),Nn(n,lt()),t;if(t===6)throw Error(J(345));return n.finishedWork=n.current.alternate,n.finishedLanes=e,Fo(n,bn,pi),Nn(n,lt()),null}function fE(n,e){var t=Pe;Pe|=1;try{return n(e)}finally{Pe=t,Pe===0&&(cc=lt()+500,Kg&&Ao())}}function Fa(n){Ks!==null&&Ks.tag===0&&!(Pe&6)&&iu();var e=Pe;Pe|=1;var t=lr.transition,r=Le;try{if(lr.transition=null,Le=1,n)return n()}finally{Le=r,lr.transition=t,Pe=e,!(Pe&6)&&Ao()}}function pE(){zn=$l.current,He($l)}function Ra(n,e){n.finishedWork=null,n.finishedLanes=0;var t=n.timeoutHandle;if(t!==-1&&(n.timeoutHandle=-1,aV(t)),ht!==null)for(t=ht.return;t!==null;){var r=t;switch(q_(r),r.tag){case 1:r=r.type.childContextTypes,r!=null&&Dm();break;case 3:lc(),He(Cn),He(Xt),rE();break;case 5:nE(r);break;case 4:lc();break;case 13:He(We);break;case 19:He(We);break;case 10:X_(r.type._context);break;case 22:case 23:pE()}t=t.return}if(xt=n,ht=n=no(n.current,null),Vt=zn=e,yt=0,Ed=null,hE=Jg=Ba=0,bn=qh=null,ea!==null){for(e=0;e<ea.length;e++)if(t=ea[e],r=t.interleaved,r!==null){t.interleaved=null;var i=r.next,s=t.pending;if(s!==null){var o=s.next;s.next=i,r.next=o}t.pending=r}ea=null}return n}function pR(n,e){do{var t=ht;try{if(Y_(),Qp.current=zm,jm){for(var r=Ze.memoizedState;r!==null;){var i=r.queue;i!==null&&(i.pending=null),r=r.next}jm=!1}if(Ma=0,It=gt=Ze=null,Kh=!1,wd=0,cE.current=null,t===null||t.return===null){yt=1,Ed=e,ht=null;break}e:{var s=n,o=t.return,a=t,l=e;if(e=Vt,a.flags|=32768,l!==null&&typeof l=="object"&&typeof l.then=="function"){var c=l,h=a,d=h.tag;if(!(h.mode&1)&&(d===0||d===11||d===15)){var p=h.alternate;p?(h.updateQueue=p.updateQueue,h.memoizedState=p.memoizedState,h.lanes=p.lanes):(h.updateQueue=null,h.memoizedState=null)}var g=B1(o);if(g!==null){g.flags&=-257,F1(g,o,a,s,e),g.mode&1&&M1(s,c,e),e=g,l=c;var A=e.updateQueue;if(A===null){var v=new Set;v.add(l),e.updateQueue=v}else A.add(l);break e}else{if(!(e&1)){M1(s,c,e),mE();break e}l=Error(J(426))}}else if(Qe&&a.mode&1){var x=B1(o);if(x!==null){!(x.flags&65536)&&(x.flags|=256),F1(x,o,a,s,e),W_(uc(l,a));break e}}s=l=uc(l,a),yt!==4&&(yt=2),qh===null?qh=[s]:qh.push(s),s=o;do{switch(s.tag){case 3:s.flags|=65536,e&=-e,s.lanes|=e;var w=YP(s,l,e);k1(s,w);break e;case 1:a=l;var E=s.type,T=s.stateNode;if(!(s.flags&128)&&(typeof E.getDerivedStateFromError=="function"||T!==null&&typeof T.componentDidCatch=="function"&&(eo===null||!eo.has(T)))){s.flags|=65536,e&=-e,s.lanes|=e;var L=XP(s,a,e);k1(s,L);break e}}s=s.return}while(s!==null)}yR(t)}catch(F){e=F,ht===t&&t!==null&&(ht=t=t.return);continue}break}while(1)}function mR(){var n=Gm.current;return Gm.current=zm,n===null?zm:n}function mE(){(yt===0||yt===3||yt===2)&&(yt=4),xt===null||!(Ba&268435455)&&!(Jg&268435455)||Es(xt,Vt)}function Km(n,e){var t=Pe;Pe|=2;var r=mR();(xt!==n||Vt!==e)&&(pi=null,Ra(n,e));do try{NV();break}catch(i){pR(n,i)}while(1);if(Y_(),Pe=t,Gm.current=r,ht!==null)throw Error(J(261));return xt=null,Vt=0,yt}function NV(){for(;ht!==null;)gR(ht)}function DV(){for(;ht!==null&&!iL();)gR(ht)}function gR(n){var e=vR(n.alternate,n,zn);n.memoizedProps=n.pendingProps,e===null?yR(n):ht=e,cE.current=null}function yR(n){var e=n;do{var t=e.alternate;if(n=e.return,e.flags&32768){if(t=xV(t,e),t!==null){t.flags&=32767,ht=t;return}if(n!==null)n.flags|=32768,n.subtreeFlags=0,n.deletions=null;else{yt=6,ht=null;return}}else if(t=bV(t,e,zn),t!==null){ht=t;return}if(e=e.sibling,e!==null){ht=e;return}ht=e=n}while(e!==null);yt===0&&(yt=5)}function Fo(n,e,t){var r=Le,i=lr.transition;try{lr.transition=null,Le=1,OV(n,e,t,r)}finally{lr.transition=i,Le=r}return null}function OV(n,e,t,r){do iu();while(Ks!==null);if(Pe&6)throw Error(J(327));t=n.finishedWork;var i=n.finishedLanes;if(t===null)return null;if(n.finishedWork=null,n.finishedLanes=0,t===n.current)throw Error(J(177));n.callbackNode=null,n.callbackPriority=0;var s=t.lanes|t.childLanes;if(pL(n,s),n===xt&&(ht=xt=null,Vt=0),!(t.subtreeFlags&2064)&&!(t.flags&2064)||Ep||(Ep=!0,_R(Sm,function(){return iu(),null})),s=(t.flags&15990)!==0,t.subtreeFlags&15990||s){s=lr.transition,lr.transition=null;var o=Le;Le=1;var a=Pe;Pe|=4,cE.current=null,PV(n,t),hR(t,n),eV(Mw),Rm=!!Vw,Mw=Vw=null,n.current=t,RV(t),sL(),Pe=a,Le=o,lr.transition=s}else n.current=t;if(Ep&&(Ep=!1,Ks=n,$m=i),s=n.pendingLanes,s===0&&(eo=null),lL(t.stateNode),Nn(n,lt()),e!==null)for(r=n.onRecoverableError,t=0;t<e.length;t++)i=e[t],r(i.value,{componentStack:i.stack,digest:i.digest});if(Hm)throw Hm=!1,n=rv,rv=null,n;return $m&1&&n.tag!==0&&iu(),s=n.pendingLanes,s&1?n===iv?Wh++:(Wh=0,iv=n):Wh=0,Ao(),null}function iu(){if(Ks!==null){var n=YS($m),e=lr.transition,t=Le;try{if(lr.transition=null,Le=16>n?16:n,Ks===null)var r=!1;else{if(n=Ks,Ks=null,$m=0,Pe&6)throw Error(J(331));var i=Pe;for(Pe|=4,ie=n.current;ie!==null;){var s=ie,o=s.child;if(ie.flags&16){var a=s.deletions;if(a!==null){for(var l=0;l<a.length;l++){var c=a[l];for(ie=c;ie!==null;){var h=ie;switch(h.tag){case 0:case 11:case 15:Qh(8,h,s)}var d=h.child;if(d!==null)d.return=h,ie=d;else for(;ie!==null;){h=ie;var p=h.sibling,g=h.return;if(lR(h),h===c){ie=null;break}if(p!==null){p.return=g,ie=p;break}ie=g}}}var A=s.alternate;if(A!==null){var v=A.child;if(v!==null){A.child=null;do{var x=v.sibling;v.sibling=null,v=x}while(v!==null)}}ie=s}}if(s.subtreeFlags&2064&&o!==null)o.return=s,ie=o;else e:for(;ie!==null;){if(s=ie,s.flags&2048)switch(s.tag){case 0:case 11:case 15:Qh(9,s,s.return)}var w=s.sibling;if(w!==null){w.return=s.return,ie=w;break e}ie=s.return}}var E=n.current;for(ie=E;ie!==null;){o=ie;var T=o.child;if(o.subtreeFlags&2064&&T!==null)T.return=o,ie=T;else e:for(o=E;ie!==null;){if(a=ie,a.flags&2048)try{switch(a.tag){case 0:case 11:case 15:Wg(9,a)}}catch(F){it(a,a.return,F)}if(a===o){ie=null;break e}var L=a.sibling;if(L!==null){L.return=a.return,ie=L;break e}ie=a.return}}if(Pe=i,Ao(),ni&&typeof ni.onPostCommitFiberRoot=="function")try{ni.onPostCommitFiberRoot(jg,n)}catch{}r=!0}return r}finally{Le=t,lr.transition=e}}return!1}function X1(n,e,t){e=uc(t,e),e=YP(n,e,1),n=Zs(n,e,1),e=mn(),n!==null&&(vf(n,1,e),Nn(n,e))}function it(n,e,t){if(n.tag===3)X1(n,n,t);else for(;e!==null;){if(e.tag===3){X1(e,n,t);break}else if(e.tag===1){var r=e.stateNode;if(typeof e.type.getDerivedStateFromError=="function"||typeof r.componentDidCatch=="function"&&(eo===null||!eo.has(r))){n=uc(t,n),n=XP(e,n,1),e=Zs(e,n,1),n=mn(),e!==null&&(vf(e,1,n),Nn(e,n));break}}e=e.return}}function LV(n,e,t){var r=n.pingCache;r!==null&&r.delete(e),e=mn(),n.pingedLanes|=n.suspendedLanes&t,xt===n&&(Vt&t)===t&&(yt===4||yt===3&&(Vt&130023424)===Vt&&500>lt()-dE?Ra(n,0):hE|=t),Nn(n,e)}function wR(n,e){e===0&&(n.mode&1?(e=hp,hp<<=1,!(hp&130023424)&&(hp=4194304)):e=1);var t=mn();n=Qi(n,e),n!==null&&(vf(n,e,t),Nn(n,t))}function VV(n){var e=n.memoizedState,t=0;e!==null&&(t=e.retryLane),wR(n,t)}function MV(n,e){var t=0;switch(n.tag){case 13:var r=n.stateNode,i=n.memoizedState;i!==null&&(t=i.retryLane);break;case 19:r=n.stateNode;break;default:throw Error(J(314))}r!==null&&r.delete(e),wR(n,t)}var vR;vR=function(n,e,t){if(n!==null)if(n.memoizedProps!==e.pendingProps||Cn.current)Sn=!0;else{if(!(n.lanes&t)&&!(e.flags&128))return Sn=!1,TV(n,e,t);Sn=!!(n.flags&131072)}else Sn=!1,Qe&&e.flags&1048576&&IP(e,Vm,e.index);switch(e.lanes=0,e.tag){case 2:var r=e.type;Wp(n,e),n=e.pendingProps;var i=sc(e,Xt.current);ru(e,t),i=sE(null,e,r,n,i,t);var s=oE();return e.flags|=1,typeof i=="object"&&i!==null&&typeof i.render=="function"&&i.$$typeof===void 0?(e.tag=1,e.memoizedState=null,e.updateQueue=null,kn(r)?(s=!0,Om(e)):s=!1,e.memoizedState=i.state!==null&&i.state!==void 0?i.state:null,eE(e),i.updater=qg,e.stateNode=i,i._reactInternals=e,Kw(e,r,n,t),e=Ww(null,e,r,!0,s,t)):(e.tag=0,Qe&&s&&Q_(e),an(null,e,i,t),e=e.child),e;case 16:r=e.elementType;e:{switch(Wp(n,e),n=e.pendingProps,i=r._init,r=i(r._payload),e.type=r,i=e.tag=FV(r),n=wr(r,n),i){case 0:e=qw(null,e,r,n,t);break e;case 1:e=z1(null,e,r,n,t);break e;case 11:e=U1(null,e,r,n,t);break e;case 14:e=j1(null,e,r,wr(r.type,n),t);break e}throw Error(J(306,r,""))}return e;case 0:return r=e.type,i=e.pendingProps,i=e.elementType===r?i:wr(r,i),qw(n,e,r,i,t);case 1:return r=e.type,i=e.pendingProps,i=e.elementType===r?i:wr(r,i),z1(n,e,r,i,t);case 3:e:{if(nR(e),n===null)throw Error(J(387));r=e.pendingProps,s=e.memoizedState,i=s.element,RP(n,e),Fm(e,r,null,t);var o=e.memoizedState;if(r=o.element,s.isDehydrated)if(s={element:r,isDehydrated:!1,cache:o.cache,pendingSuspenseBoundaries:o.pendingSuspenseBoundaries,transitions:o.transitions},e.updateQueue.baseState=s,e.memoizedState=s,e.flags&256){i=uc(Error(J(423)),e),e=G1(n,e,r,t,i);break e}else if(r!==i){i=uc(Error(J(424)),e),e=G1(n,e,r,t,i);break e}else for(Gn=Xs(e.stateNode.containerInfo.firstChild),$n=e,Qe=!0,Pr=null,t=SP(e,null,r,t),e.child=t;t;)t.flags=t.flags&-3|4096,t=t.sibling;else{if(oc(),r===i){e=qi(n,e,t);break e}an(n,e,r,t)}e=e.child}return e;case 5:return CP(e),n===null&&Gw(e),r=e.type,i=e.pendingProps,s=n!==null?n.memoizedProps:null,o=i.children,Bw(r,i)?o=null:s!==null&&Bw(r,s)&&(e.flags|=32),tR(n,e),an(n,e,o,t),e.child;case 6:return n===null&&Gw(e),null;case 13:return rR(n,e,t);case 4:return tE(e,e.stateNode.containerInfo),r=e.pendingProps,n===null?e.child=ac(e,null,r,t):an(n,e,r,t),e.child;case 11:return r=e.type,i=e.pendingProps,i=e.elementType===r?i:wr(r,i),U1(n,e,r,i,t);case 7:return an(n,e,e.pendingProps,t),e.child;case 8:return an(n,e,e.pendingProps.children,t),e.child;case 12:return an(n,e,e.pendingProps.children,t),e.child;case 10:e:{if(r=e.type._context,i=e.pendingProps,s=e.memoizedProps,o=i.value,Ue(Mm,r._currentValue),r._currentValue=o,s!==null)if(Nr(s.value,o)){if(s.children===i.children&&!Cn.current){e=qi(n,e,t);break e}}else for(s=e.child,s!==null&&(s.return=e);s!==null;){var a=s.dependencies;if(a!==null){o=s.child;for(var l=a.firstContext;l!==null;){if(l.context===r){if(s.tag===1){l=ji(-1,t&-t),l.tag=2;var c=s.updateQueue;if(c!==null){c=c.shared;var h=c.pending;h===null?l.next=l:(l.next=h.next,h.next=l),c.pending=l}}s.lanes|=t,l=s.alternate,l!==null&&(l.lanes|=t),Hw(s.return,t,e),a.lanes|=t;break}l=l.next}}else if(s.tag===10)o=s.type===e.type?null:s.child;else if(s.tag===18){if(o=s.return,o===null)throw Error(J(341));o.lanes|=t,a=o.alternate,a!==null&&(a.lanes|=t),Hw(o,t,e),o=s.sibling}else o=s.child;if(o!==null)o.return=s;else for(o=s;o!==null;){if(o===e){o=null;break}if(s=o.sibling,s!==null){s.return=o.return,o=s;break}o=o.return}s=o}an(n,e,i.children,t),e=e.child}return e;case 9:return i=e.type,r=e.pendingProps.children,ru(e,t),i=cr(i),r=r(i),e.flags|=1,an(n,e,r,t),e.child;case 14:return r=e.type,i=wr(r,e.pendingProps),i=wr(r.type,i),j1(n,e,r,i,t);case 15:return ZP(n,e,e.type,e.pendingProps,t);case 17:return r=e.type,i=e.pendingProps,i=e.elementType===r?i:wr(r,i),Wp(n,e),e.tag=1,kn(r)?(n=!0,Om(e)):n=!1,ru(e,t),JP(e,r,i),Kw(e,r,i,t),Ww(null,e,r,!0,n,t);case 19:return iR(n,e,t);case 22:return eR(n,e,t)}throw Error(J(156,e.tag))};function _R(n,e){return QS(n,e)}function BV(n,e,t,r){this.tag=n,this.key=t,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=e,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=r,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function or(n,e,t,r){return new BV(n,e,t,r)}function gE(n){return n=n.prototype,!(!n||!n.isReactComponent)}function FV(n){if(typeof n=="function")return gE(n)?1:0;if(n!=null){if(n=n.$$typeof,n===L_)return 11;if(n===V_)return 14}return 2}function no(n,e){var t=n.alternate;return t===null?(t=or(n.tag,e,n.key,n.mode),t.elementType=n.elementType,t.type=n.type,t.stateNode=n.stateNode,t.alternate=n,n.alternate=t):(t.pendingProps=e,t.type=n.type,t.flags=0,t.subtreeFlags=0,t.deletions=null),t.flags=n.flags&14680064,t.childLanes=n.childLanes,t.lanes=n.lanes,t.child=n.child,t.memoizedProps=n.memoizedProps,t.memoizedState=n.memoizedState,t.updateQueue=n.updateQueue,e=n.dependencies,t.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext},t.sibling=n.sibling,t.index=n.index,t.ref=n.ref,t}function Xp(n,e,t,r,i,s){var o=2;if(r=n,typeof n=="function")gE(n)&&(o=1);else if(typeof n=="string")o=5;else e:switch(n){case Ll:return Ca(t.children,i,s,e);case O_:o=8,i|=8;break;case gw:return n=or(12,t,e,i|2),n.elementType=gw,n.lanes=s,n;case yw:return n=or(13,t,e,i),n.elementType=yw,n.lanes=s,n;case ww:return n=or(19,t,e,i),n.elementType=ww,n.lanes=s,n;case CS:return Yg(t,i,s,e);default:if(typeof n=="object"&&n!==null)switch(n.$$typeof){case PS:o=10;break e;case RS:o=9;break e;case L_:o=11;break e;case V_:o=14;break e;case ys:o=16,r=null;break e}throw Error(J(130,n==null?n:typeof n,""))}return e=or(o,t,e,i),e.elementType=n,e.type=r,e.lanes=s,e}function Ca(n,e,t,r){return n=or(7,n,r,e),n.lanes=t,n}function Yg(n,e,t,r){return n=or(22,n,r,e),n.elementType=CS,n.lanes=t,n.stateNode={isHidden:!1},n}function V0(n,e,t){return n=or(6,n,null,e),n.lanes=t,n}function M0(n,e,t){return e=or(4,n.children!==null?n.children:[],n.key,e),e.lanes=t,e.stateNode={containerInfo:n.containerInfo,pendingChildren:null,implementation:n.implementation},e}function UV(n,e,t,r,i){this.tag=e,this.containerInfo=n,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=y0(0),this.expirationTimes=y0(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=y0(0),this.identifierPrefix=r,this.onRecoverableError=i,this.mutableSourceEagerHydrationData=null}function yE(n,e,t,r,i,s,o,a,l){return n=new UV(n,e,t,a,l),e===1?(e=1,s===!0&&(e|=8)):e=0,s=or(3,null,null,e),n.current=s,s.stateNode=n,s.memoizedState={element:r,isDehydrated:t,cache:null,transitions:null,pendingSuspenseBoundaries:null},eE(s),n}function jV(n,e,t){var r=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:Ol,key:r==null?null:""+r,children:n,containerInfo:e,implementation:t}}function ER(n){if(!n)return fo;n=n._reactInternals;e:{if(nl(n)!==n||n.tag!==1)throw Error(J(170));var e=n;do{switch(e.tag){case 3:e=e.stateNode.context;break e;case 1:if(kn(e.type)){e=e.stateNode.__reactInternalMemoizedMergedChildContext;break e}}e=e.return}while(e!==null);throw Error(J(171))}if(n.tag===1){var t=n.type;if(kn(t))return EP(n,t,e)}return e}function AR(n,e,t,r,i,s,o,a,l){return n=yE(t,r,!0,n,i,s,o,a,l),n.context=ER(null),t=n.current,r=mn(),i=to(t),s=ji(r,i),s.callback=e??null,Zs(t,s,i),n.current.lanes=i,vf(n,i,r),Nn(n,r),n}function Xg(n,e,t,r){var i=e.current,s=mn(),o=to(i);return t=ER(t),e.context===null?e.context=t:e.pendingContext=t,e=ji(s,o),e.payload={element:n},r=r===void 0?null:r,r!==null&&(e.callback=r),n=Zs(i,e,o),n!==null&&(kr(n,i,o,s),Kp(n,i,o)),o}function Qm(n){if(n=n.current,!n.child)return null;switch(n.child.tag){case 5:return n.child.stateNode;default:return n.child.stateNode}}function Z1(n,e){if(n=n.memoizedState,n!==null&&n.dehydrated!==null){var t=n.retryLane;n.retryLane=t!==0&&t<e?t:e}}function wE(n,e){Z1(n,e),(n=n.alternate)&&Z1(n,e)}function zV(){return null}var IR=typeof reportError=="function"?reportError:function(n){console.error(n)};function vE(n){this._internalRoot=n}Zg.prototype.render=vE.prototype.render=function(n){var e=this._internalRoot;if(e===null)throw Error(J(409));Xg(n,e,null,null)};Zg.prototype.unmount=vE.prototype.unmount=function(){var n=this._internalRoot;if(n!==null){this._internalRoot=null;var e=n.containerInfo;Fa(function(){Xg(null,n,null,null)}),e[Ki]=null}};function Zg(n){this._internalRoot=n}Zg.prototype.unstable_scheduleHydration=function(n){if(n){var e=eP();n={blockedOn:null,target:n,priority:e};for(var t=0;t<_s.length&&e!==0&&e<_s[t].priority;t++);_s.splice(t,0,n),t===0&&nP(n)}};function _E(n){return!(!n||n.nodeType!==1&&n.nodeType!==9&&n.nodeType!==11)}function ey(n){return!(!n||n.nodeType!==1&&n.nodeType!==9&&n.nodeType!==11&&(n.nodeType!==8||n.nodeValue!==" react-mount-point-unstable "))}function eT(){}function GV(n,e,t,r,i){if(i){if(typeof r=="function"){var s=r;r=function(){var c=Qm(o);s.call(c)}}var o=AR(e,r,n,0,null,!1,!1,"",eT);return n._reactRootContainer=o,n[Ki]=o.current,fd(n.nodeType===8?n.parentNode:n),Fa(),o}for(;i=n.lastChild;)n.removeChild(i);if(typeof r=="function"){var a=r;r=function(){var c=Qm(l);a.call(c)}}var l=yE(n,0,!1,null,null,!1,!1,"",eT);return n._reactRootContainer=l,n[Ki]=l.current,fd(n.nodeType===8?n.parentNode:n),Fa(function(){Xg(e,l,t,r)}),l}function ty(n,e,t,r,i){var s=t._reactRootContainer;if(s){var o=s;if(typeof i=="function"){var a=i;i=function(){var l=Qm(o);a.call(l)}}Xg(e,o,n,i)}else o=GV(t,e,n,i,r);return Qm(o)}XS=function(n){switch(n.tag){case 3:var e=n.stateNode;if(e.current.memoizedState.isDehydrated){var t=xh(e.pendingLanes);t!==0&&(F_(e,t|1),Nn(e,lt()),!(Pe&6)&&(cc=lt()+500,Ao()))}break;case 13:Fa(function(){var r=Qi(n,1);if(r!==null){var i=mn();kr(r,n,1,i)}}),wE(n,1)}};U_=function(n){if(n.tag===13){var e=Qi(n,134217728);if(e!==null){var t=mn();kr(e,n,134217728,t)}wE(n,134217728)}};ZS=function(n){if(n.tag===13){var e=to(n),t=Qi(n,e);if(t!==null){var r=mn();kr(t,n,e,r)}wE(n,e)}};eP=function(){return Le};tP=function(n,e){var t=Le;try{return Le=n,e()}finally{Le=t}};Pw=function(n,e,t){switch(e){case"input":if(Ew(n,t),e=t.name,t.type==="radio"&&e!=null){for(t=n;t.parentNode;)t=t.parentNode;for(t=t.querySelectorAll("input[name="+JSON.stringify(""+e)+'][type="radio"]'),e=0;e<t.length;e++){var r=t[e];if(r!==n&&r.form===n.form){var i=$g(r);if(!i)throw Error(J(90));NS(r),Ew(r,i)}}}break;case"textarea":OS(n,t);break;case"select":e=t.value,e!=null&&Zl(n,!!t.multiple,e,!1)}};jS=fE;zS=Fa;var HV={usingClientEntryPoint:!1,Events:[Ef,Fl,$g,FS,US,fE]},ph={findFiberByHostInstance:Zo,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},$V={bundleType:ph.bundleType,version:ph.version,rendererPackageName:ph.rendererPackageName,rendererConfig:ph.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:ts.ReactCurrentDispatcher,findHostInstanceByFiber:function(n){return n=$S(n),n===null?null:n.stateNode},findFiberByHostInstance:ph.findFiberByHostInstance||zV,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Ap=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Ap.isDisabled&&Ap.supportsFiber)try{jg=Ap.inject($V),ni=Ap}catch{}}qn.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=HV;qn.createPortal=function(n,e){var t=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!_E(e))throw Error(J(200));return jV(n,e,null,t)};qn.createRoot=function(n,e){if(!_E(n))throw Error(J(299));var t=!1,r="",i=IR;return e!=null&&(e.unstable_strictMode===!0&&(t=!0),e.identifierPrefix!==void 0&&(r=e.identifierPrefix),e.onRecoverableError!==void 0&&(i=e.onRecoverableError)),e=yE(n,1,!1,null,null,t,!1,r,i),n[Ki]=e.current,fd(n.nodeType===8?n.parentNode:n),new vE(e)};qn.findDOMNode=function(n){if(n==null)return null;if(n.nodeType===1)return n;var e=n._reactInternals;if(e===void 0)throw typeof n.render=="function"?Error(J(188)):(n=Object.keys(n).join(","),Error(J(268,n)));return n=$S(e),n=n===null?null:n.stateNode,n};qn.flushSync=function(n){return Fa(n)};qn.hydrate=function(n,e,t){if(!ey(e))throw Error(J(200));return ty(null,n,e,!0,t)};qn.hydrateRoot=function(n,e,t){if(!_E(n))throw Error(J(405));var r=t!=null&&t.hydratedSources||null,i=!1,s="",o=IR;if(t!=null&&(t.unstable_strictMode===!0&&(i=!0),t.identifierPrefix!==void 0&&(s=t.identifierPrefix),t.onRecoverableError!==void 0&&(o=t.onRecoverableError)),e=AR(e,null,n,1,t??null,i,!1,s,o),n[Ki]=e.current,fd(n),r)for(n=0;n<r.length;n++)t=r[n],i=t._getVersion,i=i(t._source),e.mutableSourceEagerHydrationData==null?e.mutableSourceEagerHydrationData=[t,i]:e.mutableSourceEagerHydrationData.push(t,i);return new Zg(e)};qn.render=function(n,e,t){if(!ey(e))throw Error(J(200));return ty(null,n,e,!1,t)};qn.unmountComponentAtNode=function(n){if(!ey(n))throw Error(J(40));return n._reactRootContainer?(Fa(function(){ty(null,null,n,!1,function(){n._reactRootContainer=null,n[Ki]=null})}),!0):!1};qn.unstable_batchedUpdates=fE;qn.unstable_renderSubtreeIntoContainer=function(n,e,t,r){if(!ey(t))throw Error(J(200));if(n==null||n._reactInternals===void 0)throw Error(J(38));return ty(n,e,t,!1,r)};qn.version="18.3.1-next-f1338f8080-20240426";function TR(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(TR)}catch(n){console.error(n)}}TR(),TS.exports=qn;var KV=TS.exports,tT=KV;pw.createRoot=tT.createRoot,pw.hydrateRoot=tT.hydrateRoot;/**
 * @remix-run/router v1.23.0
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function Ad(){return Ad=Object.assign?Object.assign.bind():function(n){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(n[r]=t[r])}return n},Ad.apply(this,arguments)}var Qs;(function(n){n.Pop="POP",n.Push="PUSH",n.Replace="REPLACE"})(Qs||(Qs={}));const nT="popstate";function QV(n){n===void 0&&(n={});function e(r,i){let{pathname:s,search:o,hash:a}=r.location;return av("",{pathname:s,search:o,hash:a},i.state&&i.state.usr||null,i.state&&i.state.key||"default")}function t(r,i){return typeof i=="string"?i:qm(i)}return WV(e,t,null,n)}function ft(n,e){if(n===!1||n===null||typeof n>"u")throw new Error(e)}function bR(n,e){if(!n){typeof console<"u"&&console.warn(e);try{throw new Error(e)}catch{}}}function qV(){return Math.random().toString(36).substr(2,8)}function rT(n,e){return{usr:n.state,key:n.key,idx:e}}function av(n,e,t,r){return t===void 0&&(t=null),Ad({pathname:typeof n=="string"?n:n.pathname,search:"",hash:""},typeof e=="string"?Dc(e):e,{state:t,key:e&&e.key||r||qV()})}function qm(n){let{pathname:e="/",search:t="",hash:r=""}=n;return t&&t!=="?"&&(e+=t.charAt(0)==="?"?t:"?"+t),r&&r!=="#"&&(e+=r.charAt(0)==="#"?r:"#"+r),e}function Dc(n){let e={};if(n){let t=n.indexOf("#");t>=0&&(e.hash=n.substr(t),n=n.substr(0,t));let r=n.indexOf("?");r>=0&&(e.search=n.substr(r),n=n.substr(0,r)),n&&(e.pathname=n)}return e}function WV(n,e,t,r){r===void 0&&(r={});let{window:i=document.defaultView,v5Compat:s=!1}=r,o=i.history,a=Qs.Pop,l=null,c=h();c==null&&(c=0,o.replaceState(Ad({},o.state,{idx:c}),""));function h(){return(o.state||{idx:null}).idx}function d(){a=Qs.Pop;let x=h(),w=x==null?null:x-c;c=x,l&&l({action:a,location:v.location,delta:w})}function p(x,w){a=Qs.Push;let E=av(v.location,x,w);t&&t(E,x),c=h()+1;let T=rT(E,c),L=v.createHref(E);try{o.pushState(T,"",L)}catch(F){if(F instanceof DOMException&&F.name==="DataCloneError")throw F;i.location.assign(L)}s&&l&&l({action:a,location:v.location,delta:1})}function g(x,w){a=Qs.Replace;let E=av(v.location,x,w);t&&t(E,x),c=h();let T=rT(E,c),L=v.createHref(E);o.replaceState(T,"",L),s&&l&&l({action:a,location:v.location,delta:0})}function A(x){let w=i.location.origin!=="null"?i.location.origin:i.location.href,E=typeof x=="string"?x:qm(x);return E=E.replace(/ $/,"%20"),ft(w,"No window.location.(origin|href) available to create URL for href: "+E),new URL(E,w)}let v={get action(){return a},get location(){return n(i,o)},listen(x){if(l)throw new Error("A history only accepts one active listener");return i.addEventListener(nT,d),l=x,()=>{i.removeEventListener(nT,d),l=null}},createHref(x){return e(i,x)},createURL:A,encodeLocation(x){let w=A(x);return{pathname:w.pathname,search:w.search,hash:w.hash}},push:p,replace:g,go(x){return o.go(x)}};return v}var iT;(function(n){n.data="data",n.deferred="deferred",n.redirect="redirect",n.error="error"})(iT||(iT={}));function JV(n,e,t){return t===void 0&&(t="/"),YV(n,e,t,!1)}function YV(n,e,t,r){let i=typeof e=="string"?Dc(e):e,s=EE(i.pathname||"/",t);if(s==null)return null;let o=xR(n);XV(o);let a=null;for(let l=0;a==null&&l<o.length;++l){let c=uM(s);a=aM(o[l],c,r)}return a}function xR(n,e,t,r){e===void 0&&(e=[]),t===void 0&&(t=[]),r===void 0&&(r="");let i=(s,o,a)=>{let l={relativePath:a===void 0?s.path||"":a,caseSensitive:s.caseSensitive===!0,childrenIndex:o,route:s};l.relativePath.startsWith("/")&&(ft(l.relativePath.startsWith(r),'Absolute route path "'+l.relativePath+'" nested under path '+('"'+r+'" is not valid. An absolute child route path ')+"must start with the combined path of all its parent routes."),l.relativePath=l.relativePath.slice(r.length));let c=ro([r,l.relativePath]),h=t.concat(l);s.children&&s.children.length>0&&(ft(s.index!==!0,"Index routes must not have child routes. Please remove "+('all child routes from route path "'+c+'".')),xR(s.children,e,h,c)),!(s.path==null&&!s.index)&&e.push({path:c,score:sM(c,s.index),routesMeta:h})};return n.forEach((s,o)=>{var a;if(s.path===""||!((a=s.path)!=null&&a.includes("?")))i(s,o);else for(let l of SR(s.path))i(s,o,l)}),e}function SR(n){let e=n.split("/");if(e.length===0)return[];let[t,...r]=e,i=t.endsWith("?"),s=t.replace(/\?$/,"");if(r.length===0)return i?[s,""]:[s];let o=SR(r.join("/")),a=[];return a.push(...o.map(l=>l===""?s:[s,l].join("/"))),i&&a.push(...o),a.map(l=>n.startsWith("/")&&l===""?"/":l)}function XV(n){n.sort((e,t)=>e.score!==t.score?t.score-e.score:oM(e.routesMeta.map(r=>r.childrenIndex),t.routesMeta.map(r=>r.childrenIndex)))}const ZV=/^:[\w-]+$/,eM=3,tM=2,nM=1,rM=10,iM=-2,sT=n=>n==="*";function sM(n,e){let t=n.split("/"),r=t.length;return t.some(sT)&&(r+=iM),e&&(r+=tM),t.filter(i=>!sT(i)).reduce((i,s)=>i+(ZV.test(s)?eM:s===""?nM:rM),r)}function oM(n,e){return n.length===e.length&&n.slice(0,-1).every((r,i)=>r===e[i])?n[n.length-1]-e[e.length-1]:0}function aM(n,e,t){t===void 0&&(t=!1);let{routesMeta:r}=n,i={},s="/",o=[];for(let a=0;a<r.length;++a){let l=r[a],c=a===r.length-1,h=s==="/"?e:e.slice(s.length)||"/",d=oT({path:l.relativePath,caseSensitive:l.caseSensitive,end:c},h),p=l.route;if(!d&&c&&t&&!r[r.length-1].route.index&&(d=oT({path:l.relativePath,caseSensitive:l.caseSensitive,end:!1},h)),!d)return null;Object.assign(i,d.params),o.push({params:i,pathname:ro([s,d.pathname]),pathnameBase:fM(ro([s,d.pathnameBase])),route:p}),d.pathnameBase!=="/"&&(s=ro([s,d.pathnameBase]))}return o}function oT(n,e){typeof n=="string"&&(n={path:n,caseSensitive:!1,end:!0});let[t,r]=lM(n.path,n.caseSensitive,n.end),i=e.match(t);if(!i)return null;let s=i[0],o=s.replace(/(.)\/+$/,"$1"),a=i.slice(1);return{params:r.reduce((c,h,d)=>{let{paramName:p,isOptional:g}=h;if(p==="*"){let v=a[d]||"";o=s.slice(0,s.length-v.length).replace(/(.)\/+$/,"$1")}const A=a[d];return g&&!A?c[p]=void 0:c[p]=(A||"").replace(/%2F/g,"/"),c},{}),pathname:s,pathnameBase:o,pattern:n}}function lM(n,e,t){e===void 0&&(e=!1),t===void 0&&(t=!0),bR(n==="*"||!n.endsWith("*")||n.endsWith("/*"),'Route path "'+n+'" will be treated as if it were '+('"'+n.replace(/\*$/,"/*")+'" because the `*` character must ')+"always follow a `/` in the pattern. To get rid of this warning, "+('please change the route path to "'+n.replace(/\*$/,"/*")+'".'));let r=[],i="^"+n.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(o,a,l)=>(r.push({paramName:a,isOptional:l!=null}),l?"/?([^\\/]+)?":"/([^\\/]+)"));return n.endsWith("*")?(r.push({paramName:"*"}),i+=n==="*"||n==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):t?i+="\\/*$":n!==""&&n!=="/"&&(i+="(?:(?=\\/|$))"),[new RegExp(i,e?void 0:"i"),r]}function uM(n){try{return n.split("/").map(e=>decodeURIComponent(e).replace(/\//g,"%2F")).join("/")}catch(e){return bR(!1,'The URL path "'+n+'" could not be decoded because it is is a malformed URL segment. This is probably due to a bad percent '+("encoding ("+e+").")),n}}function EE(n,e){if(e==="/")return n;if(!n.toLowerCase().startsWith(e.toLowerCase()))return null;let t=e.endsWith("/")?e.length-1:e.length,r=n.charAt(t);return r&&r!=="/"?null:n.slice(t)||"/"}function cM(n,e){e===void 0&&(e="/");let{pathname:t,search:r="",hash:i=""}=typeof n=="string"?Dc(n):n;return{pathname:t?t.startsWith("/")?t:hM(t,e):e,search:pM(r),hash:mM(i)}}function hM(n,e){let t=e.replace(/\/+$/,"").split("/");return n.split("/").forEach(i=>{i===".."?t.length>1&&t.pop():i!=="."&&t.push(i)}),t.length>1?t.join("/"):"/"}function B0(n,e,t,r){return"Cannot include a '"+n+"' character in a manually specified "+("`to."+e+"` field ["+JSON.stringify(r)+"].  Please separate it out to the ")+("`to."+t+"` field. Alternatively you may provide the full path as ")+'a string in <Link to="..."> and the router will parse it for you.'}function dM(n){return n.filter((e,t)=>t===0||e.route.path&&e.route.path.length>0)}function PR(n,e){let t=dM(n);return e?t.map((r,i)=>i===t.length-1?r.pathname:r.pathnameBase):t.map(r=>r.pathnameBase)}function RR(n,e,t,r){r===void 0&&(r=!1);let i;typeof n=="string"?i=Dc(n):(i=Ad({},n),ft(!i.pathname||!i.pathname.includes("?"),B0("?","pathname","search",i)),ft(!i.pathname||!i.pathname.includes("#"),B0("#","pathname","hash",i)),ft(!i.search||!i.search.includes("#"),B0("#","search","hash",i)));let s=n===""||i.pathname==="",o=s?"/":i.pathname,a;if(o==null)a=t;else{let d=e.length-1;if(!r&&o.startsWith("..")){let p=o.split("/");for(;p[0]==="..";)p.shift(),d-=1;i.pathname=p.join("/")}a=d>=0?e[d]:"/"}let l=cM(i,a),c=o&&o!=="/"&&o.endsWith("/"),h=(s||o===".")&&t.endsWith("/");return!l.pathname.endsWith("/")&&(c||h)&&(l.pathname+="/"),l}const ro=n=>n.join("/").replace(/\/\/+/g,"/"),fM=n=>n.replace(/\/+$/,"").replace(/^\/*/,"/"),pM=n=>!n||n==="?"?"":n.startsWith("?")?n:"?"+n,mM=n=>!n||n==="#"?"":n.startsWith("#")?n:"#"+n;function gM(n){return n!=null&&typeof n.status=="number"&&typeof n.statusText=="string"&&typeof n.internal=="boolean"&&"data"in n}const CR=["post","put","patch","delete"];new Set(CR);const yM=["get",...CR];new Set(yM);/**
 * React Router v6.30.0
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function Id(){return Id=Object.assign?Object.assign.bind():function(n){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(n[r]=t[r])}return n},Id.apply(this,arguments)}const AE=G.createContext(null),wM=G.createContext(null),rl=G.createContext(null),ny=G.createContext(null),il=G.createContext({outlet:null,matches:[],isDataRoute:!1}),kR=G.createContext(null);function vM(n,e){let{relative:t}=e===void 0?{}:e;If()||ft(!1);let{basename:r,navigator:i}=G.useContext(rl),{hash:s,pathname:o,search:a}=DR(n,{relative:t}),l=o;return r!=="/"&&(l=o==="/"?r:ro([r,o])),i.createHref({pathname:l,search:a,hash:s})}function If(){return G.useContext(ny)!=null}function ry(){return If()||ft(!1),G.useContext(ny).location}function NR(n){G.useContext(rl).static||G.useLayoutEffect(n)}function _M(){let{isDataRoute:n}=G.useContext(il);return n?DM():EM()}function EM(){If()||ft(!1);let n=G.useContext(AE),{basename:e,future:t,navigator:r}=G.useContext(rl),{matches:i}=G.useContext(il),{pathname:s}=ry(),o=JSON.stringify(PR(i,t.v7_relativeSplatPath)),a=G.useRef(!1);return NR(()=>{a.current=!0}),G.useCallback(function(c,h){if(h===void 0&&(h={}),!a.current)return;if(typeof c=="number"){r.go(c);return}let d=RR(c,JSON.parse(o),s,h.relative==="path");n==null&&e!=="/"&&(d.pathname=d.pathname==="/"?e:ro([e,d.pathname])),(h.replace?r.replace:r.push)(d,h.state,h)},[e,r,o,s,n])}function DR(n,e){let{relative:t}=e===void 0?{}:e,{future:r}=G.useContext(rl),{matches:i}=G.useContext(il),{pathname:s}=ry(),o=JSON.stringify(PR(i,r.v7_relativeSplatPath));return G.useMemo(()=>RR(n,JSON.parse(o),s,t==="path"),[n,o,s,t])}function AM(n,e){return IM(n,e)}function IM(n,e,t,r){If()||ft(!1);let{navigator:i,static:s}=G.useContext(rl),{matches:o}=G.useContext(il),a=o[o.length-1],l=a?a.params:{};a&&a.pathname;let c=a?a.pathnameBase:"/";a&&a.route;let h=ry(),d;if(e){var p;let w=typeof e=="string"?Dc(e):e;c==="/"||(p=w.pathname)!=null&&p.startsWith(c)||ft(!1),d=w}else d=h;let g=d.pathname||"/",A=g;if(c!=="/"){let w=c.replace(/^\//,"").split("/");A="/"+g.replace(/^\//,"").split("/").slice(w.length).join("/")}let v=!s&&t&&t.matches&&t.matches.length>0?t.matches:JV(n,{pathname:A}),x=PM(v&&v.map(w=>Object.assign({},w,{params:Object.assign({},l,w.params),pathname:ro([c,i.encodeLocation?i.encodeLocation(w.pathname).pathname:w.pathname]),pathnameBase:w.pathnameBase==="/"?c:ro([c,i.encodeLocation?i.encodeLocation(w.pathnameBase).pathname:w.pathnameBase])})),o,t,r);return e&&x?G.createElement(ny.Provider,{value:{location:Id({pathname:"/",search:"",hash:"",state:null,key:"default"},d),navigationType:Qs.Pop}},x):x}function TM(){let n=NM(),e=gM(n)?n.status+" "+n.statusText:n instanceof Error?n.message:JSON.stringify(n),t=n instanceof Error?n.stack:null,i={padding:"0.5rem",backgroundColor:"rgba(200,200,200, 0.5)"},s=null;return G.createElement(G.Fragment,null,G.createElement("h2",null,"Unexpected Application Error!"),G.createElement("h3",{style:{fontStyle:"italic"}},e),t?G.createElement("pre",{style:i},t):null,s)}const bM=G.createElement(TM,null);class xM extends G.Component{constructor(e){super(e),this.state={location:e.location,revalidation:e.revalidation,error:e.error}}static getDerivedStateFromError(e){return{error:e}}static getDerivedStateFromProps(e,t){return t.location!==e.location||t.revalidation!=="idle"&&e.revalidation==="idle"?{error:e.error,location:e.location,revalidation:e.revalidation}:{error:e.error!==void 0?e.error:t.error,location:t.location,revalidation:e.revalidation||t.revalidation}}componentDidCatch(e,t){console.error("React Router caught the following error during render",e,t)}render(){return this.state.error!==void 0?G.createElement(il.Provider,{value:this.props.routeContext},G.createElement(kR.Provider,{value:this.state.error,children:this.props.component})):this.props.children}}function SM(n){let{routeContext:e,match:t,children:r}=n,i=G.useContext(AE);return i&&i.static&&i.staticContext&&(t.route.errorElement||t.route.ErrorBoundary)&&(i.staticContext._deepestRenderedBoundaryId=t.route.id),G.createElement(il.Provider,{value:e},r)}function PM(n,e,t,r){var i;if(e===void 0&&(e=[]),t===void 0&&(t=null),r===void 0&&(r=null),n==null){var s;if(!t)return null;if(t.errors)n=t.matches;else if((s=r)!=null&&s.v7_partialHydration&&e.length===0&&!t.initialized&&t.matches.length>0)n=t.matches;else return null}let o=n,a=(i=t)==null?void 0:i.errors;if(a!=null){let h=o.findIndex(d=>d.route.id&&(a==null?void 0:a[d.route.id])!==void 0);h>=0||ft(!1),o=o.slice(0,Math.min(o.length,h+1))}let l=!1,c=-1;if(t&&r&&r.v7_partialHydration)for(let h=0;h<o.length;h++){let d=o[h];if((d.route.HydrateFallback||d.route.hydrateFallbackElement)&&(c=h),d.route.id){let{loaderData:p,errors:g}=t,A=d.route.loader&&p[d.route.id]===void 0&&(!g||g[d.route.id]===void 0);if(d.route.lazy||A){l=!0,c>=0?o=o.slice(0,c+1):o=[o[0]];break}}}return o.reduceRight((h,d,p)=>{let g,A=!1,v=null,x=null;t&&(g=a&&d.route.id?a[d.route.id]:void 0,v=d.route.errorElement||bM,l&&(c<0&&p===0?(OM("route-fallback",!1),A=!0,x=null):c===p&&(A=!0,x=d.route.hydrateFallbackElement||null)));let w=e.concat(o.slice(0,p+1)),E=()=>{let T;return g?T=v:A?T=x:d.route.Component?T=G.createElement(d.route.Component,null):d.route.element?T=d.route.element:T=h,G.createElement(SM,{match:d,routeContext:{outlet:h,matches:w,isDataRoute:t!=null},children:T})};return t&&(d.route.ErrorBoundary||d.route.errorElement||p===0)?G.createElement(xM,{location:t.location,revalidation:t.revalidation,component:v,error:g,children:E(),routeContext:{outlet:null,matches:w,isDataRoute:!0}}):E()},null)}var OR=function(n){return n.UseBlocker="useBlocker",n.UseRevalidator="useRevalidator",n.UseNavigateStable="useNavigate",n}(OR||{}),Wm=function(n){return n.UseBlocker="useBlocker",n.UseLoaderData="useLoaderData",n.UseActionData="useActionData",n.UseRouteError="useRouteError",n.UseNavigation="useNavigation",n.UseRouteLoaderData="useRouteLoaderData",n.UseMatches="useMatches",n.UseRevalidator="useRevalidator",n.UseNavigateStable="useNavigate",n.UseRouteId="useRouteId",n}(Wm||{});function RM(n){let e=G.useContext(AE);return e||ft(!1),e}function CM(n){let e=G.useContext(wM);return e||ft(!1),e}function kM(n){let e=G.useContext(il);return e||ft(!1),e}function LR(n){let e=kM(),t=e.matches[e.matches.length-1];return t.route.id||ft(!1),t.route.id}function NM(){var n;let e=G.useContext(kR),t=CM(Wm.UseRouteError),r=LR(Wm.UseRouteError);return e!==void 0?e:(n=t.errors)==null?void 0:n[r]}function DM(){let{router:n}=RM(OR.UseNavigateStable),e=LR(Wm.UseNavigateStable),t=G.useRef(!1);return NR(()=>{t.current=!0}),G.useCallback(function(i,s){s===void 0&&(s={}),t.current&&(typeof i=="number"?n.navigate(i):n.navigate(i,Id({fromRouteId:e},s)))},[n,e])}const aT={};function OM(n,e,t){!e&&!aT[n]&&(aT[n]=!0)}function LM(n,e){n==null||n.v7_startTransition,(n==null?void 0:n.v7_relativeSplatPath)===void 0&&(!e||e.v7_relativeSplatPath),e&&(e.v7_fetcherPersist,e.v7_normalizeFormMethod,e.v7_partialHydration,e.v7_skipActionErrorRevalidation)}function Ph(n){ft(!1)}function VM(n){let{basename:e="/",children:t=null,location:r,navigationType:i=Qs.Pop,navigator:s,static:o=!1,future:a}=n;If()&&ft(!1);let l=e.replace(/^\/*/,"/"),c=G.useMemo(()=>({basename:l,navigator:s,static:o,future:Id({v7_relativeSplatPath:!1},a)}),[l,a,s,o]);typeof r=="string"&&(r=Dc(r));let{pathname:h="/",search:d="",hash:p="",state:g=null,key:A="default"}=r,v=G.useMemo(()=>{let x=EE(h,l);return x==null?null:{location:{pathname:x,search:d,hash:p,state:g,key:A},navigationType:i}},[l,h,d,p,g,A,i]);return v==null?null:G.createElement(rl.Provider,{value:c},G.createElement(ny.Provider,{children:t,value:v}))}function MM(n){let{children:e,location:t}=n;return AM(lv(e),t)}new Promise(()=>{});function lv(n,e){e===void 0&&(e=[]);let t=[];return G.Children.forEach(n,(r,i)=>{if(!G.isValidElement(r))return;let s=[...e,i];if(r.type===G.Fragment){t.push.apply(t,lv(r.props.children,s));return}r.type!==Ph&&ft(!1),!r.props.index||!r.props.children||ft(!1);let o={id:r.props.id||s.join("-"),caseSensitive:r.props.caseSensitive,element:r.props.element,Component:r.props.Component,index:r.props.index,path:r.props.path,loader:r.props.loader,action:r.props.action,errorElement:r.props.errorElement,ErrorBoundary:r.props.ErrorBoundary,hasErrorBoundary:r.props.ErrorBoundary!=null||r.props.errorElement!=null,shouldRevalidate:r.props.shouldRevalidate,handle:r.props.handle,lazy:r.props.lazy};r.props.children&&(o.children=lv(r.props.children,s)),t.push(o)}),t}/**
 * React Router DOM v6.30.0
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function uv(){return uv=Object.assign?Object.assign.bind():function(n){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(n[r]=t[r])}return n},uv.apply(this,arguments)}function BM(n,e){if(n==null)return{};var t={},r=Object.keys(n),i,s;for(s=0;s<r.length;s++)i=r[s],!(e.indexOf(i)>=0)&&(t[i]=n[i]);return t}function FM(n){return!!(n.metaKey||n.altKey||n.ctrlKey||n.shiftKey)}function UM(n,e){return n.button===0&&(!e||e==="_self")&&!FM(n)}const jM=["onClick","relative","reloadDocument","replace","state","target","to","preventScrollReset","viewTransition"],zM="6";try{window.__reactRouterVersion=zM}catch{}const GM="startTransition",lT=LO[GM];function HM(n){let{basename:e,children:t,future:r,window:i}=n,s=G.useRef();s.current==null&&(s.current=QV({window:i,v5Compat:!0}));let o=s.current,[a,l]=G.useState({action:o.action,location:o.location}),{v7_startTransition:c}=r||{},h=G.useCallback(d=>{c&&lT?lT(()=>l(d)):l(d)},[l,c]);return G.useLayoutEffect(()=>o.listen(h),[o,h]),G.useEffect(()=>LM(r),[r]),G.createElement(VM,{basename:e,children:t,location:a.location,navigationType:a.action,navigator:o,future:r})}const $M=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u",KM=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,mh=G.forwardRef(function(e,t){let{onClick:r,relative:i,reloadDocument:s,replace:o,state:a,target:l,to:c,preventScrollReset:h,viewTransition:d}=e,p=BM(e,jM),{basename:g}=G.useContext(rl),A,v=!1;if(typeof c=="string"&&KM.test(c)&&(A=c,$M))try{let T=new URL(window.location.href),L=c.startsWith("//")?new URL(T.protocol+c):new URL(c),F=EE(L.pathname,g);L.origin===T.origin&&F!=null?c=F+L.search+L.hash:v=!0}catch{}let x=vM(c,{relative:i}),w=QM(c,{replace:o,state:a,target:l,preventScrollReset:h,relative:i,viewTransition:d});function E(T){r&&r(T),T.defaultPrevented||w(T)}return G.createElement("a",uv({},p,{href:A||x,onClick:v||s?r:E,ref:t,target:l}))});var uT;(function(n){n.UseScrollRestoration="useScrollRestoration",n.UseSubmit="useSubmit",n.UseSubmitFetcher="useSubmitFetcher",n.UseFetcher="useFetcher",n.useViewTransitionState="useViewTransitionState"})(uT||(uT={}));var cT;(function(n){n.UseFetcher="useFetcher",n.UseFetchers="useFetchers",n.UseScrollRestoration="useScrollRestoration"})(cT||(cT={}));function QM(n,e){let{target:t,replace:r,state:i,preventScrollReset:s,relative:o,viewTransition:a}=e===void 0?{}:e,l=_M(),c=ry(),h=DR(n,{relative:o});return G.useCallback(d=>{if(UM(d,t)){d.preventDefault();let p=r!==void 0?r:qm(c)===qm(h);l(n,{replace:p,state:i,preventScrollReset:s,relative:o,viewTransition:a})}},[c,l,h,r,i,t,n,s,o,a])}let qM={data:""},WM=n=>typeof window=="object"?((n?n.querySelector("#_goober"):window._goober)||Object.assign((n||document.head).appendChild(document.createElement("style")),{innerHTML:" ",id:"_goober"})).firstChild:n||qM,JM=/(?:([\u0080-\uFFFF\w-%@]+) *:? *([^{;]+?);|([^;}{]*?) *{)|(}\s*)/g,YM=/\/\*[^]*?\*\/|  +/g,hT=/\n+/g,As=(n,e)=>{let t="",r="",i="";for(let s in n){let o=n[s];s[0]=="@"?s[1]=="i"?t=s+" "+o+";":r+=s[1]=="f"?As(o,s):s+"{"+As(o,s[1]=="k"?"":e)+"}":typeof o=="object"?r+=As(o,e?e.replace(/([^,])+/g,a=>s.replace(/([^,]*:\S+\([^)]*\))|([^,])+/g,l=>/&/.test(l)?l.replace(/&/g,a):a?a+" "+l:l)):s):o!=null&&(s=/^--/.test(s)?s:s.replace(/[A-Z]/g,"-$&").toLowerCase(),i+=As.p?As.p(s,o):s+":"+o+";")}return t+(e&&i?e+"{"+i+"}":i)+r},di={},VR=n=>{if(typeof n=="object"){let e="";for(let t in n)e+=t+VR(n[t]);return e}return n},XM=(n,e,t,r,i)=>{let s=VR(n),o=di[s]||(di[s]=(l=>{let c=0,h=11;for(;c<l.length;)h=101*h+l.charCodeAt(c++)>>>0;return"go"+h})(s));if(!di[o]){let l=s!==n?n:(c=>{let h,d,p=[{}];for(;h=JM.exec(c.replace(YM,""));)h[4]?p.shift():h[3]?(d=h[3].replace(hT," ").trim(),p.unshift(p[0][d]=p[0][d]||{})):p[0][h[1]]=h[2].replace(hT," ").trim();return p[0]})(n);di[o]=As(i?{["@keyframes "+o]:l}:l,t?"":"."+o)}let a=t&&di.g?di.g:null;return t&&(di.g=di[o]),((l,c,h,d)=>{d?c.data=c.data.replace(d,l):c.data.indexOf(l)===-1&&(c.data=h?l+c.data:c.data+l)})(di[o],e,r,a),o},ZM=(n,e,t)=>n.reduce((r,i,s)=>{let o=e[s];if(o&&o.call){let a=o(t),l=a&&a.props&&a.props.className||/^go/.test(a)&&a;o=l?"."+l:a&&typeof a=="object"?a.props?"":As(a,""):a===!1?"":a}return r+i+(o??"")},"");function iy(n){let e=this||{},t=n.call?n(e.p):n;return XM(t.unshift?t.raw?ZM(t,[].slice.call(arguments,1),e.p):t.reduce((r,i)=>Object.assign(r,i&&i.call?i(e.p):i),{}):t,WM(e.target),e.g,e.o,e.k)}let MR,cv,hv;iy.bind({g:1});let Wi=iy.bind({k:1});function eB(n,e,t,r){As.p=e,MR=n,cv=t,hv=r}function Io(n,e){let t=this||{};return function(){let r=arguments;function i(s,o){let a=Object.assign({},s),l=a.className||i.className;t.p=Object.assign({theme:cv&&cv()},a),t.o=/ *go\d+/.test(l),a.className=iy.apply(t,r)+(l?" "+l:""),e&&(a.ref=o);let c=n;return n[0]&&(c=a.as||n,delete a.as),hv&&c[0]&&hv(a),MR(c,a)}return e?e(i):i}}var tB=n=>typeof n=="function",Jm=(n,e)=>tB(n)?n(e):n,nB=(()=>{let n=0;return()=>(++n).toString()})(),BR=(()=>{let n;return()=>{if(n===void 0&&typeof window<"u"){let e=matchMedia("(prefers-reduced-motion: reduce)");n=!e||e.matches}return n}})(),rB=20,FR=(n,e)=>{switch(e.type){case 0:return{...n,toasts:[e.toast,...n.toasts].slice(0,rB)};case 1:return{...n,toasts:n.toasts.map(s=>s.id===e.toast.id?{...s,...e.toast}:s)};case 2:let{toast:t}=e;return FR(n,{type:n.toasts.find(s=>s.id===t.id)?1:0,toast:t});case 3:let{toastId:r}=e;return{...n,toasts:n.toasts.map(s=>s.id===r||r===void 0?{...s,dismissed:!0,visible:!1}:s)};case 4:return e.toastId===void 0?{...n,toasts:[]}:{...n,toasts:n.toasts.filter(s=>s.id!==e.toastId)};case 5:return{...n,pausedAt:e.time};case 6:let i=e.time-(n.pausedAt||0);return{...n,pausedAt:void 0,toasts:n.toasts.map(s=>({...s,pauseDuration:s.pauseDuration+i}))}}},Zp=[],na={toasts:[],pausedAt:void 0},sl=n=>{na=FR(na,n),Zp.forEach(e=>{e(na)})},iB={blank:4e3,error:4e3,success:2e3,loading:1/0,custom:4e3},sB=(n={})=>{let[e,t]=G.useState(na),r=G.useRef(na);G.useEffect(()=>(r.current!==na&&t(na),Zp.push(t),()=>{let s=Zp.indexOf(t);s>-1&&Zp.splice(s,1)}),[]);let i=e.toasts.map(s=>{var o,a,l;return{...n,...n[s.type],...s,removeDelay:s.removeDelay||((o=n[s.type])==null?void 0:o.removeDelay)||(n==null?void 0:n.removeDelay),duration:s.duration||((a=n[s.type])==null?void 0:a.duration)||(n==null?void 0:n.duration)||iB[s.type],style:{...n.style,...(l=n[s.type])==null?void 0:l.style,...s.style}}});return{...e,toasts:i}},oB=(n,e="blank",t)=>({createdAt:Date.now(),visible:!0,dismissed:!1,type:e,ariaProps:{role:"status","aria-live":"polite"},message:n,pauseDuration:0,...t,id:(t==null?void 0:t.id)||nB()}),Tf=n=>(e,t)=>{let r=oB(e,n,t);return sl({type:2,toast:r}),r.id},Je=(n,e)=>Tf("blank")(n,e);Je.error=Tf("error");Je.success=Tf("success");Je.loading=Tf("loading");Je.custom=Tf("custom");Je.dismiss=n=>{sl({type:3,toastId:n})};Je.remove=n=>sl({type:4,toastId:n});Je.promise=(n,e,t)=>{let r=Je.loading(e.loading,{...t,...t==null?void 0:t.loading});return typeof n=="function"&&(n=n()),n.then(i=>{let s=e.success?Jm(e.success,i):void 0;return s?Je.success(s,{id:r,...t,...t==null?void 0:t.success}):Je.dismiss(r),i}).catch(i=>{let s=e.error?Jm(e.error,i):void 0;s?Je.error(s,{id:r,...t,...t==null?void 0:t.error}):Je.dismiss(r)}),n};var aB=(n,e)=>{sl({type:1,toast:{id:n,height:e}})},lB=()=>{sl({type:5,time:Date.now()})},Jh=new Map,uB=1e3,cB=(n,e=uB)=>{if(Jh.has(n))return;let t=setTimeout(()=>{Jh.delete(n),sl({type:4,toastId:n})},e);Jh.set(n,t)},hB=n=>{let{toasts:e,pausedAt:t}=sB(n);G.useEffect(()=>{if(t)return;let s=Date.now(),o=e.map(a=>{if(a.duration===1/0)return;let l=(a.duration||0)+a.pauseDuration-(s-a.createdAt);if(l<0){a.visible&&Je.dismiss(a.id);return}return setTimeout(()=>Je.dismiss(a.id),l)});return()=>{o.forEach(a=>a&&clearTimeout(a))}},[e,t]);let r=G.useCallback(()=>{t&&sl({type:6,time:Date.now()})},[t]),i=G.useCallback((s,o)=>{let{reverseOrder:a=!1,gutter:l=8,defaultPosition:c}=o||{},h=e.filter(g=>(g.position||c)===(s.position||c)&&g.height),d=h.findIndex(g=>g.id===s.id),p=h.filter((g,A)=>A<d&&g.visible).length;return h.filter(g=>g.visible).slice(...a?[p+1]:[0,p]).reduce((g,A)=>g+(A.height||0)+l,0)},[e]);return G.useEffect(()=>{e.forEach(s=>{if(s.dismissed)cB(s.id,s.removeDelay);else{let o=Jh.get(s.id);o&&(clearTimeout(o),Jh.delete(s.id))}})},[e]),{toasts:e,handlers:{updateHeight:aB,startPause:lB,endPause:r,calculateOffset:i}}},dB=Wi`
from {
  transform: scale(0) rotate(45deg);
	opacity: 0;
}
to {
 transform: scale(1) rotate(45deg);
  opacity: 1;
}`,fB=Wi`
from {
  transform: scale(0);
  opacity: 0;
}
to {
  transform: scale(1);
  opacity: 1;
}`,pB=Wi`
from {
  transform: scale(0) rotate(90deg);
	opacity: 0;
}
to {
  transform: scale(1) rotate(90deg);
	opacity: 1;
}`,mB=Io("div")`
  width: 20px;
  opacity: 0;
  height: 20px;
  border-radius: 10px;
  background: ${n=>n.primary||"#ff4b4b"};
  position: relative;
  transform: rotate(45deg);

  animation: ${dB} 0.3s cubic-bezier(0.175, 0.885, 0.32, 1.275)
    forwards;
  animation-delay: 100ms;

  &:after,
  &:before {
    content: '';
    animation: ${fB} 0.15s ease-out forwards;
    animation-delay: 150ms;
    position: absolute;
    border-radius: 3px;
    opacity: 0;
    background: ${n=>n.secondary||"#fff"};
    bottom: 9px;
    left: 4px;
    height: 2px;
    width: 12px;
  }

  &:before {
    animation: ${pB} 0.15s ease-out forwards;
    animation-delay: 180ms;
    transform: rotate(90deg);
  }
`,gB=Wi`
  from {
    transform: rotate(0deg);
  }
  to {
    transform: rotate(360deg);
  }
`,yB=Io("div")`
  width: 12px;
  height: 12px;
  box-sizing: border-box;
  border: 2px solid;
  border-radius: 100%;
  border-color: ${n=>n.secondary||"#e0e0e0"};
  border-right-color: ${n=>n.primary||"#616161"};
  animation: ${gB} 1s linear infinite;
`,wB=Wi`
from {
  transform: scale(0) rotate(45deg);
	opacity: 0;
}
to {
  transform: scale(1) rotate(45deg);
	opacity: 1;
}`,vB=Wi`
0% {
	height: 0;
	width: 0;
	opacity: 0;
}
40% {
  height: 0;
	width: 6px;
	opacity: 1;
}
100% {
  opacity: 1;
  height: 10px;
}`,_B=Io("div")`
  width: 20px;
  opacity: 0;
  height: 20px;
  border-radius: 10px;
  background: ${n=>n.primary||"#61d345"};
  position: relative;
  transform: rotate(45deg);

  animation: ${wB} 0.3s cubic-bezier(0.175, 0.885, 0.32, 1.275)
    forwards;
  animation-delay: 100ms;
  &:after {
    content: '';
    box-sizing: border-box;
    animation: ${vB} 0.2s ease-out forwards;
    opacity: 0;
    animation-delay: 200ms;
    position: absolute;
    border-right: 2px solid;
    border-bottom: 2px solid;
    border-color: ${n=>n.secondary||"#fff"};
    bottom: 6px;
    left: 6px;
    height: 10px;
    width: 6px;
  }
`,EB=Io("div")`
  position: absolute;
`,AB=Io("div")`
  position: relative;
  display: flex;
  justify-content: center;
  align-items: center;
  min-width: 20px;
  min-height: 20px;
`,IB=Wi`
from {
  transform: scale(0.6);
  opacity: 0.4;
}
to {
  transform: scale(1);
  opacity: 1;
}`,TB=Io("div")`
  position: relative;
  transform: scale(0.6);
  opacity: 0.4;
  min-width: 20px;
  animation: ${IB} 0.3s 0.12s cubic-bezier(0.175, 0.885, 0.32, 1.275)
    forwards;
`,bB=({toast:n})=>{let{icon:e,type:t,iconTheme:r}=n;return e!==void 0?typeof e=="string"?G.createElement(TB,null,e):e:t==="blank"?null:G.createElement(AB,null,G.createElement(yB,{...r}),t!=="loading"&&G.createElement(EB,null,t==="error"?G.createElement(mB,{...r}):G.createElement(_B,{...r})))},xB=n=>`
0% {transform: translate3d(0,${n*-200}%,0) scale(.6); opacity:.5;}
100% {transform: translate3d(0,0,0) scale(1); opacity:1;}
`,SB=n=>`
0% {transform: translate3d(0,0,-1px) scale(1); opacity:1;}
100% {transform: translate3d(0,${n*-150}%,-1px) scale(.6); opacity:0;}
`,PB="0%{opacity:0;} 100%{opacity:1;}",RB="0%{opacity:1;} 100%{opacity:0;}",CB=Io("div")`
  display: flex;
  align-items: center;
  background: #fff;
  color: #363636;
  line-height: 1.3;
  will-change: transform;
  box-shadow: 0 3px 10px rgba(0, 0, 0, 0.1), 0 3px 3px rgba(0, 0, 0, 0.05);
  max-width: 350px;
  pointer-events: auto;
  padding: 8px 10px;
  border-radius: 8px;
`,kB=Io("div")`
  display: flex;
  justify-content: center;
  margin: 4px 10px;
  color: inherit;
  flex: 1 1 auto;
  white-space: pre-line;
`,NB=(n,e)=>{let t=n.includes("top")?1:-1,[r,i]=BR()?[PB,RB]:[xB(t),SB(t)];return{animation:e?`${Wi(r)} 0.35s cubic-bezier(.21,1.02,.73,1) forwards`:`${Wi(i)} 0.4s forwards cubic-bezier(.06,.71,.55,1)`}},DB=G.memo(({toast:n,position:e,style:t,children:r})=>{let i=n.height?NB(n.position||e||"top-center",n.visible):{opacity:0},s=G.createElement(bB,{toast:n}),o=G.createElement(kB,{...n.ariaProps},Jm(n.message,n));return G.createElement(CB,{className:n.className,style:{...i,...t,...n.style}},typeof r=="function"?r({icon:s,message:o}):G.createElement(G.Fragment,null,s,o))});eB(G.createElement);var OB=({id:n,className:e,style:t,onHeightUpdate:r,children:i})=>{let s=G.useCallback(o=>{if(o){let a=()=>{let l=o.getBoundingClientRect().height;r(n,l)};a(),new MutationObserver(a).observe(o,{subtree:!0,childList:!0,characterData:!0})}},[n,r]);return G.createElement("div",{ref:s,className:e,style:t},i)},LB=(n,e)=>{let t=n.includes("top"),r=t?{top:0}:{bottom:0},i=n.includes("center")?{justifyContent:"center"}:n.includes("right")?{justifyContent:"flex-end"}:{};return{left:0,right:0,display:"flex",position:"absolute",transition:BR()?void 0:"all 230ms cubic-bezier(.21,1.02,.73,1)",transform:`translateY(${e*(t?1:-1)}px)`,...r,...i}},VB=iy`
  z-index: 9999;
  > * {
    pointer-events: auto;
  }
`,Ip=16,MB=({reverseOrder:n,position:e="top-center",toastOptions:t,gutter:r,children:i,containerStyle:s,containerClassName:o})=>{let{toasts:a,handlers:l}=hB(t);return G.createElement("div",{id:"_rht_toaster",style:{position:"fixed",zIndex:9999,top:Ip,left:Ip,right:Ip,bottom:Ip,pointerEvents:"none",...s},className:o,onMouseEnter:l.startPause,onMouseLeave:l.endPause},a.map(c=>{let h=c.position||e,d=l.calculateOffset(c,{reverseOrder:n,gutter:r,defaultPosition:e}),p=LB(h,d);return G.createElement(OB,{id:c.id,key:c.id,onHeightUpdate:l.updateHeight,className:c.visible?VB:"",style:p},c.type==="custom"?Jm(c.message,c):i?i(c):G.createElement(DB,{toast:c,position:h}))}))};const BB="6.14.0";function FB(n,e,t){const r=e.split("|").map(s=>s.trim());for(let s=0;s<r.length;s++)switch(e){case"any":return;case"bigint":case"boolean":case"number":case"string":if(typeof n===e)return}const i=new Error(`invalid value for type ${e}`);throw i.code="INVALID_ARGUMENT",i.argument=`value.${t}`,i.value=n,i}async function ln(n){const e=Object.keys(n);return(await Promise.all(e.map(r=>Promise.resolve(n[r])))).reduce((r,i,s)=>(r[e[s]]=i,r),{})}function ce(n,e,t){for(let r in e){let i=e[r];const s=t?t[r]:null;s&&FB(i,s,r),Object.defineProperty(n,r,{enumerable:!0,value:i,writable:!1})}}function Kl(n){if(n==null)return"null";if(Array.isArray(n))return"[ "+n.map(Kl).join(", ")+" ]";if(n instanceof Uint8Array){const e="0123456789abcdef";let t="0x";for(let r=0;r<n.length;r++)t+=e[n[r]>>4],t+=e[n[r]&15];return t}if(typeof n=="object"&&typeof n.toJSON=="function")return Kl(n.toJSON());switch(typeof n){case"boolean":case"symbol":return n.toString();case"bigint":return BigInt(n).toString();case"number":return n.toString();case"string":return JSON.stringify(n);case"object":{const e=Object.keys(n);return e.sort(),"{ "+e.map(t=>`${Kl(t)}: ${Kl(n[t])}`).join(", ")+" }"}}return"[ COULD NOT SERIALIZE ]"}function Ot(n,e){return n&&n.code===e}function IE(n){return Ot(n,"CALL_EXCEPTION")}function $e(n,e,t){let r=n;{const s=[];if(t){if("message"in t||"code"in t||"name"in t)throw new Error(`value will overwrite populated values: ${Kl(t)}`);for(const o in t){if(o==="shortMessage")continue;const a=t[o];s.push(o+"="+Kl(a))}}s.push(`code=${e}`),s.push(`version=${BB}`),s.length&&(n+=" ("+s.join(", ")+")")}let i;switch(e){case"INVALID_ARGUMENT":i=new TypeError(n);break;case"NUMERIC_FAULT":case"BUFFER_OVERRUN":i=new RangeError(n);break;default:i=new Error(n)}return ce(i,{code:e}),t&&Object.assign(i,t),i.shortMessage==null&&ce(i,{shortMessage:r}),i}function $(n,e,t,r){if(!n)throw $e(e,t,r)}function O(n,e,t,r){$(n,e,"INVALID_ARGUMENT",{argument:t,value:r})}function UR(n,e,t){t==null&&(t=""),t&&(t=": "+t),$(n>=e,"missing argument"+t,"MISSING_ARGUMENT",{count:n,expectedCount:e}),$(n<=e,"too many arguments"+t,"UNEXPECTED_ARGUMENT",{count:n,expectedCount:e})}const UB=["NFD","NFC","NFKD","NFKC"].reduce((n,e)=>{try{if("test".normalize(e)!=="test")throw new Error("bad");if(e==="NFD"){const t=String.fromCharCode(233).normalize("NFD"),r=String.fromCharCode(101,769);if(t!==r)throw new Error("broken")}n.push(e)}catch{}return n},[]);function jB(n){$(UB.indexOf(n)>=0,"platform missing String.prototype.normalize","UNSUPPORTED_OPERATION",{operation:"String.prototype.normalize",info:{form:n}})}function bf(n,e,t){if(t==null&&(t=""),n!==e){let r=t,i="new";t&&(r+=".",i+=" "+t),$(!1,`private constructor; use ${r}from* methods`,"UNSUPPORTED_OPERATION",{operation:i})}}function jR(n,e,t){if(n instanceof Uint8Array)return t?new Uint8Array(n):n;if(typeof n=="string"&&n.match(/^0x(?:[0-9a-f][0-9a-f])*$/i)){const r=new Uint8Array((n.length-2)/2);let i=2;for(let s=0;s<r.length;s++)r[s]=parseInt(n.substring(i,i+2),16),i+=2;return r}O(!1,"invalid BytesLike value",e||"value",n)}function we(n,e){return jR(n,e,!1)}function un(n,e){return jR(n,e,!0)}function je(n,e){return!(typeof n!="string"||!n.match(/^0x[0-9A-Fa-f]*$/)||typeof e=="number"&&n.length!==2+2*e||e===!0&&n.length%2!==0)}function TE(n){return je(n,!0)||n instanceof Uint8Array}const dT="0123456789abcdef";function te(n){const e=we(n);let t="0x";for(let r=0;r<e.length;r++){const i=e[r];t+=dT[(i&240)>>4]+dT[i&15]}return t}function ot(n){return"0x"+n.map(e=>te(e).substring(2)).join("")}function su(n){return je(n,!0)?(n.length-2)/2:we(n).length}function rt(n,e,t){const r=we(n);return t!=null&&t>r.length&&$(!1,"cannot slice beyond data bounds","BUFFER_OVERRUN",{buffer:r,length:r.length,offset:t}),te(r.slice(e??0,t??r.length))}function zR(n,e,t){const r=we(n);$(e>=r.length,"padding exceeds data length","BUFFER_OVERRUN",{buffer:new Uint8Array(r),length:e,offset:e+1});const i=new Uint8Array(e);return i.fill(0),t?i.set(r,e-r.length):i.set(r,0),te(i)}function Ji(n,e){return zR(n,e,!0)}function zB(n,e){return zR(n,e,!1)}const sy=BigInt(0),Rr=BigInt(1),Ql=9007199254740991;function Ym(n,e){const t=oy(n,"value"),r=BigInt(ge(e,"width"));if($(t>>r===sy,"overflow","NUMERIC_FAULT",{operation:"fromTwos",fault:"overflow",value:n}),t>>r-Rr){const i=(Rr<<r)-Rr;return-((~t&i)+Rr)}return t}function GR(n,e){let t=se(n,"value");const r=BigInt(ge(e,"width")),i=Rr<<r-Rr;if(t<sy){t=-t,$(t<=i,"too low","NUMERIC_FAULT",{operation:"toTwos",fault:"overflow",value:n});const s=(Rr<<r)-Rr;return(~t&s)+Rr}else $(t<i,"too high","NUMERIC_FAULT",{operation:"toTwos",fault:"overflow",value:n});return t}function ra(n,e){const t=oy(n,"value"),r=BigInt(ge(e,"bits"));return t&(Rr<<r)-Rr}function se(n,e){switch(typeof n){case"bigint":return n;case"number":return O(Number.isInteger(n),"underflow",e||"value",n),O(n>=-Ql&&n<=Ql,"overflow",e||"value",n),BigInt(n);case"string":try{if(n==="")throw new Error("empty string");return n[0]==="-"&&n[1]!=="-"?-BigInt(n.substring(1)):BigInt(n)}catch(t){O(!1,`invalid BigNumberish string: ${t.message}`,e||"value",n)}}O(!1,"invalid BigNumberish value",e||"value",n)}function oy(n,e){const t=se(n,e);return $(t>=sy,"unsigned value cannot be negative","NUMERIC_FAULT",{fault:"overflow",operation:"getUint",value:n}),t}const fT="0123456789abcdef";function ay(n){if(n instanceof Uint8Array){let e="0x0";for(const t of n)e+=fT[t>>4],e+=fT[t&15];return BigInt(e)}return se(n)}function ge(n,e){switch(typeof n){case"bigint":return O(n>=-Ql&&n<=Ql,"overflow",e||"value",n),Number(n);case"number":return O(Number.isInteger(n),"underflow",e||"value",n),O(n>=-Ql&&n<=Ql,"overflow",e||"value",n),n;case"string":try{if(n==="")throw new Error("empty string");return ge(BigInt(n),e)}catch(t){O(!1,`invalid numeric string: ${t.message}`,e||"value",n)}}O(!1,"invalid numeric value",e||"value",n)}function GB(n){return ge(ay(n))}function po(n,e){let r=oy(n,"value").toString(16);if(e==null)r.length%2&&(r="0"+r);else{const i=ge(e,"width");for($(i*2>=r.length,`value exceeds width (${i} bytes)`,"NUMERIC_FAULT",{operation:"toBeHex",fault:"overflow",value:n});r.length<i*2;)r="0"+r}return"0x"+r}function Lt(n){const e=oy(n,"value");if(e===sy)return new Uint8Array([]);let t=e.toString(16);t.length%2&&(t="0"+t);const r=new Uint8Array(t.length/2);for(let i=0;i<r.length;i++){const s=i*2;r[i]=parseInt(t.substring(s,s+2),16)}return r}function Oi(n){let e=te(TE(n)?n:Lt(n)).substring(2);for(;e.startsWith("0");)e=e.substring(1);return e===""&&(e="0"),"0x"+e}const pT="123456789ABCDEFGHJKLMNPQRSTUVWXYZabcdefghijkmnopqrstuvwxyz";BigInt(0);const mT=BigInt(58);function HB(n){const e=we(n);let t=ay(e),r="";for(;t;)r=pT[Number(t%mT)]+r,t/=mT;for(let i=0;i<e.length&&!e[i];i++)r=pT[0]+r;return r}function $B(n){n=atob(n);const e=new Uint8Array(n.length);for(let t=0;t<n.length;t++)e[t]=n.charCodeAt(t);return we(e)}function KB(n){const e=we(n);let t="";for(let r=0;r<e.length;r++)t+=String.fromCharCode(e[r]);return btoa(t)}var pu;class HR{constructor(e,t,r){B(this,"filter");B(this,"emitter");U(this,pu,void 0);k(this,pu,t),ce(this,{emitter:e,filter:r})}async removeListener(){y(this,pu)!=null&&await this.emitter.off(this.filter,y(this,pu))}}pu=new WeakMap;function QB(n,e,t,r,i){O(!1,`invalid codepoint at offset ${e}; ${n}`,"bytes",t)}function $R(n,e,t,r,i){if(n==="BAD_PREFIX"||n==="UNEXPECTED_CONTINUE"){let s=0;for(let o=e+1;o<t.length&&t[o]>>6===2;o++)s++;return s}return n==="OVERRUN"?t.length-e-1:0}function qB(n,e,t,r,i){return n==="OVERLONG"?(O(typeof i=="number","invalid bad code point for replacement","badCodepoint",i),r.push(i),0):(r.push(65533),$R(n,e,t))}const WB=Object.freeze({error:QB,ignore:$R,replace:qB});function JB(n,e){e==null&&(e=WB.error);const t=we(n,"bytes"),r=[];let i=0;for(;i<t.length;){const s=t[i++];if(!(s>>7)){r.push(s);continue}let o=null,a=null;if((s&224)===192)o=1,a=127;else if((s&240)===224)o=2,a=2047;else if((s&248)===240)o=3,a=65535;else{(s&192)===128?i+=e("UNEXPECTED_CONTINUE",i-1,t,r):i+=e("BAD_PREFIX",i-1,t,r);continue}if(i-1+o>=t.length){i+=e("OVERRUN",i-1,t,r);continue}let l=s&(1<<8-o-1)-1;for(let c=0;c<o;c++){let h=t[i];if((h&192)!=128){i+=e("MISSING_CONTINUE",i,t,r),l=null;break}l=l<<6|h&63,i++}if(l!==null){if(l>1114111){i+=e("OUT_OF_RANGE",i-1-o,t,r,l);continue}if(l>=55296&&l<=57343){i+=e("UTF16_SURROGATE",i-1-o,t,r,l);continue}if(l<=a){i+=e("OVERLONG",i-1-o,t,r,l);continue}r.push(l)}}return r}function zi(n,e){O(typeof n=="string","invalid string value","str",n),e!=null&&(jB(e),n=n.normalize(e));let t=[];for(let r=0;r<n.length;r++){const i=n.charCodeAt(r);if(i<128)t.push(i);else if(i<2048)t.push(i>>6|192),t.push(i&63|128);else if((i&64512)==55296){r++;const s=n.charCodeAt(r);O(r<n.length&&(s&64512)===56320,"invalid surrogate pair","str",n);const o=65536+((i&1023)<<10)+(s&1023);t.push(o>>18|240),t.push(o>>12&63|128),t.push(o>>6&63|128),t.push(o&63|128)}else t.push(i>>12|224),t.push(i>>6&63|128),t.push(i&63|128)}return new Uint8Array(t)}function YB(n){return n.map(e=>e<=65535?String.fromCharCode(e):(e-=65536,String.fromCharCode((e>>10&1023)+55296,(e&1023)+56320))).join("")}function Xm(n,e){return YB(JB(n,e))}function KR(n){async function e(t,r){$(r==null||!r.cancelled,"request cancelled before sending","CANCELLED");const i=t.url.split(":")[0].toLowerCase();$(i==="http"||i==="https",`unsupported protocol ${i}`,"UNSUPPORTED_OPERATION",{info:{protocol:i},operation:"request"}),$(i==="https"||!t.credentials||t.allowInsecureAuthentication,"insecure authorized connections unsupported","UNSUPPORTED_OPERATION",{operation:"request"});let s=null;const o=new AbortController,a=setTimeout(()=>{s=$e("request timeout","TIMEOUT"),o.abort()},t.timeout);r&&r.addListener(()=>{s=$e("request cancelled","CANCELLED"),o.abort()});const l=Object.assign({},n,{method:t.method,headers:new Headers(Array.from(t)),body:t.body||void 0,signal:o.signal});let c;try{c=await fetch(t.url,l)}catch(g){throw clearTimeout(a),s||g}clearTimeout(a);const h={};c.headers.forEach((g,A)=>{h[A.toLowerCase()]=g});const d=await c.arrayBuffer(),p=d==null?null:new Uint8Array(d);return{statusCode:c.status,statusMessage:c.statusText,headers:h,body:p}}return e}const XB=12,ZB=250;let gT=KR();const e4=new RegExp("^data:([^;:]*)?(;base64)?,(.*)$","i"),t4=new RegExp("^ipfs://(ipfs/)?(.*)$","i");let F0=!1;async function QR(n,e){try{const t=n.match(e4);if(!t)throw new Error("invalid data");return new io(200,"OK",{"content-type":t[1]||"text/plain"},t[2]?$B(t[3]):r4(t[3]))}catch{return new io(599,"BAD REQUEST (invalid data: URI)",{},null,new mo(n))}}function qR(n){async function e(t,r){try{const i=t.match(t4);if(!i)throw new Error("invalid link");return new mo(`${n}${i[2]}`)}catch{return new io(599,"BAD REQUEST (invalid IPFS URI)",{},null,new mo(t))}}return e}const Tp={data:QR,ipfs:qR("https://gateway.ipfs.io/ipfs/")},WR=new WeakMap;var aa,Ps;class n4{constructor(e){U(this,aa,void 0);U(this,Ps,void 0);k(this,aa,[]),k(this,Ps,!1),WR.set(e,()=>{if(!y(this,Ps)){k(this,Ps,!0);for(const t of y(this,aa))setTimeout(()=>{t()},0);k(this,aa,[])}})}addListener(e){$(!y(this,Ps),"singal already cancelled","UNSUPPORTED_OPERATION",{operation:"fetchCancelSignal.addCancelListener"}),y(this,aa).push(e)}get cancelled(){return y(this,Ps)}checkSignal(){$(!this.cancelled,"cancelled","CANCELLED",{})}}aa=new WeakMap,Ps=new WeakMap;function bp(n){if(n==null)throw new Error("missing signal; should not happen");return n.checkSignal(),n}var mu,gu,_r,vi,yu,wu,Et,Bn,_i,la,ua,ca,zr,Er,Rs,ha,Rh;const Ng=class Ng{constructor(e){U(this,ha);U(this,mu,void 0);U(this,gu,void 0);U(this,_r,void 0);U(this,vi,void 0);U(this,yu,void 0);U(this,wu,void 0);U(this,Et,void 0);U(this,Bn,void 0);U(this,_i,void 0);U(this,la,void 0);U(this,ua,void 0);U(this,ca,void 0);U(this,zr,void 0);U(this,Er,void 0);U(this,Rs,void 0);k(this,wu,String(e)),k(this,mu,!1),k(this,gu,!0),k(this,_r,{}),k(this,vi,""),k(this,yu,3e5),k(this,Er,{slotInterval:ZB,maxAttempts:XB}),k(this,Rs,null)}get url(){return y(this,wu)}set url(e){k(this,wu,String(e))}get body(){return y(this,Et)==null?null:new Uint8Array(y(this,Et))}set body(e){if(e==null)k(this,Et,void 0),k(this,Bn,void 0);else if(typeof e=="string")k(this,Et,zi(e)),k(this,Bn,"text/plain");else if(e instanceof Uint8Array)k(this,Et,e),k(this,Bn,"application/octet-stream");else if(typeof e=="object")k(this,Et,zi(JSON.stringify(e))),k(this,Bn,"application/json");else throw new Error("invalid body")}hasBody(){return y(this,Et)!=null}get method(){return y(this,vi)?y(this,vi):this.hasBody()?"POST":"GET"}set method(e){e==null&&(e=""),k(this,vi,String(e).toUpperCase())}get headers(){const e=Object.assign({},y(this,_r));return y(this,_i)&&(e.authorization=`Basic ${KB(zi(y(this,_i)))}`),this.allowGzip&&(e["accept-encoding"]="gzip"),e["content-type"]==null&&y(this,Bn)&&(e["content-type"]=y(this,Bn)),this.body&&(e["content-length"]=String(this.body.length)),e}getHeader(e){return this.headers[e.toLowerCase()]}setHeader(e,t){y(this,_r)[String(e).toLowerCase()]=String(t)}clearHeaders(){k(this,_r,{})}[Symbol.iterator](){const e=this.headers,t=Object.keys(e);let r=0;return{next:()=>{if(r<t.length){const i=t[r++];return{value:[i,e[i]],done:!1}}return{value:void 0,done:!0}}}}get credentials(){return y(this,_i)||null}setCredentials(e,t){O(!e.match(/:/),"invalid basic authentication username","username","[REDACTED]"),k(this,_i,`${e}:${t}`)}get allowGzip(){return y(this,gu)}set allowGzip(e){k(this,gu,!!e)}get allowInsecureAuthentication(){return!!y(this,mu)}set allowInsecureAuthentication(e){k(this,mu,!!e)}get timeout(){return y(this,yu)}set timeout(e){O(e>=0,"timeout must be non-zero","timeout",e),k(this,yu,e)}get preflightFunc(){return y(this,la)||null}set preflightFunc(e){k(this,la,e)}get processFunc(){return y(this,ua)||null}set processFunc(e){k(this,ua,e)}get retryFunc(){return y(this,ca)||null}set retryFunc(e){k(this,ca,e)}get getUrlFunc(){return y(this,Rs)||gT}set getUrlFunc(e){k(this,Rs,e)}toString(){return`<FetchRequest method=${JSON.stringify(this.method)} url=${JSON.stringify(this.url)} headers=${JSON.stringify(this.headers)} body=${y(this,Et)?te(y(this,Et)):"null"}>`}setThrottleParams(e){e.slotInterval!=null&&(y(this,Er).slotInterval=e.slotInterval),e.maxAttempts!=null&&(y(this,Er).maxAttempts=e.maxAttempts)}send(){return $(y(this,zr)==null,"request already sent","UNSUPPORTED_OPERATION",{operation:"fetchRequest.send"}),k(this,zr,new n4(this)),K(this,ha,Rh).call(this,0,yT()+this.timeout,0,this,new io(0,"",{},null,this))}cancel(){$(y(this,zr)!=null,"request has not been sent","UNSUPPORTED_OPERATION",{operation:"fetchRequest.cancel"});const e=WR.get(this);if(!e)throw new Error("missing signal; should not happen");e()}redirect(e){const t=this.url.split(":")[0].toLowerCase(),r=e.split(":")[0].toLowerCase();$(this.method==="GET"&&(t!=="https"||r!=="http")&&e.match(/^https?:/),"unsupported redirect","UNSUPPORTED_OPERATION",{operation:`redirect(${this.method} ${JSON.stringify(this.url)} => ${JSON.stringify(e)})`});const i=new Ng(e);return i.method="GET",i.allowGzip=this.allowGzip,i.timeout=this.timeout,k(i,_r,Object.assign({},y(this,_r))),y(this,Et)&&k(i,Et,new Uint8Array(y(this,Et))),k(i,Bn,y(this,Bn)),i}clone(){const e=new Ng(this.url);return k(e,vi,y(this,vi)),y(this,Et)&&k(e,Et,y(this,Et)),k(e,Bn,y(this,Bn)),k(e,_r,Object.assign({},y(this,_r))),k(e,_i,y(this,_i)),this.allowGzip&&(e.allowGzip=!0),e.timeout=this.timeout,this.allowInsecureAuthentication&&(e.allowInsecureAuthentication=!0),k(e,la,y(this,la)),k(e,ua,y(this,ua)),k(e,ca,y(this,ca)),k(e,Er,Object.assign({},y(this,Er))),k(e,Rs,y(this,Rs)),e}static lockConfig(){F0=!0}static getGateway(e){return Tp[e.toLowerCase()]||null}static registerGateway(e,t){if(e=e.toLowerCase(),e==="http"||e==="https")throw new Error(`cannot intercept ${e}; use registerGetUrl`);if(F0)throw new Error("gateways locked");Tp[e]=t}static registerGetUrl(e){if(F0)throw new Error("gateways locked");gT=e}static createGetUrlFunc(e){return KR(e)}static createDataGateway(){return QR}static createIpfsGatewayFunc(e){return qR(e)}};mu=new WeakMap,gu=new WeakMap,_r=new WeakMap,vi=new WeakMap,yu=new WeakMap,wu=new WeakMap,Et=new WeakMap,Bn=new WeakMap,_i=new WeakMap,la=new WeakMap,ua=new WeakMap,ca=new WeakMap,zr=new WeakMap,Er=new WeakMap,Rs=new WeakMap,ha=new WeakSet,Rh=async function(e,t,r,i,s){var h,d,p;if(e>=y(this,Er).maxAttempts)return s.makeServerError("exceeded maximum retry limit");$(yT()<=t,"timeout","TIMEOUT",{operation:"request.send",reason:"timeout",request:i}),r>0&&await i4(r);let o=this.clone();const a=(o.url.split(":")[0]||"").toLowerCase();if(a in Tp){const g=await Tp[a](o.url,bp(y(i,zr)));if(g instanceof io){let A=g;if(this.processFunc){bp(y(i,zr));try{A=await this.processFunc(o,A)}catch(v){(v.throttle==null||typeof v.stall!="number")&&A.makeServerError("error in post-processing function",v).assertOk()}}return A}o=g}this.preflightFunc&&(o=await this.preflightFunc(o));const l=await this.getUrlFunc(o,bp(y(i,zr)));let c=new io(l.statusCode,l.statusMessage,l.headers,l.body,i);if(c.statusCode===301||c.statusCode===302){try{const g=c.headers.location||"";return K(h=o.redirect(g),ha,Rh).call(h,e+1,t,0,i,c)}catch{}return c}else if(c.statusCode===429&&(this.retryFunc==null||await this.retryFunc(o,c,e))){const g=c.headers["retry-after"];let A=y(this,Er).slotInterval*Math.trunc(Math.random()*Math.pow(2,e));return typeof g=="string"&&g.match(/^[1-9][0-9]*$/)&&(A=parseInt(g)),K(d=o.clone(),ha,Rh).call(d,e+1,t,A,i,c)}if(this.processFunc){bp(y(i,zr));try{c=await this.processFunc(o,c)}catch(g){(g.throttle==null||typeof g.stall!="number")&&c.makeServerError("error in post-processing function",g).assertOk();let A=y(this,Er).slotInterval*Math.trunc(Math.random()*Math.pow(2,e));return g.stall>=0&&(A=g.stall),K(p=o.clone(),ha,Rh).call(p,e+1,t,A,i,c)}}return c};let mo=Ng;var Wd,Jd,Yd,Fn,vu,da;const $A=class $A{constructor(e,t,r,i,s){U(this,Wd,void 0);U(this,Jd,void 0);U(this,Yd,void 0);U(this,Fn,void 0);U(this,vu,void 0);U(this,da,void 0);k(this,Wd,e),k(this,Jd,t),k(this,Yd,Object.keys(r).reduce((o,a)=>(o[a.toLowerCase()]=String(r[a]),o),{})),k(this,Fn,i==null?null:new Uint8Array(i)),k(this,vu,s||null),k(this,da,{message:""})}toString(){return`<FetchResponse status=${this.statusCode} body=${y(this,Fn)?te(y(this,Fn)):"null"}>`}get statusCode(){return y(this,Wd)}get statusMessage(){return y(this,Jd)}get headers(){return Object.assign({},y(this,Yd))}get body(){return y(this,Fn)==null?null:new Uint8Array(y(this,Fn))}get bodyText(){try{return y(this,Fn)==null?"":Xm(y(this,Fn))}catch{$(!1,"response body is not valid UTF-8 data","UNSUPPORTED_OPERATION",{operation:"bodyText",info:{response:this}})}}get bodyJson(){try{return JSON.parse(this.bodyText)}catch{$(!1,"response body is not valid JSON","UNSUPPORTED_OPERATION",{operation:"bodyJson",info:{response:this}})}}[Symbol.iterator](){const e=this.headers,t=Object.keys(e);let r=0;return{next:()=>{if(r<t.length){const i=t[r++];return{value:[i,e[i]],done:!1}}return{value:void 0,done:!0}}}}makeServerError(e,t){let r;e?r=`CLIENT ESCALATED SERVER ERROR (${this.statusCode} ${this.statusMessage}; ${e})`:(e=`${this.statusCode} ${this.statusMessage}`,r=`CLIENT ESCALATED SERVER ERROR (${e})`);const i=new $A(599,r,this.headers,this.body,y(this,vu)||void 0);return k(i,da,{message:e,error:t}),i}throwThrottleError(e,t){t==null?t=-1:O(Number.isInteger(t)&&t>=0,"invalid stall timeout","stall",t);const r=new Error(e||"throttling requests");throw ce(r,{stall:t,throttle:!0}),r}getHeader(e){return this.headers[e.toLowerCase()]}hasBody(){return y(this,Fn)!=null}get request(){return y(this,vu)}ok(){return y(this,da).message===""&&this.statusCode>=200&&this.statusCode<300}assertOk(){if(this.ok())return;let{message:e,error:t}=y(this,da);e===""&&(e=`server response ${this.statusCode} ${this.statusMessage}`);let r=null;this.request&&(r=this.request.url);let i=null;try{y(this,Fn)&&(i=Xm(y(this,Fn)))}catch{}$(!1,e,"SERVER_ERROR",{request:this.request||"unknown request",response:this,error:t,info:{requestUrl:r,responseBody:i,responseStatus:`${this.statusCode} ${this.statusMessage}`}})}};Wd=new WeakMap,Jd=new WeakMap,Yd=new WeakMap,Fn=new WeakMap,vu=new WeakMap,da=new WeakMap;let io=$A;function yT(){return new Date().getTime()}function r4(n){return zi(n.replace(/%([0-9a-f][0-9a-f])/gi,(e,t)=>String.fromCharCode(parseInt(t,16))))}function i4(n){return new Promise(e=>setTimeout(e,n))}const s4=BigInt(-1),gr=BigInt(0),ql=BigInt(1),o4=BigInt(5),vl={};let ou="0000";for(;ou.length<80;)ou+=ou;function Lo(n){let e=ou;for(;e.length<n;)e+=e;return BigInt("1"+e.substring(0,n))}function gh(n,e,t){const r=BigInt(e.width);if(e.signed){const i=ql<<r-ql;$(t==null||n>=-i&&n<i,"overflow","NUMERIC_FAULT",{operation:t,fault:"overflow",value:n}),n>gr?n=Ym(ra(n,r),r):n=-Ym(ra(-n,r),r)}else{const i=ql<<r;$(t==null||n>=0&&n<i,"overflow","NUMERIC_FAULT",{operation:t,fault:"overflow",value:n}),n=(n%i+i)%i&i-ql}return n}function U0(n){typeof n=="number"&&(n=`fixed128x${n}`);let e=!0,t=128,r=18;if(typeof n=="string"){if(n!=="fixed")if(n==="ufixed")e=!1;else{const s=n.match(/^(u?)fixed([0-9]+)x([0-9]+)$/);O(s,"invalid fixed format","format",n),e=s[1]!=="u",t=parseInt(s[2]),r=parseInt(s[3])}}else if(n){const s=n,o=(a,l,c)=>s[a]==null?c:(O(typeof s[a]===l,"invalid fixed format ("+a+" not "+l+")","format."+a,s[a]),s[a]);e=o("signed","boolean",e),t=o("width","number",t),r=o("decimals","number",r)}O(t%8===0,"invalid FixedNumber width (not byte aligned)","format.width",t),O(r<=80,"invalid FixedNumber decimals (too large)","format.decimals",r);const i=(e?"":"u")+"fixed"+String(t)+"x"+String(r);return{signed:e,width:t,decimals:r,name:i}}function a4(n,e){let t="";n<gr&&(t="-",n*=s4);let r=n.toString();if(e===0)return t+r;for(;r.length<=e;)r=ou+r;const i=r.length-e;for(r=r.substring(0,i)+"."+r.substring(i);r[0]==="0"&&r[1]!==".";)r=r.substring(1);for(;r[r.length-1]==="0"&&r[r.length-2]!==".";)r=r.substring(0,r.length-1);return t+r}var Ar,Ve,rn,Ei,Uo,Ir,fi,Xd,dv,Zd,fv,ef,pv,tf,mv;const vs=class vs{constructor(e,t,r){U(this,Ei);U(this,Ir);U(this,Xd);U(this,Zd);U(this,ef);U(this,tf);B(this,"format");U(this,Ar,void 0);U(this,Ve,void 0);U(this,rn,void 0);B(this,"_value");bf(e,vl,"FixedNumber"),k(this,Ve,t),k(this,Ar,r);const i=a4(t,r.decimals);ce(this,{format:r.name,_value:i}),k(this,rn,Lo(r.decimals))}get signed(){return y(this,Ar).signed}get width(){return y(this,Ar).width}get decimals(){return y(this,Ar).decimals}get value(){return y(this,Ve)}addUnsafe(e){return K(this,Xd,dv).call(this,e)}add(e){return K(this,Xd,dv).call(this,e,"add")}subUnsafe(e){return K(this,Zd,fv).call(this,e)}sub(e){return K(this,Zd,fv).call(this,e,"sub")}mulUnsafe(e){return K(this,ef,pv).call(this,e)}mul(e){return K(this,ef,pv).call(this,e,"mul")}mulSignal(e){K(this,Ei,Uo).call(this,e);const t=y(this,Ve)*y(e,Ve);return $(t%y(this,rn)===gr,"precision lost during signalling mul","NUMERIC_FAULT",{operation:"mulSignal",fault:"underflow",value:this}),K(this,Ir,fi).call(this,t/y(this,rn),"mulSignal")}divUnsafe(e){return K(this,tf,mv).call(this,e)}div(e){return K(this,tf,mv).call(this,e,"div")}divSignal(e){$(y(e,Ve)!==gr,"division by zero","NUMERIC_FAULT",{operation:"div",fault:"divide-by-zero",value:this}),K(this,Ei,Uo).call(this,e);const t=y(this,Ve)*y(this,rn);return $(t%y(e,Ve)===gr,"precision lost during signalling div","NUMERIC_FAULT",{operation:"divSignal",fault:"underflow",value:this}),K(this,Ir,fi).call(this,t/y(e,Ve),"divSignal")}cmp(e){let t=this.value,r=e.value;const i=this.decimals-e.decimals;return i>0?r*=Lo(i):i<0&&(t*=Lo(-i)),t<r?-1:t>r?1:0}eq(e){return this.cmp(e)===0}lt(e){return this.cmp(e)<0}lte(e){return this.cmp(e)<=0}gt(e){return this.cmp(e)>0}gte(e){return this.cmp(e)>=0}floor(){let e=y(this,Ve);return y(this,Ve)<gr&&(e-=y(this,rn)-ql),e=y(this,Ve)/y(this,rn)*y(this,rn),K(this,Ir,fi).call(this,e,"floor")}ceiling(){let e=y(this,Ve);return y(this,Ve)>gr&&(e+=y(this,rn)-ql),e=y(this,Ve)/y(this,rn)*y(this,rn),K(this,Ir,fi).call(this,e,"ceiling")}round(e){if(e==null&&(e=0),e>=this.decimals)return this;const t=this.decimals-e,r=o4*Lo(t-1);let i=this.value+r;const s=Lo(t);return i=i/s*s,gh(i,y(this,Ar),"round"),new vs(vl,i,y(this,Ar))}isZero(){return y(this,Ve)===gr}isNegative(){return y(this,Ve)<gr}toString(){return this._value}toUnsafeFloat(){return parseFloat(this.toString())}toFormat(e){return vs.fromString(this.toString(),e)}static fromValue(e,t,r){const i=t==null?0:ge(t),s=U0(r);let o=se(e,"value");const a=i-s.decimals;if(a>0){const l=Lo(a);$(o%l===gr,"value loses precision for format","NUMERIC_FAULT",{operation:"fromValue",fault:"underflow",value:e}),o/=l}else a<0&&(o*=Lo(-a));return gh(o,s,"fromValue"),new vs(vl,o,s)}static fromString(e,t){const r=e.match(/^(-?)([0-9]*)\.?([0-9]*)$/);O(r&&r[2].length+r[3].length>0,"invalid FixedNumber string value","value",e);const i=U0(t);let s=r[2]||"0",o=r[3]||"";for(;o.length<i.decimals;)o+=ou;$(o.substring(i.decimals).match(/^0*$/),"too many decimals for format","NUMERIC_FAULT",{operation:"fromString",fault:"underflow",value:e}),o=o.substring(0,i.decimals);const a=BigInt(r[1]+s+o);return gh(a,i,"fromString"),new vs(vl,a,i)}static fromBytes(e,t){let r=ay(we(e,"value"));const i=U0(t);return i.signed&&(r=Ym(r,i.width)),gh(r,i,"fromBytes"),new vs(vl,r,i)}};Ar=new WeakMap,Ve=new WeakMap,rn=new WeakMap,Ei=new WeakSet,Uo=function(e){O(this.format===e.format,"incompatible format; use fixedNumber.toFormat","other",e)},Ir=new WeakSet,fi=function(e,t){return e=gh(e,y(this,Ar),t),new vs(vl,e,y(this,Ar))},Xd=new WeakSet,dv=function(e,t){return K(this,Ei,Uo).call(this,e),K(this,Ir,fi).call(this,y(this,Ve)+y(e,Ve),t)},Zd=new WeakSet,fv=function(e,t){return K(this,Ei,Uo).call(this,e),K(this,Ir,fi).call(this,y(this,Ve)-y(e,Ve),t)},ef=new WeakSet,pv=function(e,t){return K(this,Ei,Uo).call(this,e),K(this,Ir,fi).call(this,y(this,Ve)*y(e,Ve)/y(this,rn),t)},tf=new WeakSet,mv=function(e,t){return $(y(e,Ve)!==gr,"division by zero","NUMERIC_FAULT",{operation:"div",fault:"divide-by-zero",value:this}),K(this,Ei,Uo).call(this,e),K(this,Ir,fi).call(this,y(this,Ve)*y(this,rn)/y(e,Ve),t)};let Zm=vs;function l4(n){let e=n.toString(16);for(;e.length<2;)e="0"+e;return"0x"+e}function wT(n,e,t){let r=0;for(let i=0;i<t;i++)r=r*256+n[e+i];return r}function vT(n,e,t,r){const i=[];for(;t<e+1+r;){const s=JR(n,t);i.push(s.result),t+=s.consumed,$(t<=e+1+r,"child data too short","BUFFER_OVERRUN",{buffer:n,length:r,offset:e})}return{consumed:1+r,result:i}}function JR(n,e){$(n.length!==0,"data too short","BUFFER_OVERRUN",{buffer:n,length:0,offset:1});const t=r=>{$(r<=n.length,"data short segment too short","BUFFER_OVERRUN",{buffer:n,length:n.length,offset:r})};if(n[e]>=248){const r=n[e]-247;t(e+1+r);const i=wT(n,e+1,r);return t(e+1+r+i),vT(n,e,e+1+r,r+i)}else if(n[e]>=192){const r=n[e]-192;return t(e+1+r),vT(n,e,e+1,r)}else if(n[e]>=184){const r=n[e]-183;t(e+1+r);const i=wT(n,e+1,r);t(e+1+r+i);const s=te(n.slice(e+1+r,e+1+r+i));return{consumed:1+r+i,result:s}}else if(n[e]>=128){const r=n[e]-128;t(e+1+r);const i=te(n.slice(e+1,e+1+r));return{consumed:1+r,result:i}}return{consumed:1,result:l4(n[e])}}function xf(n){const e=we(n,"data"),t=JR(e,0);return O(t.consumed===e.length,"unexpected junk after rlp payload","data",n),t.result}function _T(n){const e=[];for(;n;)e.unshift(n&255),n>>=8;return e}function YR(n){if(Array.isArray(n)){let r=[];if(n.forEach(function(s){r=r.concat(YR(s))}),r.length<=55)return r.unshift(192+r.length),r;const i=_T(r.length);return i.unshift(247+i.length),i.concat(r)}const e=Array.prototype.slice.call(we(n,"object"));if(e.length===1&&e[0]<=127)return e;if(e.length<=55)return e.unshift(128+e.length),e;const t=_T(e.length);return t.unshift(183+t.length),t.concat(e)}const ET="0123456789abcdef";function go(n){let e="0x";for(const t of YR(n))e+=ET[t>>4],e+=ET[t&15];return e}const XR=["wei","kwei","mwei","gwei","szabo","finney","ether"];function ZR(n,e){let t=18;if(typeof e=="string"){const r=XR.indexOf(e);O(r>=0,"invalid unit","unit",e),t=3*r}else e!=null&&(t=ge(e,"unit"));return Zm.fromValue(n,t,{decimals:t,width:512}).toString()}function u4(n,e){O(typeof n=="string","value must be a string","value",n);let t=18;if(typeof e=="string"){const r=XR.indexOf(e);O(r>=0,"invalid unit","unit",e),t=3*r}else e!=null&&(t=ge(e,"unit"));return Zm.fromString(n,{decimals:t,width:512}).value}function c4(n){return ZR(n,18)}function h4(n){return u4(n,18)}const hn=32,gv=new Uint8Array(hn),d4=["then"],xp={},eC=new WeakMap;function Ho(n){return eC.get(n)}function AT(n,e){eC.set(n,e)}function yh(n,e){const t=new Error(`deferred error during ABI decoding triggered accessing ${n}`);throw t.error=e,t}function yv(n,e,t){return n.indexOf(null)>=0?e.map((r,i)=>r instanceof hc?yv(Ho(r),r,t):r):n.reduce((r,i,s)=>{let o=e.getValue(i);return i in r||(t&&o instanceof hc&&(o=yv(Ho(o),o,t)),r[i]=o),r},{})}var _u;const Jl=class Jl extends Array{constructor(...t){const r=t[0];let i=t[1],s=(t[2]||[]).slice(),o=!0;r!==xp&&(i=t,s=[],o=!1);super(i.length);U(this,_u,void 0);i.forEach((c,h)=>{this[h]=c});const a=s.reduce((c,h)=>(typeof h=="string"&&c.set(h,(c.get(h)||0)+1),c),new Map);if(AT(this,Object.freeze(i.map((c,h)=>{const d=s[h];return d!=null&&a.get(d)===1?d:null}))),k(this,_u,[]),y(this,_u)==null&&y(this,_u),!o)return;Object.freeze(this);const l=new Proxy(this,{get:(c,h,d)=>{if(typeof h=="string"){if(h.match(/^[0-9]+$/)){const g=ge(h,"%index");if(g<0||g>=this.length)throw new RangeError("out of result range");const A=c[g];return A instanceof Error&&yh(`index ${g}`,A),A}if(d4.indexOf(h)>=0)return Reflect.get(c,h,d);const p=c[h];if(p instanceof Function)return function(...g){return p.apply(this===d?c:this,g)};if(!(h in c))return c.getValue.apply(this===d?c:this,[h])}return Reflect.get(c,h,d)}});return AT(l,Ho(this)),l}toArray(t){const r=[];return this.forEach((i,s)=>{i instanceof Error&&yh(`index ${s}`,i),t&&i instanceof Jl&&(i=i.toArray(t)),r.push(i)}),r}toObject(t){const r=Ho(this);return r.reduce((i,s,o)=>($(s!=null,`value at index ${o} unnamed`,"UNSUPPORTED_OPERATION",{operation:"toObject()"}),yv(r,this,t)),{})}slice(t,r){t==null&&(t=0),t<0&&(t+=this.length,t<0&&(t=0)),r==null&&(r=this.length),r<0&&(r+=this.length,r<0&&(r=0)),r>this.length&&(r=this.length);const i=Ho(this),s=[],o=[];for(let a=t;a<r;a++)s.push(this[a]),o.push(i[a]);return new Jl(xp,s,o)}filter(t,r){const i=Ho(this),s=[],o=[];for(let a=0;a<this.length;a++){const l=this[a];l instanceof Error&&yh(`index ${a}`,l),t.call(r,l,a,this)&&(s.push(l),o.push(i[a]))}return new Jl(xp,s,o)}map(t,r){const i=[];for(let s=0;s<this.length;s++){const o=this[s];o instanceof Error&&yh(`index ${s}`,o),i.push(t.call(r,o,s,this))}return i}getValue(t){const r=Ho(this).indexOf(t);if(r===-1)return;const i=this[r];return i instanceof Error&&yh(`property ${JSON.stringify(t)}`,i.error),i}static fromItems(t,r){return new Jl(xp,t,r)}};_u=new WeakMap;let hc=Jl;function IT(n){let e=Lt(n);return $(e.length<=hn,"value out-of-bounds","BUFFER_OVERRUN",{buffer:e,length:hn,offset:e.length}),e.length!==hn&&(e=un(ot([gv.slice(e.length%hn),e]))),e}class ns{constructor(e,t,r,i){B(this,"name");B(this,"type");B(this,"localName");B(this,"dynamic");ce(this,{name:e,type:t,localName:r,dynamic:i},{name:"string",type:"string",localName:"string",dynamic:"boolean"})}_throwError(e,t){O(!1,e,this.localName,t)}}var Ai,fa,Eu,em;class wv{constructor(){U(this,Eu);U(this,Ai,void 0);U(this,fa,void 0);k(this,Ai,[]),k(this,fa,0)}get data(){return ot(y(this,Ai))}get length(){return y(this,fa)}appendWriter(e){return K(this,Eu,em).call(this,un(e.data))}writeBytes(e){let t=un(e);const r=t.length%hn;return r&&(t=un(ot([t,gv.slice(r)]))),K(this,Eu,em).call(this,t)}writeValue(e){return K(this,Eu,em).call(this,IT(e))}writeUpdatableValue(){const e=y(this,Ai).length;return y(this,Ai).push(gv),k(this,fa,y(this,fa)+hn),t=>{y(this,Ai)[e]=IT(t)}}}Ai=new WeakMap,fa=new WeakMap,Eu=new WeakSet,em=function(e){return y(this,Ai).push(e),k(this,fa,y(this,fa)+e.length),e.length};var En,Un,pa,ma,Cs,nf,_v,Dg,tC;const KA=class KA{constructor(e,t,r){U(this,nf);U(this,Dg);B(this,"allowLoose");U(this,En,void 0);U(this,Un,void 0);U(this,pa,void 0);U(this,ma,void 0);U(this,Cs,void 0);ce(this,{allowLoose:!!t}),k(this,En,un(e)),k(this,pa,0),k(this,ma,null),k(this,Cs,r??1024),k(this,Un,0)}get data(){return te(y(this,En))}get dataLength(){return y(this,En).length}get consumed(){return y(this,Un)}get bytes(){return new Uint8Array(y(this,En))}subReader(e){const t=new KA(y(this,En).slice(y(this,Un)+e),this.allowLoose,y(this,Cs));return k(t,ma,this),t}readBytes(e,t){let r=K(this,Dg,tC).call(this,0,e,!!t);return K(this,nf,_v).call(this,e),k(this,Un,y(this,Un)+r.length),r.slice(0,e)}readValue(){return ay(this.readBytes(hn))}readIndex(){return GB(this.readBytes(hn))}};En=new WeakMap,Un=new WeakMap,pa=new WeakMap,ma=new WeakMap,Cs=new WeakMap,nf=new WeakSet,_v=function(e){var t;if(y(this,ma))return K(t=y(this,ma),nf,_v).call(t,e);k(this,pa,y(this,pa)+e),$(y(this,Cs)<1||y(this,pa)<=y(this,Cs)*this.dataLength,`compressed ABI data exceeds inflation ratio of ${y(this,Cs)} ( see: https://github.com/ethers-io/ethers.js/issues/4537 )`,"BUFFER_OVERRUN",{buffer:un(y(this,En)),offset:y(this,Un),length:e,info:{bytesRead:y(this,pa),dataLength:this.dataLength}})},Dg=new WeakSet,tC=function(e,t,r){let i=Math.ceil(t/hn)*hn;return y(this,Un)+i>y(this,En).length&&(this.allowLoose&&r&&y(this,Un)+t<=y(this,En).length?i=t:$(!1,"data out-of-bounds","BUFFER_OVERRUN",{buffer:un(y(this,En)),length:y(this,En).length,offset:y(this,Un)+i})),y(this,En).slice(y(this,Un),y(this,Un)+i)};let vv=KA;function eg(n){if(!Number.isSafeInteger(n)||n<0)throw new Error(`Wrong positive integer: ${n}`)}function bE(n,...e){if(!(n instanceof Uint8Array))throw new Error("Expected Uint8Array");if(e.length>0&&!e.includes(n.length))throw new Error(`Expected Uint8Array of length ${e}, not of length=${n.length}`)}function f4(n){if(typeof n!="function"||typeof n.create!="function")throw new Error("Hash should be wrapped by utils.wrapConstructor");eg(n.outputLen),eg(n.blockLen)}function dc(n,e=!0){if(n.destroyed)throw new Error("Hash instance has been destroyed");if(e&&n.finished)throw new Error("Hash#digest() has already been called")}function nC(n,e){bE(n);const t=e.outputLen;if(n.length<t)throw new Error(`digestInto() expects output buffer of length at least ${t}`)}const j0=typeof globalThis=="object"&&"crypto"in globalThis?globalThis.crypto:void 0;/*! noble-hashes - MIT License (c) 2022 Paul Miller (paulmillr.com) */const rC=n=>n instanceof Uint8Array,p4=n=>new Uint32Array(n.buffer,n.byteOffset,Math.floor(n.byteLength/4)),z0=n=>new DataView(n.buffer,n.byteOffset,n.byteLength),Fr=(n,e)=>n<<32-e|n>>>e,m4=new Uint8Array(new Uint32Array([287454020]).buffer)[0]===68;if(!m4)throw new Error("Non little-endian hardware is not supported");function g4(n){if(typeof n!="string")throw new Error(`utf8ToBytes expected string, got ${typeof n}`);return new Uint8Array(new TextEncoder().encode(n))}function ly(n){if(typeof n=="string"&&(n=g4(n)),!rC(n))throw new Error(`expected Uint8Array, got ${typeof n}`);return n}function y4(...n){const e=new Uint8Array(n.reduce((r,i)=>r+i.length,0));let t=0;return n.forEach(r=>{if(!rC(r))throw new Error("Uint8Array expected");e.set(r,t),t+=r.length}),e}class xE{clone(){return this._cloneInto()}}function SE(n){const e=r=>n().update(ly(r)).digest(),t=n();return e.outputLen=t.outputLen,e.blockLen=t.blockLen,e.create=()=>n(),e}function w4(n=32){if(j0&&typeof j0.getRandomValues=="function")return j0.getRandomValues(new Uint8Array(n));throw new Error("crypto.getRandomValues must be defined")}class iC extends xE{constructor(e,t){super(),this.finished=!1,this.destroyed=!1,f4(e);const r=ly(t);if(this.iHash=e.create(),typeof this.iHash.update!="function")throw new Error("Expected instance of class which extends utils.Hash");this.blockLen=this.iHash.blockLen,this.outputLen=this.iHash.outputLen;const i=this.blockLen,s=new Uint8Array(i);s.set(r.length>i?e.create().update(r).digest():r);for(let o=0;o<s.length;o++)s[o]^=54;this.iHash.update(s),this.oHash=e.create();for(let o=0;o<s.length;o++)s[o]^=106;this.oHash.update(s),s.fill(0)}update(e){return dc(this),this.iHash.update(e),this}digestInto(e){dc(this),bE(e,this.outputLen),this.finished=!0,this.iHash.digestInto(e),this.oHash.update(e),this.oHash.digestInto(e),this.destroy()}digest(){const e=new Uint8Array(this.oHash.outputLen);return this.digestInto(e),e}_cloneInto(e){e||(e=Object.create(Object.getPrototypeOf(this),{}));const{oHash:t,iHash:r,finished:i,destroyed:s,blockLen:o,outputLen:a}=this;return e=e,e.finished=i,e.destroyed=s,e.blockLen=o,e.outputLen=a,e.oHash=t._cloneInto(e.oHash),e.iHash=r._cloneInto(e.iHash),e}destroy(){this.destroyed=!0,this.oHash.destroy(),this.iHash.destroy()}}const sC=(n,e,t)=>new iC(n,e).update(t).digest();sC.create=(n,e)=>new iC(n,e);function v4(n,e,t,r){if(typeof n.setBigUint64=="function")return n.setBigUint64(e,t,r);const i=BigInt(32),s=BigInt(4294967295),o=Number(t>>i&s),a=Number(t&s),l=r?4:0,c=r?0:4;n.setUint32(e+l,o,r),n.setUint32(e+c,a,r)}class oC extends xE{constructor(e,t,r,i){super(),this.blockLen=e,this.outputLen=t,this.padOffset=r,this.isLE=i,this.finished=!1,this.length=0,this.pos=0,this.destroyed=!1,this.buffer=new Uint8Array(e),this.view=z0(this.buffer)}update(e){dc(this);const{view:t,buffer:r,blockLen:i}=this;e=ly(e);const s=e.length;for(let o=0;o<s;){const a=Math.min(i-this.pos,s-o);if(a===i){const l=z0(e);for(;i<=s-o;o+=i)this.process(l,o);continue}r.set(e.subarray(o,o+a),this.pos),this.pos+=a,o+=a,this.pos===i&&(this.process(t,0),this.pos=0)}return this.length+=e.length,this.roundClean(),this}digestInto(e){dc(this),nC(e,this),this.finished=!0;const{buffer:t,view:r,blockLen:i,isLE:s}=this;let{pos:o}=this;t[o++]=128,this.buffer.subarray(o).fill(0),this.padOffset>i-o&&(this.process(r,0),o=0);for(let d=o;d<i;d++)t[d]=0;v4(r,i-8,BigInt(this.length*8),s),this.process(r,0);const a=z0(e),l=this.outputLen;if(l%4)throw new Error("_sha2: outputLen should be aligned to 32bit");const c=l/4,h=this.get();if(c>h.length)throw new Error("_sha2: outputLen bigger than state");for(let d=0;d<c;d++)a.setUint32(4*d,h[d],s)}digest(){const{buffer:e,outputLen:t}=this;this.digestInto(e);const r=e.slice(0,t);return this.destroy(),r}_cloneInto(e){e||(e=new this.constructor),e.set(...this.get());const{blockLen:t,buffer:r,length:i,finished:s,destroyed:o,pos:a}=this;return e.length=i,e.pos=a,e.finished=s,e.destroyed=o,i%t&&e.buffer.set(r),e}}const _4=(n,e,t)=>n&e^~n&t,E4=(n,e,t)=>n&e^n&t^e&t,A4=new Uint32Array([1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298]),us=new Uint32Array([1779033703,3144134277,1013904242,2773480762,1359893119,2600822924,528734635,1541459225]),cs=new Uint32Array(64);class I4 extends oC{constructor(){super(64,32,8,!1),this.A=us[0]|0,this.B=us[1]|0,this.C=us[2]|0,this.D=us[3]|0,this.E=us[4]|0,this.F=us[5]|0,this.G=us[6]|0,this.H=us[7]|0}get(){const{A:e,B:t,C:r,D:i,E:s,F:o,G:a,H:l}=this;return[e,t,r,i,s,o,a,l]}set(e,t,r,i,s,o,a,l){this.A=e|0,this.B=t|0,this.C=r|0,this.D=i|0,this.E=s|0,this.F=o|0,this.G=a|0,this.H=l|0}process(e,t){for(let d=0;d<16;d++,t+=4)cs[d]=e.getUint32(t,!1);for(let d=16;d<64;d++){const p=cs[d-15],g=cs[d-2],A=Fr(p,7)^Fr(p,18)^p>>>3,v=Fr(g,17)^Fr(g,19)^g>>>10;cs[d]=v+cs[d-7]+A+cs[d-16]|0}let{A:r,B:i,C:s,D:o,E:a,F:l,G:c,H:h}=this;for(let d=0;d<64;d++){const p=Fr(a,6)^Fr(a,11)^Fr(a,25),g=h+p+_4(a,l,c)+A4[d]+cs[d]|0,v=(Fr(r,2)^Fr(r,13)^Fr(r,22))+E4(r,i,s)|0;h=c,c=l,l=a,a=o+g|0,o=s,s=i,i=r,r=g+v|0}r=r+this.A|0,i=i+this.B|0,s=s+this.C|0,o=o+this.D|0,a=a+this.E|0,l=l+this.F|0,c=c+this.G|0,h=h+this.H|0,this.set(r,i,s,o,a,l,c,h)}roundClean(){cs.fill(0)}destroy(){this.set(0,0,0,0,0,0,0,0),this.buffer.fill(0)}}const aC=SE(()=>new I4),Sp=BigInt(2**32-1),Ev=BigInt(32);function lC(n,e=!1){return e?{h:Number(n&Sp),l:Number(n>>Ev&Sp)}:{h:Number(n>>Ev&Sp)|0,l:Number(n&Sp)|0}}function uC(n,e=!1){let t=new Uint32Array(n.length),r=new Uint32Array(n.length);for(let i=0;i<n.length;i++){const{h:s,l:o}=lC(n[i],e);[t[i],r[i]]=[s,o]}return[t,r]}const T4=(n,e)=>BigInt(n>>>0)<<Ev|BigInt(e>>>0),b4=(n,e,t)=>n>>>t,x4=(n,e,t)=>n<<32-t|e>>>t,S4=(n,e,t)=>n>>>t|e<<32-t,P4=(n,e,t)=>n<<32-t|e>>>t,R4=(n,e,t)=>n<<64-t|e>>>t-32,C4=(n,e,t)=>n>>>t-32|e<<64-t,k4=(n,e)=>e,N4=(n,e)=>n,cC=(n,e,t)=>n<<t|e>>>32-t,hC=(n,e,t)=>e<<t|n>>>32-t,dC=(n,e,t)=>e<<t-32|n>>>64-t,fC=(n,e,t)=>n<<t-32|e>>>64-t;function D4(n,e,t,r){const i=(e>>>0)+(r>>>0);return{h:n+t+(i/2**32|0)|0,l:i|0}}const O4=(n,e,t)=>(n>>>0)+(e>>>0)+(t>>>0),L4=(n,e,t,r)=>e+t+r+(n/2**32|0)|0,V4=(n,e,t,r)=>(n>>>0)+(e>>>0)+(t>>>0)+(r>>>0),M4=(n,e,t,r,i)=>e+t+r+i+(n/2**32|0)|0,B4=(n,e,t,r,i)=>(n>>>0)+(e>>>0)+(t>>>0)+(r>>>0)+(i>>>0),F4=(n,e,t,r,i,s)=>e+t+r+i+s+(n/2**32|0)|0,U4={fromBig:lC,split:uC,toBig:T4,shrSH:b4,shrSL:x4,rotrSH:S4,rotrSL:P4,rotrBH:R4,rotrBL:C4,rotr32H:k4,rotr32L:N4,rotlSH:cC,rotlSL:hC,rotlBH:dC,rotlBL:fC,add:D4,add3L:O4,add3H:L4,add4L:V4,add4H:M4,add5H:F4,add5L:B4},ye=U4,[j4,z4]=(()=>ye.split(["0x428a2f98d728ae22","0x7137449123ef65cd","0xb5c0fbcfec4d3b2f","0xe9b5dba58189dbbc","0x3956c25bf348b538","0x59f111f1b605d019","0x923f82a4af194f9b","0xab1c5ed5da6d8118","0xd807aa98a3030242","0x12835b0145706fbe","0x243185be4ee4b28c","0x550c7dc3d5ffb4e2","0x72be5d74f27b896f","0x80deb1fe3b1696b1","0x9bdc06a725c71235","0xc19bf174cf692694","0xe49b69c19ef14ad2","0xefbe4786384f25e3","0x0fc19dc68b8cd5b5","0x240ca1cc77ac9c65","0x2de92c6f592b0275","0x4a7484aa6ea6e483","0x5cb0a9dcbd41fbd4","0x76f988da831153b5","0x983e5152ee66dfab","0xa831c66d2db43210","0xb00327c898fb213f","0xbf597fc7beef0ee4","0xc6e00bf33da88fc2","0xd5a79147930aa725","0x06ca6351e003826f","0x142929670a0e6e70","0x27b70a8546d22ffc","0x2e1b21385c26c926","0x4d2c6dfc5ac42aed","0x53380d139d95b3df","0x650a73548baf63de","0x766a0abb3c77b2a8","0x81c2c92e47edaee6","0x92722c851482353b","0xa2bfe8a14cf10364","0xa81a664bbc423001","0xc24b8b70d0f89791","0xc76c51a30654be30","0xd192e819d6ef5218","0xd69906245565a910","0xf40e35855771202a","0x106aa07032bbd1b8","0x19a4c116b8d2d0c8","0x1e376c085141ab53","0x2748774cdf8eeb99","0x34b0bcb5e19b48a8","0x391c0cb3c5c95a63","0x4ed8aa4ae3418acb","0x5b9cca4f7763e373","0x682e6ff3d6b2b8a3","0x748f82ee5defb2fc","0x78a5636f43172f60","0x84c87814a1f0ab72","0x8cc702081a6439ec","0x90befffa23631e28","0xa4506cebde82bde9","0xbef9a3f7b2c67915","0xc67178f2e372532b","0xca273eceea26619c","0xd186b8c721c0c207","0xeada7dd6cde0eb1e","0xf57d4f7fee6ed178","0x06f067aa72176fba","0x0a637dc5a2c898a6","0x113f9804bef90dae","0x1b710b35131c471b","0x28db77f523047d84","0x32caab7b40c72493","0x3c9ebe0a15c9bebc","0x431d67c49c100d4c","0x4cc5d4becb3e42b6","0x597f299cfc657e2a","0x5fcb6fab3ad6faec","0x6c44198c4a475817"].map(n=>BigInt(n))))(),hs=new Uint32Array(80),ds=new Uint32Array(80);class G4 extends oC{constructor(){super(128,64,16,!1),this.Ah=1779033703,this.Al=-205731576,this.Bh=-1150833019,this.Bl=-2067093701,this.Ch=1013904242,this.Cl=-23791573,this.Dh=-1521486534,this.Dl=1595750129,this.Eh=1359893119,this.El=-1377402159,this.Fh=-1694144372,this.Fl=725511199,this.Gh=528734635,this.Gl=-79577749,this.Hh=1541459225,this.Hl=327033209}get(){const{Ah:e,Al:t,Bh:r,Bl:i,Ch:s,Cl:o,Dh:a,Dl:l,Eh:c,El:h,Fh:d,Fl:p,Gh:g,Gl:A,Hh:v,Hl:x}=this;return[e,t,r,i,s,o,a,l,c,h,d,p,g,A,v,x]}set(e,t,r,i,s,o,a,l,c,h,d,p,g,A,v,x){this.Ah=e|0,this.Al=t|0,this.Bh=r|0,this.Bl=i|0,this.Ch=s|0,this.Cl=o|0,this.Dh=a|0,this.Dl=l|0,this.Eh=c|0,this.El=h|0,this.Fh=d|0,this.Fl=p|0,this.Gh=g|0,this.Gl=A|0,this.Hh=v|0,this.Hl=x|0}process(e,t){for(let T=0;T<16;T++,t+=4)hs[T]=e.getUint32(t),ds[T]=e.getUint32(t+=4);for(let T=16;T<80;T++){const L=hs[T-15]|0,F=ds[T-15]|0,M=ye.rotrSH(L,F,1)^ye.rotrSH(L,F,8)^ye.shrSH(L,F,7),b=ye.rotrSL(L,F,1)^ye.rotrSL(L,F,8)^ye.shrSL(L,F,7),_=hs[T-2]|0,S=ds[T-2]|0,P=ye.rotrSH(_,S,19)^ye.rotrBH(_,S,61)^ye.shrSH(_,S,6),D=ye.rotrSL(_,S,19)^ye.rotrBL(_,S,61)^ye.shrSL(_,S,6),N=ye.add4L(b,D,ds[T-7],ds[T-16]),R=ye.add4H(N,M,P,hs[T-7],hs[T-16]);hs[T]=R|0,ds[T]=N|0}let{Ah:r,Al:i,Bh:s,Bl:o,Ch:a,Cl:l,Dh:c,Dl:h,Eh:d,El:p,Fh:g,Fl:A,Gh:v,Gl:x,Hh:w,Hl:E}=this;for(let T=0;T<80;T++){const L=ye.rotrSH(d,p,14)^ye.rotrSH(d,p,18)^ye.rotrBH(d,p,41),F=ye.rotrSL(d,p,14)^ye.rotrSL(d,p,18)^ye.rotrBL(d,p,41),M=d&g^~d&v,b=p&A^~p&x,_=ye.add5L(E,F,b,z4[T],ds[T]),S=ye.add5H(_,w,L,M,j4[T],hs[T]),P=_|0,D=ye.rotrSH(r,i,28)^ye.rotrBH(r,i,34)^ye.rotrBH(r,i,39),N=ye.rotrSL(r,i,28)^ye.rotrBL(r,i,34)^ye.rotrBL(r,i,39),R=r&s^r&a^s&a,Te=i&o^i&l^o&l;w=v|0,E=x|0,v=g|0,x=A|0,g=d|0,A=p|0,{h:d,l:p}=ye.add(c|0,h|0,S|0,P|0),c=a|0,h=l|0,a=s|0,l=o|0,s=r|0,o=i|0;const q=ye.add3L(P,N,Te);r=ye.add3H(q,S,D,R),i=q|0}({h:r,l:i}=ye.add(this.Ah|0,this.Al|0,r|0,i|0)),{h:s,l:o}=ye.add(this.Bh|0,this.Bl|0,s|0,o|0),{h:a,l}=ye.add(this.Ch|0,this.Cl|0,a|0,l|0),{h:c,l:h}=ye.add(this.Dh|0,this.Dl|0,c|0,h|0),{h:d,l:p}=ye.add(this.Eh|0,this.El|0,d|0,p|0),{h:g,l:A}=ye.add(this.Fh|0,this.Fl|0,g|0,A|0),{h:v,l:x}=ye.add(this.Gh|0,this.Gl|0,v|0,x|0),{h:w,l:E}=ye.add(this.Hh|0,this.Hl|0,w|0,E|0),this.set(r,i,s,o,a,l,c,h,d,p,g,A,v,x,w,E)}roundClean(){hs.fill(0),ds.fill(0)}destroy(){this.buffer.fill(0),this.set(0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0)}}const H4=SE(()=>new G4);function $4(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("unable to locate global object")}const TT=$4();TT.crypto||TT.msCrypto;function K4(n){switch(n){case"sha256":return aC.create();case"sha512":return H4.create()}O(!1,"invalid hashing algorithm name","algorithm",n)}const[pC,mC,gC]=[[],[],[]],Q4=BigInt(0),wh=BigInt(1),q4=BigInt(2),W4=BigInt(7),J4=BigInt(256),Y4=BigInt(113);for(let n=0,e=wh,t=1,r=0;n<24;n++){[t,r]=[r,(2*t+3*r)%5],pC.push(2*(5*r+t)),mC.push((n+1)*(n+2)/2%64);let i=Q4;for(let s=0;s<7;s++)e=(e<<wh^(e>>W4)*Y4)%J4,e&q4&&(i^=wh<<(wh<<BigInt(s))-wh);gC.push(i)}const[X4,Z4]=uC(gC,!0),bT=(n,e,t)=>t>32?dC(n,e,t):cC(n,e,t),xT=(n,e,t)=>t>32?fC(n,e,t):hC(n,e,t);function eF(n,e=24){const t=new Uint32Array(10);for(let r=24-e;r<24;r++){for(let o=0;o<10;o++)t[o]=n[o]^n[o+10]^n[o+20]^n[o+30]^n[o+40];for(let o=0;o<10;o+=2){const a=(o+8)%10,l=(o+2)%10,c=t[l],h=t[l+1],d=bT(c,h,1)^t[a],p=xT(c,h,1)^t[a+1];for(let g=0;g<50;g+=10)n[o+g]^=d,n[o+g+1]^=p}let i=n[2],s=n[3];for(let o=0;o<24;o++){const a=mC[o],l=bT(i,s,a),c=xT(i,s,a),h=pC[o];i=n[h],s=n[h+1],n[h]=l,n[h+1]=c}for(let o=0;o<50;o+=10){for(let a=0;a<10;a++)t[a]=n[o+a];for(let a=0;a<10;a++)n[o+a]^=~t[(a+2)%10]&t[(a+4)%10]}n[0]^=X4[r],n[1]^=Z4[r]}t.fill(0)}class PE extends xE{constructor(e,t,r,i=!1,s=24){if(super(),this.blockLen=e,this.suffix=t,this.outputLen=r,this.enableXOF=i,this.rounds=s,this.pos=0,this.posOut=0,this.finished=!1,this.destroyed=!1,eg(r),0>=this.blockLen||this.blockLen>=200)throw new Error("Sha3 supports only keccak-f1600 function");this.state=new Uint8Array(200),this.state32=p4(this.state)}keccak(){eF(this.state32,this.rounds),this.posOut=0,this.pos=0}update(e){dc(this);const{blockLen:t,state:r}=this;e=ly(e);const i=e.length;for(let s=0;s<i;){const o=Math.min(t-this.pos,i-s);for(let a=0;a<o;a++)r[this.pos++]^=e[s++];this.pos===t&&this.keccak()}return this}finish(){if(this.finished)return;this.finished=!0;const{state:e,suffix:t,pos:r,blockLen:i}=this;e[r]^=t,t&128&&r===i-1&&this.keccak(),e[i-1]^=128,this.keccak()}writeInto(e){dc(this,!1),bE(e),this.finish();const t=this.state,{blockLen:r}=this;for(let i=0,s=e.length;i<s;){this.posOut>=r&&this.keccak();const o=Math.min(r-this.posOut,s-i);e.set(t.subarray(this.posOut,this.posOut+o),i),this.posOut+=o,i+=o}return e}xofInto(e){if(!this.enableXOF)throw new Error("XOF is not possible for this instance");return this.writeInto(e)}xof(e){return eg(e),this.xofInto(new Uint8Array(e))}digestInto(e){if(nC(e,this),this.finished)throw new Error("digest() was already called");return this.writeInto(e),this.destroy(),e}digest(){return this.digestInto(new Uint8Array(this.outputLen))}destroy(){this.destroyed=!0,this.state.fill(0)}_cloneInto(e){const{blockLen:t,suffix:r,outputLen:i,rounds:s,enableXOF:o}=this;return e||(e=new PE(t,r,i,o,s)),e.state32.set(this.state32),e.pos=this.pos,e.posOut=this.posOut,e.finished=this.finished,e.rounds=s,e.suffix=r,e.outputLen=i,e.enableXOF=o,e.destroyed=this.destroyed,e}}const tF=(n,e,t)=>SE(()=>new PE(e,n,t)),nF=tF(1,136,256/8);let yC=!1;const wC=function(n){return nF(n)};let vC=wC;function dt(n){const e=we(n,"data");return te(vC(e))}dt._=wC;dt.lock=function(){yC=!0};dt.register=function(n){if(yC)throw new TypeError("keccak256 is locked");vC=n};Object.freeze(dt);const _C=function(n){return K4("sha256").update(n).digest()};let EC=_C,AC=!1;function Oc(n){const e=we(n,"data");return te(EC(e))}Oc._=_C;Oc.lock=function(){AC=!0};Oc.register=function(n){if(AC)throw new Error("sha256 is locked");EC=n};Object.freeze(Oc);Object.freeze(Oc);/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */const IC=BigInt(0),uy=BigInt(1),rF=BigInt(2),cy=n=>n instanceof Uint8Array,iF=Array.from({length:256},(n,e)=>e.toString(16).padStart(2,"0"));function fc(n){if(!cy(n))throw new Error("Uint8Array expected");let e="";for(let t=0;t<n.length;t++)e+=iF[n[t]];return e}function TC(n){const e=n.toString(16);return e.length&1?`0${e}`:e}function RE(n){if(typeof n!="string")throw new Error("hex string expected, got "+typeof n);return BigInt(n===""?"0":`0x${n}`)}function pc(n){if(typeof n!="string")throw new Error("hex string expected, got "+typeof n);const e=n.length;if(e%2)throw new Error("padded hex string expected, got unpadded hex of length "+e);const t=new Uint8Array(e/2);for(let r=0;r<t.length;r++){const i=r*2,s=n.slice(i,i+2),o=Number.parseInt(s,16);if(Number.isNaN(o)||o<0)throw new Error("Invalid byte sequence");t[r]=o}return t}function ka(n){return RE(fc(n))}function CE(n){if(!cy(n))throw new Error("Uint8Array expected");return RE(fc(Uint8Array.from(n).reverse()))}function mc(n,e){return pc(n.toString(16).padStart(e*2,"0"))}function kE(n,e){return mc(n,e).reverse()}function sF(n){return pc(TC(n))}function vr(n,e,t){let r;if(typeof e=="string")try{r=pc(e)}catch(s){throw new Error(`${n} must be valid hex string, got "${e}". Cause: ${s}`)}else if(cy(e))r=Uint8Array.from(e);else throw new Error(`${n} must be hex string or Uint8Array`);const i=r.length;if(typeof t=="number"&&i!==t)throw new Error(`${n} expected ${t} bytes, got ${i}`);return r}function Td(...n){const e=new Uint8Array(n.reduce((r,i)=>r+i.length,0));let t=0;return n.forEach(r=>{if(!cy(r))throw new Error("Uint8Array expected");e.set(r,t),t+=r.length}),e}function oF(n,e){if(n.length!==e.length)return!1;for(let t=0;t<n.length;t++)if(n[t]!==e[t])return!1;return!0}function aF(n){if(typeof n!="string")throw new Error(`utf8ToBytes expected string, got ${typeof n}`);return new Uint8Array(new TextEncoder().encode(n))}function lF(n){let e;for(e=0;n>IC;n>>=uy,e+=1);return e}function uF(n,e){return n>>BigInt(e)&uy}const cF=(n,e,t)=>n|(t?uy:IC)<<BigInt(e),NE=n=>(rF<<BigInt(n-1))-uy,G0=n=>new Uint8Array(n),ST=n=>Uint8Array.from(n);function bC(n,e,t){if(typeof n!="number"||n<2)throw new Error("hashLen must be a number");if(typeof e!="number"||e<2)throw new Error("qByteLen must be a number");if(typeof t!="function")throw new Error("hmacFn must be a function");let r=G0(n),i=G0(n),s=0;const o=()=>{r.fill(1),i.fill(0),s=0},a=(...d)=>t(i,r,...d),l=(d=G0())=>{i=a(ST([0]),d),r=a(),d.length!==0&&(i=a(ST([1]),d),r=a())},c=()=>{if(s++>=1e3)throw new Error("drbg: tried 1000 values");let d=0;const p=[];for(;d<e;){r=a();const g=r.slice();p.push(g),d+=r.length}return Td(...p)};return(d,p)=>{o(),l(d);let g;for(;!(g=p(c()));)l();return o(),g}}const hF={bigint:n=>typeof n=="bigint",function:n=>typeof n=="function",boolean:n=>typeof n=="boolean",string:n=>typeof n=="string",stringOrUint8Array:n=>typeof n=="string"||n instanceof Uint8Array,isSafeInteger:n=>Number.isSafeInteger(n),array:n=>Array.isArray(n),field:(n,e)=>e.Fp.isValid(n),hash:n=>typeof n=="function"&&Number.isSafeInteger(n.outputLen)};function Sf(n,e,t={}){const r=(i,s,o)=>{const a=hF[s];if(typeof a!="function")throw new Error(`Invalid validator "${s}", expected function`);const l=n[i];if(!(o&&l===void 0)&&!a(l,n))throw new Error(`Invalid param ${String(i)}=${l} (${typeof l}), expected ${s}`)};for(const[i,s]of Object.entries(e))r(i,s,!1);for(const[i,s]of Object.entries(t))r(i,s,!0);return n}const dF=Object.freeze(Object.defineProperty({__proto__:null,bitGet:uF,bitLen:lF,bitMask:NE,bitSet:cF,bytesToHex:fc,bytesToNumberBE:ka,bytesToNumberLE:CE,concatBytes:Td,createHmacDrbg:bC,ensureBytes:vr,equalBytes:oF,hexToBytes:pc,hexToNumber:RE,numberToBytesBE:mc,numberToBytesLE:kE,numberToHexUnpadded:TC,numberToVarBytesBE:sF,utf8ToBytes:aF,validateObject:Sf},Symbol.toStringTag,{value:"Module"}));/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */const bt=BigInt(0),ut=BigInt(1),$o=BigInt(2),fF=BigInt(3),Av=BigInt(4),PT=BigInt(5),RT=BigInt(8);BigInt(9);BigInt(16);function Tn(n,e){const t=n%e;return t>=bt?t:e+t}function pF(n,e,t){if(t<=bt||e<bt)throw new Error("Expected power/modulo > 0");if(t===ut)return bt;let r=ut;for(;e>bt;)e&ut&&(r=r*n%t),n=n*n%t,e>>=ut;return r}function Jn(n,e,t){let r=n;for(;e-- >bt;)r*=r,r%=t;return r}function Iv(n,e){if(n===bt||e<=bt)throw new Error(`invert: expected positive integers, got n=${n} mod=${e}`);let t=Tn(n,e),r=e,i=bt,s=ut;for(;t!==bt;){const a=r/t,l=r%t,c=i-s*a;r=t,t=l,i=s,s=c}if(r!==ut)throw new Error("invert: does not exist");return Tn(i,e)}function mF(n){const e=(n-ut)/$o;let t,r,i;for(t=n-ut,r=0;t%$o===bt;t/=$o,r++);for(i=$o;i<n&&pF(i,e,n)!==n-ut;i++);if(r===1){const o=(n+ut)/Av;return function(l,c){const h=l.pow(c,o);if(!l.eql(l.sqr(h),c))throw new Error("Cannot find square root");return h}}const s=(t+ut)/$o;return function(a,l){if(a.pow(l,e)===a.neg(a.ONE))throw new Error("Cannot find square root");let c=r,h=a.pow(a.mul(a.ONE,i),t),d=a.pow(l,s),p=a.pow(l,t);for(;!a.eql(p,a.ONE);){if(a.eql(p,a.ZERO))return a.ZERO;let g=1;for(let v=a.sqr(p);g<c&&!a.eql(v,a.ONE);g++)v=a.sqr(v);const A=a.pow(h,ut<<BigInt(c-g-1));h=a.sqr(A),d=a.mul(d,A),p=a.mul(p,h),c=g}return d}}function gF(n){if(n%Av===fF){const e=(n+ut)/Av;return function(r,i){const s=r.pow(i,e);if(!r.eql(r.sqr(s),i))throw new Error("Cannot find square root");return s}}if(n%RT===PT){const e=(n-PT)/RT;return function(r,i){const s=r.mul(i,$o),o=r.pow(s,e),a=r.mul(i,o),l=r.mul(r.mul(a,$o),o),c=r.mul(a,r.sub(l,r.ONE));if(!r.eql(r.sqr(c),i))throw new Error("Cannot find square root");return c}}return mF(n)}const yF=["create","isValid","is0","neg","inv","sqrt","sqr","eql","add","sub","mul","pow","div","addN","subN","mulN","sqrN"];function wF(n){const e={ORDER:"bigint",MASK:"bigint",BYTES:"isSafeInteger",BITS:"isSafeInteger"},t=yF.reduce((r,i)=>(r[i]="function",r),e);return Sf(n,t)}function vF(n,e,t){if(t<bt)throw new Error("Expected power > 0");if(t===bt)return n.ONE;if(t===ut)return e;let r=n.ONE,i=e;for(;t>bt;)t&ut&&(r=n.mul(r,i)),i=n.sqr(i),t>>=ut;return r}function _F(n,e){const t=new Array(e.length),r=e.reduce((s,o,a)=>n.is0(o)?s:(t[a]=s,n.mul(s,o)),n.ONE),i=n.inv(r);return e.reduceRight((s,o,a)=>n.is0(o)?s:(t[a]=n.mul(s,t[a]),n.mul(s,o)),i),t}function xC(n,e){const t=e!==void 0?e:n.toString(2).length,r=Math.ceil(t/8);return{nBitLength:t,nByteLength:r}}function EF(n,e,t=!1,r={}){if(n<=bt)throw new Error(`Expected Field ORDER > 0, got ${n}`);const{nBitLength:i,nByteLength:s}=xC(n,e);if(s>2048)throw new Error("Field lengths over 2048 bytes are not supported");const o=gF(n),a=Object.freeze({ORDER:n,BITS:i,BYTES:s,MASK:NE(i),ZERO:bt,ONE:ut,create:l=>Tn(l,n),isValid:l=>{if(typeof l!="bigint")throw new Error(`Invalid field element: expected bigint, got ${typeof l}`);return bt<=l&&l<n},is0:l=>l===bt,isOdd:l=>(l&ut)===ut,neg:l=>Tn(-l,n),eql:(l,c)=>l===c,sqr:l=>Tn(l*l,n),add:(l,c)=>Tn(l+c,n),sub:(l,c)=>Tn(l-c,n),mul:(l,c)=>Tn(l*c,n),pow:(l,c)=>vF(a,l,c),div:(l,c)=>Tn(l*Iv(c,n),n),sqrN:l=>l*l,addN:(l,c)=>l+c,subN:(l,c)=>l-c,mulN:(l,c)=>l*c,inv:l=>Iv(l,n),sqrt:r.sqrt||(l=>o(a,l)),invertBatch:l=>_F(a,l),cmov:(l,c,h)=>h?c:l,toBytes:l=>t?kE(l,s):mc(l,s),fromBytes:l=>{if(l.length!==s)throw new Error(`Fp.fromBytes: expected ${s}, got ${l.length}`);return t?CE(l):ka(l)}});return Object.freeze(a)}function SC(n){if(typeof n!="bigint")throw new Error("field order must be bigint");const e=n.toString(2).length;return Math.ceil(e/8)}function PC(n){const e=SC(n);return e+Math.ceil(e/2)}function AF(n,e,t=!1){const r=n.length,i=SC(e),s=PC(e);if(r<16||r<s||r>1024)throw new Error(`expected ${s}-1024 bytes of input, got ${r}`);const o=t?ka(n):CE(n),a=Tn(o,e-ut)+ut;return t?kE(a,i):mc(a,i)}/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */const IF=BigInt(0),H0=BigInt(1);function TF(n,e){const t=(i,s)=>{const o=s.negate();return i?o:s},r=i=>{const s=Math.ceil(e/i)+1,o=2**(i-1);return{windows:s,windowSize:o}};return{constTimeNegate:t,unsafeLadder(i,s){let o=n.ZERO,a=i;for(;s>IF;)s&H0&&(o=o.add(a)),a=a.double(),s>>=H0;return o},precomputeWindow(i,s){const{windows:o,windowSize:a}=r(s),l=[];let c=i,h=c;for(let d=0;d<o;d++){h=c,l.push(h);for(let p=1;p<a;p++)h=h.add(c),l.push(h);c=h.double()}return l},wNAF(i,s,o){const{windows:a,windowSize:l}=r(i);let c=n.ZERO,h=n.BASE;const d=BigInt(2**i-1),p=2**i,g=BigInt(i);for(let A=0;A<a;A++){const v=A*l;let x=Number(o&d);o>>=g,x>l&&(x-=p,o+=H0);const w=v,E=v+Math.abs(x)-1,T=A%2!==0,L=x<0;x===0?h=h.add(t(T,s[w])):c=c.add(t(L,s[E]))}return{p:c,f:h}},wNAFCached(i,s,o,a){const l=i._WINDOW_SIZE||1;let c=s.get(i);return c||(c=this.precomputeWindow(i,l),l!==1&&s.set(i,a(c))),this.wNAF(l,c,o)}}}function RC(n){return wF(n.Fp),Sf(n,{n:"bigint",h:"bigint",Gx:"field",Gy:"field"},{nBitLength:"isSafeInteger",nByteLength:"isSafeInteger"}),Object.freeze({...xC(n.n,n.nBitLength),...n,p:n.Fp.ORDER})}/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */function bF(n){const e=RC(n);Sf(e,{a:"field",b:"field"},{allowedPrivateKeyLengths:"array",wrapPrivateKey:"boolean",isTorsionFree:"function",clearCofactor:"function",allowInfinityPoint:"boolean",fromBytes:"function",toBytes:"function"});const{endo:t,Fp:r,a:i}=e;if(t){if(!r.eql(i,r.ZERO))throw new Error("Endomorphism can only be defined for Koblitz curves that have a=0");if(typeof t!="object"||typeof t.beta!="bigint"||typeof t.splitScalar!="function")throw new Error("Expected endomorphism with beta: bigint and splitScalar: function")}return Object.freeze({...e})}const{bytesToNumberBE:xF,hexToBytes:SF}=dF,ia={Err:class extends Error{constructor(e=""){super(e)}},_parseInt(n){const{Err:e}=ia;if(n.length<2||n[0]!==2)throw new e("Invalid signature integer tag");const t=n[1],r=n.subarray(2,t+2);if(!t||r.length!==t)throw new e("Invalid signature integer: wrong length");if(r[0]&128)throw new e("Invalid signature integer: negative");if(r[0]===0&&!(r[1]&128))throw new e("Invalid signature integer: unnecessary leading zero");return{d:xF(r),l:n.subarray(t+2)}},toSig(n){const{Err:e}=ia,t=typeof n=="string"?SF(n):n;if(!(t instanceof Uint8Array))throw new Error("ui8a expected");let r=t.length;if(r<2||t[0]!=48)throw new e("Invalid signature tag");if(t[1]!==r-2)throw new e("Invalid signature: incorrect length");const{d:i,l:s}=ia._parseInt(t.subarray(2)),{d:o,l:a}=ia._parseInt(s);if(a.length)throw new e("Invalid signature: left bytes after parsing");return{r:i,s:o}},hexFromSig(n){const e=c=>Number.parseInt(c[0],16)&8?"00"+c:c,t=c=>{const h=c.toString(16);return h.length&1?`0${h}`:h},r=e(t(n.s)),i=e(t(n.r)),s=r.length/2,o=i.length/2,a=t(s),l=t(o);return`30${t(o+s+4)}02${l}${i}02${a}${r}`}},ki=BigInt(0),rr=BigInt(1);BigInt(2);const CT=BigInt(3);BigInt(4);function PF(n){const e=bF(n),{Fp:t}=e,r=e.toBytes||((A,v,x)=>{const w=v.toAffine();return Td(Uint8Array.from([4]),t.toBytes(w.x),t.toBytes(w.y))}),i=e.fromBytes||(A=>{const v=A.subarray(1),x=t.fromBytes(v.subarray(0,t.BYTES)),w=t.fromBytes(v.subarray(t.BYTES,2*t.BYTES));return{x,y:w}});function s(A){const{a:v,b:x}=e,w=t.sqr(A),E=t.mul(w,A);return t.add(t.add(E,t.mul(A,v)),x)}if(!t.eql(t.sqr(e.Gy),s(e.Gx)))throw new Error("bad generator point: equation left != right");function o(A){return typeof A=="bigint"&&ki<A&&A<e.n}function a(A){if(!o(A))throw new Error("Expected valid bigint: 0 < bigint < curve.n")}function l(A){const{allowedPrivateKeyLengths:v,nByteLength:x,wrapPrivateKey:w,n:E}=e;if(v&&typeof A!="bigint"){if(A instanceof Uint8Array&&(A=fc(A)),typeof A!="string"||!v.includes(A.length))throw new Error("Invalid key");A=A.padStart(x*2,"0")}let T;try{T=typeof A=="bigint"?A:ka(vr("private key",A,x))}catch{throw new Error(`private key must be ${x} bytes, hex or bigint, not ${typeof A}`)}return w&&(T=Tn(T,E)),a(T),T}const c=new Map;function h(A){if(!(A instanceof d))throw new Error("ProjectivePoint expected")}class d{constructor(v,x,w){if(this.px=v,this.py=x,this.pz=w,v==null||!t.isValid(v))throw new Error("x required");if(x==null||!t.isValid(x))throw new Error("y required");if(w==null||!t.isValid(w))throw new Error("z required")}static fromAffine(v){const{x,y:w}=v||{};if(!v||!t.isValid(x)||!t.isValid(w))throw new Error("invalid affine point");if(v instanceof d)throw new Error("projective point not allowed");const E=T=>t.eql(T,t.ZERO);return E(x)&&E(w)?d.ZERO:new d(x,w,t.ONE)}get x(){return this.toAffine().x}get y(){return this.toAffine().y}static normalizeZ(v){const x=t.invertBatch(v.map(w=>w.pz));return v.map((w,E)=>w.toAffine(x[E])).map(d.fromAffine)}static fromHex(v){const x=d.fromAffine(i(vr("pointHex",v)));return x.assertValidity(),x}static fromPrivateKey(v){return d.BASE.multiply(l(v))}_setWindowSize(v){this._WINDOW_SIZE=v,c.delete(this)}assertValidity(){if(this.is0()){if(e.allowInfinityPoint&&!t.is0(this.py))return;throw new Error("bad point: ZERO")}const{x:v,y:x}=this.toAffine();if(!t.isValid(v)||!t.isValid(x))throw new Error("bad point: x or y not FE");const w=t.sqr(x),E=s(v);if(!t.eql(w,E))throw new Error("bad point: equation left != right");if(!this.isTorsionFree())throw new Error("bad point: not in prime-order subgroup")}hasEvenY(){const{y:v}=this.toAffine();if(t.isOdd)return!t.isOdd(v);throw new Error("Field doesn't support isOdd")}equals(v){h(v);const{px:x,py:w,pz:E}=this,{px:T,py:L,pz:F}=v,M=t.eql(t.mul(x,F),t.mul(T,E)),b=t.eql(t.mul(w,F),t.mul(L,E));return M&&b}negate(){return new d(this.px,t.neg(this.py),this.pz)}double(){const{a:v,b:x}=e,w=t.mul(x,CT),{px:E,py:T,pz:L}=this;let F=t.ZERO,M=t.ZERO,b=t.ZERO,_=t.mul(E,E),S=t.mul(T,T),P=t.mul(L,L),D=t.mul(E,T);return D=t.add(D,D),b=t.mul(E,L),b=t.add(b,b),F=t.mul(v,b),M=t.mul(w,P),M=t.add(F,M),F=t.sub(S,M),M=t.add(S,M),M=t.mul(F,M),F=t.mul(D,F),b=t.mul(w,b),P=t.mul(v,P),D=t.sub(_,P),D=t.mul(v,D),D=t.add(D,b),b=t.add(_,_),_=t.add(b,_),_=t.add(_,P),_=t.mul(_,D),M=t.add(M,_),P=t.mul(T,L),P=t.add(P,P),_=t.mul(P,D),F=t.sub(F,_),b=t.mul(P,S),b=t.add(b,b),b=t.add(b,b),new d(F,M,b)}add(v){h(v);const{px:x,py:w,pz:E}=this,{px:T,py:L,pz:F}=v;let M=t.ZERO,b=t.ZERO,_=t.ZERO;const S=e.a,P=t.mul(e.b,CT);let D=t.mul(x,T),N=t.mul(w,L),R=t.mul(E,F),Te=t.add(x,w),q=t.add(T,L);Te=t.mul(Te,q),q=t.add(D,N),Te=t.sub(Te,q),q=t.add(x,E);let ne=t.add(T,F);return q=t.mul(q,ne),ne=t.add(D,R),q=t.sub(q,ne),ne=t.add(w,E),M=t.add(L,F),ne=t.mul(ne,M),M=t.add(N,R),ne=t.sub(ne,M),_=t.mul(S,q),M=t.mul(P,R),_=t.add(M,_),M=t.sub(N,_),_=t.add(N,_),b=t.mul(M,_),N=t.add(D,D),N=t.add(N,D),R=t.mul(S,R),q=t.mul(P,q),N=t.add(N,R),R=t.sub(D,R),R=t.mul(S,R),q=t.add(q,R),D=t.mul(N,q),b=t.add(b,D),D=t.mul(ne,q),M=t.mul(Te,M),M=t.sub(M,D),D=t.mul(Te,N),_=t.mul(ne,_),_=t.add(_,D),new d(M,b,_)}subtract(v){return this.add(v.negate())}is0(){return this.equals(d.ZERO)}wNAF(v){return g.wNAFCached(this,c,v,x=>{const w=t.invertBatch(x.map(E=>E.pz));return x.map((E,T)=>E.toAffine(w[T])).map(d.fromAffine)})}multiplyUnsafe(v){const x=d.ZERO;if(v===ki)return x;if(a(v),v===rr)return this;const{endo:w}=e;if(!w)return g.unsafeLadder(this,v);let{k1neg:E,k1:T,k2neg:L,k2:F}=w.splitScalar(v),M=x,b=x,_=this;for(;T>ki||F>ki;)T&rr&&(M=M.add(_)),F&rr&&(b=b.add(_)),_=_.double(),T>>=rr,F>>=rr;return E&&(M=M.negate()),L&&(b=b.negate()),b=new d(t.mul(b.px,w.beta),b.py,b.pz),M.add(b)}multiply(v){a(v);let x=v,w,E;const{endo:T}=e;if(T){const{k1neg:L,k1:F,k2neg:M,k2:b}=T.splitScalar(x);let{p:_,f:S}=this.wNAF(F),{p:P,f:D}=this.wNAF(b);_=g.constTimeNegate(L,_),P=g.constTimeNegate(M,P),P=new d(t.mul(P.px,T.beta),P.py,P.pz),w=_.add(P),E=S.add(D)}else{const{p:L,f:F}=this.wNAF(x);w=L,E=F}return d.normalizeZ([w,E])[0]}multiplyAndAddUnsafe(v,x,w){const E=d.BASE,T=(F,M)=>M===ki||M===rr||!F.equals(E)?F.multiplyUnsafe(M):F.multiply(M),L=T(this,x).add(T(v,w));return L.is0()?void 0:L}toAffine(v){const{px:x,py:w,pz:E}=this,T=this.is0();v==null&&(v=T?t.ONE:t.inv(E));const L=t.mul(x,v),F=t.mul(w,v),M=t.mul(E,v);if(T)return{x:t.ZERO,y:t.ZERO};if(!t.eql(M,t.ONE))throw new Error("invZ was invalid");return{x:L,y:F}}isTorsionFree(){const{h:v,isTorsionFree:x}=e;if(v===rr)return!0;if(x)return x(d,this);throw new Error("isTorsionFree() has not been declared for the elliptic curve")}clearCofactor(){const{h:v,clearCofactor:x}=e;return v===rr?this:x?x(d,this):this.multiplyUnsafe(e.h)}toRawBytes(v=!0){return this.assertValidity(),r(d,this,v)}toHex(v=!0){return fc(this.toRawBytes(v))}}d.BASE=new d(e.Gx,e.Gy,t.ONE),d.ZERO=new d(t.ZERO,t.ONE,t.ZERO);const p=e.nBitLength,g=TF(d,e.endo?Math.ceil(p/2):p);return{CURVE:e,ProjectivePoint:d,normPrivateKeyToScalar:l,weierstrassEquation:s,isWithinCurveOrder:o}}function RF(n){const e=RC(n);return Sf(e,{hash:"hash",hmac:"function",randomBytes:"function"},{bits2int:"function",bits2int_modN:"function",lowS:"boolean"}),Object.freeze({lowS:!0,...e})}function CF(n){const e=RF(n),{Fp:t,n:r}=e,i=t.BYTES+1,s=2*t.BYTES+1;function o(q){return ki<q&&q<t.ORDER}function a(q){return Tn(q,r)}function l(q){return Iv(q,r)}const{ProjectivePoint:c,normPrivateKeyToScalar:h,weierstrassEquation:d,isWithinCurveOrder:p}=PF({...e,toBytes(q,ne,de){const Q=ne.toAffine(),ee=t.toBytes(Q.x),ae=Td;return de?ae(Uint8Array.from([ne.hasEvenY()?2:3]),ee):ae(Uint8Array.from([4]),ee,t.toBytes(Q.y))},fromBytes(q){const ne=q.length,de=q[0],Q=q.subarray(1);if(ne===i&&(de===2||de===3)){const ee=ka(Q);if(!o(ee))throw new Error("Point is not on curve");const ae=d(ee);let _e=t.sqrt(ae);const me=(_e&rr)===rr;return(de&1)===1!==me&&(_e=t.neg(_e)),{x:ee,y:_e}}else if(ne===s&&de===4){const ee=t.fromBytes(Q.subarray(0,t.BYTES)),ae=t.fromBytes(Q.subarray(t.BYTES,2*t.BYTES));return{x:ee,y:ae}}else throw new Error(`Point of length ${ne} was invalid. Expected ${i} compressed bytes or ${s} uncompressed bytes`)}}),g=q=>fc(mc(q,e.nByteLength));function A(q){const ne=r>>rr;return q>ne}function v(q){return A(q)?a(-q):q}const x=(q,ne,de)=>ka(q.slice(ne,de));class w{constructor(ne,de,Q){this.r=ne,this.s=de,this.recovery=Q,this.assertValidity()}static fromCompact(ne){const de=e.nByteLength;return ne=vr("compactSignature",ne,de*2),new w(x(ne,0,de),x(ne,de,2*de))}static fromDER(ne){const{r:de,s:Q}=ia.toSig(vr("DER",ne));return new w(de,Q)}assertValidity(){if(!p(this.r))throw new Error("r must be 0 < r < CURVE.n");if(!p(this.s))throw new Error("s must be 0 < s < CURVE.n")}addRecoveryBit(ne){return new w(this.r,this.s,ne)}recoverPublicKey(ne){const{r:de,s:Q,recovery:ee}=this,ae=b(vr("msgHash",ne));if(ee==null||![0,1,2,3].includes(ee))throw new Error("recovery id invalid");const _e=ee===2||ee===3?de+e.n:de;if(_e>=t.ORDER)throw new Error("recovery id 2 or 3 invalid");const me=ee&1?"03":"02",ke=c.fromHex(me+g(_e)),_t=l(_e),Ft=a(-ae*_t),Zt=a(Q*_t),mt=c.BASE.multiplyAndAddUnsafe(ke,Ft,Zt);if(!mt)throw new Error("point at infinify");return mt.assertValidity(),mt}hasHighS(){return A(this.s)}normalizeS(){return this.hasHighS()?new w(this.r,a(-this.s),this.recovery):this}toDERRawBytes(){return pc(this.toDERHex())}toDERHex(){return ia.hexFromSig({r:this.r,s:this.s})}toCompactRawBytes(){return pc(this.toCompactHex())}toCompactHex(){return g(this.r)+g(this.s)}}const E={isValidPrivateKey(q){try{return h(q),!0}catch{return!1}},normPrivateKeyToScalar:h,randomPrivateKey:()=>{const q=PC(e.n);return AF(e.randomBytes(q),e.n)},precompute(q=8,ne=c.BASE){return ne._setWindowSize(q),ne.multiply(BigInt(3)),ne}};function T(q,ne=!0){return c.fromPrivateKey(q).toRawBytes(ne)}function L(q){const ne=q instanceof Uint8Array,de=typeof q=="string",Q=(ne||de)&&q.length;return ne?Q===i||Q===s:de?Q===2*i||Q===2*s:q instanceof c}function F(q,ne,de=!0){if(L(q))throw new Error("first arg must be private key");if(!L(ne))throw new Error("second arg must be public key");return c.fromHex(ne).multiply(h(q)).toRawBytes(de)}const M=e.bits2int||function(q){const ne=ka(q),de=q.length*8-e.nBitLength;return de>0?ne>>BigInt(de):ne},b=e.bits2int_modN||function(q){return a(M(q))},_=NE(e.nBitLength);function S(q){if(typeof q!="bigint")throw new Error("bigint expected");if(!(ki<=q&&q<_))throw new Error(`bigint expected < 2^${e.nBitLength}`);return mc(q,e.nByteLength)}function P(q,ne,de=D){if(["recovered","canonical"].some(ui=>ui in de))throw new Error("sign() legacy options not supported");const{hash:Q,randomBytes:ee}=e;let{lowS:ae,prehash:_e,extraEntropy:me}=de;ae==null&&(ae=!0),q=vr("msgHash",q),_e&&(q=vr("prehashed msgHash",Q(q)));const ke=b(q),_t=h(ne),Ft=[S(_t),S(ke)];if(me!=null){const ui=me===!0?ee(t.BYTES):me;Ft.push(vr("extraEntropy",ui))}const Zt=Td(...Ft),mt=ke;function $c(ui){const fr=M(ui);if(!p(fr))return;const Co=l(fr),Vr=c.BASE.multiply(fr).toAffine(),en=a(Vr.x);if(en===ki)return;const Mr=a(Co*a(mt+en*_t));if(Mr===ki)return;let fl=(Vr.x===en?0:2)|Number(Vr.y&rr),Kc=Mr;return ae&&A(Mr)&&(Kc=v(Mr),fl^=1),new w(en,Kc,fl)}return{seed:Zt,k2sig:$c}}const D={lowS:e.lowS,prehash:!1},N={lowS:e.lowS,prehash:!1};function R(q,ne,de=D){const{seed:Q,k2sig:ee}=P(q,ne,de),ae=e;return bC(ae.hash.outputLen,ae.nByteLength,ae.hmac)(Q,ee)}c.BASE._setWindowSize(8);function Te(q,ne,de,Q=N){var Vr;const ee=q;if(ne=vr("msgHash",ne),de=vr("publicKey",de),"strict"in Q)throw new Error("options.strict was renamed to lowS");const{lowS:ae,prehash:_e}=Q;let me,ke;try{if(typeof ee=="string"||ee instanceof Uint8Array)try{me=w.fromDER(ee)}catch(en){if(!(en instanceof ia.Err))throw en;me=w.fromCompact(ee)}else if(typeof ee=="object"&&typeof ee.r=="bigint"&&typeof ee.s=="bigint"){const{r:en,s:Mr}=ee;me=new w(en,Mr)}else throw new Error("PARSE");ke=c.fromHex(de)}catch(en){if(en.message==="PARSE")throw new Error("signature must be Signature instance, Uint8Array or hex string");return!1}if(ae&&me.hasHighS())return!1;_e&&(ne=e.hash(ne));const{r:_t,s:Ft}=me,Zt=b(ne),mt=l(Ft),$c=a(Zt*mt),ui=a(_t*mt),fr=(Vr=c.BASE.multiplyAndAddUnsafe(ke,$c,ui))==null?void 0:Vr.toAffine();return fr?a(fr.x)===_t:!1}return{CURVE:e,getPublicKey:T,getSharedSecret:F,sign:R,verify:Te,ProjectivePoint:c,Signature:w,utils:E}}/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */function kF(n){return{hash:n,hmac:(e,...t)=>sC(n,e,y4(...t)),randomBytes:w4}}function NF(n,e){const t=r=>CF({...n,...kF(r)});return Object.freeze({...t(e),create:t})}/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */const CC=BigInt("0xfffffffffffffffffffffffffffffffffffffffffffffffffffffffefffffc2f"),kT=BigInt("0xfffffffffffffffffffffffffffffffebaaedce6af48a03bbfd25e8cd0364141"),DF=BigInt(1),Tv=BigInt(2),NT=(n,e)=>(n+e/Tv)/e;function OF(n){const e=CC,t=BigInt(3),r=BigInt(6),i=BigInt(11),s=BigInt(22),o=BigInt(23),a=BigInt(44),l=BigInt(88),c=n*n*n%e,h=c*c*n%e,d=Jn(h,t,e)*h%e,p=Jn(d,t,e)*h%e,g=Jn(p,Tv,e)*c%e,A=Jn(g,i,e)*g%e,v=Jn(A,s,e)*A%e,x=Jn(v,a,e)*v%e,w=Jn(x,l,e)*x%e,E=Jn(w,a,e)*v%e,T=Jn(E,t,e)*h%e,L=Jn(T,o,e)*A%e,F=Jn(L,r,e)*c%e,M=Jn(F,Tv,e);if(!bv.eql(bv.sqr(M),n))throw new Error("Cannot find square root");return M}const bv=EF(CC,void 0,void 0,{sqrt:OF}),gs=NF({a:BigInt(0),b:BigInt(7),Fp:bv,n:kT,Gx:BigInt("55066263022277343669578718895168534326250603453777594175500187360389116729240"),Gy:BigInt("32670510020758816978083085130507043184471273380659243275938904335757337482424"),h:BigInt(1),lowS:!0,endo:{beta:BigInt("0x7ae96a2b657c07106e64479eac3434e99cf0497512f58995c1396c28719501ee"),splitScalar:n=>{const e=kT,t=BigInt("0x3086d221a7d46bcde86c90e49284eb15"),r=-DF*BigInt("0xe4437ed6010e88286f547fa90abfe4c3"),i=BigInt("0x114ca50f7a8e2f3f657c1108d9d44cfd8"),s=t,o=BigInt("0x100000000000000000000000000000000"),a=NT(s*n,e),l=NT(-r*n,e);let c=Tn(n-a*t-l*i,e),h=Tn(-a*r-l*s,e);const d=c>o,p=h>o;if(d&&(c=e-c),p&&(h=e-h),c>o||h>o)throw new Error("splitScalar: Endomorphism failed, k="+n);return{k1neg:d,k1:c,k2neg:p,k2:h}}}},aC);BigInt(0);gs.ProjectivePoint;const bd="0x0000000000000000000000000000000000000000",DT="0x0000000000000000000000000000000000000000000000000000000000000000",OT=BigInt(0),LT=BigInt(1),VT=BigInt(2),MT=BigInt(27),BT=BigInt(28),Pp=BigInt(35),_l={};function FT(n){return Ji(Lt(n),32)}var Au,Iu,Tu,ga;const yr=class yr{constructor(e,t,r,i){U(this,Au,void 0);U(this,Iu,void 0);U(this,Tu,void 0);U(this,ga,void 0);bf(e,_l,"Signature"),k(this,Au,t),k(this,Iu,r),k(this,Tu,i),k(this,ga,null)}get r(){return y(this,Au)}set r(e){O(su(e)===32,"invalid r","value",e),k(this,Au,te(e))}get s(){return y(this,Iu)}set s(e){O(su(e)===32,"invalid s","value",e);const t=te(e);O(parseInt(t.substring(0,3))<8,"non-canonical s","value",t),k(this,Iu,t)}get v(){return y(this,Tu)}set v(e){const t=ge(e,"value");O(t===27||t===28,"invalid v","v",e),k(this,Tu,t)}get networkV(){return y(this,ga)}get legacyChainId(){const e=this.networkV;return e==null?null:yr.getChainId(e)}get yParity(){return this.v===27?0:1}get yParityAndS(){const e=we(this.s);return this.yParity&&(e[0]|=128),te(e)}get compactSerialized(){return ot([this.r,this.yParityAndS])}get serialized(){return ot([this.r,this.s,this.yParity?"0x1c":"0x1b"])}[Symbol.for("nodejs.util.inspect.custom")](){return`Signature { r: "${this.r}", s: "${this.s}", yParity: ${this.yParity}, networkV: ${this.networkV} }`}clone(){const e=new yr(_l,this.r,this.s,this.v);return this.networkV&&k(e,ga,this.networkV),e}toJSON(){const e=this.networkV;return{_type:"signature",networkV:e!=null?e.toString():null,r:this.r,s:this.s,v:this.v}}static getChainId(e){const t=se(e,"v");return t==MT||t==BT?OT:(O(t>=Pp,"invalid EIP-155 v","v",e),(t-Pp)/VT)}static getChainIdV(e,t){return se(e)*VT+BigInt(35+t-27)}static getNormalizedV(e){const t=se(e);return t===OT||t===MT?27:t===LT||t===BT?28:(O(t>=Pp,"invalid v","v",e),t&LT?27:28)}static from(e){function t(c,h){O(c,h,"signature",e)}if(e==null)return new yr(_l,DT,DT,27);if(typeof e=="string"){const c=we(e,"signature");if(c.length===64){const h=te(c.slice(0,32)),d=c.slice(32,64),p=d[0]&128?28:27;return d[0]&=127,new yr(_l,h,te(d),p)}if(c.length===65){const h=te(c.slice(0,32)),d=c.slice(32,64);t((d[0]&128)===0,"non-canonical s");const p=yr.getNormalizedV(c[64]);return new yr(_l,h,te(d),p)}t(!1,"invalid raw signature length")}if(e instanceof yr)return e.clone();const r=e.r;t(r!=null,"missing r");const i=FT(r),s=function(c,h){if(c!=null)return FT(c);if(h!=null){t(je(h,32),"invalid yParityAndS");const d=we(h);return d[0]&=127,te(d)}t(!1,"missing s")}(e.s,e.yParityAndS);t((we(s)[0]&128)==0,"non-canonical s");const{networkV:o,v:a}=function(c,h,d){if(c!=null){const p=se(c);return{networkV:p>=Pp?p:void 0,v:yr.getNormalizedV(p)}}if(h!=null)return t(je(h,32),"invalid yParityAndS"),{v:we(h)[0]&128?28:27};if(d!=null){switch(ge(d,"sig.yParity")){case 0:return{v:27};case 1:return{v:28}}t(!1,"invalid yParity")}t(!1,"missing v")}(e.v,e.yParityAndS,e.yParity),l=new yr(_l,i,s,a);return o&&k(l,ga,o),t(e.yParity==null||ge(e.yParity,"sig.yParity")===l.yParity,"yParity mismatch"),t(e.yParityAndS==null||e.yParityAndS===l.yParityAndS,"yParityAndS mismatch"),l}};Au=new WeakMap,Iu=new WeakMap,Tu=new WeakMap,ga=new WeakMap;let Dn=yr;var Ii;const Jo=class Jo{constructor(e){U(this,Ii,void 0);O(su(e)===32,"invalid private key","privateKey","[REDACTED]"),k(this,Ii,te(e))}get privateKey(){return y(this,Ii)}get publicKey(){return Jo.computePublicKey(y(this,Ii))}get compressedPublicKey(){return Jo.computePublicKey(y(this,Ii),!0)}sign(e){O(su(e)===32,"invalid digest length","digest",e);const t=gs.sign(un(e),un(y(this,Ii)),{lowS:!0});return Dn.from({r:po(t.r,32),s:po(t.s,32),v:t.recovery?28:27})}computeSharedSecret(e){const t=Jo.computePublicKey(e);return te(gs.getSharedSecret(un(y(this,Ii)),we(t),!1))}static computePublicKey(e,t){let r=we(e,"key");if(r.length===32){const s=gs.getPublicKey(r,!!t);return te(s)}if(r.length===64){const s=new Uint8Array(65);s[0]=4,s.set(r,1),r=s}const i=gs.ProjectivePoint.fromHex(r);return te(i.toRawBytes(t))}static recoverPublicKey(e,t){O(su(e)===32,"invalid digest length","digest",e);const r=Dn.from(t);let i=gs.Signature.fromCompact(un(ot([r.r,r.s])));i=i.addRecoveryBit(r.yParity);const s=i.recoverPublicKey(un(e));return O(s!=null,"invalid signature for digest","signature",t),"0x"+s.toHex(!1)}static addPoints(e,t,r){const i=gs.ProjectivePoint.fromHex(Jo.computePublicKey(e).substring(2)),s=gs.ProjectivePoint.fromHex(Jo.computePublicKey(t).substring(2));return"0x"+i.add(s).toHex(!!r)}};Ii=new WeakMap;let xd=Jo;const LF=BigInt(0),VF=BigInt(36);function UT(n){n=n.toLowerCase();const e=n.substring(2).split(""),t=new Uint8Array(40);for(let i=0;i<40;i++)t[i]=e[i].charCodeAt(0);const r=we(dt(t));for(let i=0;i<40;i+=2)r[i>>1]>>4>=8&&(e[i]=e[i].toUpperCase()),(r[i>>1]&15)>=8&&(e[i+1]=e[i+1].toUpperCase());return"0x"+e.join("")}const DE={};for(let n=0;n<10;n++)DE[String(n)]=String(n);for(let n=0;n<26;n++)DE[String.fromCharCode(65+n)]=String(10+n);const jT=15;function MF(n){n=n.toUpperCase(),n=n.substring(4)+n.substring(0,2)+"00";let e=n.split("").map(r=>DE[r]).join("");for(;e.length>=jT;){let r=e.substring(0,jT);e=parseInt(r,10)%97+e.substring(r.length)}let t=String(98-parseInt(e,10)%97);for(;t.length<2;)t="0"+t;return t}const BF=function(){const n={};for(let e=0;e<36;e++){const t="0123456789abcdefghijklmnopqrstuvwxyz"[e];n[t]=BigInt(e)}return n}();function FF(n){n=n.toLowerCase();let e=LF;for(let t=0;t<n.length;t++)e=e*VF+BF[n[t]];return e}function De(n){if(O(typeof n=="string","invalid address","address",n),n.match(/^(0x)?[0-9a-fA-F]{40}$/)){n.startsWith("0x")||(n="0x"+n);const e=UT(n);return O(!n.match(/([A-F].*[a-f])|([a-f].*[A-F])/)||e===n,"bad address checksum","address",n),e}if(n.match(/^XE[0-9]{2}[0-9A-Za-z]{30,31}$/)){O(n.substring(2,4)===MF(n),"bad icap checksum","address",n);let e=FF(n.substring(4)).toString(16);for(;e.length<40;)e="0"+e;return UT("0x"+e)}O(!1,"invalid address","address",n)}function UF(n){const e=De(n.from);let r=se(n.nonce,"tx.nonce").toString(16);return r==="0"?r="0x":r.length%2?r="0x0"+r:r="0x"+r,De(rt(dt(go([e,r])),12))}function kC(n){return n&&typeof n.getAddress=="function"}async function $0(n,e){const t=await e;return(t==null||t==="0x0000000000000000000000000000000000000000")&&($(typeof n!="string","unconfigured name","UNCONFIGURED_NAME",{value:n}),O(!1,"invalid AddressLike value; did not resolve to a value address","target",n)),De(t)}function dn(n,e){if(typeof n=="string")return n.match(/^0x[0-9a-f]{40}$/i)?De(n):($(e!=null,"ENS resolution requires a provider","UNSUPPORTED_OPERATION",{operation:"resolveName"}),$0(n,e.resolveName(n)));if(kC(n))return $0(n,n.getAddress());if(n&&typeof n.then=="function")return $0(n,n);O(!1,"unsupported addressable value","target",n)}const mi={};function re(n,e){let t=!1;return e<0&&(t=!0,e*=-1),new Yt(mi,`${t?"":"u"}int${e}`,n,{signed:t,width:e})}function Ce(n,e){return new Yt(mi,`bytes${e||""}`,n,{size:e})}const zT=Symbol.for("_ethers_typed");var ya;const gi=class gi{constructor(e,t,r,i){B(this,"type");B(this,"value");U(this,ya,void 0);B(this,"_typedSymbol");i==null&&(i=null),bf(mi,e,"Typed"),ce(this,{_typedSymbol:zT,type:t,value:r}),k(this,ya,i),this.format()}format(){if(this.type==="array")throw new Error("");if(this.type==="dynamicArray")throw new Error("");return this.type==="tuple"?`tuple(${this.value.map(e=>e.format()).join(",")})`:this.type}defaultValue(){return 0}minValue(){return 0}maxValue(){return 0}isBigInt(){return!!this.type.match(/^u?int[0-9]+$/)}isData(){return this.type.startsWith("bytes")}isString(){return this.type==="string"}get tupleName(){if(this.type!=="tuple")throw TypeError("not a tuple");return y(this,ya)}get arrayLength(){if(this.type!=="array")throw TypeError("not an array");return y(this,ya)===!0?-1:y(this,ya)===!1?this.value.length:null}static from(e,t){return new gi(mi,e,t)}static uint8(e){return re(e,8)}static uint16(e){return re(e,16)}static uint24(e){return re(e,24)}static uint32(e){return re(e,32)}static uint40(e){return re(e,40)}static uint48(e){return re(e,48)}static uint56(e){return re(e,56)}static uint64(e){return re(e,64)}static uint72(e){return re(e,72)}static uint80(e){return re(e,80)}static uint88(e){return re(e,88)}static uint96(e){return re(e,96)}static uint104(e){return re(e,104)}static uint112(e){return re(e,112)}static uint120(e){return re(e,120)}static uint128(e){return re(e,128)}static uint136(e){return re(e,136)}static uint144(e){return re(e,144)}static uint152(e){return re(e,152)}static uint160(e){return re(e,160)}static uint168(e){return re(e,168)}static uint176(e){return re(e,176)}static uint184(e){return re(e,184)}static uint192(e){return re(e,192)}static uint200(e){return re(e,200)}static uint208(e){return re(e,208)}static uint216(e){return re(e,216)}static uint224(e){return re(e,224)}static uint232(e){return re(e,232)}static uint240(e){return re(e,240)}static uint248(e){return re(e,248)}static uint256(e){return re(e,256)}static uint(e){return re(e,256)}static int8(e){return re(e,-8)}static int16(e){return re(e,-16)}static int24(e){return re(e,-24)}static int32(e){return re(e,-32)}static int40(e){return re(e,-40)}static int48(e){return re(e,-48)}static int56(e){return re(e,-56)}static int64(e){return re(e,-64)}static int72(e){return re(e,-72)}static int80(e){return re(e,-80)}static int88(e){return re(e,-88)}static int96(e){return re(e,-96)}static int104(e){return re(e,-104)}static int112(e){return re(e,-112)}static int120(e){return re(e,-120)}static int128(e){return re(e,-128)}static int136(e){return re(e,-136)}static int144(e){return re(e,-144)}static int152(e){return re(e,-152)}static int160(e){return re(e,-160)}static int168(e){return re(e,-168)}static int176(e){return re(e,-176)}static int184(e){return re(e,-184)}static int192(e){return re(e,-192)}static int200(e){return re(e,-200)}static int208(e){return re(e,-208)}static int216(e){return re(e,-216)}static int224(e){return re(e,-224)}static int232(e){return re(e,-232)}static int240(e){return re(e,-240)}static int248(e){return re(e,-248)}static int256(e){return re(e,-256)}static int(e){return re(e,-256)}static bytes1(e){return Ce(e,1)}static bytes2(e){return Ce(e,2)}static bytes3(e){return Ce(e,3)}static bytes4(e){return Ce(e,4)}static bytes5(e){return Ce(e,5)}static bytes6(e){return Ce(e,6)}static bytes7(e){return Ce(e,7)}static bytes8(e){return Ce(e,8)}static bytes9(e){return Ce(e,9)}static bytes10(e){return Ce(e,10)}static bytes11(e){return Ce(e,11)}static bytes12(e){return Ce(e,12)}static bytes13(e){return Ce(e,13)}static bytes14(e){return Ce(e,14)}static bytes15(e){return Ce(e,15)}static bytes16(e){return Ce(e,16)}static bytes17(e){return Ce(e,17)}static bytes18(e){return Ce(e,18)}static bytes19(e){return Ce(e,19)}static bytes20(e){return Ce(e,20)}static bytes21(e){return Ce(e,21)}static bytes22(e){return Ce(e,22)}static bytes23(e){return Ce(e,23)}static bytes24(e){return Ce(e,24)}static bytes25(e){return Ce(e,25)}static bytes26(e){return Ce(e,26)}static bytes27(e){return Ce(e,27)}static bytes28(e){return Ce(e,28)}static bytes29(e){return Ce(e,29)}static bytes30(e){return Ce(e,30)}static bytes31(e){return Ce(e,31)}static bytes32(e){return Ce(e,32)}static address(e){return new gi(mi,"address",e)}static bool(e){return new gi(mi,"bool",!!e)}static bytes(e){return new gi(mi,"bytes",e)}static string(e){return new gi(mi,"string",e)}static array(e,t){throw new Error("not implemented yet")}static tuple(e,t){throw new Error("not implemented yet")}static overrides(e){return new gi(mi,"overrides",Object.assign({},e))}static isTyped(e){return e&&typeof e=="object"&&"_typedSymbol"in e&&e._typedSymbol===zT}static dereference(e,t){if(gi.isTyped(e)){if(e.type!==t)throw new Error(`invalid type: expecetd ${t}, got ${e.type}`);return e.value}return e}};ya=new WeakMap;let Yt=gi;class jF extends ns{constructor(e){super("address","address",e,!1)}defaultValue(){return"0x0000000000000000000000000000000000000000"}encode(e,t){let r=Yt.dereference(t,"string");try{r=De(r)}catch(i){return this._throwError(i.message,t)}return e.writeValue(r)}decode(e){return De(po(e.readValue(),20))}}class zF extends ns{constructor(t){super(t.name,t.type,"_",t.dynamic);B(this,"coder");this.coder=t}defaultValue(){return this.coder.defaultValue()}encode(t,r){return this.coder.encode(t,r)}decode(t){return this.coder.decode(t)}}function NC(n,e,t){let r=[];if(Array.isArray(t))r=t;else if(t&&typeof t=="object"){let l={};r=e.map(c=>{const h=c.localName;return $(h,"cannot encode object for signature with missing names","INVALID_ARGUMENT",{argument:"values",info:{coder:c},value:t}),$(!l[h],"cannot encode object for signature with duplicate names","INVALID_ARGUMENT",{argument:"values",info:{coder:c},value:t}),l[h]=!0,t[h]})}else O(!1,"invalid tuple value","tuple",t);O(e.length===r.length,"types/value length mismatch","tuple",t);let i=new wv,s=new wv,o=[];e.forEach((l,c)=>{let h=r[c];if(l.dynamic){let d=s.length;l.encode(s,h);let p=i.writeUpdatableValue();o.push(g=>{p(g+d)})}else l.encode(i,h)}),o.forEach(l=>{l(i.length)});let a=n.appendWriter(i);return a+=n.appendWriter(s),a}function DC(n,e){let t=[],r=[],i=n.subReader(0);return e.forEach(s=>{let o=null;if(s.dynamic){let a=n.readIndex(),l=i.subReader(a);try{o=s.decode(l)}catch(c){if(Ot(c,"BUFFER_OVERRUN"))throw c;o=c,o.baseType=s.name,o.name=s.localName,o.type=s.type}}else try{o=s.decode(n)}catch(a){if(Ot(a,"BUFFER_OVERRUN"))throw a;o=a,o.baseType=s.name,o.name=s.localName,o.type=s.type}if(o==null)throw new Error("investigate");t.push(o),r.push(s.localName||null)}),hc.fromItems(t,r)}class GF extends ns{constructor(t,r,i){const s=t.type+"["+(r>=0?r:"")+"]",o=r===-1||t.dynamic;super("array",s,i,o);B(this,"coder");B(this,"length");ce(this,{coder:t,length:r})}defaultValue(){const t=this.coder.defaultValue(),r=[];for(let i=0;i<this.length;i++)r.push(t);return r}encode(t,r){const i=Yt.dereference(r,"array");Array.isArray(i)||this._throwError("expected array value",i);let s=this.length;s===-1&&(s=i.length,t.writeValue(i.length)),UR(i.length,s,"coder array"+(this.localName?" "+this.localName:""));let o=[];for(let a=0;a<i.length;a++)o.push(this.coder);return NC(t,o,i)}decode(t){let r=this.length;r===-1&&(r=t.readIndex(),$(r*hn<=t.dataLength,"insufficient data length","BUFFER_OVERRUN",{buffer:t.bytes,offset:r*hn,length:t.dataLength}));let i=[];for(let s=0;s<r;s++)i.push(new zF(this.coder));return DC(t,i)}}class HF extends ns{constructor(e){super("bool","bool",e,!1)}defaultValue(){return!1}encode(e,t){const r=Yt.dereference(t,"bool");return e.writeValue(r?1:0)}decode(e){return!!e.readValue()}}class OC extends ns{constructor(e,t){super(e,e,t,!0)}defaultValue(){return"0x"}encode(e,t){t=un(t);let r=e.writeValue(t.length);return r+=e.writeBytes(t),r}decode(e){return e.readBytes(e.readIndex(),!0)}}class $F extends OC{constructor(e){super("bytes",e)}decode(e){return te(super.decode(e))}}class KF extends ns{constructor(t,r){let i="bytes"+String(t);super(i,i,r,!1);B(this,"size");ce(this,{size:t},{size:"number"})}defaultValue(){return"0x0000000000000000000000000000000000000000000000000000000000000000".substring(0,2+this.size*2)}encode(t,r){let i=un(Yt.dereference(r,this.type));return i.length!==this.size&&this._throwError("incorrect data length",r),t.writeBytes(i)}decode(t){return te(t.readBytes(this.size))}}const QF=new Uint8Array([]);class qF extends ns{constructor(e){super("null","",e,!1)}defaultValue(){return null}encode(e,t){return t!=null&&this._throwError("not null",t),e.writeBytes(QF)}decode(e){return e.readBytes(0),null}}const WF=BigInt(0),JF=BigInt(1),YF=BigInt("0xffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffff");class XF extends ns{constructor(t,r,i){const s=(r?"int":"uint")+t*8;super(s,s,i,!1);B(this,"size");B(this,"signed");ce(this,{size:t,signed:r},{size:"number",signed:"boolean"})}defaultValue(){return 0}encode(t,r){let i=se(Yt.dereference(r,this.type)),s=ra(YF,hn*8);if(this.signed){let o=ra(s,this.size*8-1);(i>o||i<-(o+JF))&&this._throwError("value out-of-bounds",r),i=GR(i,8*hn)}else(i<WF||i>ra(s,this.size*8))&&this._throwError("value out-of-bounds",r);return t.writeValue(i)}decode(t){let r=ra(t.readValue(),this.size*8);return this.signed&&(r=Ym(r,this.size*8)),r}}class ZF extends OC{constructor(e){super("string",e)}defaultValue(){return""}encode(e,t){return super.encode(e,zi(Yt.dereference(t,"string")))}decode(e){return Xm(super.decode(e))}}class Rp extends ns{constructor(t,r){let i=!1;const s=[];t.forEach(a=>{a.dynamic&&(i=!0),s.push(a.type)});const o="tuple("+s.join(",")+")";super("tuple",o,r,i);B(this,"coders");ce(this,{coders:Object.freeze(t.slice())})}defaultValue(){const t=[];this.coders.forEach(i=>{t.push(i.defaultValue())});const r=this.coders.reduce((i,s)=>{const o=s.localName;return o&&(i[o]||(i[o]=0),i[o]++),i},{});return this.coders.forEach((i,s)=>{let o=i.localName;!o||r[o]!==1||(o==="length"&&(o="_length"),t[o]==null&&(t[o]=t[s]))}),Object.freeze(t)}encode(t,r){const i=Yt.dereference(r,"tuple");return NC(t,this.coders,i)}decode(t){return DC(t,this.coders)}}function K0(n,e){return{address:De(n),storageKeys:e.map((t,r)=>(O(je(t,32),"invalid slot",`storageKeys[${r}]`,t),t.toLowerCase()))}}function ol(n){if(Array.isArray(n))return n.map((t,r)=>Array.isArray(t)?(O(t.length===2,"invalid slot set",`value[${r}]`,t),K0(t[0],t[1])):(O(t!=null&&typeof t=="object","invalid address-slot set","value",n),K0(t.address,t.storageKeys)));O(n!=null&&typeof n=="object","invalid access list","value",n);const e=Object.keys(n).map(t=>{const r=n[t].reduce((i,s)=>(i[s]=!0,i),{});return K0(t,Object.keys(r).sort())});return e.sort((t,r)=>t.address.localeCompare(r.address)),e}function LC(n){return{address:De(n.address),nonce:se(n.nonce!=null?n.nonce:0),chainId:se(n.chainId!=null?n.chainId:0),signature:Dn.from(n.signature)}}function eU(n){let e;return typeof n=="string"?e=xd.computePublicKey(n,!1):e=n.publicKey,De(dt("0x"+e.substring(4)).substring(26))}function tU(n,e){return eU(xd.recoverPublicKey(n,e))}const Tt=BigInt(0),nU=BigInt(2),rU=BigInt(27),iU=BigInt(28),sU=BigInt(35),oU=BigInt("0xffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffff"),Q0=4096*32;function aU(n){return{blobToKzgCommitment:r=>{if("computeBlobProof"in n){if("blobToKzgCommitment"in n&&typeof n.blobToKzgCommitment=="function")return we(n.blobToKzgCommitment(te(r)))}else if("blobToKzgCommitment"in n&&typeof n.blobToKzgCommitment=="function")return we(n.blobToKzgCommitment(r));if("blobToKZGCommitment"in n&&typeof n.blobToKZGCommitment=="function")return we(n.blobToKZGCommitment(te(r)));O(!1,"unsupported KZG library","kzg",n)},computeBlobKzgProof:(r,i)=>{if("computeBlobProof"in n&&typeof n.computeBlobProof=="function")return we(n.computeBlobProof(te(r),te(i)));if("computeBlobKzgProof"in n&&typeof n.computeBlobKzgProof=="function")return n.computeBlobKzgProof(r,i);if("computeBlobKZGProof"in n&&typeof n.computeBlobKZGProof=="function")return we(n.computeBlobKZGProof(te(r),te(i)));O(!1,"unsupported KZG library","kzg",n)}}}function GT(n,e){let t=n.toString(16);for(;t.length<2;)t="0"+t;return t+=Oc(e).substring(4),"0x"+t}function Lc(n){return n==="0x"?null:De(n)}function hy(n,e){try{return ol(n)}catch(t){O(!1,t.message,e,n)}}function lU(n,e){try{if(!Array.isArray(n))throw new Error("authorizationList: invalid array");const t=[];for(let r=0;r<n.length;r++){const i=n[r];if(!Array.isArray(i))throw new Error(`authorization[${r}]: invalid array`);if(i.length!==6)throw new Error(`authorization[${r}]: wrong length`);if(!i[1])throw new Error(`authorization[${r}]: null address`);t.push({address:Lc(i[1]),nonce:Me(i[2],"nonce"),chainId:Me(i[0],"chainId"),signature:Dn.from({yParity:al(i[3],"yParity"),r:Ji(i[4],32),s:Ji(i[5],32)})})}return t}catch(t){O(!1,t.message,e,n)}}function al(n,e){return n==="0x"?0:ge(n,e)}function Me(n,e){if(n==="0x")return Tt;const t=se(n,e);return O(t<=oU,"value exceeds uint size",e,t),t}function xe(n,e){const t=se(n,"value"),r=Lt(t);return O(r.length<=32,"value too large",`tx.${e}`,t),r}function dy(n){return ol(n).map(e=>[e.address,e.storageKeys])}function uU(n){return n.map(e=>[xe(e.chainId,"chainId"),e.address,xe(e.nonce,"nonce"),xe(e.signature.yParity,"yParity"),e.signature.r,e.signature.s])}function cU(n,e){O(Array.isArray(n),`invalid ${e}`,"value",n);for(let t=0;t<n.length;t++)O(je(n[t],32),"invalid ${ param } hash",`value[${t}]`,n[t]);return n}function hU(n){const e=xf(n);O(Array.isArray(e)&&(e.length===9||e.length===6),"invalid field count for legacy transaction","data",n);const t={type:0,nonce:al(e[0],"nonce"),gasPrice:Me(e[1],"gasPrice"),gasLimit:Me(e[2],"gasLimit"),to:Lc(e[3]),value:Me(e[4],"value"),data:te(e[5]),chainId:Tt};if(e.length===6)return t;const r=Me(e[6],"v"),i=Me(e[7],"r"),s=Me(e[8],"s");if(i===Tt&&s===Tt)t.chainId=r;else{let o=(r-sU)/nU;o<Tt&&(o=Tt),t.chainId=o,O(o!==Tt||r===rU||r===iU,"non-canonical legacy v","v",e[6]),t.signature=Dn.from({r:Ji(e[7],32),s:Ji(e[8],32),v:r})}return t}function dU(n,e){const t=[xe(n.nonce,"nonce"),xe(n.gasPrice||0,"gasPrice"),xe(n.gasLimit,"gasLimit"),n.to||"0x",xe(n.value,"value"),n.data];let r=Tt;if(n.chainId!=Tt)r=se(n.chainId,"tx.chainId"),O(!e||e.networkV==null||e.legacyChainId===r,"tx.chainId/sig.v mismatch","sig",e);else if(n.signature){const s=n.signature.legacyChainId;s!=null&&(r=s)}if(!e)return r!==Tt&&(t.push(Lt(r)),t.push("0x"),t.push("0x")),go(t);let i=BigInt(27+e.yParity);return r!==Tt?i=Dn.getChainIdV(r,e.v):BigInt(e.v)!==i&&O(!1,"tx.chainId/sig.v mismatch","sig",e),t.push(Lt(i)),t.push(Lt(e.r)),t.push(Lt(e.s)),go(t)}function fy(n,e){let t;try{if(t=al(e[0],"yParity"),t!==0&&t!==1)throw new Error("bad yParity")}catch{O(!1,"invalid yParity","yParity",e[0])}const r=Ji(e[1],32),i=Ji(e[2],32),s=Dn.from({r,s:i,yParity:t});n.signature=s}function fU(n){const e=xf(we(n).slice(1));O(Array.isArray(e)&&(e.length===9||e.length===12),"invalid field count for transaction type: 2","data",te(n));const t={type:2,chainId:Me(e[0],"chainId"),nonce:al(e[1],"nonce"),maxPriorityFeePerGas:Me(e[2],"maxPriorityFeePerGas"),maxFeePerGas:Me(e[3],"maxFeePerGas"),gasPrice:null,gasLimit:Me(e[4],"gasLimit"),to:Lc(e[5]),value:Me(e[6],"value"),data:te(e[7]),accessList:hy(e[8],"accessList")};return e.length===9||fy(t,e.slice(9)),t}function pU(n,e){const t=[xe(n.chainId,"chainId"),xe(n.nonce,"nonce"),xe(n.maxPriorityFeePerGas||0,"maxPriorityFeePerGas"),xe(n.maxFeePerGas||0,"maxFeePerGas"),xe(n.gasLimit,"gasLimit"),n.to||"0x",xe(n.value,"value"),n.data,dy(n.accessList||[])];return e&&(t.push(xe(e.yParity,"yParity")),t.push(Lt(e.r)),t.push(Lt(e.s))),ot(["0x02",go(t)])}function mU(n){const e=xf(we(n).slice(1));O(Array.isArray(e)&&(e.length===8||e.length===11),"invalid field count for transaction type: 1","data",te(n));const t={type:1,chainId:Me(e[0],"chainId"),nonce:al(e[1],"nonce"),gasPrice:Me(e[2],"gasPrice"),gasLimit:Me(e[3],"gasLimit"),to:Lc(e[4]),value:Me(e[5],"value"),data:te(e[6]),accessList:hy(e[7],"accessList")};return e.length===8||fy(t,e.slice(8)),t}function gU(n,e){const t=[xe(n.chainId,"chainId"),xe(n.nonce,"nonce"),xe(n.gasPrice||0,"gasPrice"),xe(n.gasLimit,"gasLimit"),n.to||"0x",xe(n.value,"value"),n.data,dy(n.accessList||[])];return e&&(t.push(xe(e.yParity,"recoveryParam")),t.push(Lt(e.r)),t.push(Lt(e.s))),ot(["0x01",go(t)])}function yU(n){let e=xf(we(n).slice(1)),t="3",r=null;if(e.length===4&&Array.isArray(e[0])){t="3 (network format)";const s=e[1],o=e[2],a=e[3];O(Array.isArray(s),"invalid network format: blobs not an array","fields[1]",s),O(Array.isArray(o),"invalid network format: commitments not an array","fields[2]",o),O(Array.isArray(a),"invalid network format: proofs not an array","fields[3]",a),O(s.length===o.length,"invalid network format: blobs/commitments length mismatch","fields",e),O(s.length===a.length,"invalid network format: blobs/proofs length mismatch","fields",e),r=[];for(let l=0;l<e[1].length;l++)r.push({data:s[l],commitment:o[l],proof:a[l]});e=e[0]}O(Array.isArray(e)&&(e.length===11||e.length===14),`invalid field count for transaction type: ${t}`,"data",te(n));const i={type:3,chainId:Me(e[0],"chainId"),nonce:al(e[1],"nonce"),maxPriorityFeePerGas:Me(e[2],"maxPriorityFeePerGas"),maxFeePerGas:Me(e[3],"maxFeePerGas"),gasPrice:null,gasLimit:Me(e[4],"gasLimit"),to:Lc(e[5]),value:Me(e[6],"value"),data:te(e[7]),accessList:hy(e[8],"accessList"),maxFeePerBlobGas:Me(e[9],"maxFeePerBlobGas"),blobVersionedHashes:e[10]};r&&(i.blobs=r),O(i.to!=null,`invalid address for transaction type: ${t}`,"data",n),O(Array.isArray(i.blobVersionedHashes),"invalid blobVersionedHashes: must be an array","data",n);for(let s=0;s<i.blobVersionedHashes.length;s++)O(je(i.blobVersionedHashes[s],32),`invalid blobVersionedHash at index ${s}: must be length 32`,"data",n);return e.length===11||fy(i,e.slice(11)),i}function wU(n,e,t){const r=[xe(n.chainId,"chainId"),xe(n.nonce,"nonce"),xe(n.maxPriorityFeePerGas||0,"maxPriorityFeePerGas"),xe(n.maxFeePerGas||0,"maxFeePerGas"),xe(n.gasLimit,"gasLimit"),n.to||bd,xe(n.value,"value"),n.data,dy(n.accessList||[]),xe(n.maxFeePerBlobGas||0,"maxFeePerBlobGas"),cU(n.blobVersionedHashes||[],"blobVersionedHashes")];return e&&(r.push(xe(e.yParity,"yParity")),r.push(Lt(e.r)),r.push(Lt(e.s)),t)?ot(["0x03",go([r,t.map(i=>i.data),t.map(i=>i.commitment),t.map(i=>i.proof)])]):ot(["0x03",go(r)])}function vU(n){const e=xf(we(n).slice(1));O(Array.isArray(e)&&(e.length===10||e.length===13),"invalid field count for transaction type: 4","data",te(n));const t={type:4,chainId:Me(e[0],"chainId"),nonce:al(e[1],"nonce"),maxPriorityFeePerGas:Me(e[2],"maxPriorityFeePerGas"),maxFeePerGas:Me(e[3],"maxFeePerGas"),gasPrice:null,gasLimit:Me(e[4],"gasLimit"),to:Lc(e[5]),value:Me(e[6],"value"),data:te(e[7]),accessList:hy(e[8],"accessList"),authorizationList:lU(e[9],"authorizationList")};return e.length===10||fy(t,e.slice(10)),t}function _U(n,e){const t=[xe(n.chainId,"chainId"),xe(n.nonce,"nonce"),xe(n.maxPriorityFeePerGas||0,"maxPriorityFeePerGas"),xe(n.maxFeePerGas||0,"maxFeePerGas"),xe(n.gasLimit,"gasLimit"),n.to||"0x",xe(n.value,"value"),n.data,dy(n.accessList||[]),uU(n.authorizationList||[])];return e&&(t.push(xe(e.yParity,"yParity")),t.push(Lt(e.r)),t.push(Lt(e.s))),ot(["0x04",go(t)])}var Tr,bu,xu,Su,Pu,Ru,Cu,ku,Nu,Du,Ou,Lu,wa,ks,Gr,Ns,Vu,Mu,tm;const jr=class jr{constructor(){U(this,Mu);U(this,Tr,void 0);U(this,bu,void 0);U(this,xu,void 0);U(this,Su,void 0);U(this,Pu,void 0);U(this,Ru,void 0);U(this,Cu,void 0);U(this,ku,void 0);U(this,Nu,void 0);U(this,Du,void 0);U(this,Ou,void 0);U(this,Lu,void 0);U(this,wa,void 0);U(this,ks,void 0);U(this,Gr,void 0);U(this,Ns,void 0);U(this,Vu,void 0);k(this,Tr,null),k(this,bu,null),k(this,Su,0),k(this,Pu,Tt),k(this,Ru,null),k(this,Cu,null),k(this,ku,null),k(this,xu,"0x"),k(this,Nu,Tt),k(this,Du,Tt),k(this,Ou,null),k(this,Lu,null),k(this,wa,null),k(this,ks,null),k(this,Gr,null),k(this,Ns,null),k(this,Vu,null)}get type(){return y(this,Tr)}set type(e){switch(e){case null:k(this,Tr,null);break;case 0:case"legacy":k(this,Tr,0);break;case 1:case"berlin":case"eip-2930":k(this,Tr,1);break;case 2:case"london":case"eip-1559":k(this,Tr,2);break;case 3:case"cancun":case"eip-4844":k(this,Tr,3);break;case 4:case"pectra":case"eip-7702":k(this,Tr,4);break;default:O(!1,"unsupported transaction type","type",e)}}get typeName(){switch(this.type){case 0:return"legacy";case 1:return"eip-2930";case 2:return"eip-1559";case 3:return"eip-4844";case 4:return"eip-7702"}return null}get to(){const e=y(this,bu);return e==null&&this.type===3?bd:e}set to(e){k(this,bu,e==null?null:De(e))}get nonce(){return y(this,Su)}set nonce(e){k(this,Su,ge(e,"value"))}get gasLimit(){return y(this,Pu)}set gasLimit(e){k(this,Pu,se(e))}get gasPrice(){const e=y(this,Ru);return e==null&&(this.type===0||this.type===1)?Tt:e}set gasPrice(e){k(this,Ru,e==null?null:se(e,"gasPrice"))}get maxPriorityFeePerGas(){const e=y(this,Cu);return e??(this.type===2||this.type===3?Tt:null)}set maxPriorityFeePerGas(e){k(this,Cu,e==null?null:se(e,"maxPriorityFeePerGas"))}get maxFeePerGas(){const e=y(this,ku);return e??(this.type===2||this.type===3?Tt:null)}set maxFeePerGas(e){k(this,ku,e==null?null:se(e,"maxFeePerGas"))}get data(){return y(this,xu)}set data(e){k(this,xu,te(e))}get value(){return y(this,Nu)}set value(e){k(this,Nu,se(e,"value"))}get chainId(){return y(this,Du)}set chainId(e){k(this,Du,se(e))}get signature(){return y(this,Ou)||null}set signature(e){k(this,Ou,e==null?null:Dn.from(e))}get accessList(){const e=y(this,Lu)||null;return e??(this.type===1||this.type===2||this.type===3?[]:null)}set accessList(e){k(this,Lu,e==null?null:ol(e))}get authorizationList(){const e=y(this,Vu)||null;return e==null&&this.type===4?[]:e}set authorizationList(e){k(this,Vu,e==null?null:e.map(t=>LC(t)))}get maxFeePerBlobGas(){const e=y(this,wa);return e==null&&this.type===3?Tt:e}set maxFeePerBlobGas(e){k(this,wa,e==null?null:se(e,"maxFeePerBlobGas"))}get blobVersionedHashes(){let e=y(this,ks);return e==null&&this.type===3?[]:e}set blobVersionedHashes(e){if(e!=null){O(Array.isArray(e),"blobVersionedHashes must be an Array","value",e),e=e.slice();for(let t=0;t<e.length;t++)O(je(e[t],32),"invalid blobVersionedHash",`value[${t}]`,e[t])}k(this,ks,e)}get blobs(){return y(this,Ns)==null?null:y(this,Ns).map(e=>Object.assign({},e))}set blobs(e){if(e==null){k(this,Ns,null);return}const t=[],r=[];for(let i=0;i<e.length;i++){const s=e[i];if(TE(s)){$(y(this,Gr),"adding a raw blob requires a KZG library","UNSUPPORTED_OPERATION",{operation:"set blobs()"});let o=we(s);if(O(o.length<=Q0,"blob is too large",`blobs[${i}]`,s),o.length!==Q0){const c=new Uint8Array(Q0);c.set(o),o=c}const a=y(this,Gr).blobToKzgCommitment(o),l=te(y(this,Gr).computeBlobKzgProof(o,a));t.push({data:te(o),commitment:te(a),proof:l}),r.push(GT(1,a))}else{const o=te(s.commitment);t.push({data:te(s.data),commitment:o,proof:te(s.proof)}),r.push(GT(1,o))}}k(this,Ns,t),k(this,ks,r)}get kzg(){return y(this,Gr)}set kzg(e){e==null?k(this,Gr,null):k(this,Gr,aU(e))}get hash(){return this.signature==null?null:dt(K(this,Mu,tm).call(this,!0,!1))}get unsignedHash(){return dt(this.unsignedSerialized)}get from(){return this.signature==null?null:tU(this.unsignedHash,this.signature)}get fromPublicKey(){return this.signature==null?null:xd.recoverPublicKey(this.unsignedHash,this.signature)}isSigned(){return this.signature!=null}get serialized(){return K(this,Mu,tm).call(this,!0,!0)}get unsignedSerialized(){return K(this,Mu,tm).call(this,!1,!1)}inferType(){const e=this.inferTypes();return e.indexOf(2)>=0?2:e.pop()}inferTypes(){const e=this.gasPrice!=null,t=this.maxFeePerGas!=null||this.maxPriorityFeePerGas!=null,r=this.accessList!=null,i=y(this,wa)!=null||y(this,ks);this.maxFeePerGas!=null&&this.maxPriorityFeePerGas!=null&&$(this.maxFeePerGas>=this.maxPriorityFeePerGas,"priorityFee cannot be more than maxFee","BAD_DATA",{value:this}),$(!t||this.type!==0&&this.type!==1,"transaction type cannot have maxFeePerGas or maxPriorityFeePerGas","BAD_DATA",{value:this}),$(this.type!==0||!r,"legacy transaction cannot have accessList","BAD_DATA",{value:this});const s=[];return this.type!=null?s.push(this.type):this.authorizationList&&this.authorizationList.length?s.push(4):t?s.push(2):e?(s.push(1),r||s.push(0)):r?(s.push(1),s.push(2)):(i&&this.to||(s.push(0),s.push(1),s.push(2)),s.push(3)),s.sort(),s}isLegacy(){return this.type===0}isBerlin(){return this.type===1}isLondon(){return this.type===2}isCancun(){return this.type===3}clone(){return jr.from(this)}toJSON(){const e=t=>t==null?null:t.toString();return{type:this.type,to:this.to,data:this.data,nonce:this.nonce,gasLimit:e(this.gasLimit),gasPrice:e(this.gasPrice),maxPriorityFeePerGas:e(this.maxPriorityFeePerGas),maxFeePerGas:e(this.maxFeePerGas),value:e(this.value),chainId:e(this.chainId),sig:this.signature?this.signature.toJSON():null,accessList:this.accessList}}static from(e){if(e==null)return new jr;if(typeof e=="string"){const r=we(e);if(r[0]>=127)return jr.from(hU(r));switch(r[0]){case 1:return jr.from(mU(r));case 2:return jr.from(fU(r));case 3:return jr.from(yU(r));case 4:return jr.from(vU(r))}$(!1,"unsupported transaction type","UNSUPPORTED_OPERATION",{operation:"from"})}const t=new jr;return e.type!=null&&(t.type=e.type),e.to!=null&&(t.to=e.to),e.nonce!=null&&(t.nonce=e.nonce),e.gasLimit!=null&&(t.gasLimit=e.gasLimit),e.gasPrice!=null&&(t.gasPrice=e.gasPrice),e.maxPriorityFeePerGas!=null&&(t.maxPriorityFeePerGas=e.maxPriorityFeePerGas),e.maxFeePerGas!=null&&(t.maxFeePerGas=e.maxFeePerGas),e.maxFeePerBlobGas!=null&&(t.maxFeePerBlobGas=e.maxFeePerBlobGas),e.data!=null&&(t.data=e.data),e.value!=null&&(t.value=e.value),e.chainId!=null&&(t.chainId=e.chainId),e.signature!=null&&(t.signature=Dn.from(e.signature)),e.accessList!=null&&(t.accessList=e.accessList),e.authorizationList!=null&&(t.authorizationList=e.authorizationList),e.blobVersionedHashes!=null&&(t.blobVersionedHashes=e.blobVersionedHashes),e.kzg!=null&&(t.kzg=e.kzg),e.blobs!=null&&(t.blobs=e.blobs),e.hash!=null&&(O(t.isSigned(),"unsigned transaction cannot define '.hash'","tx",e),O(t.hash===e.hash,"hash mismatch","tx",e)),e.from!=null&&(O(t.isSigned(),"unsigned transaction cannot define '.from'","tx",e),O(t.from.toLowerCase()===(e.from||"").toLowerCase(),"from mismatch","tx",e)),t}};Tr=new WeakMap,bu=new WeakMap,xu=new WeakMap,Su=new WeakMap,Pu=new WeakMap,Ru=new WeakMap,Cu=new WeakMap,ku=new WeakMap,Nu=new WeakMap,Du=new WeakMap,Ou=new WeakMap,Lu=new WeakMap,wa=new WeakMap,ks=new WeakMap,Gr=new WeakMap,Ns=new WeakMap,Vu=new WeakMap,Mu=new WeakSet,tm=function(e,t){$(!e||this.signature!=null,"cannot serialize unsigned transaction; maybe you meant .unsignedSerialized","UNSUPPORTED_OPERATION",{operation:".serialized"});const r=e?this.signature:null;switch(this.inferType()){case 0:return dU(this,r);case 1:return gU(this,r);case 2:return pU(this,r);case 3:return wU(this,r,t?this.blobs:null);case 4:return _U(this,r)}$(!1,"unsupported transaction type","UNSUPPORTED_OPERATION",{operation:".serialized"})};let tg=jr;function Ua(n){return dt(zi(n))}var EU="AEEUdwmgDS8BxQKKAP4BOgDjATAAngDUAIMAoABoAOAAagCOAEQAhABMAHIAOwA9ACsANgAmAGIAHgAuACgAJwAXAC0AGgAjAB8ALwAUACkAEgAeAAkAGwARABkAFgA5ACgALQArADcAFQApABAAHgAiABAAGgAeABMAGAUhBe8BFxREN8sF2wC5AK5HAW8ArQkDzQCuhzc3NzcBP68NEfMABQdHBuw5BV8FYAA9MzkI9r4ZBg7QyQAWA9CeOwLNCjcCjqkChuA/lm+RAsXTAoP6ASfnEQDytQFJAjWVCkeXAOsA6godAB/cwdAUE0WlBCN/AQUCQRjFD/MRBjHxDQSJbw0jBzUAswBxme+tnIcAYwabAysG8QAjAEMMmxcDqgPKQyDXCMMxA7kUQwD3NXOrAKmFIAAfBC0D3x4BJQDBGdUFAhEgVD8JnwmQJiNWYUzrg0oAGwAUAB0AFnNcACkAFgBP9h3gPfsDOWDKneY2ChglX1UDYD30ABsAFAAdABZzIGRAnwDD8wAjAEEMzRbDqgMB2sAFYwXqAtCnAsS4AwpUJKRtFHsadUz9AMMVbwLpABM1NJEX0ZkCgYMBEyMAxRVvAukAEzUBUFAtmUwSAy4DBTER33EftQHfSwB5MxJ/AjkWKQLzL8E/cwBB6QH9LQDPDtO9ASNriQC5DQANAwCK21EFI91zHwCoL9kBqQcHBwcHKzUDowBvAQohPvU3fAQgHwCyAc8CKQMA5zMSezr7ULgFmDp/LzVQBgEGAi8FYQVgt8AFcTtlQhpCWEmfe5tmZ6IAExsDzQ8t+X8rBKtTAltbAn0jsy8Bl6utPWMDTR8Ei2kRANkDBrNHNysDBzECQWUAcwFpJ3kAiyUhAJ0BUb8AL3EfAbfNAz81KUsFWwF3YQZtAm0A+VEfAzEJDQBRSQCzAQBlAHsAM70GD/v3IZWHBwARKQAxALsjTwHZAeMPEzmXgIHwABIAGQA8AEUAQDt3gdvIEGcQZAkGTRFMdEIVEwK0D64L7REdDNkq09PgADSxB/MDWwfzA1sDWwfzB/MDWwfzA1sDWwNbA1scEvAi28gQZw9QBHUFlgWTBN4IiyZREYkHMAjaVBV0JhxPA00BBCMtSSQ7mzMTJUpMFE0LCAQ2SmyvfUADTzGzVP2QqgPTMlc5dAkGHnkSqAAyD3skNb1OhnpPcagKU0+2tYdJak5vAsY6sEAACikJm2/Dd1YGRRAfJ6kQ+ww3AbkBPw3xS9wE9QY/BM0fgRkdD9GVoAipLeEM8SbnLqWAXiP5KocF8Uv4POELUVFsD10LaQnnOmeBUgMlAREijwrhDT0IcRD3Cs1vDekRSQc9A9lJngCpBwULFR05FbkmFGKwCw05ewb/GvoLkyazEy17AAXXGiUGUQEtGwMA0y7rhbRaNVwgT2MGBwspI8sUrFAkDSlAu3hMGh8HGSWtApVDdEqLUToelyH6PEENai4XUYAH+TwJGVMLhTyiRq9FEhHWPpE9TCJNTDAEOYMsMyePCdMPiQy9fHYBXQklCbUMdRM1ERs3yQg9Bx0xlygnGQglRplgngT7owP3E9UDDwVDCUUHFwO5HDETMhUtBRGBKNsC9zbZLrcCk1aEARsFzw8pH+MQVEfkDu0InwJpA4cl7wAxFSUAGyKfCEdnAGOP3FMJLs8Iy2pwI3gDaxTrZRF3B5UOWwerHDcVwxzlcMxeD4YMKKezCV8BeQmdAWME5wgNNV+MpCBFZ1eLXBifIGVBQ14AAjUMaRWjRMGHfAKPD28SHwE5AXcHPQ0FAnsR8RFvEJkI74YINbkz/DopBFMhhyAVCisDU2zSCysm/Qz8bQGnEmYDEDRBd/Jnr2C6KBgBBx0yyUFkIfULlk/RDKAaxRhGVDIZ6AfDA/ca9yfuQVsGAwOnBxc6UTPyBMELbQiPCUMATQ6nGwfbGG4KdYzUATWPAbudA1uVhwJzkwY7Bw8Aaw+LBX3pACECqwinAAkA0wNbAD0CsQehAB0AiUUBQQMrMwEl6QKTA5cINc8BmTMB9y0EH8cMGQD7O25OAsO1AoBuZqYF4VwCkgJNOQFRKQQJUktVA7N15QDfAE8GF+NLARmvTs8e50cB43MvAMsA/wAJOQcJRQHRAfdxALsBYws1Caa3uQFR7S0AhwAZbwHbAo0A4QA5AIP1AVcAUQVd/QXXAlNNARU1HC9bZQG/AyMBNwERAH0Gz5GpzQsjBHEH1wIQHxXlAu8yB7kFAyLjE9FCyQK94lkAMhoKPAqrCqpgX2Q3CjV2PVQAEh+sPss/UgVVO1c7XDtXO1w7VztcO1c7XDtXO1wDm8Pmw+YKcF9JYe8Mqg3YRMw6TRPfYFVgNhPMLbsUxRXSJVoZQRrAJwkl6FUNDwgt12Y0CDA0eRfAAEMpbINFY4oeNApPHOtTlVT8LR8AtUumM7MNsBsZREQFS3XxYi4WEgomAmSFAmJGX1GzAV83JAKh+wJonAJmDQKfiDgfDwJmPwJmKgRyBIMDfxcDfpY5Cjl7GzmGOicnAmwhAjI6OA4CbcsCbbLzjgM3a0kvAWsA4gDlAE4JB5wMkQECD8YAEbkCdzMCdqZDAnlPRwJ4viFg30WyRvcCfEMCeswCfQ0CfPRIBEiBZygALxlJXEpfGRtK0ALRBQLQ0EsrA4hTA4fqRMmRNgLypV0HAwOyS9JMMSkH001QTbMCi0MCitzFHwshR2sJuwKOOwKOYESbhQKO3QKOYHxRuFM5AQ5S2FSJApP/ApMQAO0AIFUiVbNV1AosHymZijLleGpFPz0Cl6MC77ZYJawAXSkClpMCloCgAK1ZsFoNhVEAPwKWuQKWUlxIXNUCmc8CmWhczl0LHQKcnznGOqECnBoCn58CnryOACETNS4TAp31Ap6WALlBYThh8wKe1wKgcgGtAp6jIwKeUqljzGQrKS8CJ7MCJoICoP8CoFDbAqYzAqXSAqgDAIECp/ZogGi1AAdNaiBq1QKs5wKssgKtawKtBgJXIQJV4AKx5dsDH1JsmwKywRECsuwbbORtZ21MYwMl0QK2YD9DbpQDKUkCuGICuUsZArkue3A6cOUCvR0DLbYDMhUCvoxyBgMzdQK+HnMmc1MCw88CwwhzhnRPOUl05AM8qwEDPJ4DPcMCxYACxksCxhSNAshtVQLISALJUwLJMgJkoQLd1nh9ZXiyeSlL1AMYp2cGAmH4GfeVKHsPXpZevxUCz28Cz3AzT1fW9xejAMqxAs93AS3uA04Wfk8JAtwrAtuOAtJTA1JgA1NjAQUDVZCAjUMEzxrxZEl5A4LSg5EC2ssC2eKEFIRNp0ADhqkAMwNkEoZ1Xf0AWQLfaQLevHd7AuIz7RgB8zQrAfSfAfLWiwLr9wLpdH0DAur9AuroAP1LAb0C7o0C66CWrpcHAu5DA4XkmH1w5HGlAvMHAG0DjhqZlwL3FwORcgOSiwL3nAL53QL4apogmq+/O5siA52HAv7+AR8APZ8gAZ+3AwWRA6ZuA6bdANXJAwZuoYyiCQ0DDE0BEwEjB3EGZb1rCQC/BG/DFY8etxEAG3k9ACcDNxJRA42DAWcrJQCM8wAlAOanC6OVCLsGI6fJBgCvBRnDBvElRUYFFoAFcD9GSDNCKUK8X3kZX8QAls0FOgCQVCGbwTsuYDoZutcONxjOGJHJ/gVfBWAFXwVgBWsFYAVfBWAFXwVgBV8FYAVfBWBOHQjfjW8KCgoKbF7xMwTRA7kGN8PDAMMEr8MA70gxFroFTj5xPnhCR0K+X30/X/AAWBkzswCNBsxzzASm70aCRS4rDDMeLz49fnXfcsH5GcoscQFz13Y4HwVnBXLJycnACNdRYwgICAqEXoWTxgA7P4kACxbZBu21Kw0AjMsTAwkVAOVtJUUsJ1JCuULESUArXy9gPi9AKwnJRQYKTD9LPoA+iT54PnkCkULEUUpDX9NWV3JVEjQAc1w3A3IBE3YnX+g7QiMJb6MKaiszRCUuQrNCxDPMCcwEX9EWJzYREBEEBwIHKn6l33JCNVIfybPJtAltydPUCmhBZw/tEKsZAJOVJU1CLRuxbUHOQAo7P0s+eEJHHA8SJVRPdGM0NVrpvBoKhfUlM0JHHGUQUhEWO1xLSj8MO0ucNAqJIzVCRxv9EFsqKyA4OQgNj2nwZgp5ZNFgE2A1K3YHS2AhQQojJmC7DgpzGG1WYFUZCQYHZO9gHWCdYIVgu2BTYJlwFh8GvRbcXbG8YgtDHrMBwzPVyQonHQgkCyYBgQJ0Ajc4nVqIAwGSCsBPIgDsK3SWEtIVBa5N8gGjAo+kVwVIZwD/AEUSCDweX4ITrRQsJ8K3TwBXFDwEAB0TvzVcAtoTS20RIwDgVgZ9BBImYgA5AL4Coi8LFnezOkCnIQFjAY4KBAPh9RcGsgZSBsEAJctdsWIRu2kTkQstRw7DAcMBKgpPBGIGMDAwKCYnKTQaLg4AKRSVAFwCdl+YUZ0JdicFD3lPAdt1F9ZZKCGxuE3yBxkFVGcA/wBFEgiCBwAOLHQSjxOtQDg1z7deFRMAZ8QTAGtKb1ApIiPHADkAvgKiLy1DFtYCmBiDAlDDWNB0eo7fpaMO/aEVRRv0ATEQZBIODyMEAc8JQhCbDRgzFD4TAEMAu9YBCgCsAOkAm5I3ABwAYxvONnR+MhXJAxgKQyxL2+kkJhMbhQKDBMkSsvF0AD9BNQ6uQC7WqSQHwxEAEEIu1hkhAH2z4iQPwyJPHNWpdyYBRSpnJALzoBAEVPPsH20MxA0CCEQKRgAFyAtFAlMNwwjEDUQJRArELtapMg7DDZgJIw+TGukEIwvDFkMAqAtDEMMMBhioe+QAO3MMRAACrgnEBSPY9Q0FDnbSBoMAB8MSYxkSxAEJAPIJAAB8FWMOFtMc/HcXwxhDAC7DAvOowwAewwJdKDKHAAHDAALrFUQVwwAbwyvzpWMWv8wA/ABpAy++bcYDUKPD0KhDCwKmJ1MAAmMA5+UZwxAagwipBRL/eADfw6fDGOMCGsOjk3l6BwOpo4sAEsMOGxMAA5sAbcMOAAvDp0MJGkMDwgipnNIPAwfIqUMGAOGDAAPzABXDAAcDAAnDAGmTABrDAA7DChjDjnEWAwABYwAOcwAuUyYABsMAF8MIKQANUgC6wy4AA8MADqMq8wCyYgAcIwAB8wqpAAXOCx0V4wAHowBCwwEKAGnDAAuDAB3DAAjDCakABdIAbqcZ3QCZCCkABdIAAAFDAAfjAB2jCCkABqIACYMAGzMAbSMA5sOIAAhjAAhDABTDBAkpAAbSAOOTAAlDC6kOzPtnAAdDAG6kQFAATwAKwwwAA0MACbUDPwAHIwAZgwACE6cDAAojAApDAAoDp/MGwwAJIwADEwAQQwgAFEMAEXMAD5MADfMADcMAGRMOFiMAFUMAbqMWuwHDAMIAE0MLAGkzEgDhUwACQwAEWgAXgwUjAAbYABjDBSYBgzBaAEFNALcQBxUMegAwMngBrA0IZgJ0KxQHBREPd1N0ZzKRJwaIHAZqNT4DqQq8BwngAB4DAwt2AX56T1ocKQNXAh1GATQGC3tOxYNagkgAMQA5CQADAQEAWxLjAIOYNAEzAH7tFRk6TglSAF8NAAlYAQ+S1ACAQwQorQBiAN4dAJ1wPyeTANVzuQDX3AIeEMp9eyMgXiUAEdkBkJizKltbVVAaRMqRAAEAhyQ/SDEz6BmfVwB6ATEsOClKIRcDOF0E/832AFNt5AByAnkCRxGCOs94NjXdAwINGBonDBwPALW2AwICAgAAAAAAAAYDBQMDARrUAwAtAAAAAgEGBgYGBgYFBQUFBQUEBQYHCAkEBQUFBQQAAAICAAAAIgCNAJAAlT0A6gC7ANwApEQAwgCyAK0AqADuAKYA2gCjAOcBCAEDAMcAgQBiANIA1AEDAN4A8gCQAKkBMQDqAN8A3AsBCQ8yO9ra2tq8xuLT1tRJOB0BUgFcNU0BWgFpAWgBWwFMUUlLbhMBUxsNEAs6PhMOACcUKy0vMj5AQENDQ0RFFEYGJFdXV1dZWVhZL1pbXVxcI2NnZ2ZoZypsbnZ1eHh4eHh4enp6enp6enp6enp8fH18e2IARPIASQCaAHgAMgBm+ACOAFcAVwA3AnbvAIsABfj4AGQAk/IAnwBPAGIAZP//sACFAIUAaQBWALEAJAC2AIMCQAJDAPwA5wD+AP4A6AD/AOkA6QDoAOYALwJ7AVEBQAE+AVQBPgE+AT4BOQE4ATgBOAEcAVgXADEQCAEAUx8SHgsdHhYAjgCWAKYAUQBqIAIxAHYAbwCXAxUDJzIDIUlGTzEAkQJPAMcCVwKkAMAClgKWApYClgKWApYCiwKWApYClgKWApYClgKVApUCmAKgApcClgKWApQClAKUApQCkgKVAnUB1AKXAp8ClgKWApUeAIETBQD+DQOfAmECOh8BVBg9AuIZEjMbAU4/G1WZAXusRAFpYQEFA0FPAQYAmTEeIJdyADFoAHEANgCRA5zMk/C2jGINwjMWygIZCaXdfDILBCs5dAE7YnQBugDlhoiHhoiGiYqKhouOjIaNkI6Ij4qQipGGkoaThpSSlYaWhpeKmIaZhpqGm4aci52QnoqfhuIC4XTpAt90AIp0LHSoAIsAdHQEQwRABEIERQRDBEkERgRBBEcESQRIBEQERgRJAJ5udACrA490ALxuAQ10ANFZdHQA13QCFHQA/mJ0AP4BIQD+APwA/AD9APwDhGZ03ASMK23HAP4A/AD8AP0A/CR0dACRYnQA/gCRASEA/gCRAvQA/gCRA4RmdNwEjCttxyR0AP9idAEhAP4A/gD8APwA/QD8AP8A/AD8AP0A/AOEZnTcBIwrbcckdHQAkWJ0ASEA/gCRAP4AkQL0AP4AkQOEZnTcBIwrbcckdAJLAT50AlIBQXQCU8l0dAJfdHQDpgL0A6YDpgOnA6cDpwOnA4RmdNwEjCttxyR0dACRYnQBIQOmAJEDpgCRAvQDpgCRA4RmdNwEjCttxyR0BDh0AJEEOQCRDpU5dSgCADR03gV2CwArdAEFAM5iCnR0AF1iAAYcOgp0dACRCnQAXAEIwWZ0CnRmdHQAkWZ0CnRmdEXgAFF03gp0dEY0tlT2u3SOAQTwscwhjZZKrhYcBSfFp9XNbKiVDOD2b+cpe4/Z17mQnbtzzhaeQtE2GGj0IDNTjRUSyTxxw/RPHW/+vS7d1NfRt9z9QPZg4X7QFfhCnkvgNPIItOsC2eV6hPannZNHlZ9xrwZXIMOlu3jSoQSq78WEjwLjw1ELSlF1aBvfzwk5ZX7AUvQzjPQKbDuQ+sm4wNOp4A6AdVuRS0t1y/DZpg4R6m7FNjM9HgvW7Bi88zaMjOo6lM8wtBBdj8LP4ylv3zCXPhebMKJc066o9sF71oFW/8JXu86HJbwDID5lzw5GWLR/LhT0Qqnp2JQxNZNfcbLIzPy+YypqRm/lBmGmex+82+PisxUumSeJkALIT6rJezxMH+CTJmQtt5uwTVbL3ptmjDUQzlSIvWi8Tl7ng1NpuRn1Ng4n14Qc+3Iil7OwkvNWogLSPkn3pihIFytyIGmMhOe3n1tWsuMy9BdKyqF4Z3v2SgggTL9KVvMXPnCbRe+oOuFFP3HejBG/w9gvmfNYvg6JuWia2lcSSN1uIjBktzoIazOHPJZ7kKHPz8mRWVdW3lA8WGF9dQF6Bm673boov3BUWDU2JNcahR23GtfHKLOz/viZ+rYnZFaIznXO67CYEJ1fXuTRpZhYZkKe54xeoagkNGLs+NTZHE0rX45/XvQ2RGADX6vcAvdxIUBV27wxGm2zjZo4X3ILgAlrOFheuZ6wtsvaIj4yLY7qqawlliaIcrz2G+c3vscAnCkCuMzMmZvMfu9lLwTvfX+3cVSyPdN9ZwgDZhfjRgNJcLiJ67b9xx8JHswprbiE3v9UphotAPIgnXVIN5KmMc0piXhc6cChPnN+MRhG9adtdttQTTwSIpl8I4/j//d3sz1326qTBTpPRM/Hgh3kzqEXs8ZAk4ErQhNO8hzrQ0DLkWMA/N+91tn2MdOJnWC2FCZehkQrwzwbKOjhvZsbM95QoeL9skYyMf4srVPVJSgg7pOLUtr/n9eT99oe9nLtFRpjA9okV2Kj8h9k5HaC0oivRD8VyXkJ81tcd4fHNXPCfloIQasxsuO18/46dR2jgul/UIet2G0kRvnyONMKhHs6J26FEoqSqd+rfYjeEGwHWVDpX1fh1jBBcKGMqRepju9Y00mDVHC+Xdij/j44rKfvfjGinNs1jO/0F3jB83XCDINN/HB84axlP+3E/klktRo+vl3U/aiyMJbIodE1XSsDn6UAzIoMtUObY2+k/4gY/l+AkZJ5Sj2vQrkyLm3FoxjhDX+31UXBFf9XrAH31fFqoBmDEZvhvvpnZ87N+oZEu7U9O/nnk+QWj3x8uyoRbEnf+O5UMr9i0nHP38IF5AvzrBW8YWBUR0mIAzIvndQq9N3v/Jto3aPjPXUPl8ASdPPyAp7jENf8bk7VMM9ol9XGmlBmeDMuGqt+WzuL6CXAxXjIhCPM5vACchgMJ/8XBGLO/D1isVvGhwwHHr1DLaI5mn2Jr/b1pUD90uciDaS8cXNDzCWvNmT/PhQe5e8nTnnnkt8Ds/SIjibcum/fqDhKopxAY8AkSrPn+IGDEKOO+U3XOP6djFs2H5N9+orhOahiQk5KnEUWa+CzkVzhp8bMHRbg81qhjjXuIKbHjSLSIBKWqockGtKinY+z4/RdBUF6pcc3JmnlxVcNgrI4SEzKUZSwcD2QCyxzKve+gAmg6ZuSRkpPFa6mfThu7LJNu3H5K42uCpNvPAsoedolKV/LHe/eJ+BbaG5MG0NaSGVPRUmNFMFFSSpXEcXwbVh7UETOZZtoVNRGOIbbkig3McEtR68cG0RZAoJevWYo7Dg/lZ1CQzblWeUvVHmr8fY4Nqd9JJiH/zEX24mJviH60fAyFr0A3c4bC1j3yZU60VgJxXn8JgJXLUIsiBnmKmMYz+7yBQFBvqb2eYnuW59joZBf56/wXvWIR4R8wTmV80i1mZy+S4+BUES+hzjk0uXpC///z/IlqHZ1monzlXp8aCfhGKMti73FI1KbL1q6IKO4fuBuZ59gagjn5xU79muMpHXg6S+e+gDM/U9BKLHbl9l6o8czQKl4RUkJJiqftQG2i3BMg/TQlUYFkJDYBOOvAugYuzYSDnZbDDd/aSd9x0Oe6F+bJcHfl9+gp6L5/TgA+BdFFovbfCrQ40s5vMPw8866pNX8zyFGeFWdxIpPVp9Rg1UPOVFbFZrvaFq/YAzHQgqMWpahMYfqHpmwXfHL1/kpYmGuHFwT55mQu0dylfNuq2Oq0hTMCPwqfxnuBIPLXfci4Y1ANy+1CUipQxld/izVh16WyG2Q0CQQ9NqtAnx1HCHwDj7sYxOSB0wopZSnOzxQOcExmxrVTF2BkOthVpGfuhaGECfCJpJKpjnihY+xOT2QJxN61+9K6QSqtv2Shr82I3jgJrqBg0wELFZPjvHpvzTtaJnLK6Vb97Yn933koO/saN7fsjwNKzp4l2lJVx2orjCGzC/4ZL4zCver6aQYtC5sdoychuFE6ufOiog+VWi5UDkbmvmtah/3aArEBIi39s5ILUnlFLgilcGuz9CQshEY7fw2ouoILAYPVT/gyAIq3TFAIwVsl+ktkRz/qGfnCDGrm5gsl/l9QdvCWGsjPz3dU7XuqKfdUrr/6XIgjp4rey6AJBmCmUJMjITHVdFb5m1p+dLMCL8t55zD42cmftmLEJC0Da04YiRCVUBLLa8D071/N5UBNBXDh0LFsmhV/5B5ExOB4j3WVG/S3lfK5o+V6ELHvy6RR9n4ac+VsK4VE4yphPvV+kG9FegTBH4ZRXL2HytUHCduJazB/KykjfetYxOXTLws267aGOd+I+JhKP//+VnXmS90OD/jvLcVu0asyqcuYN1mSb6XTlCkqv1vigZPIYwNF/zpWcT1GR/6aEIRjkh0yhg4LXJfaGobYJTY4JI58KiAKgmmgAKWdl5nYCeLqavRJGQNuYuZtZFGx+IkI4w4NS2xwbetNMunOjBu/hmKCI/w7tfiiyUd//4rbTeWt4izBY8YvGIN6vyKYmP/8X8wHKCeN+WRcKM70+tXKNGyevU9H2Dg5BsljnTf8YbsJ1TmMs74Ce2XlHisleguhyeg44rQOHZuw/6HTkhnnurK2d62q6yS7210SsAIaR+jXMQA+svkrLpsUY+F30Uw89uOdGAR6vo4FIME0EfVVeHTu6eKicfhSqOeXJhbftcd08sWEnNUL1C9fnprTgd83IMut8onVUF0hvqzZfHduPjbjwEXIcoYmy+P6tcJZHmeOv6VrvEdkHDJecjHuHeWANe79VG662qTjA/HCvumVv3qL+LrOcpqGps2ZGwQdFJ7PU4iuyRlBrwfO+xnPyr47s2cXVbWzAyznDiBGjCM3ksxjjqM62GE9C8f5U38kB3VjtabKp/nRdvMESPGDG90bWRLAt1Qk5DyLuazRR1YzdC1c+hZXvAWV8xA72S4A8B67vjVhbba3MMop293FeEXpe7zItMWrJG/LOH9ByOXmYnNJfjmfuX9KbrpgLOba4nZ+fl8Gbdv/ihv+6wFGKHCYrVwmhFC0J3V2bn2tIB1wCc1CST3d3X2OyxhguXcs4sm679UngzofuSeBewMFJboIQHbUh/m2JhW2hG9DIvG2t7yZIzKBTz9wBtnNC+2pCRYhSIuQ1j8xsz5VvqnyUIthvuoyyu7fNIrg/KQUVmGQaqkqZk/Vx5b33/gsEs8yX7SC1J+NV4icz6bvIE7C5G6McBaI8rVg56q5QBJWxn/87Q1sPK4+sQa8fLU5gXo4paaq4cOcQ4wR0VBHPGjKh+UlPCbA1nLXyEUX45qZ8J7/Ln4FPJE2TdzD0Z8MLSNQiykMMmSyOCiFfy84Rq60emYB2vD09KjYwsoIpeDcBDTElBbXxND72yhd9pC/1CMid/5HUMvAL27OtcIJDzNKpRPNqPOpyt2aPGz9QWIs9hQ9LiX5s8m9hjTUu/f7MyIatjjd+tSfQ3ufZxPpmJhTaBtZtKLUcfOCUqADuO+QoH8B9v6U+P0HV1GLQmtoNFTb3s74ivZgjES0qfK+8RdGgBbcCMSy8eBvh98+et1KIFqSe1KQPyXULBMTsIYnysIwiZBJYdI20vseV+wuJkcqGemehKjaAb9L57xZm3g2zX0bZ2xk/fU+bCo7TlnbW7JuF1YdURo/2Gw7VclDG1W7LOtas2LX4upifZ/23rzpsnY/ALfRgrcWP5hYmV9VxVOQA1fZvp9F2UNU+7d7xRyVm5wiLp3/0dlV7vdw1PMiZrbDAYzIVqEjRY2YU03sJhPnlwIPcZUG5ltL6S8XCxU1eYS5cjr34veBmXAvy7yN4ZjArIG0dfD/5UpBNlX1ZPoxJOwyqRi3wQWtOzd4oNKh0LkoTm8cwqgIfKhqqGOhwo71I+zXnMemTv2B2AUzABWyFztGgGULjDDzWYwJUVBTjKCn5K2QGMK1CQT7SzziOjo+BhAmqBjzuc3xYym2eedGeOIRJVyTwDw37iCMe4g5Vbnsb5ZBdxOAnMT7HU4DHpxWGuQ7GeiY30Cpbvzss55+5Km1YsbD5ea3NI9QNYIXol5apgSu9dZ8f8xS5dtHpido5BclDuLWY4lhik0tbJa07yJhH0BOyEut/GRbYTS6RfiTYWGMCkNpfSHi7HvdiTglEVHKZXaVhezH4kkXiIvKopYAlPusftpE4a5IZwvw1x/eLvoDIh/zpo9FiQInsTb2SAkKHV42XYBjpJDg4374XiVb3ws4qM0s9eSQ5HzsMU4OZJKuopFjBM+dAZEl8RUMx5uU2N486Kr141tVsGQfGjORYMCJAMsxELeNT4RmWjRcpdTGBwcx6XN9drWqPmJzcrGrH4+DRc7+n1w3kPZwu0BkNr6hQrqgo7JTB9A5kdJ/H7P4cWBMwsmuixAzJB3yrQpnGIq90lxAXLzDCdn1LPibsRt7rHNjgQBklRgPZ8vTbjXdgXrTWQsK5MdrXXQVPp0Rinq3frzZKJ0qD6Qhc40VzAraUXlob1gvkhK3vpmHgI6FRlQZNx6eRqkp0zy4AQlX813fAPtL3jMRaitGFFjo0zmErloC+h+YYdVQ6k4F/epxAoF0BmqEoKNTt6j4vQZNQ2BoqF9Vj53TOIoNmDiu9Xp15RkIgQIGcoLpfoIbenzpGUAtqFJp5W+LLnx38jHeECTJ/navKY1NWfN0sY1T8/pB8kIH3DU3DX+u6W3YwpypBMYOhbSxGjq84RZ84fWJow8pyHqn4S/9J15EcCMsXqrfwyd9mhiu3+rEo9pPpoJkdZqHjra4NvzFwuThNKy6hao/SlLw3ZADUcUp3w3SRVfW2rhl80zOgTYnKE0Hs2qp1J6H3xqPqIkvUDRMFDYyRbsFI3M9MEyovPk8rlw7/0a81cDVLmBsR2ze2pBuKb23fbeZC0uXoIvDppfTwIDxk1Oq2dGesGc+oJXWJLGkOha3CX+DUnzgAp9HGH9RsPZN63Hn4RMA5eSVhPHO+9RcRb/IOgtW31V1Q5IPGtoxPjC+MEJbVlIMYADd9aHYWUIQKopuPOHmoqSkubnAKnzgKHqgIOfW5RdAgotN6BN+O2ZYHkuemLnvQ8U9THVrS1RtLmKbcC7PeeDsYznvqzeg6VCNwmr0Yyx1wnLjyT84BZz3EJyCptD3yeueAyDWIs0L2qs/VQ3HUyqfrja0V1LdDzqAikeWuV4sc7RLIB69jEIBjCkyZedoUHqCrOvShVzyd73OdrJW0hPOuQv2qOoHDc9xVb6Yu6uq3Xqp2ZaH46A7lzevbxQEmfrzvAYSJuZ4WDk1Hz3QX1LVdiUK0EvlAGAYlG3Md30r7dcPN63yqBCIj25prpvZP0nI4+EgWoFG95V596CurXpKRBGRjQlHCvy5Ib/iW8nZJWwrET3mgd6mEhfP4KCuaLjopWs7h+MdXFdIv8dHQJgg1xi1eYqB0uDYjxwVmri0Sv5XKut/onqapC+FQiC2C1lvYJ9MVco6yDYsS3AANUfMtvtbYI2hfwZatiSsnoUeMZd34GVjkMMKA+XnjJpXgRW2SHTZplVowPmJsvXy6w3cfO1AK2dvtZEKTkC/TY9LFiKHCG0DnrMQdGm2lzlBHM9iEYynH2UcVMhUEjsc0oDBTgo2ZSQ1gzkAHeWeBXYFjYLuuf8yzTCy7/RFR81WDjXMbq2BOH5dURnxo6oivmxL3cKzKInlZkD31nvpHB9Kk7GfcfE1t+1V64b9LtgeJGlpRFxQCAqWJ5DoY77ski8gsOEOr2uywZaoO/NGa0X0y1pNQHBi3b2SUGNpcZxDT7rLbBf1FSnQ8guxGW3W+36BW0gBje4DOz6Ba6SVk0xiKgt+q2JOFyr4SYfnu+Ic1QZYIuwHBrgzr6UvOcSCzPTOo7D6IC4ISeS7zkl4h+2VoeHpnG/uWR3+ysNgPcOIXQbv0n4mr3BwQcdKJxgPSeyuP/z1Jjg4e9nUvoXegqQVIE30EHx5GHv+FAVUNTowYDJgyFhf5IvlYmEqRif6+WN1MkEJmDcQITx9FX23a4mxy1AQRsOHO/+eImX9l8EMJI3oPWzVXxSOeHU1dUWYr2uAA7AMb+vAEZSbU3qob9ibCyXeypEMpZ6863o6QPqlqGHZkuWABSTVNd4cOh9hv3qEpSx2Zy/DJMP6cItEmiBJ5PFqQnDEIt3NrA3COlOSgz43D7gpNFNJ5MBh4oFzhDPiglC2ypsNU4ISywY2erkyb1NC3Qh/IfWj0eDgZI4/ln8WPfBsT3meTjq1Uqt1E7Zl/qftqkx6aM9KueMCekSnMrcHj1CqTWWzEzPsZGcDe3Ue4Ws+XFYVxNbOFF8ezkvQGR6ZOtOLU2lQEnMBStx47vE6Pb7AYMBRj2OOfZXfisjJnpTfSNjo6sZ6qSvNxZNmDeS7Gk3yYyCk1HtKN2UnhMIjOXUzAqDv90lx9O/q/AT1ZMnit5XQe9wmQxnE/WSH0CqZ9/2Hy+Sfmpeg8RwsHI5Z8kC8H293m/LHVVM/BA7HaTJYg5Enk7M/xWpq0192ACfBai2LA/qrCjCr6Dh1BIMzMXINBmX96MJ5Hn2nxln/RXPFhwHxUmSV0EV2V0jm86/dxxuYSU1W7sVkEbN9EzkG0QFwPhyHKyb3t+Fj5WoUUTErcazE/N6EW6Lvp0d//SDPj7EV9UdJN+Amnf3Wwk3A0SlJ9Z00yvXZ7n3z70G47Hfsow8Wq1JXcfwnA+Yxa5mFsgV464KKP4T31wqIgzFPd3eCe3j5ory5fBF2hgCFyVFrLzI9eetNXvM7oQqyFgDo4CTp/hDV9NMX9JDHQ/nyHTLvZLNLF6ftn2OxjGm8+PqOwhxnPHWipkE/8wbtyri80Sr7pMNkQGMfo4ZYK9OcCC4ESVFFbLMIvlxSoRqWie0wxqnLfcLSXMSpMMQEJYDVObYsXIQNv4TGNwjq1kvT1UOkicTrG3IaBZ3XdScS3u8sgeZPVpOLkbiF940FjbCeNRINNvDbd01EPBrTCPpm12m43ze1bBB59Ia6Ovhnur/Nvx3IxwSWol+3H2qfCJR8df6aQf4v6WiONxkK+IqT4pKQrZK/LplgDI/PJZbOep8dtbV7oCr6CgfpWa8NczOkPx81iSHbsNhVSJBOtrLIMrL31LK9TqHqAbAHe0RLmmV806kRLDLNEhUEJfm9u0sxpkL93Zgd6rw+tqBfTMi59xqXHLXSHwSbSBl0EK0+loECOPtrl+/nsaFe197di4yUgoe4jKoAJDXc6DGDjrQOoFDWZJ9HXwt8xDrQP+7aRwWKWI1GF8s8O4KzxWBBcwnl3vnl1Oez3oh6Ea1vjR7/z7DDTrFtqU2W/KAEzAuXDNZ7MY73MF216dzdSbWmUp4lcm7keJfWaMHgut9x5C9mj66Z0lJ+yhsjVvyiWrfk1lzPOTdhG15Y7gQlXtacvI7qv/XNSscDwqkgwHT/gUsD5yB7LdRRvJxQGYINn9hTpodKFVSTPrtGvyQw+HlRFXIkodErAGu9Iy1YpfSPc3jkFh5CX3lPxv7aqjE/JAfTIpEjGb/H7MO0e2vsViSW1qa/Lmi4/n4DEI3g7lYrcanspDfEpKkdV1OjSLOy0BCUqVoECaB55vs06rXl4jqmLsPsFM/7vYJ0vrBhDCm/00A/H81l1uekJ/6Lml3Hb9+NKiLqATJmDpyzfYZFHumEjC662L0Bwkxi7E9U4cQA0XMVDuMYAIeLMPgQaMVOd8fmt5SflFIfuBoszeAw7ow5gXPE2Y/yBc/7jExARUf/BxIHQBF5Sn3i61w4z5xJdCyO1F1X3+3ax+JSvMeZ7S6QSKp1Fp/sjYz6Z+VgCZzibGeEoujryfMulH7Rai5kAft9ebcW50DyJr2uo2z97mTWIu45YsSnNSMrrNUuG1XsYBtD9TDYzQffKB87vWbkM4EbPAFgoBV4GQS+vtFDUqOFAoi1nTtmIOvg38N4hT2Sn8r8clmBCXspBlMBYTnrqFJGBT3wZOzAyJDre9dHH7+x7qaaKDOB4UQALD5ecS0DE4obubQEiuJZ0EpBVpLuYcce8Aa4PYd/V4DLDAJBYKQPCWTcrEaZ5HYbJi11Gd6hjGom1ii18VHYnG28NKpkz2UKVPxlhYSp8uZr367iOmoy7zsxehW9wzcy2zG0a80PBMCRQMb32hnaHeOR8fnNDzZhaNYhkOdDsBUZ3loDMa1YP0uS0cjUP3b/6DBlqmZOeNABDsLl5BI5QJups8uxAuWJdkUB/pO6Zax6tsg7fN5mjjDgMGngO+DPcKqiHIDbFIGudxtPTIyDi9SFMKBDcfdGQRv41q1AqmxgkVfJMnP8w/Bc7N9/TR6C7mGObFqFkIEom8sKi2xYqJLTCHK7cxzaZvqODo22c3wisBCP4HeAgcRbNPAsBkNRhSmD48dHupdBRw4mIvtS5oeF6zeT1KMCyhMnmhpkFAGWnGscoNkwvQ8ZM5lE/vgTHFYL99OuNxdFBxTEDd5v2qLR8y9WkXsWgG6kZNndFG+pO/UAkOCipqIhL3hq7cRSdrCq7YhUsTocEcnaFa6nVkhnSeRYUA1YO0z5itF9Sly3VlxYDw239TJJH6f3EUfYO5lb7bcFcz8Bp7Oo8QmnsUHOz/fagVUBtKEw1iT88j+aKkv8cscKNkMxjYr8344D1kFoZ7/td1W6LCNYN594301tUGRmFjAzeRg5vyoM1F6+bJZ/Q54jN/k8SFd3DxPTYaAUsivsBfgTn7Mx8H2SpPt4GOdYRnEJOH6jHM2p6SgB0gzIRq6fHxGMmSmqaPCmlfwxiuloaVIitLGN8wie2CDWhkzLoCJcODh7KIOAqbHEvXdUxaS4TTTs07Clzj/6GmVs9kiZDerMxEnhUB6QQPlcfqkG9882RqHoLiHGBoHfQuXIsAG8GTAtao2KVwRnvvam8jo1e312GQAKWEa4sUVEAMG4G6ckcONDwRcg1e2D3+ohXgY4UAWF8wHKQMrSnzCgfFpsxh+aHXMGtPQroQasRY4U6UdG0rz1Vjbka0MekOGRZQEvqQFlxseFor8zWFgHek3v29+WqN6gaK5gZOTOMZzpQIC1201LkMCXild3vWXSc5UX9xcFYfbRPzGFa1FDcPfPB/jUEq/FeGt419CI3YmBlVoHsa4KdcwQP5ZSwHHhFJ7/Ph/Rap/4vmG91eDwPP0lDfCDRCLszTqfzM71xpmiKi2HwS4WlqvGNwtvwF5Dqpn6KTq8ax00UMPkxDcZrEEEsIvHiUXXEphdb4GB4FymlPwBz4Gperqq5pW7TQ6/yNRhW8VT5NhuP0udlxo4gILq5ZxAZk8ZGh3g4CqxJlPKY7AQxupfUcVpWT5VItp1+30UqoyP4wWsRo3olRRgkWZZ2ZN6VC3OZFeXB8NbnUrSdikNptD1QiGuKkr8EmSR/AK9Rw+FF3s5uwuPbvHGiPeFOViltMK7AUaOsq9+x9cndk3iJEE5LKZRlWJbKOZweROzmPNVPkjE3K/TyA57Rs68TkZ3MR8akKpm7cFjnjPd/DdkWjgYoKHSr5Wu5ssoBYU4acRs5g2DHxUmdq8VXOXRbunD8QN0LhgkssgahcdoYsNvuXGUK/KXD/7oFb+VGdhqIn02veuM5bLudJOc2Ky0GMaG4W/xWBxIJcL7yliJOXOpx0AkBqUgzlDczmLT4iILXDxxtRR1oZa2JWFgiAb43obrJnG/TZC2KSK2wqOzRZTXavZZFMb1f3bXvVaNaK828w9TO610gk8JNf3gMfETzXXsbcvRGCG9JWQZ6+cDPqc4466Yo2RcKH+PILeKOqtnlbInR3MmBeGG3FH10yzkybuqEC2HSQwpA0An7d9+73BkDUTm30bZmoP/RGbgFN+GrCOfADgqr0WbI1a1okpFms8iHYw9hm0zUvlEMivBRxModrbJJ+9/p3jUdQQ9BCtQdxnOGrT5dzRUmw0593/mbRSdBg0nRvRZM5/E16m7ZHmDEtWhwvfdZCZ8J8M12W0yRMszXamWfQTwIZ4ayYktrnscQuWr8idp3PjT2eF/jmtdhIfcpMnb+IfZY2FebW6UY/AK3jP4u3Tu4zE4qlnQgLFbM19EBIsNf7KhjdbqQ/D6yiDb+NlEi2SKD+ivXVUK8ib0oBo366gXkR8ZxGjpJIDcEgZPa9TcYe0TIbiPl/rPUQDu3XBJ9X/GNq3FAUsKsll57DzaGMrjcT+gctp+9MLYXCq+sqP81eVQ0r9lt+gcQfZbACRbEjvlMskztZG8gbC8Qn9tt26Q7y7nDrbZq/LEz7kR6Jc6pg3N9rVX8Y5MJrGlML9p9lU4jbTkKqCveeZUJjHB03m2KRKR2TytoFkTXOLg7keU1s1lrPMQJpoOKLuAAC+y1HlJucU6ysB5hsXhvSPPLq5J7JtnqHKZ4vYjC4Vy8153QY+6780xDuGARsGbOs1WqzH0QS765rnSKEbbKlkO8oI/VDwUd0is13tKpqILu1mDJFNy/iJAWcvDgjxvusIT+PGz3ST/J9r9Mtfd0jpaGeiLYIqXc7DiHSS8TcjFVksi66PEkxW1z6ujbLLUGNNYnzOWpH8BZGK4bCK7iR+MbIv8ncDAz1u4StN3vTTzewr9IQjk9wxFxn+6N1ddKs0vffJiS08N3a4G1SVrlZ97Q/M+8G9fe5AP6d9/Qq4WRnORVhofPIKEdCr3llspUfE0oKIIYoByBRPh+bX1HLS3JWGJRhIvE1aW4NTd8ePi4Z+kXb+Z8snYfSNcqijhAgVsx4RCM54cXUiYkjeBmmC4ajOHrChoELscJJC7+9jjMjw5BagZKlgRMiSNYz7h7vvZIoQqbtQmspc0cUk1G/73iXtSpROl5wtLgQi0mW2Ex8i3WULhcggx6E1LMVHUsdc9GHI1PH3U2Ko0PyGdn9KdVOLm7FPBui0i9a0HpA60MsewVE4z8CAt5d401Gv6zXlIT5Ybit1VIA0FCs7wtvYreru1fUyW3oLAZ/+aTnZrOcYRNVA8spoRtlRoWflsRClFcgzkqiHOrf0/SVw+EpVaFlJ0g4Kxq1MMOmiQdpMNpte8lMMQqm6cIFXlnGbfJllysKDi+0JJMotkqgIxOSQgU9dn/lWkeVf8nUm3iwX2Nl3WDw9i6AUK3vBAbZZrcJpDQ/N64AVwjT07Jef30GSSmtNu2WlW7YoyW2FlWfZFQUwk867EdLYKk9VG6JgEnBiBxkY7LMo4YLQJJlAo9l/oTvJkSARDF/XtyAzM8O2t3eT/iXa6wDN3WewNmQHdPfsxChU/KtLG2Mn8i4ZqKdSlIaBZadxJmRzVS/o4yA65RTSViq60oa395Lqw0pzY4SipwE0SXXsKV+GZraGSkr/RW08wPRvqvSUkYBMA9lPx4m24az+IHmCbXA+0faxTRE9wuGeO06DIXa6QlKJ3puIyiuAVfPr736vzo2pBirS+Vxel3TMm3JKhz9o2ZoRvaFVpIkykb0Hcm4oHFBMcNSNj7/4GJt43ogonY2Vg4nsDQIWxAcorpXACzgBqQPjYsE/VUpXpwNManEru4NwMCFPkXvMoqvoeLN3qyu/N1eWEHttMD65v19l/0kH2mR35iv/FI+yjoHJ9gPMz67af3Mq/BoWXqu3rphiWMXVkmnPSEkpGpUI2h1MThideGFEOK6YZHPwYzMBvpNC7+ZHxPb7epfefGyIB4JzO9DTNEYnDLVVHdQyvOEVefrk6Uv5kTQYVYWWdqrdcIl7yljwwIWdfQ/y+2QB3eR/qxYObuYyB4gTbo2in4PzarU1sO9nETkmj9/AoxDA+JM3GMqQtJR4jtduHtnoCLxd1gQUscHRB/MoRYIEsP2pDZ9KvHgtlk1iTbWWbHhohwFEYX7y51fUV2nuUmnoUcqnWIQAAgl9LTVX+Bc0QGNEhChxHR4YjfE51PUdGfsSFE6ck7BL3/hTf9jLq4G1IafINxOLKeAtO7quulYvH5YOBc+zX7CrMgWnW47/jfRsWnJjYYoE7xMfWV2HN2iyIqLI";const HT=new Map([[8217,"apostrophe"],[8260,"fraction slash"],[12539,"middle dot"]]),$T=4;function AU(n){let e=0;function t(){return n[e++]<<8|n[e++]}let r=t(),i=1,s=[0,1];for(let F=1;F<r;F++)s.push(i+=t());let o=t(),a=e;e+=o;let l=0,c=0;function h(){return l==0&&(c=c<<8|n[e++],l=8),c>>--l&1}const d=31,p=2**d,g=p>>>1,A=g>>1,v=p-1;let x=0;for(let F=0;F<d;F++)x=x<<1|h();let w=[],E=0,T=p;for(;;){let F=Math.floor(((x-E+1)*i-1)/T),M=0,b=r;for(;b-M>1;){let P=M+b>>>1;F<s[P]?b=P:M=P}if(M==0)break;w.push(M);let _=E+Math.floor(T*s[M]/i),S=E+Math.floor(T*s[M+1]/i)-1;for(;!((_^S)&g);)x=x<<1&v|h(),_=_<<1&v,S=S<<1&v|1;for(;_&~S&A;)x=x&g|x<<1&v>>>1|h(),_=_<<1^g,S=(S^g)<<1|g|1;E=_,T=1+S-_}let L=r-4;return w.map(F=>{switch(F-L){case 3:return L+65792+(n[a++]<<16|n[a++]<<8|n[a++]);case 2:return L+256+(n[a++]<<8|n[a++]);case 1:return L+n[a++];default:return F-1}})}function IU(n){let e=0;return()=>n[e++]}function VC(n){return IU(AU(TU(n)))}function TU(n){let e=[];[..."ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/"].forEach((i,s)=>e[i.charCodeAt(0)]=s);let t=n.length,r=new Uint8Array(6*t>>3);for(let i=0,s=0,o=0,a=0;i<t;i++)a=a<<6|e[n.charCodeAt(i)],o+=6,o>=8&&(r[s++]=a>>(o-=8));return r}function bU(n){return n&1?~n>>1:n>>1}function xU(n,e){let t=Array(n);for(let r=0,i=0;r<n;r++)t[r]=i+=bU(e());return t}function Sd(n,e=0){let t=[];for(;;){let r=n(),i=n();if(!i)break;e+=r;for(let s=0;s<i;s++)t.push(e+s);e+=i+1}return t}function MC(n){return Pd(()=>{let e=Sd(n);if(e.length)return e})}function BC(n){let e=[];for(;;){let t=n();if(t==0)break;e.push(SU(t,n))}for(;;){let t=n()-1;if(t<0)break;e.push(PU(t,n))}return e.flat()}function Pd(n){let e=[];for(;;){let t=n(e.length);if(!t)break;e.push(t)}return e}function FC(n,e,t){let r=Array(n).fill().map(()=>[]);for(let i=0;i<e;i++)xU(n,t).forEach((s,o)=>r[o].push(s));return r}function SU(n,e){let t=1+e(),r=e(),i=Pd(e);return FC(i.length,1+n,e).flatMap((o,a)=>{let[l,...c]=o;return Array(i[a]).fill().map((h,d)=>{let p=d*r;return[l+d*t,c.map(g=>g+p)]})})}function PU(n,e){let t=1+e();return FC(t,1+n,e).map(i=>[i[0],i.slice(1)])}function RU(n){let e=[],t=Sd(n);return i(r([]),[]),e;function r(s){let o=n(),a=Pd(()=>{let l=Sd(n).map(c=>t[c]);if(l.length)return r(l)});return{S:o,B:a,Q:s}}function i({S:s,B:o},a,l){if(!(s&4&&l===a[a.length-1])){s&2&&(l=a[a.length-1]),s&1&&e.push(a);for(let c of o)for(let h of c.Q)i(c,[...a,h],l)}}}function CU(n){return n.toString(16).toUpperCase().padStart(2,"0")}function UC(n){return`{${CU(n)}}`}function kU(n){let e=[];for(let t=0,r=n.length;t<r;){let i=n.codePointAt(t);t+=i<65536?1:2,e.push(i)}return e}function gc(n){let t=n.length;if(t<4096)return String.fromCodePoint(...n);let r=[];for(let i=0;i<t;)r.push(String.fromCodePoint(...n.slice(i,i+=4096)));return r.join("")}function NU(n,e){let t=n.length,r=t-e.length;for(let i=0;r==0&&i<t;i++)r=n[i]-e[i];return r}var DU="AEUDTAHBCFQATQDRADAAcgAgADQAFAAsABQAHwAOACQADQARAAoAFwAHABIACAAPAAUACwAFAAwABAAQAAMABwAEAAoABQAIAAIACgABAAQAFAALAAIACwABAAIAAQAHAAMAAwAEAAsADAAMAAwACgANAA0AAwAKAAkABAAdAAYAZwDSAdsDJgC0CkMB8xhZAqfoC190UGcThgBurwf7PT09Pb09AjgJum8OjDllxHYUKXAPxzq6tABAxgK8ysUvWAgMPT09PT09PSs6LT2HcgWXWwFLoSMEEEl5RFVMKvO0XQ8ExDdJMnIgsj26PTQyy8FfEQ8AY8IPAGcEbwRwBHEEcgRzBHQEdQR2BHcEeAR6BHsEfAR+BIAEgfndBQoBYgULAWIFDAFiBNcE2ATZBRAFEQUvBdALFAsVDPcNBw13DYcOMA4xDjMB4BllHI0B2grbAMDpHLkQ7QHVAPRNQQFnGRUEg0yEB2uaJF8AJpIBpob5AERSMAKNoAXqaQLUBMCzEiACnwRZEkkVsS7tANAsBG0RuAQLEPABv9HICTUBXigPZwRBApMDOwAamhtaABqEAY8KvKx3LQ4ArAB8UhwEBAVSagD8AEFZADkBIadVj2UMUgx5Il4ANQC9AxIB1BlbEPMAs30CGxlXAhwZKQIECBc6EbsCoxngzv7UzRQA8M0BawL6ZwkN7wABAD33OQRcsgLJCjMCjqUChtw/km+NAsXPAoP2BT84PwURAK0RAvptb6cApQS/OMMey5HJS84UdxpxTPkCogVFITaTOwERAK5pAvkNBOVyA7q3BKlOJSALAgUIBRcEdASpBXqzABXFSWZOawLCOqw//AolCZdvv3dSBkEQGyelEPcMMwG1ATsN7UvYBPEGOwTJH30ZGQ/NlZwIpS3dDO0m4y6hgFoj9SqDBe1L9DzdC01RaA9ZC2UJ4zpjgU4DIQENIosK3Q05CG0Q8wrJaw3lEUUHOQPVSZoApQcBCxEdNRW1JhBirAsJOXcG+xr2C48mrxMpevwF0xohBk0BKRr/AM8u54WwWjFcHE9fBgMLJSPHFKhQIA0lQLd4SBobBxUlqQKRQ3BKh1E2HpMh9jw9DWYuE1F8B/U8BRlPC4E8nkarRQ4R0j6NPUgiSUwsBDV/LC8niwnPD4UMuXxyAVkJIQmxDHETMREXN8UIOQcZLZckJxUIIUaVYJoE958D8xPRAwsFPwlBBxMDtRwtEy4VKQUNgSTXAvM21S6zAo9WgAEXBcsPJR/fEFBH4A7pCJsCZQODJesALRUhABcimwhDYwBfj9hTBS7LCMdqbCN0A2cU52ERcweRDlcHpxwzFb8c4XDIXguGCCijrwlbAXUJmQFfBOMICTVbjKAgQWdTi1gYmyBhQT9d/AIxDGUVn0S9h3gCiw9rEhsBNQFzBzkNAQJ3Ee0RaxCVCOuGBDW1M/g6JQRPIYMgEQonA09szgsnJvkM+GkBoxJiAww0PXfuZ6tgtiQX/QcZMsVBYCHxC5JPzQycGsEYQlQuGeQHvwPzGvMn6kFXBf8DowMTOk0z7gS9C2kIiwk/AEkOoxcH1xhqCnGM0AExiwG3mQNXkYMCb48GNwcLAGcLhwV55QAdAqcIowAFAM8DVwA5Aq0HnQAZAIVBAT0DJy8BIeUCjwOTCDHLAZUvAfMpBBvDDBUA9zduSgLDsQKAamaiBd1YAo4CSTUBTSUEBU5HUQOvceEA2wBLBhPfRwEVq0rLGuNDAd9vKwDHAPsABTUHBUEBzQHzbQC3AV8LMQmis7UBTekpAIMAFWsB1wKJAN0ANQB/8QFTAE0FWfkF0wJPSQERMRgrV2EBuwMfATMBDQB5BsuNpckHHwRtB9MCEBsV4QLvLge1AQMi3xPNQsUCvd5VoWACZIECYkJbTa9bNyACofcCaJgCZgkCn4Q4GwsCZjsCZiYEbgR/A38TA36SOQY5dxc5gjojIwJsHQIyNjgKAm3HAm2u74ozZ0UrAWcA3gDhAEoFB5gMjQD+C8IADbUCdy8CdqI/AnlLQwJ4uh1c20WuRtcCfD8CesgCfQkCfPAFWQUgSABIfWMkAoFtAoAAAoAFAn+uSVhKWxUXSswC0QEC0MxLJwOITwOH5kTFkTIC8qFdAwMDrkvOTC0lA89NTE2vAos/AorYwRsHHUNnBbcCjjcCjlxAl4ECjtkCjlx4UbRTNQpS1FSFApP7ApMMAOkAHFUeVa9V0AYsGymVhjLheGZFOzkCl58C77JYIagAWSUClo8ClnycAKlZrFoJgU0AOwKWtQKWTlxEXNECmcsCmWRcyl0HGQKcmznCOp0CnBYCn5sCnriKAB0PMSoPAp3xAp6SALU9YTRh7wKe0wKgbgGpAp6fHwKeTqVjyGQnJSsCJ68CJn4CoPsCoEwCot0CocQCpi8Cpc4Cp/8AfQKn8mh8aLEAA0lqHGrRAqzjAqyuAq1nAq0CAlcdAlXcArHh1wMfTmyXArK9DQKy6Bds4G1jbUhfAyXNArZcOz9ukAMpRQK4XgK5RxUCuSp3cDZw4QK9GQK72nCWAzIRAr6IcgIDM3ECvhpzInNPAsPLAsMEc4J0SzVFdOADPKcDPJoDPb8CxXwCxkcCxhCJAshpUQLIRALJTwLJLgJknQLd0nh5YXiueSVL0AMYo2cCAmH0GfOVJHsLXpJeuxECz2sCz2wvS1PS8xOfAMatAs9zASnqA04SfksFAtwnAtuKAtJPA1JcA1NfAQEDVYyAiT8AyxbtYEWCHILTgs6DjQLaxwLZ3oQQhEmnPAOGpQAvA2QOhnFZ+QBVAt9lAt64c3cC4i/tFAHzMCcB9JsB8tKHAuvzAulweQLq+QLq5AD5RwG5Au6JAuuclqqXAwLuPwOF4Jh5cOBxoQLzAwBpA44WmZMC9xMDkW4DkocC95gC+dkC+GaaHJqruzebHgOdgwL++gEbADmfHJ+zAwWNA6ZqA6bZANHFAwZqoYiiBQkDDEkCwAA/AwDhQRdTARHzA2sHl2cFAJMtK7evvdsBiZkUfxEEOQH7KQUhDp0JnwCS/SlXxQL3AZ0AtwW5AG8LbUEuFCaNLgFDAYD8AbUmAHUDDgRtACwCFgyhAAAKAj0CagPdA34EkQEgRQUhfAoABQBEABMANhICdwEABdUDa+8KxQIA9wqfJ7+xt+UBkSFBQgHpFH8RNMCJAAQAGwBaAkUChIsABjpTOpSNbQC4Oo860ACNOME63AClAOgAywE6gTo7Ofw5+Tt2iTpbO56JOm85GAFWATMBbAUvNV01njWtNWY1dTW2NcU1gjWRNdI14TWeNa017jX9NbI1wTYCNhE1xjXVNhY2JzXeNe02LjY9Ni41LSE2OjY9Njw2yTcIBJA8VzY4Nt03IDcPNsogN4k3MAoEsDxnNiQ3GTdsOo03IULUQwdC4EMLHA8PCZsobShRVQYA6X8A6bABFCnXAukBowC9BbcAbwNzBL8MDAMMAQgDAAkKCwsLCQoGBAVVBI/DvwDz9b29kaUCb0QtsRTNLt4eGBcSHAMZFhYZEhYEARAEBUEcQRxBHEEcQRxBHEEaQRxBHEFCSTxBPElISUhBNkM2QTYbNklISVmBVIgBFLWZAu0BhQCjBcEAbykBvwGJAaQcEZ0ePCklMAAhMvAIMAL54gC7Bm8EescjzQMpARQpKgDUABavAj626xQAJP0A3etzuf4NNRA7efy2Z9NQrCnC0OSyANz5BBIbJ5IFDR6miIavYS6tprjjmuKebxm5C74Q225X1pkaYYPb6f1DK4k3xMEBb9S2WMjEibTNWhsRJIA+vwNVEiXTE5iXs/wezV66oFLfp9NZGYW+Gk19J2+bCT6Ye2w6LDYdgzKMUabk595eLBCXANz9HUpWbATq9vqXVx9XDg+Pc9Xp4+bsS005SVM/BJBM4687WUuf+Uj9dEi8aDNaPxtpbDxcG1THTImUMZq4UCaaNYpsVqraNyKLJXDYsFZ/5jl7bLRtO88t7P3xZaAxhb5OdPMXqsSkp1WCieG8jXm1U99+blvLlXzPCS+M93VnJCiK+09LfaSaBAVBomyDgJua8dfUzR7ga34IvR2Nvj+A9heJ6lsl1KG4NkI1032Cnff1m1wof2B9oHJK4bi6JkEdSqeNeiuo6QoZZincoc73/TH9SXF8sCE7XyuYyW8WSgbGFCjPV0ihLKhdPs08Tx82fYAkLLc4I2wdl4apY7GU5lHRFzRWJep7Ww3wbeA3qmd59/86P4xuNaqDpygXt6M85glSBHOCGgJDnt+pN9bK7HApMguX6+06RZNjzVmcZJ+wcUrJ9//bpRNxNuKpNl9uFds+S9tdx7LaM5ZkIrPj6nIU9mnbFtVbs9s/uLgl8MVczAwet+iOEzzBlYW7RCMgE6gyNLeq6+1tIx4dpgZnd0DksJS5f+JNDpwwcPNXaaVspq1fbQajOrJgK0ofKtJ1Ne90L6VO4MOl5S886p7u6xo7OLjG8TGL+HU1JXGJgppg4nNbNJ5nlzSpuPYy21JUEcUA94PoFiZfjZue+QnyQ80ekOuZVkxx4g+cvhJfHgNl4hy1/a6+RKcKlar/J29y//EztlbVPHVUeQ1zX86eQVAjR/M3dA9w4W8LfaXp4EgM85wOWasli837PzVMOnsLzR+k3o75/lRPAJSE1xAKQzEi5v10ke+VBvRt1cwQRMd+U5mLCTGVd6XiZtgBG5cDi0w22GKcVNvHiu5LQbZEDVtz0onn7k5+heuKXVsZtSzilkLRAUmjMXEMB3J9YC50XBxPiz53SC+EhnPl9WsKCv92SM/OFFIMJZYfl0WW8tIO3UxYcwdMAj7FSmgrsZ2aAZO03BOhP1bNNZItyXYQFTpC3SG1VuPDqH9GkiCDmE+JwxyIVSO5siDErAOpEXFgjy6PQtOVDj+s6e1r8heWVvmZnTciuf4EiNZzCAd7SOMhXERIOlsHIMG399i9aLTy3m2hRLZjJVDNLS53iGIK11dPqQt0zBDyg6qc7YqkDm2M5Ve6dCWCaCbTXX2rToaIgz6+zh4lYUi/+6nqcFMAkQJKHYLK0wYk5N9szV6xihDbDDFr45lN1K4aCXBq/FitPSud9gLt5ZVn+ZqGX7cwm2z5EGMgfFpIFyhGGuDPmso6TItTMwny+7uPnLCf4W6goFQFV0oQSsc9VfMmVLcLr6ZetDZbaSFTLqnSO/bIPjA3/zAUoqgGFAEQS4IhuMzEp2I3jJzbzkk/IEmyax+rhZTwd6f+CGtwPixu8IvzACquPWPREu9ZvGkUzpRwvRRuaNN6cr0W1wWits9ICdYJ7ltbgMiSL3sTPeufgNcVqMVWFkCPDH4jG2jA0XcVgQj62Cb29v9f/z/+2KbYvIv/zzjpQAPkliaVDzNrW57TZ/ZOyZD0nlfMmAIBIAGAI0D3k/mdN4xr9v85ZbZbbqfH2jGd5hUqNZWwl5SPfoGmfElmazUIeNL1j/mkF7VNAzTq4jNt8JoQ11NQOcmhprXoxSxfRGJ9LDEOAQ+dmxAQH90iti9e2u/MoeuaGcDTHoC+xsmEeWmxEKefQuIzHbpw5Tc5cEocboAD09oipWQhtTO1wivf/O+DRe2rpl/E9wlrzBorjJsOeG1B/XPW4EaJEFdNlECEZga5ZoGRHXgYouGRuVkm8tDESiEyFNo+3s5M5puSdTyUL2llnINVHEt91XUNW4ewdMgJ4boJfEyt/iY5WXqbA+A2Fkt5Z0lutiWhe9nZIyIUjyXDC3UsaG1t+eNx6z4W/OYoTB7A6x+dNSTOi9AInctbESqm5gvOLww7OWXPrmHwVZasrl4eD113pm+JtT7JVOvnCXqdzzdTRHgJ0PiGTFYW5Gvt9R9LD6Lzfs0v/TZZHSmyVNq7viIHE6DBK7Qp07Iz55EM8SYtQvZf/obBniTWi5C2/ovHfw4VndkE5XYdjOhCMRjDeOEfXeN/CwfGduiUIfsoFeUxXeQXba7c7972XNv8w+dTjjUM0QeNAReW+J014dKAD/McQYXT7c0GQPIkn3Ll6R7gGjuiQoZD0TEeEqQpKoZ15g/0OPQI17QiSv9AUROa/V/TQN3dvLArec3RrsYlvBm1b8LWzltdugsC50lNKYLEp2a+ZZYqPejULRlOJh5zj/LVMyTDvwKhMxxwuDkxJ1QpoNI0OTWLom4Z71SNzI9TV1iXJrIu9Wcnd+MCaAw8o1jSXd94YU/1gnkrC9BUEOtQvEIQ7g0i6h+KL2JKk8Ydl7HruvgWMSAmNe+LshGhV4qnWHhO9/RIPQzY1tHRj2VqOyNsDpK0cww+56AdDC4gsWwY0XxoucIWIqs/GcwnWqlaT0KPr8mbK5U94/301i1WLt4YINTVvCFBrFZbIbY8eycOdeJ2teD5IfPLCRg7jjcFTwlMFNl9zdh/o3E/hHPwj7BWg0MU09pPrBLbrCgm54A6H+I6v27+jL5gkjWg/iYdks9jbfVP5y/n0dlgWEMlKasl7JvFZd56LfybW1eeaVO0gxTfXZwD8G4SI116yx7UKVRgui6Ya1YpixqXeNLc8IxtAwCU5IhwQgn+NqHnRaDv61CxKhOq4pOX7M6pkA+Pmpd4j1vn6ACUALoLLc4vpXci8VidLxzm7qFBe7s+quuJs6ETYmnpgS3LwSZxPIltgBDXz8M1k/W2ySNv2f9/NPhxLGK2D21dkHeSGmenRT3Yqcdl0m/h3OYr8V+lXNYGf8aCCpd4bWjE4QIPj7vUKN4Nrfs7ML6Y2OyS830JCnofg/k7lpFpt4SqZc5HGg1HCOrHvOdC8bP6FGDbE/VV0mX4IakzbdS/op+Kt3G24/8QbBV7y86sGSQ/vZzU8FXs7u6jIvwchsEP2BpIhW3G8uWNwa3HmjfH/ZjhhCWvluAcF+nMf14ClKg5hGgtPLJ98ueNAkc5Hs2WZlk2QHvfreCK1CCGO6nMZVSb99VM/ajr8WHTte9JSmkXq/i/U943HEbdzW6Re/S88dKgg8pGOLlAeNiqrcLkUR3/aClFpMXcOUP3rmETcWSfMXZE3TUOi8i+fqRnTYLflVx/Vb/6GJ7eIRZUA6k3RYR3iFSK9c4iDdNwJuZL2FKz/IK5VimcNWEqdXjSoxSgmF0UPlDoUlNrPcM7ftmA8Y9gKiqKEHuWN+AZRIwtVSxye2Kf8rM3lhJ5XcBXU9n4v0Oy1RU2M+4qM8AQPVwse8ErNSob5oFPWxuqZnVzo1qB/IBxkM3EVUKFUUlO3e51259GgNcJbCmlvrdjtoTW7rChm1wyCKzpCTwozUUEOIcWLneRLgMXh+SjGSFkAllzbGS5HK7LlfCMRNRDSvbQPjcXaenNYxCvu2Qyznz6StuxVj66SgI0T8B6/sfHAJYZaZ78thjOSIFumNWLQbeZixDCCC+v0YBtkxiBB3jefHqZ/dFHU+crbj6OvS1x/JDD7vlm7zOVPwpUC01nhxZuY/63E7g";const Rd=44032,ng=4352,rg=4449,ig=4519,jC=19,zC=21,yc=28,sg=zC*yc,OU=jC*sg,LU=Rd+OU,VU=ng+jC,MU=rg+zC,BU=ig+yc;function Ch(n){return n>>24&255}function GC(n){return n&16777215}let xv,KT,Sv,nm;function FU(){let n=VC(DU);xv=new Map(MC(n).flatMap((e,t)=>e.map(r=>[r,t+1<<24]))),KT=new Set(Sd(n)),Sv=new Map,nm=new Map;for(let[e,t]of BC(n)){if(!KT.has(e)&&t.length==2){let[r,i]=t,s=nm.get(r);s||(s=new Map,nm.set(r,s)),s.set(i,e)}Sv.set(e,t.reverse())}}function HC(n){return n>=Rd&&n<LU}function UU(n,e){if(n>=ng&&n<VU&&e>=rg&&e<MU)return Rd+(n-ng)*sg+(e-rg)*yc;if(HC(n)&&e>ig&&e<BU&&(n-Rd)%yc==0)return n+(e-ig);{let t=nm.get(n);return t&&(t=t.get(e),t)?t:-1}}function $C(n){xv||FU();let e=[],t=[],r=!1;function i(s){let o=xv.get(s);o&&(r=!0,s|=o),e.push(s)}for(let s of n)for(;;){if(s<128)e.push(s);else if(HC(s)){let o=s-Rd,a=o/sg|0,l=o%sg/yc|0,c=o%yc;i(ng+a),i(rg+l),c>0&&i(ig+c)}else{let o=Sv.get(s);o?t.push(...o):i(s)}if(!t.length)break;s=t.pop()}if(r&&e.length>1){let s=Ch(e[0]);for(let o=1;o<e.length;o++){let a=Ch(e[o]);if(a==0||s<=a){s=a;continue}let l=o-1;for(;;){let c=e[l+1];if(e[l+1]=e[l],e[l]=c,!l||(s=Ch(e[--l]),s<=a))break}s=Ch(e[o])}}return e}function jU(n){let e=[],t=[],r=-1,i=0;for(let s of n){let o=Ch(s),a=GC(s);if(r==-1)o==0?r=a:e.push(a);else if(i>0&&i>=o)o==0?(e.push(r,...t),t.length=0,r=a):t.push(a),i=o;else{let l=UU(r,a);l>=0?r=l:i==0&&o==0?(e.push(r),r=a):(t.push(a),i=o)}}return r>=0&&e.push(r,...t),e}function KC(n){return $C(n).map(GC)}function zU(n){return jU($C(n))}const QT=45,QC=".",qC=65039,WC=1,og=n=>Array.from(n);function Cd(n,e){return n.P.has(e)||n.Q.has(e)}class GU extends Array{get is_emoji(){return!0}}let Pv,JC,sa,Rv,YC,au,q0,xl,jo,qT,Cv;function OE(){if(Pv)return;let n=VC(EU);const e=()=>Sd(n),t=()=>new Set(e()),r=(h,d)=>d.forEach(p=>h.add(p));Pv=new Map(BC(n)),JC=t(),sa=e(),Rv=new Set(e().map(h=>sa[h])),sa=new Set(sa),YC=t(),t();let i=MC(n),s=n();const o=()=>{let h=new Set;return e().forEach(d=>r(h,i[d])),r(h,e()),h};au=Pd(h=>{let d=Pd(n).map(p=>p+96);if(d.length){let p=h>=s;d[0]-=32,d=gc(d),p&&(d=`Restricted[${d}]`);let g=o(),A=o(),v=!n();return{N:d,P:g,Q:A,M:v,R:p}}}),q0=t(),xl=new Map;let a=e().concat(og(q0)).sort((h,d)=>h-d);a.forEach((h,d)=>{let p=n(),g=a[d]=p?a[d-p]:{V:[],M:new Map};g.V.push(h),q0.has(h)||xl.set(h,g)});for(let{V:h,M:d}of new Set(xl.values())){let p=[];for(let A of h){let v=au.filter(w=>Cd(w,A)),x=p.find(({G:w})=>v.some(E=>w.has(E)));x||(x={G:new Set,V:[]},p.push(x)),x.V.push(A),r(x.G,v)}let g=p.flatMap(A=>og(A.G));for(let{G:A,V:v}of p){let x=new Set(g.filter(w=>!A.has(w)));for(let w of v)d.set(w,x)}}jo=new Set;let l=new Set;const c=h=>jo.has(h)?l.add(h):jo.add(h);for(let h of au){for(let d of h.P)c(d);for(let d of h.Q)c(d)}for(let h of jo)!xl.has(h)&&!l.has(h)&&xl.set(h,WC);r(jo,KC(jo)),qT=RU(n).map(h=>GU.from(h)).sort(NU),Cv=new Map;for(let h of qT){let d=[Cv];for(let p of h){let g=d.map(A=>{let v=A.get(p);return v||(v=new Map,A.set(p,v)),v});p===qC?d.push(...g):d=g}for(let p of d)p.V=h}}function LE(n){return(XC(n)?"":`${VE(py([n]))} `)+UC(n)}function VE(n){return`"${n}"`}function HU(n){if(n.length>=4&&n[2]==QT&&n[3]==QT)throw new Error(`invalid label extension: "${gc(n.slice(0,4))}"`)}function $U(n){for(let t=n.lastIndexOf(95);t>0;)if(n[--t]!==95)throw new Error("underscore allowed only at start")}function KU(n){let e=n[0],t=HT.get(e);if(t)throw Yh(`leading ${t}`);let r=n.length,i=-1;for(let s=1;s<r;s++){e=n[s];let o=HT.get(e);if(o){if(i==s)throw Yh(`${t} + ${o}`);i=s+1,t=o}}if(i==r)throw Yh(`trailing ${t}`)}function py(n,e=1/0,t=UC){let r=[];QU(n[0])&&r.push(""),n.length>e&&(e>>=1,n=[...n.slice(0,e),8230,...n.slice(-e)]);let i=0,s=n.length;for(let o=0;o<s;o++){let a=n[o];XC(a)&&(r.push(gc(n.slice(i,o))),r.push(t(a)),i=o+1)}return r.push(gc(n.slice(i,s))),r.join("")}function QU(n){return OE(),sa.has(n)}function XC(n){return OE(),YC.has(n)}function qU(n){return XU(WU(n,zU,t3))}function WU(n,e,t){if(!n)return[];OE();let r=0;return n.split(QC).map(i=>{let s=kU(i),o={input:s,offset:r};r+=s.length+1;try{let a=o.tokens=e3(s,e,t),l=a.length,c;if(!l)throw new Error("empty label");let h=o.output=a.flat();if($U(h),!(o.emoji=l>1||a[0].is_emoji)&&h.every(p=>p<128))HU(h),c="ASCII";else{let p=a.flatMap(g=>g.is_emoji?[]:g);if(!p.length)c="Emoji";else{if(sa.has(h[0]))throw Yh("leading combining mark");for(let v=1;v<l;v++){let x=a[v];if(!x.is_emoji&&sa.has(x[0]))throw Yh(`emoji + combining mark: "${gc(a[v-1])} + ${py([x[0]])}"`)}KU(h);let g=og(new Set(p)),[A]=YU(g);ZU(A,p),JU(A,g),c=A.N}}o.type=c}catch(a){o.error=a}return o})}function JU(n,e){let t,r=[];for(let i of e){let s=xl.get(i);if(s===WC)return;if(s){let o=s.M.get(i);if(t=t?t.filter(a=>o.has(a)):og(o),!t.length)return}else r.push(i)}if(t){for(let i of t)if(r.every(s=>Cd(i,s)))throw new Error(`whole-script confusable: ${n.N}/${i.N}`)}}function YU(n){let e=au;for(let t of n){let r=e.filter(i=>Cd(i,t));if(!r.length)throw au.some(i=>Cd(i,t))?ek(e[0],t):ZC(t);if(e=r,r.length==1)break}return e}function XU(n){return n.map(({input:e,error:t,output:r})=>{if(t){let i=t.message;throw new Error(n.length==1?i:`Invalid label ${VE(py(e,63))}: ${i}`)}return gc(r)}).join(QC)}function ZC(n){return new Error(`disallowed character: ${LE(n)}`)}function ek(n,e){let t=LE(e),r=au.find(i=>i.P.has(e));return r&&(t=`${r.N} ${t}`),new Error(`illegal mixture: ${n.N} + ${t}`)}function Yh(n){return new Error(`illegal placement: ${n}`)}function ZU(n,e){for(let t of e)if(!Cd(n,t))throw ek(n,t);if(n.M){let t=KC(e);for(let r=1,i=t.length;r<i;r++)if(Rv.has(t[r])){let s=r+1;for(let o;s<i&&Rv.has(o=t[s]);s++)for(let a=r;a<s;a++)if(t[a]==o)throw new Error(`duplicate non-spacing marks: ${LE(o)}`);if(s-r>$T)throw new Error(`excessive non-spacing marks: ${VE(py(t.slice(r-1,s)))} (${s-r}/${$T})`);r=s}}}function e3(n,e,t){let r=[],i=[];for(n=n.slice().reverse();n.length;){let s=n3(n);if(s)i.length&&(r.push(e(i)),i=[]),r.push(t(s));else{let o=n.pop();if(jo.has(o))i.push(o);else{let a=Pv.get(o);if(a)i.push(...a);else if(!JC.has(o))throw ZC(o)}}}return i.length&&r.push(e(i)),r}function t3(n){return n.filter(e=>e!=qC)}function n3(n,e){let t=Cv,r,i=n.length;for(;i&&(t=t.get(n[--i]),!!t);){let{V:s}=t;s&&(r=s,e&&e.push(...n.slice(i).reverse()),n.length=i)}return r}const tk=new Uint8Array(32);tk.fill(0);function WT(n){return O(n.length!==0,"invalid ENS name; empty component","comp",n),n}function nk(n){const e=zi(r3(n)),t=[];if(n.length===0)return t;let r=0;for(let i=0;i<e.length;i++)e[i]===46&&(t.push(WT(e.slice(r,i))),r=i+1);return O(r<e.length,"invalid ENS name; empty component","name",n),t.push(WT(e.slice(r))),t}function r3(n){try{if(n.length===0)throw new Error("empty label");return qU(n)}catch(e){O(!1,`invalid ENS name (${e.message})`,"name",n)}}function kv(n){O(typeof n=="string","invalid ENS name; not a string","name",n),O(n.length,"invalid ENS name (empty label)","name",n);let e=tk;const t=nk(n);for(;t.length;)e=dt(ot([e,dt(t.pop())]));return te(e)}function i3(n,e){const t=e??63;return O(t<=255,"DNS encoded label cannot exceed 255","length",t),te(ot(nk(n).map(r=>{O(r.length<=t,`label ${JSON.stringify(n)} exceeds ${t} bytes`,"name",n);const i=new Uint8Array(r.length+1);return i.set(r,1),i[0]=i.length-1,i})))+"00"}const rk=new Uint8Array(32);rk.fill(0);const s3=BigInt(-1),ik=BigInt(0),sk=BigInt(1),o3=BigInt("0xffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffff");function a3(n){const e=we(n),t=e.length%32;return t?ot([e,rk.slice(t)]):te(e)}const l3=po(sk,32),u3=po(ik,32),JT={name:"string",version:"string",chainId:"uint256",verifyingContract:"address",salt:"bytes32"},W0=["name","version","chainId","verifyingContract","salt"];function YT(n){return function(e){return O(typeof e=="string",`invalid domain value for ${JSON.stringify(n)}`,`domain.${n}`,e),e}}const c3={name:YT("name"),version:YT("version"),chainId:function(n){const e=se(n,"domain.chainId");return O(e>=0,"invalid chain ID","domain.chainId",n),Number.isSafeInteger(e)?Number(e):Oi(e)},verifyingContract:function(n){try{return De(n).toLowerCase()}catch{}O(!1,'invalid domain value "verifyingContract"',"domain.verifyingContract",n)},salt:function(n){const e=we(n,"domain.salt");return O(e.length===32,'invalid domain value "salt"',"domain.salt",n),te(e)}};function J0(n){{const e=n.match(/^(u?)int(\d+)$/);if(e){const t=e[1]==="",r=parseInt(e[2]);O(r%8===0&&r!==0&&r<=256&&e[2]===String(r),"invalid numeric width","type",n);const i=ra(o3,t?r-1:r),s=t?(i+sk)*s3:ik;return function(o){const a=se(o,"value");return O(a>=s&&a<=i,`value out-of-bounds for ${n}`,"value",a),po(t?GR(a,256):a,32)}}}{const e=n.match(/^bytes(\d+)$/);if(e){const t=parseInt(e[1]);return O(t!==0&&t<=32&&e[1]===String(t),"invalid bytes width","type",n),function(r){const i=we(r);return O(i.length===t,`invalid length for ${n}`,"value",r),a3(r)}}}switch(n){case"address":return function(e){return Ji(De(e),32)};case"bool":return function(e){return e?l3:u3};case"bytes":return function(e){return dt(e)};case"string":return function(e){return Ua(e)}}return null}function XT(n,e){return`${n}(${e.map(({name:t,type:r})=>r+" "+t).join(",")})`}function Cp(n){const e=n.match(/^([^\x5b]*)((\x5b\d*\x5d)*)(\x5b(\d*)\x5d)$/);return e?{base:e[1],index:e[2]+e[4],array:{base:e[1],prefix:e[1]+e[2],count:e[5]?parseInt(e[5]):-1}}:{base:n}}var rf,Ti,Bu,Og,ok;const Yn=class Yn{constructor(e){U(this,Og);B(this,"primaryType");U(this,rf,void 0);U(this,Ti,void 0);U(this,Bu,void 0);k(this,Ti,new Map),k(this,Bu,new Map);const t=new Map,r=new Map,i=new Map,s={};Object.keys(e).forEach(l=>{s[l]=e[l].map(({name:c,type:h})=>{let{base:d,index:p}=Cp(h);return d==="int"&&!e.int&&(d="int256"),d==="uint"&&!e.uint&&(d="uint256"),{name:c,type:d+(p||"")}}),t.set(l,new Set),r.set(l,[]),i.set(l,new Set)}),k(this,rf,JSON.stringify(s));for(const l in s){const c=new Set;for(const h of s[l]){O(!c.has(h.name),`duplicate variable name ${JSON.stringify(h.name)} in ${JSON.stringify(l)}`,"types",e),c.add(h.name);const d=Cp(h.type).base;O(d!==l,`circular type reference to ${JSON.stringify(d)}`,"types",e),!J0(d)&&(O(r.has(d),`unknown type ${JSON.stringify(d)}`,"types",e),r.get(d).push(l),t.get(l).add(d))}}const o=Array.from(r.keys()).filter(l=>r.get(l).length===0);O(o.length!==0,"missing primary type","types",e),O(o.length===1,`ambiguous primary types or unused types: ${o.map(l=>JSON.stringify(l)).join(", ")}`,"types",e),ce(this,{primaryType:o[0]});function a(l,c){O(!c.has(l),`circular type reference to ${JSON.stringify(l)}`,"types",e),c.add(l);for(const h of t.get(l))if(r.has(h)){a(h,c);for(const d of c)i.get(d).add(h)}c.delete(l)}a(this.primaryType,new Set);for(const[l,c]of i){const h=Array.from(c);h.sort(),y(this,Ti).set(l,XT(l,s[l])+h.map(d=>XT(d,s[d])).join(""))}}get types(){return JSON.parse(y(this,rf))}getEncoder(e){let t=y(this,Bu).get(e);return t||(t=K(this,Og,ok).call(this,e),y(this,Bu).set(e,t)),t}encodeType(e){const t=y(this,Ti).get(e);return O(t,`unknown type: ${JSON.stringify(e)}`,"name",e),t}encodeData(e,t){return this.getEncoder(e)(t)}hashStruct(e,t){return dt(this.encodeData(e,t))}encode(e){return this.encodeData(this.primaryType,e)}hash(e){return this.hashStruct(this.primaryType,e)}_visit(e,t,r){if(J0(e))return r(e,t);const i=Cp(e).array;if(i)return O(i.count===-1||i.count===t.length,`array length mismatch; expected length ${i.count}`,"value",t),t.map(o=>this._visit(i.prefix,o,r));const s=this.types[e];if(s)return s.reduce((o,{name:a,type:l})=>(o[a]=this._visit(l,t[a],r),o),{});O(!1,`unknown type: ${e}`,"type",e)}visit(e,t){return this._visit(this.primaryType,e,t)}static from(e){return new Yn(e)}static getPrimaryType(e){return Yn.from(e).primaryType}static hashStruct(e,t,r){return Yn.from(t).hashStruct(e,r)}static hashDomain(e){const t=[];for(const r in e){if(e[r]==null)continue;const i=JT[r];O(i,`invalid typed-data domain key: ${JSON.stringify(r)}`,"domain",e),t.push({name:r,type:i})}return t.sort((r,i)=>W0.indexOf(r.name)-W0.indexOf(i.name)),Yn.hashStruct("EIP712Domain",{EIP712Domain:t},e)}static encode(e,t,r){return ot(["0x1901",Yn.hashDomain(e),Yn.from(t).hash(r)])}static hash(e,t,r){return dt(Yn.encode(e,t,r))}static async resolveNames(e,t,r,i){e=Object.assign({},e);for(const a in e)e[a]==null&&delete e[a];const s={};e.verifyingContract&&!je(e.verifyingContract,20)&&(s[e.verifyingContract]="0x");const o=Yn.from(t);o.visit(r,(a,l)=>(a==="address"&&!je(l,20)&&(s[l]="0x"),l));for(const a in s)s[a]=await i(a);return e.verifyingContract&&s[e.verifyingContract]&&(e.verifyingContract=s[e.verifyingContract]),r=o.visit(r,(a,l)=>a==="address"&&s[l]?s[l]:l),{domain:e,value:r}}static getPayload(e,t,r){Yn.hashDomain(e);const i={},s=[];W0.forEach(l=>{const c=e[l];c!=null&&(i[l]=c3[l](c),s.push({name:l,type:JT[l]}))});const o=Yn.from(t);t=o.types;const a=Object.assign({},t);return O(a.EIP712Domain==null,"types must not contain EIP712Domain type","types.EIP712Domain",t),a.EIP712Domain=s,o.encode(r),{types:a,domain:i,primaryType:o.primaryType,message:o.visit(r,(l,c)=>{if(l.match(/^bytes(\d*)/))return te(we(c));if(l.match(/^u?int/))return se(c).toString();switch(l){case"address":return c.toLowerCase();case"bool":return!!c;case"string":return O(typeof c=="string","invalid string","value",c),c}O(!1,"unsupported type","type",l)})}}};rf=new WeakMap,Ti=new WeakMap,Bu=new WeakMap,Og=new WeakSet,ok=function(e){{const i=J0(e);if(i)return i}const t=Cp(e).array;if(t){const i=t.prefix,s=this.getEncoder(i);return o=>{O(t.count===-1||t.count===o.length,`array length mismatch; expected length ${t.count}`,"value",o);let a=o.map(s);return y(this,Ti).has(i)&&(a=a.map(dt)),dt(ot(a))}}const r=this.types[e];if(r){const i=Ua(y(this,Ti).get(e));return s=>{const o=r.map(({name:a,type:l})=>{const c=this.getEncoder(l)(s[a]);return y(this,Ti).has(l)?dt(c):c});return o.unshift(i),ot(o)}}O(!1,`unknown type: ${e}`,"type",e)};let ag=Yn;function fn(n){const e=new Set;return n.forEach(t=>e.add(t)),Object.freeze(e)}const h3="external public payable override",d3=fn(h3.split(" ")),ak="constant external internal payable private public pure view override",f3=fn(ak.split(" ")),lk="constructor error event fallback function receive struct",uk=fn(lk.split(" ")),ck="calldata memory storage payable indexed",p3=fn(ck.split(" ")),m3="tuple returns",g3=[lk,ck,m3,ak].join(" "),y3=fn(g3.split(" ")),w3={"(":"OPEN_PAREN",")":"CLOSE_PAREN","[":"OPEN_BRACKET","]":"CLOSE_BRACKET",",":"COMMA","@":"AT"},v3=new RegExp("^(\\s*)"),_3=new RegExp("^([0-9]+)"),E3=new RegExp("^([a-zA-Z$_][a-zA-Z0-9$_]*)"),hk=new RegExp("^([a-zA-Z$_][a-zA-Z0-9$_]*)$"),dk=new RegExp("^(address|bool|bytes([0-9]*)|string|u?int([0-9]*))$");var Rt,br,sf,Nv;const Lg=class Lg{constructor(e){U(this,sf);U(this,Rt,void 0);U(this,br,void 0);k(this,Rt,0),k(this,br,e.slice())}get offset(){return y(this,Rt)}get length(){return y(this,br).length-y(this,Rt)}clone(){return new Lg(y(this,br))}reset(){k(this,Rt,0)}popKeyword(e){const t=this.peek();if(t.type!=="KEYWORD"||!e.has(t.text))throw new Error(`expected keyword ${t.text}`);return this.pop().text}popType(e){if(this.peek().type!==e){const t=this.peek();throw new Error(`expected ${e}; got ${t.type} ${JSON.stringify(t.text)}`)}return this.pop().text}popParen(){const e=this.peek();if(e.type!=="OPEN_PAREN")throw new Error("bad start");const t=K(this,sf,Nv).call(this,y(this,Rt)+1,e.match+1);return k(this,Rt,e.match+1),t}popParams(){const e=this.peek();if(e.type!=="OPEN_PAREN")throw new Error("bad start");const t=[];for(;y(this,Rt)<e.match-1;){const r=this.peek().linkNext;t.push(K(this,sf,Nv).call(this,y(this,Rt)+1,r)),k(this,Rt,r)}return k(this,Rt,e.match+1),t}peek(){if(y(this,Rt)>=y(this,br).length)throw new Error("out-of-bounds");return y(this,br)[y(this,Rt)]}peekKeyword(e){const t=this.peekType("KEYWORD");return t!=null&&e.has(t)?t:null}peekType(e){if(this.length===0)return null;const t=this.peek();return t.type===e?t.text:null}pop(){const e=this.peek();return oh(this,Rt)._++,e}toString(){const e=[];for(let t=y(this,Rt);t<y(this,br).length;t++){const r=y(this,br)[t];e.push(`${r.type}:${r.text}`)}return`<TokenString ${e.join(" ")}>`}};Rt=new WeakMap,br=new WeakMap,sf=new WeakSet,Nv=function(e=0,t=0){return new Lg(y(this,br).slice(e,t).map(r=>Object.freeze(Object.assign({},r,{match:r.match-e,linkBack:r.linkBack-e,linkNext:r.linkNext-e}))))};let Dr=Lg;function To(n){const e=[],t=o=>{const a=s<n.length?JSON.stringify(n[s]):"$EOI";throw new Error(`invalid token ${a} at ${s}: ${o}`)};let r=[],i=[],s=0;for(;s<n.length;){let o=n.substring(s),a=o.match(v3);a&&(s+=a[1].length,o=n.substring(s));const l={depth:r.length,linkBack:-1,linkNext:-1,match:-1,type:"",text:"",offset:s,value:-1};e.push(l);let c=w3[o[0]]||"";if(c){if(l.type=c,l.text=o[0],s++,c==="OPEN_PAREN")r.push(e.length-1),i.push(e.length-1);else if(c=="CLOSE_PAREN")r.length===0&&t("no matching open bracket"),l.match=r.pop(),e[l.match].match=e.length-1,l.depth--,l.linkBack=i.pop(),e[l.linkBack].linkNext=e.length-1;else if(c==="COMMA")l.linkBack=i.pop(),e[l.linkBack].linkNext=e.length-1,i.push(e.length-1);else if(c==="OPEN_BRACKET")l.type="BRACKET";else if(c==="CLOSE_BRACKET"){let h=e.pop().text;if(e.length>0&&e[e.length-1].type==="NUMBER"){const d=e.pop().text;h=d+h,e[e.length-1].value=ge(d)}if(e.length===0||e[e.length-1].type!=="BRACKET")throw new Error("missing opening bracket");e[e.length-1].text+=h}continue}if(a=o.match(E3),a){if(l.text=a[1],s+=l.text.length,y3.has(l.text)){l.type="KEYWORD";continue}if(l.text.match(dk)){l.type="TYPE";continue}l.type="ID";continue}if(a=o.match(_3),a){l.text=a[1],l.type="NUMBER",s+=l.text.length;continue}throw new Error(`unexpected token ${JSON.stringify(o[0])} at position ${s}`)}return new Dr(e.map(o=>Object.freeze(o)))}function ZT(n,e){let t=[];for(const r in e.keys())n.has(r)&&t.push(r);if(t.length>1)throw new Error(`conflicting types: ${t.join(", ")}`)}function my(n,e){if(e.peekKeyword(uk)){const t=e.pop().text;if(t!==n)throw new Error(`expected ${n}, got ${t}`)}return e.popType("ID")}function Yi(n,e){const t=new Set;for(;;){const r=n.peekType("KEYWORD");if(r==null||e&&!e.has(r))break;if(n.pop(),t.has(r))throw new Error(`duplicate keywords: ${JSON.stringify(r)}`);t.add(r)}return Object.freeze(t)}function fk(n){let e=Yi(n,f3);return ZT(e,fn("constant payable nonpayable".split(" "))),ZT(e,fn("pure view payable nonpayable".split(" "))),e.has("view")?"view":e.has("pure")?"pure":e.has("payable")?"payable":e.has("nonpayable")?"nonpayable":e.has("constant")?"view":"nonpayable"}function Gi(n,e){return n.popParams().map(t=>Mt.from(t,e))}function pk(n){if(n.peekType("AT")){if(n.pop(),n.peekType("NUMBER"))return se(n.pop().text);throw new Error("invalid gas")}return null}function ja(n){if(n.length)throw new Error(`unexpected tokens at offset ${n.offset}: ${n.toString()}`)}const A3=new RegExp(/^(.*)\[([0-9]*)\]$/);function eb(n){const e=n.match(dk);if(O(e,"invalid type","type",n),n==="uint")return"uint256";if(n==="int")return"int256";if(e[2]){const t=parseInt(e[2]);O(t!==0&&t<=32,"invalid bytes length","type",n)}else if(e[3]){const t=parseInt(e[3]);O(t!==0&&t<=256&&t%8===0,"invalid numeric width","type",n)}return n}const Ye={},On=Symbol.for("_ethers_internal"),tb="_ParamTypeInternal",nb="_ErrorInternal",rb="_EventInternal",ib="_ConstructorInternal",sb="_FallbackInternal",ob="_FunctionInternal",ab="_StructInternal";var Fu,rm;const Xn=class Xn{constructor(e,t,r,i,s,o,a,l){U(this,Fu);B(this,"name");B(this,"type");B(this,"baseType");B(this,"indexed");B(this,"components");B(this,"arrayLength");B(this,"arrayChildren");if(bf(e,Ye,"ParamType"),Object.defineProperty(this,On,{value:tb}),o&&(o=Object.freeze(o.slice())),i==="array"){if(a==null||l==null)throw new Error("")}else if(a!=null||l!=null)throw new Error("");if(i==="tuple"){if(o==null)throw new Error("")}else if(o!=null)throw new Error("");ce(this,{name:t,type:r,baseType:i,indexed:s,components:o,arrayLength:a,arrayChildren:l})}format(e){if(e==null&&(e="sighash"),e==="json"){const r=this.name||"";if(this.isArray()){const s=JSON.parse(this.arrayChildren.format("json"));return s.name=r,s.type+=`[${this.arrayLength<0?"":String(this.arrayLength)}]`,JSON.stringify(s)}const i={type:this.baseType==="tuple"?"tuple":this.type,name:r};return typeof this.indexed=="boolean"&&(i.indexed=this.indexed),this.isTuple()&&(i.components=this.components.map(s=>JSON.parse(s.format(e)))),JSON.stringify(i)}let t="";return this.isArray()?(t+=this.arrayChildren.format(e),t+=`[${this.arrayLength<0?"":String(this.arrayLength)}]`):this.isTuple()?t+="("+this.components.map(r=>r.format(e)).join(e==="full"?", ":",")+")":t+=this.type,e!=="sighash"&&(this.indexed===!0&&(t+=" indexed"),e==="full"&&this.name&&(t+=" "+this.name)),t}isArray(){return this.baseType==="array"}isTuple(){return this.baseType==="tuple"}isIndexable(){return this.indexed!=null}walk(e,t){if(this.isArray()){if(!Array.isArray(e))throw new Error("invalid array value");if(this.arrayLength!==-1&&e.length!==this.arrayLength)throw new Error("array is wrong length");const r=this;return e.map(i=>r.arrayChildren.walk(i,t))}if(this.isTuple()){if(!Array.isArray(e))throw new Error("invalid tuple value");if(e.length!==this.components.length)throw new Error("array is wrong length");const r=this;return e.map((i,s)=>r.components[s].walk(i,t))}return t(this.type,e)}async walkAsync(e,t){const r=[],i=[e];return K(this,Fu,rm).call(this,r,e,t,s=>{i[0]=s}),r.length&&await Promise.all(r),i[0]}static from(e,t){if(Xn.isParamType(e))return e;if(typeof e=="string")try{return Xn.from(To(e),t)}catch{O(!1,"invalid param type","obj",e)}else if(e instanceof Dr){let a="",l="",c=null;Yi(e,fn(["tuple"])).has("tuple")||e.peekType("OPEN_PAREN")?(l="tuple",c=e.popParams().map(v=>Xn.from(v)),a=`tuple(${c.map(v=>v.format()).join(",")})`):(a=eb(e.popType("TYPE")),l=a);let h=null,d=null;for(;e.length&&e.peekType("BRACKET");){const v=e.pop();h=new Xn(Ye,"",a,l,null,c,d,h),d=v.value,a+=v.text,l="array",c=null}let p=null;if(Yi(e,p3).has("indexed")){if(!t)throw new Error("");p=!0}const A=e.peekType("ID")?e.pop().text:"";if(e.length)throw new Error("leftover tokens");return new Xn(Ye,A,a,l,p,c,d,h)}const r=e.name;O(!r||typeof r=="string"&&r.match(hk),"invalid name","obj.name",r);let i=e.indexed;i!=null&&(O(t,"parameter cannot be indexed","obj.indexed",e.indexed),i=!!i);let s=e.type,o=s.match(A3);if(o){const a=parseInt(o[2]||"-1"),l=Xn.from({type:o[1],components:e.components});return new Xn(Ye,r||"",s,"array",i,null,a,l)}if(s==="tuple"||s.startsWith("tuple(")||s.startsWith("(")){const a=e.components!=null?e.components.map(c=>Xn.from(c)):null;return new Xn(Ye,r||"",s,"tuple",i,a,null,null)}return s=eb(e.type),new Xn(Ye,r||"",s,s,i,null,null,null)}static isParamType(e){return e&&e[On]===tb}};Fu=new WeakSet,rm=function(e,t,r,i){if(this.isArray()){if(!Array.isArray(t))throw new Error("invalid array value");if(this.arrayLength!==-1&&t.length!==this.arrayLength)throw new Error("array is wrong length");const o=this.arrayChildren,a=t.slice();a.forEach((l,c)=>{var h;K(h=o,Fu,rm).call(h,e,l,r,d=>{a[c]=d})}),i(a);return}if(this.isTuple()){const o=this.components;let a;if(Array.isArray(t))a=t.slice();else{if(t==null||typeof t!="object")throw new Error("invalid tuple value");a=o.map(l=>{if(!l.name)throw new Error("cannot use object value with unnamed components");if(!(l.name in t))throw new Error(`missing value for component ${l.name}`);return t[l.name]})}if(a.length!==this.components.length)throw new Error("array is wrong length");a.forEach((l,c)=>{var h;K(h=o[c],Fu,rm).call(h,e,l,r,d=>{a[c]=d})}),i(a);return}const s=r(this.type,t);s.then?e.push(async function(){i(await s)}()):i(s)};let Mt=Xn;class za{constructor(e,t,r){B(this,"type");B(this,"inputs");bf(e,Ye,"Fragment"),r=Object.freeze(r.slice()),ce(this,{type:t,inputs:r})}static from(e){if(typeof e=="string"){try{za.from(JSON.parse(e))}catch{}return za.from(To(e))}if(e instanceof Dr)switch(e.peekKeyword(uk)){case"constructor":return Li.from(e);case"error":return xn.from(e);case"event":return Yr.from(e);case"fallback":case"receive":return wi.from(e);case"function":return Xr.from(e);case"struct":return Na.from(e)}else if(typeof e=="object"){switch(e.type){case"constructor":return Li.from(e);case"error":return xn.from(e);case"event":return Yr.from(e);case"fallback":case"receive":return wi.from(e);case"function":return Xr.from(e);case"struct":return Na.from(e)}$(!1,`unsupported type: ${e.type}`,"UNSUPPORTED_OPERATION",{operation:"Fragment.from"})}O(!1,"unsupported frgament object","obj",e)}static isConstructor(e){return Li.isFragment(e)}static isError(e){return xn.isFragment(e)}static isEvent(e){return Yr.isFragment(e)}static isFunction(e){return Xr.isFragment(e)}static isStruct(e){return Na.isFragment(e)}}class gy extends za{constructor(t,r,i,s){super(t,r,s);B(this,"name");O(typeof i=="string"&&i.match(hk),"invalid identifier","name",i),s=Object.freeze(s.slice()),ce(this,{name:i})}}function kd(n,e){return"("+e.map(t=>t.format(n)).join(n==="full"?", ":",")+")"}class xn extends gy{constructor(e,t,r){super(e,"error",t,r),Object.defineProperty(this,On,{value:nb})}get selector(){return Ua(this.format("sighash")).substring(0,10)}format(e){if(e==null&&(e="sighash"),e==="json")return JSON.stringify({type:"error",name:this.name,inputs:this.inputs.map(r=>JSON.parse(r.format(e)))});const t=[];return e!=="sighash"&&t.push("error"),t.push(this.name+kd(e,this.inputs)),t.join(" ")}static from(e){if(xn.isFragment(e))return e;if(typeof e=="string")return xn.from(To(e));if(e instanceof Dr){const t=my("error",e),r=Gi(e);return ja(e),new xn(Ye,t,r)}return new xn(Ye,e.name,e.inputs?e.inputs.map(Mt.from):[])}static isFragment(e){return e&&e[On]===nb}}class Yr extends gy{constructor(t,r,i,s){super(t,"event",r,i);B(this,"anonymous");Object.defineProperty(this,On,{value:rb}),ce(this,{anonymous:s})}get topicHash(){return Ua(this.format("sighash"))}format(t){if(t==null&&(t="sighash"),t==="json")return JSON.stringify({type:"event",anonymous:this.anonymous,name:this.name,inputs:this.inputs.map(i=>JSON.parse(i.format(t)))});const r=[];return t!=="sighash"&&r.push("event"),r.push(this.name+kd(t,this.inputs)),t!=="sighash"&&this.anonymous&&r.push("anonymous"),r.join(" ")}static getTopicHash(t,r){return r=(r||[]).map(s=>Mt.from(s)),new Yr(Ye,t,r,!1).topicHash}static from(t){if(Yr.isFragment(t))return t;if(typeof t=="string")try{return Yr.from(To(t))}catch{O(!1,"invalid event fragment","obj",t)}else if(t instanceof Dr){const r=my("event",t),i=Gi(t,!0),s=!!Yi(t,fn(["anonymous"])).has("anonymous");return ja(t),new Yr(Ye,r,i,s)}return new Yr(Ye,t.name,t.inputs?t.inputs.map(r=>Mt.from(r,!0)):[],!!t.anonymous)}static isFragment(t){return t&&t[On]===rb}}class Li extends za{constructor(t,r,i,s,o){super(t,r,i);B(this,"payable");B(this,"gas");Object.defineProperty(this,On,{value:ib}),ce(this,{payable:s,gas:o})}format(t){if($(t!=null&&t!=="sighash","cannot format a constructor for sighash","UNSUPPORTED_OPERATION",{operation:"format(sighash)"}),t==="json")return JSON.stringify({type:"constructor",stateMutability:this.payable?"payable":"undefined",payable:this.payable,gas:this.gas!=null?this.gas:void 0,inputs:this.inputs.map(i=>JSON.parse(i.format(t)))});const r=[`constructor${kd(t,this.inputs)}`];return this.payable&&r.push("payable"),this.gas!=null&&r.push(`@${this.gas.toString()}`),r.join(" ")}static from(t){if(Li.isFragment(t))return t;if(typeof t=="string")try{return Li.from(To(t))}catch{O(!1,"invalid constuctor fragment","obj",t)}else if(t instanceof Dr){Yi(t,fn(["constructor"]));const r=Gi(t),i=!!Yi(t,d3).has("payable"),s=pk(t);return ja(t),new Li(Ye,"constructor",r,i,s)}return new Li(Ye,"constructor",t.inputs?t.inputs.map(Mt.from):[],!!t.payable,t.gas!=null?t.gas:null)}static isFragment(t){return t&&t[On]===ib}}class wi extends za{constructor(t,r,i){super(t,"fallback",r);B(this,"payable");Object.defineProperty(this,On,{value:sb}),ce(this,{payable:i})}format(t){const r=this.inputs.length===0?"receive":"fallback";if(t==="json"){const i=this.payable?"payable":"nonpayable";return JSON.stringify({type:r,stateMutability:i})}return`${r}()${this.payable?" payable":""}`}static from(t){if(wi.isFragment(t))return t;if(typeof t=="string")try{return wi.from(To(t))}catch{O(!1,"invalid fallback fragment","obj",t)}else if(t instanceof Dr){const r=t.toString(),i=t.peekKeyword(fn(["fallback","receive"]));if(O(i,"type must be fallback or receive","obj",r),t.popKeyword(fn(["fallback","receive"]))==="receive"){const l=Gi(t);return O(l.length===0,"receive cannot have arguments","obj.inputs",l),Yi(t,fn(["payable"])),ja(t),new wi(Ye,[],!0)}let o=Gi(t);o.length?O(o.length===1&&o[0].type==="bytes","invalid fallback inputs","obj.inputs",o.map(l=>l.format("minimal")).join(", ")):o=[Mt.from("bytes")];const a=fk(t);if(O(a==="nonpayable"||a==="payable","fallback cannot be constants","obj.stateMutability",a),Yi(t,fn(["returns"])).has("returns")){const l=Gi(t);O(l.length===1&&l[0].type==="bytes","invalid fallback outputs","obj.outputs",l.map(c=>c.format("minimal")).join(", "))}return ja(t),new wi(Ye,o,a==="payable")}if(t.type==="receive")return new wi(Ye,[],!0);if(t.type==="fallback"){const r=[Mt.from("bytes")],i=t.stateMutability==="payable";return new wi(Ye,r,i)}O(!1,"invalid fallback description","obj",t)}static isFragment(t){return t&&t[On]===sb}}class Xr extends gy{constructor(t,r,i,s,o,a){super(t,"function",r,s);B(this,"constant");B(this,"outputs");B(this,"stateMutability");B(this,"payable");B(this,"gas");Object.defineProperty(this,On,{value:ob}),o=Object.freeze(o.slice()),ce(this,{constant:i==="view"||i==="pure",gas:a,outputs:o,payable:i==="payable",stateMutability:i})}get selector(){return Ua(this.format("sighash")).substring(0,10)}format(t){if(t==null&&(t="sighash"),t==="json")return JSON.stringify({type:"function",name:this.name,constant:this.constant,stateMutability:this.stateMutability!=="nonpayable"?this.stateMutability:void 0,payable:this.payable,gas:this.gas!=null?this.gas:void 0,inputs:this.inputs.map(i=>JSON.parse(i.format(t))),outputs:this.outputs.map(i=>JSON.parse(i.format(t)))});const r=[];return t!=="sighash"&&r.push("function"),r.push(this.name+kd(t,this.inputs)),t!=="sighash"&&(this.stateMutability!=="nonpayable"&&r.push(this.stateMutability),this.outputs&&this.outputs.length&&(r.push("returns"),r.push(kd(t,this.outputs))),this.gas!=null&&r.push(`@${this.gas.toString()}`)),r.join(" ")}static getSelector(t,r){return r=(r||[]).map(s=>Mt.from(s)),new Xr(Ye,t,"view",r,[],null).selector}static from(t){if(Xr.isFragment(t))return t;if(typeof t=="string")try{return Xr.from(To(t))}catch{O(!1,"invalid function fragment","obj",t)}else if(t instanceof Dr){const i=my("function",t),s=Gi(t),o=fk(t);let a=[];Yi(t,fn(["returns"])).has("returns")&&(a=Gi(t));const l=pk(t);return ja(t),new Xr(Ye,i,o,s,a,l)}let r=t.stateMutability;return r==null&&(r="payable",typeof t.constant=="boolean"?(r="view",t.constant||(r="payable",typeof t.payable=="boolean"&&!t.payable&&(r="nonpayable"))):typeof t.payable=="boolean"&&!t.payable&&(r="nonpayable")),new Xr(Ye,t.name,r,t.inputs?t.inputs.map(Mt.from):[],t.outputs?t.outputs.map(Mt.from):[],t.gas!=null?t.gas:null)}static isFragment(t){return t&&t[On]===ob}}class Na extends gy{constructor(e,t,r){super(e,"struct",t,r),Object.defineProperty(this,On,{value:ab})}format(){throw new Error("@TODO")}static from(e){if(typeof e=="string")try{return Na.from(To(e))}catch{O(!1,"invalid struct fragment","obj",e)}else if(e instanceof Dr){const t=my("struct",e),r=Gi(e);return ja(e),new Na(Ye,t,r)}return new Na(Ye,e.name,e.inputs?e.inputs.map(Mt.from):[])}static isFragment(e){return e&&e[On]===ab}}const Lr=new Map;Lr.set(0,"GENERIC_PANIC");Lr.set(1,"ASSERT_FALSE");Lr.set(17,"OVERFLOW");Lr.set(18,"DIVIDE_BY_ZERO");Lr.set(33,"ENUM_RANGE_ERROR");Lr.set(34,"BAD_STORAGE_DATA");Lr.set(49,"STACK_UNDERFLOW");Lr.set(50,"ARRAY_RANGE_ERROR");Lr.set(65,"OUT_OF_MEMORY");Lr.set(81,"UNINITIALIZED_FUNCTION_CALL");const I3=new RegExp(/^bytes([0-9]*)$/),T3=new RegExp(/^(u?int)([0-9]*)$/);let Y0=null,lb=1024;function b3(n,e,t,r){let i="missing revert data",s=null;const o=null;let a=null;if(t){i="execution reverted";const c=we(t);if(t=te(t),c.length===0)i+=" (no data present; likely require(false) occurred",s="require(false)";else if(c.length%32!==4)i+=" (could not decode reason; invalid data length)";else if(te(c.slice(0,4))==="0x08c379a0")try{s=r.decode(["string"],c.slice(4))[0],a={signature:"Error(string)",name:"Error",args:[s]},i+=`: ${JSON.stringify(s)}`}catch{i+=" (could not decode reason; invalid string data)"}else if(te(c.slice(0,4))==="0x4e487b71")try{const h=Number(r.decode(["uint256"],c.slice(4))[0]);a={signature:"Panic(uint256)",name:"Panic",args:[h]},s=`Panic due to ${Lr.get(h)||"UNKNOWN"}(${h})`,i+=`: ${s}`}catch{i+=" (could not decode panic code)"}else i+=" (unknown custom error)"}const l={to:e.to?De(e.to):null,data:e.data||"0x"};return e.from&&(l.from=De(e.from)),$e(i,"CALL_EXCEPTION",{action:n,data:t,reason:s,transaction:l,invocation:o,revert:a})}var Ds,Sl;const Vg=class Vg{constructor(){U(this,Ds)}getDefaultValue(e){const t=e.map(i=>K(this,Ds,Sl).call(this,Mt.from(i)));return new Rp(t,"_").defaultValue()}encode(e,t){UR(t.length,e.length,"types/values length mismatch");const r=e.map(o=>K(this,Ds,Sl).call(this,Mt.from(o))),i=new Rp(r,"_"),s=new wv;return i.encode(s,t),s.data}decode(e,t,r){const i=e.map(o=>K(this,Ds,Sl).call(this,Mt.from(o)));return new Rp(i,"_").decode(new vv(t,r,lb))}static _setDefaultMaxInflation(e){O(typeof e=="number"&&Number.isInteger(e),"invalid defaultMaxInflation factor","value",e),lb=e}static defaultAbiCoder(){return Y0==null&&(Y0=new Vg),Y0}static getBuiltinCallException(e,t,r){return b3(e,t,r,Vg.defaultAbiCoder())}};Ds=new WeakSet,Sl=function(e){if(e.isArray())return new GF(K(this,Ds,Sl).call(this,e.arrayChildren),e.arrayLength,e.name);if(e.isTuple())return new Rp(e.components.map(r=>K(this,Ds,Sl).call(this,r)),e.name);switch(e.baseType){case"address":return new jF(e.name);case"bool":return new HF(e.name);case"string":return new ZF(e.name);case"bytes":return new $F(e.name);case"":return new qF(e.name)}let t=e.type.match(T3);if(t){let r=parseInt(t[2]||"256");return O(r!==0&&r<=256&&r%8===0,"invalid "+t[1]+" bit length","param",e),new XF(r/8,t[1]==="int",e.name)}if(t=e.type.match(I3),t){let r=parseInt(t[1]);return O(r!==0&&r<=32,"invalid bytes length","param",e),new KF(r,e.name)}O(!1,"invalid type","type",e.type)};let Nd=Vg;class x3{constructor(e,t,r){B(this,"fragment");B(this,"name");B(this,"signature");B(this,"topic");B(this,"args");const i=e.name,s=e.format();ce(this,{fragment:e,name:i,signature:s,topic:t,args:r})}}class S3{constructor(e,t,r,i){B(this,"fragment");B(this,"name");B(this,"args");B(this,"signature");B(this,"selector");B(this,"value");const s=e.name,o=e.format();ce(this,{fragment:e,name:s,args:r,signature:o,selector:t,value:i})}}class P3{constructor(e,t,r){B(this,"fragment");B(this,"name");B(this,"args");B(this,"signature");B(this,"selector");const i=e.name,s=e.format();ce(this,{fragment:e,name:i,args:r,signature:s,selector:t})}}class ub{constructor(e){B(this,"hash");B(this,"_isIndexed");ce(this,{hash:e,_isIndexed:!0})}static isIndexed(e){return!!(e&&e._isIndexed)}}const cb={0:"generic panic",1:"assert(false)",17:"arithmetic overflow",18:"division or modulo by zero",33:"enum overflow",34:"invalid encoded storage byte array accessed",49:"out-of-bounds array access; popping on an empty array",50:"out-of-bounds access of an array or bytesN",65:"out of memory",81:"uninitialized function"},hb={"0x08c379a0":{signature:"Error(string)",name:"Error",inputs:["string"],reason:n=>`reverted with reason string ${JSON.stringify(n)}`},"0x4e487b71":{signature:"Panic(uint256)",name:"Panic",inputs:["uint256"],reason:n=>{let e="unknown panic code";return n>=0&&n<=255&&cb[n.toString()]&&(e=cb[n.toString()]),`reverted with panic code 0x${n.toString(16)} (${e})`}}};var Hr,$r,Kr,Kt,Uu,im,ju,sm;const Yo=class Yo{constructor(e){U(this,Uu);U(this,ju);B(this,"fragments");B(this,"deploy");B(this,"fallback");B(this,"receive");U(this,Hr,void 0);U(this,$r,void 0);U(this,Kr,void 0);U(this,Kt,void 0);let t=[];typeof e=="string"?t=JSON.parse(e):t=e,k(this,Kr,new Map),k(this,Hr,new Map),k(this,$r,new Map);const r=[];for(const o of t)try{r.push(za.from(o))}catch(a){console.log(`[Warning] Invalid Fragment ${JSON.stringify(o)}:`,a.message)}ce(this,{fragments:Object.freeze(r)});let i=null,s=!1;k(this,Kt,this.getAbiCoder()),this.fragments.forEach((o,a)=>{let l;switch(o.type){case"constructor":if(this.deploy){console.log("duplicate definition - constructor");return}ce(this,{deploy:o});return;case"fallback":o.inputs.length===0?s=!0:(O(!i||o.payable!==i.payable,"conflicting fallback fragments",`fragments[${a}]`,o),i=o,s=i.payable);return;case"function":l=y(this,Kr);break;case"event":l=y(this,$r);break;case"error":l=y(this,Hr);break;default:return}const c=o.format();l.has(c)||l.set(c,o)}),this.deploy||ce(this,{deploy:Li.from("constructor()")}),ce(this,{fallback:i,receive:s})}format(e){const t=e?"minimal":"full";return this.fragments.map(i=>i.format(t))}formatJson(){const e=this.fragments.map(t=>t.format("json"));return JSON.stringify(e.map(t=>JSON.parse(t)))}getAbiCoder(){return Nd.defaultAbiCoder()}getFunctionName(e){const t=K(this,Uu,im).call(this,e,null,!1);return O(t,"no matching function","key",e),t.name}hasFunction(e){return!!K(this,Uu,im).call(this,e,null,!1)}getFunction(e,t){return K(this,Uu,im).call(this,e,t||null,!0)}forEachFunction(e){const t=Array.from(y(this,Kr).keys());t.sort((r,i)=>r.localeCompare(i));for(let r=0;r<t.length;r++){const i=t[r];e(y(this,Kr).get(i),r)}}getEventName(e){const t=K(this,ju,sm).call(this,e,null,!1);return O(t,"no matching event","key",e),t.name}hasEvent(e){return!!K(this,ju,sm).call(this,e,null,!1)}getEvent(e,t){return K(this,ju,sm).call(this,e,t||null,!0)}forEachEvent(e){const t=Array.from(y(this,$r).keys());t.sort((r,i)=>r.localeCompare(i));for(let r=0;r<t.length;r++){const i=t[r];e(y(this,$r).get(i),r)}}getError(e,t){if(je(e)){const i=e.toLowerCase();if(hb[i])return xn.from(hb[i].signature);for(const s of y(this,Hr).values())if(i===s.selector)return s;return null}if(e.indexOf("(")===-1){const i=[];for(const[s,o]of y(this,Hr))s.split("(")[0]===e&&i.push(o);if(i.length===0)return e==="Error"?xn.from("error Error(string)"):e==="Panic"?xn.from("error Panic(uint256)"):null;if(i.length>1){const s=i.map(o=>JSON.stringify(o.format())).join(", ");O(!1,`ambiguous error description (i.e. ${s})`,"name",e)}return i[0]}if(e=xn.from(e).format(),e==="Error(string)")return xn.from("error Error(string)");if(e==="Panic(uint256)")return xn.from("error Panic(uint256)");const r=y(this,Hr).get(e);return r||null}forEachError(e){const t=Array.from(y(this,Hr).keys());t.sort((r,i)=>r.localeCompare(i));for(let r=0;r<t.length;r++){const i=t[r];e(y(this,Hr).get(i),r)}}_decodeParams(e,t){return y(this,Kt).decode(e,t)}_encodeParams(e,t){return y(this,Kt).encode(e,t)}encodeDeploy(e){return this._encodeParams(this.deploy.inputs,e||[])}decodeErrorResult(e,t){if(typeof e=="string"){const r=this.getError(e);O(r,"unknown error","fragment",e),e=r}return O(rt(t,0,4)===e.selector,`data signature does not match error ${e.name}.`,"data",t),this._decodeParams(e.inputs,rt(t,4))}encodeErrorResult(e,t){if(typeof e=="string"){const r=this.getError(e);O(r,"unknown error","fragment",e),e=r}return ot([e.selector,this._encodeParams(e.inputs,t||[])])}decodeFunctionData(e,t){if(typeof e=="string"){const r=this.getFunction(e);O(r,"unknown function","fragment",e),e=r}return O(rt(t,0,4)===e.selector,`data signature does not match function ${e.name}.`,"data",t),this._decodeParams(e.inputs,rt(t,4))}encodeFunctionData(e,t){if(typeof e=="string"){const r=this.getFunction(e);O(r,"unknown function","fragment",e),e=r}return ot([e.selector,this._encodeParams(e.inputs,t||[])])}decodeFunctionResult(e,t){if(typeof e=="string"){const s=this.getFunction(e);O(s,"unknown function","fragment",e),e=s}let r="invalid length for result data";const i=un(t);if(i.length%32===0)try{return y(this,Kt).decode(e.outputs,i)}catch{r="could not decode result data"}$(!1,r,"BAD_DATA",{value:te(i),info:{method:e.name,signature:e.format()}})}makeError(e,t){const r=we(e,"data"),i=Nd.getBuiltinCallException("call",t,r),s="execution reverted (unknown custom error)";if(i.message.startsWith(s)){const a=te(r.slice(0,4)),l=this.getError(a);if(l)try{const c=y(this,Kt).decode(l.inputs,r.slice(4));i.revert={name:l.name,signature:l.format(),args:c},i.reason=i.revert.signature,i.message=`execution reverted: ${i.reason}`}catch{i.message="execution reverted (coult not decode custom error)"}}const o=this.parseTransaction(t);return o&&(i.invocation={method:o.name,signature:o.signature,args:o.args}),i}encodeFunctionResult(e,t){if(typeof e=="string"){const r=this.getFunction(e);O(r,"unknown function","fragment",e),e=r}return te(y(this,Kt).encode(e.outputs,t||[]))}encodeFilterTopics(e,t){if(typeof e=="string"){const s=this.getEvent(e);O(s,"unknown event","eventFragment",e),e=s}$(t.length<=e.inputs.length,`too many arguments for ${e.format()}`,"UNEXPECTED_ARGUMENT",{count:t.length,expectedCount:e.inputs.length});const r=[];e.anonymous||r.push(e.topicHash);const i=(s,o)=>s.type==="string"?Ua(o):s.type==="bytes"?dt(te(o)):(s.type==="bool"&&typeof o=="boolean"?o=o?"0x01":"0x00":s.type.match(/^u?int/)?o=po(o):s.type.match(/^bytes/)?o=zB(o,32):s.type==="address"&&y(this,Kt).encode(["address"],[o]),Ji(te(o),32));for(t.forEach((s,o)=>{const a=e.inputs[o];if(!a.indexed){O(s==null,"cannot filter non-indexed parameters; must be null","contract."+a.name,s);return}s==null?r.push(null):a.baseType==="array"||a.baseType==="tuple"?O(!1,"filtering with tuples or arrays not supported","contract."+a.name,s):Array.isArray(s)?r.push(s.map(l=>i(a,l))):r.push(i(a,s))});r.length&&r[r.length-1]===null;)r.pop();return r}encodeEventLog(e,t){if(typeof e=="string"){const o=this.getEvent(e);O(o,"unknown event","eventFragment",e),e=o}const r=[],i=[],s=[];return e.anonymous||r.push(e.topicHash),O(t.length===e.inputs.length,"event arguments/values mismatch","values",t),e.inputs.forEach((o,a)=>{const l=t[a];if(o.indexed)if(o.type==="string")r.push(Ua(l));else if(o.type==="bytes")r.push(dt(l));else{if(o.baseType==="tuple"||o.baseType==="array")throw new Error("not implemented");r.push(y(this,Kt).encode([o.type],[l]))}else i.push(o),s.push(l)}),{data:y(this,Kt).encode(i,s),topics:r}}decodeEventLog(e,t,r){if(typeof e=="string"){const g=this.getEvent(e);O(g,"unknown event","eventFragment",e),e=g}if(r!=null&&!e.anonymous){const g=e.topicHash;O(je(r[0],32)&&r[0].toLowerCase()===g,"fragment/topic mismatch","topics[0]",r[0]),r=r.slice(1)}const i=[],s=[],o=[];e.inputs.forEach((g,A)=>{g.indexed?g.type==="string"||g.type==="bytes"||g.baseType==="tuple"||g.baseType==="array"?(i.push(Mt.from({type:"bytes32",name:g.name})),o.push(!0)):(i.push(g),o.push(!1)):(s.push(g),o.push(!1))});const a=r!=null?y(this,Kt).decode(i,ot(r)):null,l=y(this,Kt).decode(s,t,!0),c=[],h=[];let d=0,p=0;return e.inputs.forEach((g,A)=>{let v=null;if(g.indexed)if(a==null)v=new ub(null);else if(o[A])v=new ub(a[p++]);else try{v=a[p++]}catch(x){v=x}else try{v=l[d++]}catch(x){v=x}c.push(v),h.push(g.name||null)}),hc.fromItems(c,h)}parseTransaction(e){const t=we(e.data,"tx.data"),r=se(e.value!=null?e.value:0,"tx.value"),i=this.getFunction(te(t.slice(0,4)));if(!i)return null;const s=y(this,Kt).decode(i.inputs,t.slice(4));return new S3(i,i.selector,s,r)}parseCallResult(e){throw new Error("@TODO")}parseLog(e){const t=this.getEvent(e.topics[0]);return!t||t.anonymous?null:new x3(t,t.topicHash,this.decodeEventLog(t,e.data,e.topics))}parseError(e){const t=te(e),r=this.getError(rt(t,0,4));if(!r)return null;const i=y(this,Kt).decode(r.inputs,rt(t,4));return new P3(r,r.selector,i)}static from(e){return e instanceof Yo?e:typeof e=="string"?new Yo(JSON.parse(e)):typeof e.formatJson=="function"?new Yo(e.formatJson()):typeof e.format=="function"?new Yo(e.format("json")):new Yo(e)}};Hr=new WeakMap,$r=new WeakMap,Kr=new WeakMap,Kt=new WeakMap,Uu=new WeakSet,im=function(e,t,r){if(je(e)){const s=e.toLowerCase();for(const o of y(this,Kr).values())if(s===o.selector)return o;return null}if(e.indexOf("(")===-1){const s=[];for(const[o,a]of y(this,Kr))o.split("(")[0]===e&&s.push(a);if(t){const o=t.length>0?t[t.length-1]:null;let a=t.length,l=!0;Yt.isTyped(o)&&o.type==="overrides"&&(l=!1,a--);for(let c=s.length-1;c>=0;c--){const h=s[c].inputs.length;h!==a&&(!l||h!==a-1)&&s.splice(c,1)}for(let c=s.length-1;c>=0;c--){const h=s[c].inputs;for(let d=0;d<t.length;d++)if(Yt.isTyped(t[d])){if(d>=h.length){if(t[d].type==="overrides")continue;s.splice(c,1);break}if(t[d].type!==h[d].baseType){s.splice(c,1);break}}}}if(s.length===1&&t&&t.length!==s[0].inputs.length){const o=t[t.length-1];(o==null||Array.isArray(o)||typeof o!="object")&&s.splice(0,1)}if(s.length===0)return null;if(s.length>1&&r){const o=s.map(a=>JSON.stringify(a.format())).join(", ");O(!1,`ambiguous function description (i.e. matches ${o})`,"key",e)}return s[0]}const i=y(this,Kr).get(Xr.from(e).format());return i||null},ju=new WeakSet,sm=function(e,t,r){if(je(e)){const s=e.toLowerCase();for(const o of y(this,$r).values())if(s===o.topicHash)return o;return null}if(e.indexOf("(")===-1){const s=[];for(const[o,a]of y(this,$r))o.split("(")[0]===e&&s.push(a);if(t){for(let o=s.length-1;o>=0;o--)s[o].inputs.length<t.length&&s.splice(o,1);for(let o=s.length-1;o>=0;o--){const a=s[o].inputs;for(let l=0;l<t.length;l++)if(Yt.isTyped(t[l])&&t[l].type!==a[l].baseType){s.splice(o,1);break}}}if(s.length===0)return null;if(s.length>1&&r){const o=s.map(a=>JSON.stringify(a.format())).join(", ");O(!1,`ambiguous event description (i.e. matches ${o})`,"key",e)}return s[0]}const i=y(this,$r).get(Yr.from(e).format());return i||null};let Dv=Yo;const mk=BigInt(0);function lu(n){return n??null}function at(n){return n==null?null:n.toString()}class db{constructor(e,t,r){B(this,"gasPrice");B(this,"maxFeePerGas");B(this,"maxPriorityFeePerGas");ce(this,{gasPrice:lu(e),maxFeePerGas:lu(t),maxPriorityFeePerGas:lu(r)})}toJSON(){const{gasPrice:e,maxFeePerGas:t,maxPriorityFeePerGas:r}=this;return{_type:"FeeData",gasPrice:at(e),maxFeePerGas:at(t),maxPriorityFeePerGas:at(r)}}}function lg(n){const e={};n.to&&(e.to=n.to),n.from&&(e.from=n.from),n.data&&(e.data=te(n.data));const t="chainId,gasLimit,gasPrice,maxFeePerBlobGas,maxFeePerGas,maxPriorityFeePerGas,value".split(/,/);for(const i of t)!(i in n)||n[i]==null||(e[i]=se(n[i],`request.${i}`));const r="type,nonce".split(/,/);for(const i of r)!(i in n)||n[i]==null||(e[i]=ge(n[i],`request.${i}`));return n.accessList&&(e.accessList=ol(n.accessList)),n.authorizationList&&(e.authorizationList=n.authorizationList.slice()),"blockTag"in n&&(e.blockTag=n.blockTag),"enableCcipRead"in n&&(e.enableCcipRead=!!n.enableCcipRead),"customData"in n&&(e.customData=n.customData),"blobVersionedHashes"in n&&n.blobVersionedHashes&&(e.blobVersionedHashes=n.blobVersionedHashes.slice()),"kzg"in n&&(e.kzg=n.kzg),"blobs"in n&&n.blobs&&(e.blobs=n.blobs.map(i=>TE(i)?te(i):Object.assign({},i))),e}var bi;class R3{constructor(e,t){B(this,"provider");B(this,"number");B(this,"hash");B(this,"timestamp");B(this,"parentHash");B(this,"parentBeaconBlockRoot");B(this,"nonce");B(this,"difficulty");B(this,"gasLimit");B(this,"gasUsed");B(this,"stateRoot");B(this,"receiptsRoot");B(this,"blobGasUsed");B(this,"excessBlobGas");B(this,"miner");B(this,"prevRandao");B(this,"extraData");B(this,"baseFeePerGas");U(this,bi,void 0);k(this,bi,e.transactions.map(r=>typeof r!="string"?new Dd(r,t):r)),ce(this,{provider:t,hash:lu(e.hash),number:e.number,timestamp:e.timestamp,parentHash:e.parentHash,parentBeaconBlockRoot:e.parentBeaconBlockRoot,nonce:e.nonce,difficulty:e.difficulty,gasLimit:e.gasLimit,gasUsed:e.gasUsed,blobGasUsed:e.blobGasUsed,excessBlobGas:e.excessBlobGas,miner:e.miner,prevRandao:lu(e.prevRandao),extraData:e.extraData,baseFeePerGas:lu(e.baseFeePerGas),stateRoot:e.stateRoot,receiptsRoot:e.receiptsRoot})}get transactions(){return y(this,bi).map(e=>typeof e=="string"?e:e.hash)}get prefetchedTransactions(){const e=y(this,bi).slice();return e.length===0?[]:($(typeof e[0]=="object","transactions were not prefetched with block request","UNSUPPORTED_OPERATION",{operation:"transactionResponses()"}),e)}toJSON(){const{baseFeePerGas:e,difficulty:t,extraData:r,gasLimit:i,gasUsed:s,hash:o,miner:a,prevRandao:l,nonce:c,number:h,parentHash:d,parentBeaconBlockRoot:p,stateRoot:g,receiptsRoot:A,timestamp:v,transactions:x}=this;return{_type:"Block",baseFeePerGas:at(e),difficulty:at(t),extraData:r,gasLimit:at(i),gasUsed:at(s),blobGasUsed:at(this.blobGasUsed),excessBlobGas:at(this.excessBlobGas),hash:o,miner:a,prevRandao:l,nonce:c,number:h,parentHash:d,timestamp:v,parentBeaconBlockRoot:p,stateRoot:g,receiptsRoot:A,transactions:x}}[Symbol.iterator](){let e=0;const t=this.transactions;return{next:()=>e<this.length?{value:t[e++],done:!1}:{value:void 0,done:!0}}}get length(){return y(this,bi).length}get date(){return this.timestamp==null?null:new Date(this.timestamp*1e3)}async getTransaction(e){let t;if(typeof e=="number")t=y(this,bi)[e];else{const r=e.toLowerCase();for(const i of y(this,bi))if(typeof i=="string"){if(i!==r)continue;t=i;break}else{if(i.hash!==r)continue;t=i;break}}if(t==null)throw new Error("no such tx");return typeof t=="string"?await this.provider.getTransaction(t):t}getPrefetchedTransaction(e){const t=this.prefetchedTransactions;if(typeof e=="number")return t[e];e=e.toLowerCase();for(const r of t)if(r.hash===e)return r;O(!1,"no matching transaction","indexOrHash",e)}isMined(){return!!this.hash}isLondon(){return!!this.baseFeePerGas}orphanedEvent(){if(!this.isMined())throw new Error("");return C3(this)}}bi=new WeakMap;class Pf{constructor(e,t){B(this,"provider");B(this,"transactionHash");B(this,"blockHash");B(this,"blockNumber");B(this,"removed");B(this,"address");B(this,"data");B(this,"topics");B(this,"index");B(this,"transactionIndex");this.provider=t;const r=Object.freeze(e.topics.slice());ce(this,{transactionHash:e.transactionHash,blockHash:e.blockHash,blockNumber:e.blockNumber,removed:e.removed,address:e.address,data:e.data,topics:r,index:e.index,transactionIndex:e.transactionIndex})}toJSON(){const{address:e,blockHash:t,blockNumber:r,data:i,index:s,removed:o,topics:a,transactionHash:l,transactionIndex:c}=this;return{_type:"log",address:e,blockHash:t,blockNumber:r,data:i,index:s,removed:o,topics:a,transactionHash:l,transactionIndex:c}}async getBlock(){const e=await this.provider.getBlock(this.blockHash);return $(!!e,"failed to find transaction","UNKNOWN_ERROR",{}),e}async getTransaction(){const e=await this.provider.getTransaction(this.transactionHash);return $(!!e,"failed to find transaction","UNKNOWN_ERROR",{}),e}async getTransactionReceipt(){const e=await this.provider.getTransactionReceipt(this.transactionHash);return $(!!e,"failed to find transaction receipt","UNKNOWN_ERROR",{}),e}removedEvent(){return k3(this)}}var of;class gk{constructor(e,t){B(this,"provider");B(this,"to");B(this,"from");B(this,"contractAddress");B(this,"hash");B(this,"index");B(this,"blockHash");B(this,"blockNumber");B(this,"logsBloom");B(this,"gasUsed");B(this,"blobGasUsed");B(this,"cumulativeGasUsed");B(this,"gasPrice");B(this,"blobGasPrice");B(this,"type");B(this,"status");B(this,"root");U(this,of,void 0);k(this,of,Object.freeze(e.logs.map(i=>new Pf(i,t))));let r=mk;e.effectiveGasPrice!=null?r=e.effectiveGasPrice:e.gasPrice!=null&&(r=e.gasPrice),ce(this,{provider:t,to:e.to,from:e.from,contractAddress:e.contractAddress,hash:e.hash,index:e.index,blockHash:e.blockHash,blockNumber:e.blockNumber,logsBloom:e.logsBloom,gasUsed:e.gasUsed,cumulativeGasUsed:e.cumulativeGasUsed,blobGasUsed:e.blobGasUsed,gasPrice:r,blobGasPrice:e.blobGasPrice,type:e.type,status:e.status,root:e.root})}get logs(){return y(this,of)}toJSON(){const{to:e,from:t,contractAddress:r,hash:i,index:s,blockHash:o,blockNumber:a,logsBloom:l,logs:c,status:h,root:d}=this;return{_type:"TransactionReceipt",blockHash:o,blockNumber:a,contractAddress:r,cumulativeGasUsed:at(this.cumulativeGasUsed),from:t,gasPrice:at(this.gasPrice),blobGasUsed:at(this.blobGasUsed),blobGasPrice:at(this.blobGasPrice),gasUsed:at(this.gasUsed),hash:i,index:s,logs:c,logsBloom:l,root:d,status:h,to:e}}get length(){return this.logs.length}[Symbol.iterator](){let e=0;return{next:()=>e<this.length?{value:this.logs[e++],done:!1}:{value:void 0,done:!0}}}get fee(){return this.gasUsed*this.gasPrice}async getBlock(){const e=await this.provider.getBlock(this.blockHash);if(e==null)throw new Error("TODO");return e}async getTransaction(){const e=await this.provider.getTransaction(this.hash);if(e==null)throw new Error("TODO");return e}async getResult(){return await this.provider.getTransactionResult(this.hash)}async confirmations(){return await this.provider.getBlockNumber()-this.blockNumber+1}removedEvent(){return wk(this)}reorderedEvent(e){return $(!e||e.isMined(),"unmined 'other' transction cannot be orphaned","UNSUPPORTED_OPERATION",{operation:"reorderedEvent(other)"}),yk(this,e)}}of=new WeakMap;var Os;const QA=class QA{constructor(e,t){B(this,"provider");B(this,"blockNumber");B(this,"blockHash");B(this,"index");B(this,"hash");B(this,"type");B(this,"to");B(this,"from");B(this,"nonce");B(this,"gasLimit");B(this,"gasPrice");B(this,"maxPriorityFeePerGas");B(this,"maxFeePerGas");B(this,"maxFeePerBlobGas");B(this,"data");B(this,"value");B(this,"chainId");B(this,"signature");B(this,"accessList");B(this,"blobVersionedHashes");B(this,"authorizationList");U(this,Os,void 0);this.provider=t,this.blockNumber=e.blockNumber!=null?e.blockNumber:null,this.blockHash=e.blockHash!=null?e.blockHash:null,this.hash=e.hash,this.index=e.index,this.type=e.type,this.from=e.from,this.to=e.to||null,this.gasLimit=e.gasLimit,this.nonce=e.nonce,this.data=e.data,this.value=e.value,this.gasPrice=e.gasPrice,this.maxPriorityFeePerGas=e.maxPriorityFeePerGas!=null?e.maxPriorityFeePerGas:null,this.maxFeePerGas=e.maxFeePerGas!=null?e.maxFeePerGas:null,this.maxFeePerBlobGas=e.maxFeePerBlobGas!=null?e.maxFeePerBlobGas:null,this.chainId=e.chainId,this.signature=e.signature,this.accessList=e.accessList!=null?e.accessList:null,this.blobVersionedHashes=e.blobVersionedHashes!=null?e.blobVersionedHashes:null,this.authorizationList=e.authorizationList!=null?e.authorizationList:null,k(this,Os,-1)}toJSON(){const{blockNumber:e,blockHash:t,index:r,hash:i,type:s,to:o,from:a,nonce:l,data:c,signature:h,accessList:d,blobVersionedHashes:p}=this;return{_type:"TransactionResponse",accessList:d,blockNumber:e,blockHash:t,blobVersionedHashes:p,chainId:at(this.chainId),data:c,from:a,gasLimit:at(this.gasLimit),gasPrice:at(this.gasPrice),hash:i,maxFeePerGas:at(this.maxFeePerGas),maxPriorityFeePerGas:at(this.maxPriorityFeePerGas),maxFeePerBlobGas:at(this.maxFeePerBlobGas),nonce:l,signature:h,to:o,index:r,type:s,value:at(this.value)}}async getBlock(){let e=this.blockNumber;if(e==null){const r=await this.getTransaction();r&&(e=r.blockNumber)}if(e==null)return null;const t=this.provider.getBlock(e);if(t==null)throw new Error("TODO");return t}async getTransaction(){return this.provider.getTransaction(this.hash)}async confirmations(){if(this.blockNumber==null){const{tx:t,blockNumber:r}=await ln({tx:this.getTransaction(),blockNumber:this.provider.getBlockNumber()});return t==null||t.blockNumber==null?0:r-t.blockNumber+1}return await this.provider.getBlockNumber()-this.blockNumber+1}async wait(e,t){const r=e??1,i=t??0;let s=y(this,Os),o=-1,a=s===-1;const l=async()=>{if(a)return null;const{blockNumber:p,nonce:g}=await ln({blockNumber:this.provider.getBlockNumber(),nonce:this.provider.getTransactionCount(this.from)});if(g<this.nonce){s=p;return}if(a)return null;const A=await this.getTransaction();if(!(A&&A.blockNumber!=null))for(o===-1&&(o=s-3,o<y(this,Os)&&(o=y(this,Os)));o<=p;){if(a)return null;const v=await this.provider.getBlock(o,!0);if(v==null)return;for(const x of v)if(x===this.hash)return;for(let x=0;x<v.length;x++){const w=await v.getTransaction(x);if(w.from===this.from&&w.nonce===this.nonce){if(a)return null;const E=await this.provider.getTransactionReceipt(w.hash);if(E==null||p-E.blockNumber+1<r)return;let T="replaced";w.data===this.data&&w.to===this.to&&w.value===this.value?T="repriced":w.data==="0x"&&w.from===w.to&&w.value===mk&&(T="cancelled"),$(!1,"transaction was replaced","TRANSACTION_REPLACED",{cancelled:T==="replaced"||T==="cancelled",reason:T,replacement:w.replaceableTransaction(s),hash:w.hash,receipt:E})}}o++}},c=p=>{if(p==null||p.status!==0)return p;$(!1,"transaction execution reverted","CALL_EXCEPTION",{action:"sendTransaction",data:null,reason:null,invocation:null,revert:null,transaction:{to:p.to,from:p.from,data:""},receipt:p})},h=await this.provider.getTransactionReceipt(this.hash);if(r===0)return c(h);if(h){if(await h.confirmations()>=r)return c(h)}else if(await l(),r===0)return null;return await new Promise((p,g)=>{const A=[],v=()=>{A.forEach(w=>w())};if(A.push(()=>{a=!0}),i>0){const w=setTimeout(()=>{v(),g($e("wait for transaction timeout","TIMEOUT"))},i);A.push(()=>{clearTimeout(w)})}const x=async w=>{if(await w.confirmations()>=r){v();try{p(c(w))}catch(E){g(E)}}};if(A.push(()=>{this.provider.off(this.hash,x)}),this.provider.on(this.hash,x),s>=0){const w=async()=>{try{await l()}catch(E){if(Ot(E,"TRANSACTION_REPLACED")){v(),g(E);return}}a||this.provider.once("block",w)};A.push(()=>{this.provider.off("block",w)}),this.provider.once("block",w)}})}isMined(){return this.blockHash!=null}isLegacy(){return this.type===0}isBerlin(){return this.type===1}isLondon(){return this.type===2}isCancun(){return this.type===3}removedEvent(){return $(this.isMined(),"unmined transaction canot be orphaned","UNSUPPORTED_OPERATION",{operation:"removeEvent()"}),wk(this)}reorderedEvent(e){return $(this.isMined(),"unmined transaction canot be orphaned","UNSUPPORTED_OPERATION",{operation:"removeEvent()"}),$(!e||e.isMined(),"unmined 'other' transaction canot be orphaned","UNSUPPORTED_OPERATION",{operation:"removeEvent()"}),yk(this,e)}replaceableTransaction(e){O(Number.isInteger(e)&&e>=0,"invalid startBlock","startBlock",e);const t=new QA(this,this.provider);return k(t,Os,e),t}};Os=new WeakMap;let Dd=QA;function C3(n){return{orphan:"drop-block",hash:n.hash,number:n.number}}function yk(n,e){return{orphan:"reorder-transaction",tx:n,other:e}}function wk(n){return{orphan:"drop-transaction",tx:n}}function k3(n){return{orphan:"drop-log",log:{transactionHash:n.transactionHash,blockHash:n.blockHash,blockNumber:n.blockNumber,address:n.address,data:n.data,topics:Object.freeze(n.topics.slice()),index:n.index}}}class ME extends Pf{constructor(t,r,i){super(t,t.provider);B(this,"interface");B(this,"fragment");B(this,"args");const s=r.decodeEventLog(i,t.data,t.topics);ce(this,{args:s,fragment:i,interface:r})}get eventName(){return this.fragment.name}get eventSignature(){return this.fragment.format()}}class vk extends Pf{constructor(t,r){super(t,t.provider);B(this,"error");ce(this,{error:r})}}var zu;class N3 extends gk{constructor(t,r,i){super(i,r);U(this,zu,void 0);k(this,zu,t)}get logs(){return super.logs.map(t=>{const r=t.topics.length?y(this,zu).getEvent(t.topics[0]):null;if(r)try{return new ME(t,y(this,zu),r)}catch(i){return new vk(t,i)}return t})}}zu=new WeakMap;var af;class BE extends Dd{constructor(t,r,i){super(i,r);U(this,af,void 0);k(this,af,t)}async wait(t,r){const i=await super.wait(t,r);return i==null?null:new N3(y(this,af),this.provider,i)}}af=new WeakMap;class _k extends HR{constructor(t,r,i,s){super(t,r,i);B(this,"log");ce(this,{log:s})}async getBlock(){return await this.log.getBlock()}async getTransaction(){return await this.log.getTransaction()}async getTransactionReceipt(){return await this.log.getTransactionReceipt()}}class D3 extends _k{constructor(e,t,r,i,s){super(e,t,r,new ME(s,e.interface,i));const o=e.interface.decodeEventLog(i,this.log.data,this.log.topics);ce(this,{args:o,fragment:i})}get eventName(){return this.fragment.name}get eventSignature(){return this.fragment.format()}}const fb=BigInt(0);function Ek(n){return n&&typeof n.call=="function"}function Ak(n){return n&&typeof n.estimateGas=="function"}function yy(n){return n&&typeof n.resolveName=="function"}function Ik(n){return n&&typeof n.sendTransaction=="function"}function Tk(n){if(n!=null){if(yy(n))return n;if(n.provider)return n.provider}}var lf;class O3{constructor(e,t,r){U(this,lf,void 0);B(this,"fragment");if(ce(this,{fragment:t}),t.inputs.length<r.length)throw new Error("too many arguments");const i=Ga(e.runner,"resolveName"),s=yy(i)?i:null;k(this,lf,async function(){const o=await Promise.all(t.inputs.map((a,l)=>r[l]==null?null:a.walkAsync(r[l],(h,d)=>h==="address"?Array.isArray(d)?Promise.all(d.map(p=>dn(p,s))):dn(d,s):d)));return e.interface.encodeFilterTopics(t,o)}())}getTopicFilter(){return y(this,lf)}}lf=new WeakMap;function Ga(n,e){return n==null?null:typeof n[e]=="function"?n:n.provider&&typeof n.provider[e]=="function"?n.provider:null}function oa(n){return n==null?null:n.provider||null}async function bk(n,e){const t=Yt.dereference(n,"overrides");O(typeof t=="object","invalid overrides parameter","overrides",n);const r=lg(t);return O(r.to==null||(e||[]).indexOf("to")>=0,"cannot override to","overrides.to",r.to),O(r.data==null||(e||[]).indexOf("data")>=0,"cannot override data","overrides.data",r.data),r.from&&(r.from=r.from),r}async function L3(n,e,t){const r=Ga(n,"resolveName"),i=yy(r)?r:null;return await Promise.all(e.map((s,o)=>s.walkAsync(t[o],(a,l)=>(l=Yt.dereference(l,a),a==="address"?dn(l,i):l))))}function V3(n){const e=async function(o){const a=await bk(o,["data"]);a.to=await n.getAddress(),a.from&&(a.from=await dn(a.from,Tk(n.runner)));const l=n.interface,c=se(a.value||fb,"overrides.value")===fb,h=(a.data||"0x")==="0x";l.fallback&&!l.fallback.payable&&l.receive&&!h&&!c&&O(!1,"cannot send data to receive or send value to non-payable fallback","overrides",o),O(l.fallback||h,"cannot send data to receive-only contract","overrides.data",a.data);const d=l.receive||l.fallback&&l.fallback.payable;return O(d||c,"cannot send value to non-payable fallback","overrides.value",a.value),O(l.fallback||h,"cannot send data to receive-only contract","overrides.data",a.data),a},t=async function(o){const a=Ga(n.runner,"call");$(Ek(a),"contract runner does not support calling","UNSUPPORTED_OPERATION",{operation:"call"});const l=await e(o);try{return await a.call(l)}catch(c){throw IE(c)&&c.data?n.interface.makeError(c.data,l):c}},r=async function(o){const a=n.runner;$(Ik(a),"contract runner does not support sending transactions","UNSUPPORTED_OPERATION",{operation:"sendTransaction"});const l=await a.sendTransaction(await e(o)),c=oa(n.runner);return new BE(n.interface,c,l)},i=async function(o){const a=Ga(n.runner,"estimateGas");return $(Ak(a),"contract runner does not support gas estimation","UNSUPPORTED_OPERATION",{operation:"estimateGas"}),await a.estimateGas(await e(o))},s=async o=>await r(o);return ce(s,{_contract:n,estimateGas:i,populateTransaction:e,send:r,staticCall:t}),s}function M3(n,e){const t=function(...c){const h=n.interface.getFunction(e,c);return $(h,"no matching fragment","UNSUPPORTED_OPERATION",{operation:"fragment",info:{key:e,args:c}}),h},r=async function(...c){const h=t(...c);let d={};if(h.inputs.length+1===c.length&&(d=await bk(c.pop()),d.from&&(d.from=await dn(d.from,Tk(n.runner)))),h.inputs.length!==c.length)throw new Error("internal error: fragment inputs doesn't match arguments; should not happen");const p=await L3(n.runner,h.inputs,c);return Object.assign({},d,await ln({to:n.getAddress(),data:n.interface.encodeFunctionData(h,p)}))},i=async function(...c){const h=await a(...c);return h.length===1?h[0]:h},s=async function(...c){const h=n.runner;$(Ik(h),"contract runner does not support sending transactions","UNSUPPORTED_OPERATION",{operation:"sendTransaction"});const d=await h.sendTransaction(await r(...c)),p=oa(n.runner);return new BE(n.interface,p,d)},o=async function(...c){const h=Ga(n.runner,"estimateGas");return $(Ak(h),"contract runner does not support gas estimation","UNSUPPORTED_OPERATION",{operation:"estimateGas"}),await h.estimateGas(await r(...c))},a=async function(...c){const h=Ga(n.runner,"call");$(Ek(h),"contract runner does not support calling","UNSUPPORTED_OPERATION",{operation:"call"});const d=await r(...c);let p="0x";try{p=await h.call(d)}catch(A){throw IE(A)&&A.data?n.interface.makeError(A.data,d):A}const g=t(...c);return n.interface.decodeFunctionResult(g,p)},l=async(...c)=>t(...c).constant?await i(...c):await s(...c);return ce(l,{name:n.interface.getFunctionName(e),_contract:n,_key:e,getFragment:t,estimateGas:o,populateTransaction:r,send:s,staticCall:i,staticCallResult:a}),Object.defineProperty(l,"fragment",{configurable:!1,enumerable:!0,get:()=>{const c=n.interface.getFunction(e);return $(c,"no matching fragment","UNSUPPORTED_OPERATION",{operation:"fragment",info:{key:e}}),c}}),l}function B3(n,e){const t=function(...i){const s=n.interface.getEvent(e,i);return $(s,"no matching fragment","UNSUPPORTED_OPERATION",{operation:"fragment",info:{key:e,args:i}}),s},r=function(...i){return new O3(n,t(...i),i)};return ce(r,{name:n.interface.getEventName(e),_contract:n,_key:e,getFragment:t}),Object.defineProperty(r,"fragment",{configurable:!1,enumerable:!0,get:()=>{const i=n.interface.getEvent(e);return $(i,"no matching fragment","UNSUPPORTED_OPERATION",{operation:"fragment",info:{key:e}}),i}}),r}const ug=Symbol.for("_ethersInternal_contract"),xk=new WeakMap;function F3(n,e){xk.set(n[ug],e)}function Mn(n){return xk.get(n[ug])}function U3(n){return n&&typeof n=="object"&&"getTopicFilter"in n&&typeof n.getTopicFilter=="function"&&n.fragment}async function FE(n,e){let t,r=null;if(Array.isArray(e)){const s=function(o){if(je(o,32))return o;const a=n.interface.getEvent(o);return O(a,"unknown fragment","name",o),a.topicHash};t=e.map(o=>o==null?null:Array.isArray(o)?o.map(s):s(o))}else e==="*"?t=[null]:typeof e=="string"?je(e,32)?t=[e]:(r=n.interface.getEvent(e),O(r,"unknown fragment","event",e),t=[r.topicHash]):U3(e)?t=await e.getTopicFilter():"fragment"in e?(r=e.fragment,t=[r.topicHash]):O(!1,"unknown event name","event",e);t=t.map(s=>{if(s==null)return null;if(Array.isArray(s)){const o=Array.from(new Set(s.map(a=>a.toLowerCase())).values());return o.length===1?o[0]:(o.sort(),o)}return s.toLowerCase()});const i=t.map(s=>s==null?"null":Array.isArray(s)?s.join("|"):s).join("&");return{fragment:r,tag:i,topics:t}}async function kh(n,e){const{subs:t}=Mn(n);return t.get((await FE(n,e)).tag)||null}async function pb(n,e,t){const r=oa(n.runner);$(r,"contract runner does not support subscribing","UNSUPPORTED_OPERATION",{operation:e});const{fragment:i,tag:s,topics:o}=await FE(n,t),{addr:a,subs:l}=Mn(n);let c=l.get(s);if(!c){const d={address:a||n,topics:o},p=x=>{let w=i;if(w==null)try{w=n.interface.getEvent(x.topics[0])}catch{}if(w){const E=w,T=i?n.interface.decodeEventLog(i,x.data,x.topics):[];Lv(n,t,T,L=>new D3(n,L,t,E,x))}else Lv(n,t,[],E=>new _k(n,E,t,x))};let g=[];c={tag:s,listeners:[],start:()=>{g.length||g.push(r.on(d,p))},stop:async()=>{if(g.length==0)return;let x=g;g=[],await Promise.all(x),r.off(d,p)}},l.set(s,c)}return c}let Ov=Promise.resolve();async function j3(n,e,t,r){await Ov;const i=await kh(n,e);if(!i)return!1;const s=i.listeners.length;return i.listeners=i.listeners.filter(({listener:o,once:a})=>{const l=Array.from(t);r&&l.push(r(a?null:o));try{o.call(n,...l)}catch{}return!a}),i.listeners.length===0&&(i.stop(),Mn(n).subs.delete(i.tag)),s>0}async function Lv(n,e,t,r){try{await Ov}catch{}const i=j3(n,e,t,r);return Ov=i,await i}const kp=["then"];var OH;const id=class id{constructor(e,t,r,i){B(this,"target");B(this,"interface");B(this,"runner");B(this,"filters");B(this,OH);B(this,"fallback");O(typeof e=="string"||kC(e),"invalid value for Contract target","target",e),r==null&&(r=null);const s=Dv.from(t);ce(this,{target:e,runner:r,interface:s}),Object.defineProperty(this,ug,{value:{}});let o,a=null,l=null;if(i){const d=oa(r);l=new BE(this.interface,d,i)}let c=new Map;if(typeof e=="string")if(je(e))a=e,o=Promise.resolve(e);else{const d=Ga(r,"resolveName");if(!yy(d))throw $e("contract runner does not support name resolution","UNSUPPORTED_OPERATION",{operation:"resolveName"});o=d.resolveName(e).then(p=>{if(p==null)throw $e("an ENS name used for a contract target must be correctly configured","UNCONFIGURED_NAME",{value:e});return Mn(this).addr=p,p})}else o=e.getAddress().then(d=>{if(d==null)throw new Error("TODO");return Mn(this).addr=d,d});F3(this,{addrPromise:o,addr:a,deployTx:l,subs:c});const h=new Proxy({},{get:(d,p,g)=>{if(typeof p=="symbol"||kp.indexOf(p)>=0)return Reflect.get(d,p,g);try{return this.getEvent(p)}catch(A){if(!Ot(A,"INVALID_ARGUMENT")||A.argument!=="key")throw A}},has:(d,p)=>kp.indexOf(p)>=0?Reflect.has(d,p):Reflect.has(d,p)||this.interface.hasEvent(String(p))});return ce(this,{filters:h}),ce(this,{fallback:s.receive||s.fallback?V3(this):null}),new Proxy(this,{get:(d,p,g)=>{if(typeof p=="symbol"||p in d||kp.indexOf(p)>=0)return Reflect.get(d,p,g);try{return d.getFunction(p)}catch(A){if(!Ot(A,"INVALID_ARGUMENT")||A.argument!=="key")throw A}},has:(d,p)=>typeof p=="symbol"||p in d||kp.indexOf(p)>=0?Reflect.has(d,p):d.interface.hasFunction(p)})}connect(e){return new id(this.target,this.interface,e)}attach(e){return new id(e,this.interface,this.runner)}async getAddress(){return await Mn(this).addrPromise}async getDeployedCode(){const e=oa(this.runner);$(e,"runner does not support .provider","UNSUPPORTED_OPERATION",{operation:"getDeployedCode"});const t=await e.getCode(await this.getAddress());return t==="0x"?null:t}async waitForDeployment(){const e=this.deploymentTransaction();if(e)return await e.wait(),this;if(await this.getDeployedCode()!=null)return this;const r=oa(this.runner);return $(r!=null,"contract runner does not support .provider","UNSUPPORTED_OPERATION",{operation:"waitForDeployment"}),new Promise((i,s)=>{const o=async()=>{try{if(await this.getDeployedCode()!=null)return i(this);r.once("block",o)}catch(a){s(a)}};o()})}deploymentTransaction(){return Mn(this).deployTx}getFunction(e){return typeof e!="string"&&(e=e.format()),M3(this,e)}getEvent(e){return typeof e!="string"&&(e=e.format()),B3(this,e)}async queryTransaction(e){throw new Error("@TODO")}async queryFilter(e,t,r){t==null&&(t=0),r==null&&(r="latest");const{addr:i,addrPromise:s}=Mn(this),o=i||await s,{fragment:a,topics:l}=await FE(this,e),c={address:o,topics:l,fromBlock:t,toBlock:r},h=oa(this.runner);return $(h,"contract runner does not have a provider","UNSUPPORTED_OPERATION",{operation:"queryFilter"}),(await h.getLogs(c)).map(d=>{let p=a;if(p==null)try{p=this.interface.getEvent(d.topics[0])}catch{}if(p)try{return new ME(d,this.interface,p)}catch(g){return new vk(d,g)}return new Pf(d,h)})}async on(e,t){const r=await pb(this,"on",e);return r.listeners.push({listener:t,once:!1}),r.start(),this}async once(e,t){const r=await pb(this,"once",e);return r.listeners.push({listener:t,once:!0}),r.start(),this}async emit(e,...t){return await Lv(this,e,t,null)}async listenerCount(e){if(e){const i=await kh(this,e);return i?i.listeners.length:0}const{subs:t}=Mn(this);let r=0;for(const{listeners:i}of t.values())r+=i.length;return r}async listeners(e){if(e){const i=await kh(this,e);return i?i.listeners.map(({listener:s})=>s):[]}const{subs:t}=Mn(this);let r=[];for(const{listeners:i}of t.values())r=r.concat(i.map(({listener:s})=>s));return r}async off(e,t){const r=await kh(this,e);if(!r)return this;if(t){const i=r.listeners.map(({listener:s})=>s).indexOf(t);i>=0&&r.listeners.splice(i,1)}return(t==null||r.listeners.length===0)&&(r.stop(),Mn(this).subs.delete(r.tag)),this}async removeAllListeners(e){if(e){const t=await kh(this,e);if(!t)return this;t.stop(),Mn(this).subs.delete(t.tag)}else{const{subs:t}=Mn(this);for(const{tag:r,stop:i}of t.values())i(),t.delete(r)}return this}async addListener(e,t){return await this.on(e,t)}async removeListener(e,t){return await this.off(e,t)}static buildClass(e){class t extends id{constructor(i,s=null){super(i,e,s)}}return t}static from(e,t,r){return r==null&&(r=null),new this(e,t,r)}};OH=ug;let Vv=id;function z3(){return Vv}class uu extends z3(){}function X0(n){return n.match(/^ipfs:\/\/ipfs\//i)?n=n.substring(12):n.match(/^ipfs:\/\//i)?n=n.substring(7):O(!1,"unsupported IPFS format","link",n),`https://gateway.ipfs.io/ipfs/${n}`}class G3{constructor(e){B(this,"name");ce(this,{name:e})}connect(e){return this}supportsCoinType(e){return!1}async encodeAddress(e,t){throw new Error("unsupported coin")}async decodeAddress(e,t){throw new Error("unsupported coin")}}const Sk=new RegExp("^(ipfs)://(.*)$","i"),mb=[new RegExp("^(https)://(.*)$","i"),new RegExp("^(data):(.*)$","i"),Sk,new RegExp("^eip155:[0-9]+/(erc[0-9]+):(.*)$","i")];var Ls,va,Vs,Pl,Mg,Pk;const Yl=class Yl{constructor(e,t,r){U(this,Vs);B(this,"provider");B(this,"address");B(this,"name");U(this,Ls,void 0);U(this,va,void 0);ce(this,{provider:e,address:t,name:r}),k(this,Ls,null),k(this,va,new uu(t,["function supportsInterface(bytes4) view returns (bool)","function resolve(bytes, bytes) view returns (bytes)","function addr(bytes32) view returns (address)","function addr(bytes32, uint) view returns (bytes)","function text(bytes32, string) view returns (string)","function contenthash(bytes32) view returns (bytes)"],e))}async supportsWildcard(){return y(this,Ls)==null&&k(this,Ls,(async()=>{try{return await y(this,va).supportsInterface("0x9061b923")}catch(e){if(Ot(e,"CALL_EXCEPTION"))return!1;throw k(this,Ls,null),e}})()),await y(this,Ls)}async getAddress(e){if(e==null&&(e=60),e===60)try{const s=await K(this,Vs,Pl).call(this,"addr(bytes32)");return s==null||s===bd?null:s}catch(s){if(Ot(s,"CALL_EXCEPTION"))return null;throw s}if(e>=0&&e<2147483648){let s=e+2147483648;const o=await K(this,Vs,Pl).call(this,"addr(bytes32,uint)",[s]);if(je(o,20))return De(o)}let t=null;for(const s of this.provider.plugins)if(s instanceof G3&&s.supportsCoinType(e)){t=s;break}if(t==null)return null;const r=await K(this,Vs,Pl).call(this,"addr(bytes32,uint)",[e]);if(r==null||r==="0x")return null;const i=await t.decodeAddress(e,r);if(i!=null)return i;$(!1,"invalid coin data","UNSUPPORTED_OPERATION",{operation:`getAddress(${e})`,info:{coinType:e,data:r}})}async getText(e){const t=await K(this,Vs,Pl).call(this,"text(bytes32,string)",[e]);return t==null||t==="0x"?null:t}async getContentHash(){const e=await K(this,Vs,Pl).call(this,"contenthash(bytes32)");if(e==null||e==="0x")return null;const t=e.match(/^0x(e3010170|e5010172)(([0-9a-f][0-9a-f])([0-9a-f][0-9a-f])([0-9a-f]*))$/);if(t){const i=t[1]==="e3010170"?"ipfs":"ipns",s=parseInt(t[4],16);if(t[5].length===s*2)return`${i}://${HB("0x"+t[2])}`}const r=e.match(/^0xe40101fa011b20([0-9a-f]*)$/);if(r&&r[1].length===64)return`bzz://${r[1]}`;$(!1,"invalid or unsupported content hash data","UNSUPPORTED_OPERATION",{operation:"getContentHash()",info:{data:e}})}async getAvatar(){return(await this._getAvatar()).url}async _getAvatar(){const e=[{type:"name",value:this.name}];try{const t=await this.getText("avatar");if(t==null)return e.push({type:"!avatar",value:""}),{url:null,linkage:e};e.push({type:"avatar",value:t});for(let r=0;r<mb.length;r++){const i=t.match(mb[r]);if(i==null)continue;const s=i[1].toLowerCase();switch(s){case"https":case"data":return e.push({type:"url",value:t}),{linkage:e,url:t};case"ipfs":{const o=X0(t);return e.push({type:"ipfs",value:t}),e.push({type:"url",value:o}),{linkage:e,url:o}}case"erc721":case"erc1155":{const o=s==="erc721"?"tokenURI(uint256)":"uri(uint256)";e.push({type:s,value:t});const a=await this.getAddress();if(a==null)return e.push({type:"!owner",value:""}),{url:null,linkage:e};const l=(i[2]||"").split("/");if(l.length!==2)return e.push({type:`!${s}caip`,value:i[2]||""}),{url:null,linkage:e};const c=l[1],h=new uu(l[0],["function tokenURI(uint) view returns (string)","function ownerOf(uint) view returns (address)","function uri(uint) view returns (string)","function balanceOf(address, uint256) view returns (uint)"],this.provider);if(s==="erc721"){const v=await h.ownerOf(c);if(a!==v)return e.push({type:"!owner",value:v}),{url:null,linkage:e};e.push({type:"owner",value:v})}else if(s==="erc1155"){const v=await h.balanceOf(a,c);if(!v)return e.push({type:"!balance",value:"0"}),{url:null,linkage:e};e.push({type:"balance",value:v.toString()})}let d=await h[o](c);if(d==null||d==="0x")return e.push({type:"!metadata-url",value:""}),{url:null,linkage:e};e.push({type:"metadata-url-base",value:d}),s==="erc1155"&&(d=d.replace("{id}",po(c,32).substring(2)),e.push({type:"metadata-url-expanded",value:d})),d.match(/^ipfs:/i)&&(d=X0(d)),e.push({type:"metadata-url",value:d});let p={};const g=await new mo(d).send();g.assertOk();try{p=g.bodyJson}catch{try{e.push({type:"!metadata",value:g.bodyText})}catch{const w=g.body;return w&&e.push({type:"!metadata",value:te(w)}),{url:null,linkage:e}}return{url:null,linkage:e}}if(!p)return e.push({type:"!metadata",value:""}),{url:null,linkage:e};e.push({type:"metadata",value:JSON.stringify(p)});let A=p.image;if(typeof A!="string")return e.push({type:"!imageUrl",value:""}),{url:null,linkage:e};if(!A.match(/^(https:\/\/|data:)/i)){if(A.match(Sk)==null)return e.push({type:"!imageUrl-ipfs",value:A}),{url:null,linkage:e};e.push({type:"imageUrl-ipfs",value:A}),A=X0(A)}return e.push({type:"url",value:A}),{linkage:e,url:A}}}}}catch{}return{linkage:e,url:null}}static async getEnsAddress(e){const t=await e.getNetwork(),r=t.getPlugin("org.ethers.plugins.network.Ens");return $(r,"network does not support ENS","UNSUPPORTED_OPERATION",{operation:"getEnsAddress",info:{network:t}}),r.address}static async fromName(e,t){var i;let r=t;for(;;){if(r===""||r==="."||t!=="eth"&&r==="eth")return null;const s=await K(i=Yl,Mg,Pk).call(i,e,r);if(s!=null){const o=new Yl(e,s,t);return r!==t&&!await o.supportsWildcard()?null:o}r=r.split(".").slice(1).join(".")}}};Ls=new WeakMap,va=new WeakMap,Vs=new WeakSet,Pl=async function(e,t){t=(t||[]).slice();const r=y(this,va).interface;t.unshift(kv(this.name));let i=null;await this.supportsWildcard()&&(i=r.getFunction(e),$(i,"missing fragment","UNKNOWN_ERROR",{info:{funcName:e}}),t=[i3(this.name,255),r.encodeFunctionData(i,t)],e="resolve(bytes,bytes)"),t.push({enableCcipRead:!0});try{const s=await y(this,va)[e](...t);return i?r.decodeFunctionResult(i,s)[0]:s}catch(s){if(!Ot(s,"CALL_EXCEPTION"))throw s}return null},Mg=new WeakSet,Pk=async function(e,t){const r=await Yl.getEnsAddress(e);try{const s=await new uu(r,["function resolver(bytes32) view returns (address)"],e).resolver(kv(t),{enableCcipRead:!0});return s===bd?null:s}catch(i){throw i}return null},U(Yl,Mg);let cg=Yl;const gb=BigInt(0);function be(n,e){return function(t){return t==null?e:n(t)}}function Od(n,e){return t=>{if(e&&t==null)return null;if(!Array.isArray(t))throw new Error("not an array");return t.map(r=>n(r))}}function Rf(n,e){return t=>{const r={};for(const i in n){let s=i;if(e&&i in e&&!(s in t)){for(const o of e[i])if(o in t){s=o;break}}try{const o=n[i](t[s]);o!==void 0&&(r[i]=o)}catch(o){const a=o instanceof Error?o.message:"not-an-error";$(!1,`invalid value for value.${i} (${a})`,"BAD_DATA",{value:t})}}return r}}function H3(n){switch(n){case!0:case"true":return!0;case!1:case"false":return!1}O(!1,`invalid boolean; ${JSON.stringify(n)}`,"value",n)}function wc(n){return O(je(n,!0),"invalid data","value",n),n}function Dt(n){return O(je(n,32),"invalid hash","value",n),n}const $3=Rf({address:De,blockHash:Dt,blockNumber:ge,data:wc,index:ge,removed:be(H3,!1),topics:Od(Dt),transactionHash:Dt,transactionIndex:ge},{index:["logIndex"]});function K3(n){return $3(n)}const Q3=Rf({hash:be(Dt),parentHash:Dt,parentBeaconBlockRoot:be(Dt,null),number:ge,timestamp:ge,nonce:be(wc),difficulty:se,gasLimit:se,gasUsed:se,stateRoot:be(Dt,null),receiptsRoot:be(Dt,null),blobGasUsed:be(se,null),excessBlobGas:be(se,null),miner:be(De),prevRandao:be(Dt,null),extraData:wc,baseFeePerGas:be(se)},{prevRandao:["mixHash"]});function q3(n){const e=Q3(n);return e.transactions=n.transactions.map(t=>typeof t=="string"?t:Rk(t)),e}const W3=Rf({transactionIndex:ge,blockNumber:ge,transactionHash:Dt,address:De,topics:Od(Dt),data:wc,index:ge,blockHash:Dt},{index:["logIndex"]});function J3(n){return W3(n)}const Y3=Rf({to:be(De,null),from:be(De,null),contractAddress:be(De,null),index:ge,root:be(te),gasUsed:se,blobGasUsed:be(se,null),logsBloom:be(wc),blockHash:Dt,hash:Dt,logs:Od(J3),blockNumber:ge,cumulativeGasUsed:se,effectiveGasPrice:be(se),blobGasPrice:be(se,null),status:be(ge),type:be(ge,0)},{effectiveGasPrice:["gasPrice"],hash:["transactionHash"],index:["transactionIndex"]});function X3(n){return Y3(n)}function Rk(n){n.to&&se(n.to)===gb&&(n.to="0x0000000000000000000000000000000000000000");const e=Rf({hash:Dt,index:be(ge,void 0),type:t=>t==="0x"||t==null?0:ge(t),accessList:be(ol,null),blobVersionedHashes:be(Od(Dt,!0),null),authorizationList:be(Od(t=>({address:De(t.address),chainId:se(t.chainId),nonce:se(t.nonce),signature:Dn.from(t.signature?t.signature:t)}),!1),null),blockHash:be(Dt,null),blockNumber:be(ge,null),transactionIndex:be(ge,null),from:De,gasPrice:be(se),maxPriorityFeePerGas:be(se),maxFeePerGas:be(se),maxFeePerBlobGas:be(se,null),gasLimit:se,to:be(De,null),value:se,nonce:ge,data:wc,creates:be(De,null),chainId:be(se,null)},{data:["input"],gasLimit:["gas"],index:["transactionIndex"]})(n);if(e.to==null&&e.creates==null&&(e.creates=UF(e)),(n.type===1||n.type===2)&&n.accessList==null&&(e.accessList=[]),n.signature?e.signature=Dn.from(n.signature):e.signature=Dn.from(n),e.chainId==null){const t=e.signature.legacyChainId;t!=null&&(e.chainId=t)}return e.blockHash&&se(e.blockHash)===gb&&(e.blockHash=null),e}const Z3="0x00000000000C2E074eC69A0dFb2997BA6C7d2e1e";class Cf{constructor(e){B(this,"name");ce(this,{name:e})}clone(){return new Cf(this.name)}}class wy extends Cf{constructor(t,r){t==null&&(t=0);super(`org.ethers.network.plugins.GasCost#${t||0}`);B(this,"effectiveBlock");B(this,"txBase");B(this,"txCreate");B(this,"txDataZero");B(this,"txDataNonzero");B(this,"txAccessListStorageKey");B(this,"txAccessListAddress");const i={effectiveBlock:t};function s(o,a){let l=(r||{})[o];l==null&&(l=a),O(typeof l=="number",`invalud value for ${o}`,"costs",r),i[o]=l}s("txBase",21e3),s("txCreate",32e3),s("txDataZero",4),s("txDataNonzero",16),s("txAccessListStorageKey",1900),s("txAccessListAddress",2400),ce(this,i)}clone(){return new wy(this.effectiveBlock,this)}}class vy extends Cf{constructor(t,r){super("org.ethers.plugins.network.Ens");B(this,"address");B(this,"targetNetwork");ce(this,{address:t||Z3,targetNetwork:r??1})}clone(){return new vy(this.address,this.targetNetwork)}}var uf,cf;class e6 extends Cf{constructor(t,r){super("org.ethers.plugins.network.FetchUrlFeeDataPlugin");U(this,uf,void 0);U(this,cf,void 0);k(this,uf,t),k(this,cf,r)}get url(){return y(this,uf)}get processFunc(){return y(this,cf)}clone(){return this}}uf=new WeakMap,cf=new WeakMap;const Z0=new Map;var Gu,Hu,Ms;const Xl=class Xl{constructor(e,t){U(this,Gu,void 0);U(this,Hu,void 0);U(this,Ms,void 0);k(this,Gu,e),k(this,Hu,se(t)),k(this,Ms,new Map)}toJSON(){return{name:this.name,chainId:String(this.chainId)}}get name(){return y(this,Gu)}set name(e){k(this,Gu,e)}get chainId(){return y(this,Hu)}set chainId(e){k(this,Hu,se(e,"chainId"))}matches(e){if(e==null)return!1;if(typeof e=="string"){try{return this.chainId===se(e)}catch{}return this.name===e}if(typeof e=="number"||typeof e=="bigint"){try{return this.chainId===se(e)}catch{}return!1}if(typeof e=="object"){if(e.chainId!=null){try{return this.chainId===se(e.chainId)}catch{}return!1}return e.name!=null?this.name===e.name:!1}return!1}get plugins(){return Array.from(y(this,Ms).values())}attachPlugin(e){if(y(this,Ms).get(e.name))throw new Error(`cannot replace existing plugin: ${e.name} `);return y(this,Ms).set(e.name,e.clone()),this}getPlugin(e){return y(this,Ms).get(e)||null}getPlugins(e){return this.plugins.filter(t=>t.name.split("#")[0]===e)}clone(){const e=new Xl(this.name,this.chainId);return this.plugins.forEach(t=>{e.attachPlugin(t.clone())}),e}computeIntrinsicGas(e){const t=this.getPlugin("org.ethers.plugins.network.GasCost")||new wy;let r=t.txBase;if(e.to==null&&(r+=t.txCreate),e.data)for(let i=2;i<e.data.length;i+=2)e.data.substring(i,i+2)==="00"?r+=t.txDataZero:r+=t.txDataNonzero;if(e.accessList){const i=ol(e.accessList);for(const s in i)r+=t.txAccessListAddress+t.txAccessListStorageKey*i[s].storageKeys.length}return r}static from(e){if(t6(),e==null)return Xl.from("mainnet");if(typeof e=="number"&&(e=BigInt(e)),typeof e=="string"||typeof e=="bigint"){const t=Z0.get(e);if(t)return t();if(typeof e=="bigint")return new Xl("unknown",e);O(!1,"unknown network","network",e)}if(typeof e.clone=="function")return e.clone();if(typeof e=="object"){O(typeof e.name=="string"&&typeof e.chainId=="number","invalid network object name or chainId","network",e);const t=new Xl(e.name,e.chainId);return(e.ensAddress||e.ensNetwork!=null)&&t.attachPlugin(new vy(e.ensAddress,e.ensNetwork)),t}O(!1,"invalid network","network",e)}static register(e,t){typeof e=="number"&&(e=BigInt(e));const r=Z0.get(e);r&&O(!1,`conflicting network for ${JSON.stringify(r.name)}`,"nameOrChainId",e),Z0.set(e,t)}};Gu=new WeakMap,Hu=new WeakMap,Ms=new WeakMap;let Zr=Xl;function yb(n,e){const t=String(n);if(!t.match(/^[0-9.]+$/))throw new Error(`invalid gwei value: ${n}`);const r=t.split(".");if(r.length===1&&r.push(""),r.length!==2)throw new Error(`invalid gwei value: ${n}`);for(;r[1].length<e;)r[1]+="0";if(r[1].length>9){let i=BigInt(r[1].substring(0,9));r[1].substring(9).match(/^0+$/)||i++,r[1]=i.toString()}return BigInt(r[0]+r[1])}function wb(n){return new e6(n,async(e,t,r)=>{r.setHeader("User-Agent","ethers");let i;try{const[s,o]=await Promise.all([r.send(),e()]);i=s;const a=i.bodyJson.standard;return{gasPrice:o.gasPrice,maxFeePerGas:yb(a.maxFee,9),maxPriorityFeePerGas:yb(a.maxPriorityFee,9)}}catch(s){$(!1,`error encountered with polygon gas station (${JSON.stringify(r.url)})`,"SERVER_ERROR",{request:r,response:i,error:s})}})}let vb=!1;function t6(){if(vb)return;vb=!0;function n(e,t,r){const i=function(){const s=new Zr(e,t);return r.ensNetwork!=null&&s.attachPlugin(new vy(null,r.ensNetwork)),s.attachPlugin(new wy),(r.plugins||[]).forEach(o=>{s.attachPlugin(o)}),s};Zr.register(e,i),Zr.register(t,i),r.altNames&&r.altNames.forEach(s=>{Zr.register(s,i)})}n("mainnet",1,{ensNetwork:1,altNames:["homestead"]}),n("ropsten",3,{ensNetwork:3}),n("rinkeby",4,{ensNetwork:4}),n("goerli",5,{ensNetwork:5}),n("kovan",42,{ensNetwork:42}),n("sepolia",11155111,{ensNetwork:11155111}),n("holesky",17e3,{ensNetwork:17e3}),n("classic",61,{}),n("classicKotti",6,{}),n("arbitrum",42161,{ensNetwork:1}),n("arbitrum-goerli",421613,{}),n("arbitrum-sepolia",421614,{}),n("base",8453,{ensNetwork:1}),n("base-goerli",84531,{}),n("base-sepolia",84532,{}),n("bnb",56,{ensNetwork:1}),n("bnbt",97,{}),n("linea",59144,{ensNetwork:1}),n("linea-goerli",59140,{}),n("linea-sepolia",59141,{}),n("matic",137,{ensNetwork:1,plugins:[wb("https://gasstation.polygon.technology/v2")]}),n("matic-amoy",80002,{}),n("matic-mumbai",80001,{altNames:["maticMumbai","maticmum"],plugins:[wb("https://gasstation-testnet.polygon.technology/v2")]}),n("optimism",10,{ensNetwork:1,plugins:[]}),n("optimism-goerli",420,{}),n("optimism-sepolia",11155420,{}),n("xdai",100,{ensNetwork:1})}function Mv(n){return JSON.parse(JSON.stringify(n))}var xi,Zn,Bs,Qr,$u,om;class n6{constructor(e){U(this,$u);U(this,xi,void 0);U(this,Zn,void 0);U(this,Bs,void 0);U(this,Qr,void 0);k(this,xi,e),k(this,Zn,null),k(this,Bs,4e3),k(this,Qr,-2)}get pollingInterval(){return y(this,Bs)}set pollingInterval(e){k(this,Bs,e)}start(){y(this,Zn)||(k(this,Zn,y(this,xi)._setTimeout(K(this,$u,om).bind(this),y(this,Bs))),K(this,$u,om).call(this))}stop(){y(this,Zn)&&(y(this,xi)._clearTimeout(y(this,Zn)),k(this,Zn,null))}pause(e){this.stop(),e&&k(this,Qr,-2)}resume(){this.start()}}xi=new WeakMap,Zn=new WeakMap,Bs=new WeakMap,Qr=new WeakMap,$u=new WeakSet,om=async function(){try{const e=await y(this,xi).getBlockNumber();if(y(this,Qr)===-2){k(this,Qr,e);return}if(e!==y(this,Qr)){for(let t=y(this,Qr)+1;t<=e;t++){if(y(this,Zn)==null)return;await y(this,xi).emit("block",t)}k(this,Qr,e)}}catch{}y(this,Zn)!=null&&k(this,Zn,y(this,xi)._setTimeout(K(this,$u,om).bind(this),y(this,Bs)))};var _a,Ea,Fs;class UE{constructor(e){U(this,_a,void 0);U(this,Ea,void 0);U(this,Fs,void 0);k(this,_a,e),k(this,Fs,!1),k(this,Ea,t=>{this._poll(t,y(this,_a))})}async _poll(e,t){throw new Error("sub-classes must override this")}start(){y(this,Fs)||(k(this,Fs,!0),y(this,Ea).call(this,-2),y(this,_a).on("block",y(this,Ea)))}stop(){y(this,Fs)&&(k(this,Fs,!1),y(this,_a).off("block",y(this,Ea)))}pause(e){this.stop()}resume(){this.start()}}_a=new WeakMap,Ea=new WeakMap,Fs=new WeakMap;var Ku,Si;class r6 extends UE{constructor(t,r){super(t);U(this,Ku,void 0);U(this,Si,void 0);k(this,Ku,r),k(this,Si,-2)}pause(t){t&&k(this,Si,-2),super.pause(t)}async _poll(t,r){const i=await r.getBlock(y(this,Ku));i!=null&&(y(this,Si)===-2?k(this,Si,i.number):i.number>y(this,Si)&&(r.emit(y(this,Ku),i.number),k(this,Si,i.number)))}}Ku=new WeakMap,Si=new WeakMap;var Bg;class i6 extends UE{constructor(t,r){super(t);U(this,Bg,void 0);k(this,Bg,Mv(r))}async _poll(t,r){throw new Error("@TODO")}}Bg=new WeakMap;var Qu;class s6 extends UE{constructor(t,r){super(t);U(this,Qu,void 0);k(this,Qu,r)}async _poll(t,r){const i=await r.getTransactionReceipt(y(this,Qu));i&&r.emit(y(this,Qu),i)}}Qu=new WeakMap;var Pi,qu,Wu,Us,er,Fg,Ck;class jE{constructor(e,t){U(this,Fg);U(this,Pi,void 0);U(this,qu,void 0);U(this,Wu,void 0);U(this,Us,void 0);U(this,er,void 0);k(this,Pi,e),k(this,qu,Mv(t)),k(this,Wu,K(this,Fg,Ck).bind(this)),k(this,Us,!1),k(this,er,-2)}start(){y(this,Us)||(k(this,Us,!0),y(this,er)===-2&&y(this,Pi).getBlockNumber().then(e=>{k(this,er,e)}),y(this,Pi).on("block",y(this,Wu)))}stop(){y(this,Us)&&(k(this,Us,!1),y(this,Pi).off("block",y(this,Wu)))}pause(e){this.stop(),e&&k(this,er,-2)}resume(){this.start()}}Pi=new WeakMap,qu=new WeakMap,Wu=new WeakMap,Us=new WeakMap,er=new WeakMap,Fg=new WeakSet,Ck=async function(e){if(y(this,er)===-2)return;const t=Mv(y(this,qu));t.fromBlock=y(this,er)+1,t.toBlock=e;const r=await y(this,Pi).getLogs(t);if(r.length===0){y(this,er)<e-60&&k(this,er,e-60);return}for(const i of r)y(this,Pi).emit(y(this,qu),i),k(this,er,i.blockNumber)};const o6=BigInt(2),a6=10;function Np(n){return n&&typeof n.then=="function"}function am(n,e){return n+":"+JSON.stringify(e,(t,r)=>{if(r==null)return"null";if(typeof r=="bigint")return`bigint:${r.toString()}`;if(typeof r=="string")return r.toLowerCase();if(typeof r=="object"&&!Array.isArray(r)){const i=Object.keys(r);return i.sort(),i.reduce((s,o)=>(s[o]=r[o],s),{})}return r})}class kk{constructor(e){B(this,"name");ce(this,{name:e})}start(){}stop(){}pause(e){}resume(){}}function l6(n){return JSON.parse(JSON.stringify(n))}function Bv(n){return n=Array.from(new Set(n).values()),n.sort(),n}async function ew(n,e){if(n==null)throw new Error("invalid event");if(Array.isArray(n)&&(n={topics:n}),typeof n=="string")switch(n){case"block":case"debug":case"error":case"finalized":case"network":case"pending":case"safe":return{type:n,tag:n}}if(je(n,32)){const t=n.toLowerCase();return{type:"transaction",tag:am("tx",{hash:t}),hash:t}}if(n.orphan){const t=n;return{type:"orphan",tag:am("orphan",t),filter:l6(t)}}if(n.address||n.topics){const t=n,r={topics:(t.topics||[]).map(i=>i==null?null:Array.isArray(i)?Bv(i.map(s=>s.toLowerCase())):i.toLowerCase())};if(t.address){const i=[],s=[],o=a=>{je(a)?i.push(a):s.push((async()=>{i.push(await dn(a,e))})())};Array.isArray(t.address)?t.address.forEach(o):o(t.address),s.length&&await Promise.all(s),r.address=Bv(i.map(a=>a.toLowerCase()))}return{filter:r,tag:am("event",r),type:"event"}}O(!1,"unknown ProviderEvent","event",n)}function tw(){return new Date().getTime()}const u6={cacheTimeout:250,pollingInterval:4e3};var Qt,js,qt,Ju,jn,Aa,zs,Ri,hf,tr,Yu,Xu,sn,Vn,df,Fv,ff,Uv,Ia,Nh,pf,jv,Ta,Dh,Zu,lm;class c6{constructor(e,t){U(this,sn);U(this,df);U(this,ff);U(this,Ia);U(this,pf);U(this,Ta);U(this,Zu);U(this,Qt,void 0);U(this,js,void 0);U(this,qt,void 0);U(this,Ju,void 0);U(this,jn,void 0);U(this,Aa,void 0);U(this,zs,void 0);U(this,Ri,void 0);U(this,hf,void 0);U(this,tr,void 0);U(this,Yu,void 0);U(this,Xu,void 0);if(k(this,Xu,Object.assign({},u6,t||{})),e==="any")k(this,Aa,!0),k(this,jn,null);else if(e){const r=Zr.from(e);k(this,Aa,!1),k(this,jn,Promise.resolve(r)),setTimeout(()=>{this.emit("network",r,null)},0)}else k(this,Aa,!1),k(this,jn,null);k(this,Ri,-1),k(this,zs,new Map),k(this,Qt,new Map),k(this,js,new Map),k(this,qt,null),k(this,Ju,!1),k(this,hf,1),k(this,tr,new Map),k(this,Yu,!1)}get pollingInterval(){return y(this,Xu).pollingInterval}get provider(){return this}get plugins(){return Array.from(y(this,js).values())}attachPlugin(e){if(y(this,js).get(e.name))throw new Error(`cannot replace existing plugin: ${e.name} `);return y(this,js).set(e.name,e.connect(this)),this}getPlugin(e){return y(this,js).get(e)||null}get disableCcipRead(){return y(this,Yu)}set disableCcipRead(e){k(this,Yu,!!e)}async ccipReadFetch(e,t,r){if(this.disableCcipRead||r.length===0||e.to==null)return null;const i=e.to.toLowerCase(),s=t.toLowerCase(),o=[];for(let a=0;a<r.length;a++){const l=r[a],c=l.replace("{sender}",i).replace("{data}",s),h=new mo(c);l.indexOf("{data}")===-1&&(h.body={data:s,sender:i}),this.emit("debug",{action:"sendCcipReadFetchRequest",request:h,index:a,urls:r});let d="unknown error",p;try{p=await h.send()}catch(g){o.push(g.message),this.emit("debug",{action:"receiveCcipReadFetchError",request:h,result:{error:g}});continue}try{const g=p.bodyJson;if(g.data)return this.emit("debug",{action:"receiveCcipReadFetchResult",request:h,result:g}),g.data;g.message&&(d=g.message),this.emit("debug",{action:"receiveCcipReadFetchError",request:h,result:g})}catch{}$(p.statusCode<400||p.statusCode>=500,`response not found during CCIP fetch: ${d}`,"OFFCHAIN_FAULT",{reason:"404_MISSING_RESOURCE",transaction:e,info:{url:l,errorMessage:d}}),o.push(d)}$(!1,`error encountered during CCIP fetch: ${o.map(a=>JSON.stringify(a)).join(", ")}`,"OFFCHAIN_FAULT",{reason:"500_SERVER_ERROR",transaction:e,info:{urls:r,errorMessages:o}})}_wrapBlock(e,t){return new R3(q3(e),this)}_wrapLog(e,t){return new Pf(K3(e),this)}_wrapTransactionReceipt(e,t){return new gk(X3(e),this)}_wrapTransactionResponse(e,t){return new Dd(Rk(e),this)}_detectNetwork(){$(!1,"sub-classes must implement this","UNSUPPORTED_OPERATION",{operation:"_detectNetwork"})}async _perform(e){$(!1,`unsupported method: ${e.method}`,"UNSUPPORTED_OPERATION",{operation:e.method,info:e})}async getBlockNumber(){const e=ge(await K(this,sn,Vn).call(this,{method:"getBlockNumber"}),"%response");return y(this,Ri)>=0&&k(this,Ri,e),e}_getAddress(e){return dn(e,this)}_getBlockTag(e){if(e==null)return"latest";switch(e){case"earliest":return"0x0";case"finalized":case"latest":case"pending":case"safe":return e}if(je(e))return je(e,32)?e:Oi(e);if(typeof e=="bigint"&&(e=ge(e,"blockTag")),typeof e=="number")return e>=0?Oi(e):y(this,Ri)>=0?Oi(y(this,Ri)+e):this.getBlockNumber().then(t=>Oi(t+e));O(!1,"invalid blockTag","blockTag",e)}_getFilter(e){const t=(e.topics||[]).map(l=>l==null?null:Array.isArray(l)?Bv(l.map(c=>c.toLowerCase())):l.toLowerCase()),r="blockHash"in e?e.blockHash:void 0,i=(l,c,h)=>{let d;switch(l.length){case 0:break;case 1:d=l[0];break;default:l.sort(),d=l}if(r&&(c!=null||h!=null))throw new Error("invalid filter");const p={};return d&&(p.address=d),t.length&&(p.topics=t),c&&(p.fromBlock=c),h&&(p.toBlock=h),r&&(p.blockHash=r),p};let s=[];if(e.address)if(Array.isArray(e.address))for(const l of e.address)s.push(this._getAddress(l));else s.push(this._getAddress(e.address));let o;"fromBlock"in e&&(o=this._getBlockTag(e.fromBlock));let a;return"toBlock"in e&&(a=this._getBlockTag(e.toBlock)),s.filter(l=>typeof l!="string").length||o!=null&&typeof o!="string"||a!=null&&typeof a!="string"?Promise.all([Promise.all(s),o,a]).then(l=>i(l[0],l[1],l[2])):i(s,o,a)}_getTransactionRequest(e){const t=lg(e),r=[];if(["to","from"].forEach(i=>{if(t[i]==null)return;const s=dn(t[i],this);Np(s)?r.push(async function(){t[i]=await s}()):t[i]=s}),t.blockTag!=null){const i=this._getBlockTag(t.blockTag);Np(i)?r.push(async function(){t.blockTag=await i}()):t.blockTag=i}return r.length?async function(){return await Promise.all(r),t}():t}async getNetwork(){if(y(this,jn)==null){const i=(async()=>{try{const s=await this._detectNetwork();return this.emit("network",s,null),s}catch(s){throw y(this,jn)===i&&k(this,jn,null),s}})();return k(this,jn,i),(await i).clone()}const e=y(this,jn),[t,r]=await Promise.all([e,this._detectNetwork()]);return t.chainId!==r.chainId&&(y(this,Aa)?(this.emit("network",r,t),y(this,jn)===e&&k(this,jn,Promise.resolve(r))):$(!1,`network changed: ${t.chainId} => ${r.chainId} `,"NETWORK_ERROR",{event:"changed"})),t.clone()}async getFeeData(){const e=await this.getNetwork(),t=async()=>{const{_block:i,gasPrice:s,priorityFee:o}=await ln({_block:K(this,pf,jv).call(this,"latest",!1),gasPrice:(async()=>{try{const h=await K(this,sn,Vn).call(this,{method:"getGasPrice"});return se(h,"%response")}catch{}return null})(),priorityFee:(async()=>{try{const h=await K(this,sn,Vn).call(this,{method:"getPriorityFee"});return se(h,"%response")}catch{}return null})()});let a=null,l=null;const c=this._wrapBlock(i,e);return c&&c.baseFeePerGas&&(l=o??BigInt("1000000000"),a=c.baseFeePerGas*o6+l),new db(s,a,l)},r=e.getPlugin("org.ethers.plugins.network.FetchUrlFeeDataPlugin");if(r){const i=new mo(r.url),s=await r.processFunc(t,this,i);return new db(s.gasPrice,s.maxFeePerGas,s.maxPriorityFeePerGas)}return await t()}async estimateGas(e){let t=this._getTransactionRequest(e);return Np(t)&&(t=await t),se(await K(this,sn,Vn).call(this,{method:"estimateGas",transaction:t}),"%response")}async call(e){const{tx:t,blockTag:r}=await ln({tx:this._getTransactionRequest(e),blockTag:this._getBlockTag(e.blockTag)});return await K(this,ff,Uv).call(this,K(this,df,Fv).call(this,t,r,e.enableCcipRead?0:-1))}async getBalance(e,t){return se(await K(this,Ia,Nh).call(this,{method:"getBalance"},e,t),"%response")}async getTransactionCount(e,t){return ge(await K(this,Ia,Nh).call(this,{method:"getTransactionCount"},e,t),"%response")}async getCode(e,t){return te(await K(this,Ia,Nh).call(this,{method:"getCode"},e,t))}async getStorage(e,t,r){const i=se(t,"position");return te(await K(this,Ia,Nh).call(this,{method:"getStorage",position:i},e,r))}async broadcastTransaction(e){const{blockNumber:t,hash:r,network:i}=await ln({blockNumber:this.getBlockNumber(),hash:this._perform({method:"broadcastTransaction",signedTransaction:e}),network:this.getNetwork()}),s=tg.from(e);if(s.hash!==r)throw new Error("@TODO: the returned hash did not match");return this._wrapTransactionResponse(s,i).replaceableTransaction(t)}async getBlock(e,t){const{network:r,params:i}=await ln({network:this.getNetwork(),params:K(this,pf,jv).call(this,e,!!t)});return i==null?null:this._wrapBlock(i,r)}async getTransaction(e){const{network:t,params:r}=await ln({network:this.getNetwork(),params:K(this,sn,Vn).call(this,{method:"getTransaction",hash:e})});return r==null?null:this._wrapTransactionResponse(r,t)}async getTransactionReceipt(e){const{network:t,params:r}=await ln({network:this.getNetwork(),params:K(this,sn,Vn).call(this,{method:"getTransactionReceipt",hash:e})});if(r==null)return null;if(r.gasPrice==null&&r.effectiveGasPrice==null){const i=await K(this,sn,Vn).call(this,{method:"getTransaction",hash:e});if(i==null)throw new Error("report this; could not find tx or effectiveGasPrice");r.effectiveGasPrice=i.gasPrice}return this._wrapTransactionReceipt(r,t)}async getTransactionResult(e){const{result:t}=await ln({network:this.getNetwork(),result:K(this,sn,Vn).call(this,{method:"getTransactionResult",hash:e})});return t==null?null:te(t)}async getLogs(e){let t=this._getFilter(e);Np(t)&&(t=await t);const{network:r,params:i}=await ln({network:this.getNetwork(),params:K(this,sn,Vn).call(this,{method:"getLogs",filter:t})});return i.map(s=>this._wrapLog(s,r))}_getProvider(e){$(!1,"provider cannot connect to target network","UNSUPPORTED_OPERATION",{operation:"_getProvider()"})}async getResolver(e){return await cg.fromName(this,e)}async getAvatar(e){const t=await this.getResolver(e);return t?await t.getAvatar():null}async resolveName(e){const t=await this.getResolver(e);return t?await t.getAddress():null}async lookupAddress(e){e=De(e);const t=kv(e.substring(2).toLowerCase()+".addr.reverse");try{const r=await cg.getEnsAddress(this),s=await new uu(r,["function resolver(bytes32) view returns (address)"],this).resolver(t);if(s==null||s===bd)return null;const a=await new uu(s,["function name(bytes32) view returns (string)"],this).name(t);return await this.resolveName(a)!==e?null:a}catch(r){if(Ot(r,"BAD_DATA")&&r.value==="0x"||Ot(r,"CALL_EXCEPTION"))return null;throw r}return null}async waitForTransaction(e,t,r){const i=t??1;return i===0?this.getTransactionReceipt(e):new Promise(async(s,o)=>{let a=null;const l=async c=>{try{const h=await this.getTransactionReceipt(e);if(h!=null&&c-h.blockNumber+1>=i){s(h),a&&(clearTimeout(a),a=null);return}}catch(h){console.log("EEE",h)}this.once("block",l)};r!=null&&(a=setTimeout(()=>{a!=null&&(a=null,this.off("block",l),o($e("timeout","TIMEOUT",{reason:"timeout"})))},r)),l(await this.getBlockNumber())})}async waitForBlock(e){$(!1,"not implemented yet","NOT_IMPLEMENTED",{operation:"waitForBlock"})}_clearTimeout(e){const t=y(this,tr).get(e);t&&(t.timer&&clearTimeout(t.timer),y(this,tr).delete(e))}_setTimeout(e,t){t==null&&(t=0);const r=oh(this,hf)._++,i=()=>{y(this,tr).delete(r),e()};if(this.paused)y(this,tr).set(r,{timer:null,func:i,time:t});else{const s=setTimeout(i,t);y(this,tr).set(r,{timer:s,func:i,time:tw()})}return r}_forEachSubscriber(e){for(const t of y(this,Qt).values())e(t.subscriber)}_getSubscriber(e){switch(e.type){case"debug":case"error":case"network":return new kk(e.type);case"block":{const t=new n6(this);return t.pollingInterval=this.pollingInterval,t}case"safe":case"finalized":return new r6(this,e.type);case"event":return new jE(this,e.filter);case"transaction":return new s6(this,e.hash);case"orphan":return new i6(this,e.filter)}throw new Error(`unsupported event: ${e.type}`)}_recoverSubscriber(e,t){for(const r of y(this,Qt).values())if(r.subscriber===e){r.started&&r.subscriber.stop(),r.subscriber=t,r.started&&t.start(),y(this,qt)!=null&&t.pause(y(this,qt));break}}async on(e,t){const r=await K(this,Zu,lm).call(this,e);return r.listeners.push({listener:t,once:!1}),r.started||(r.subscriber.start(),r.started=!0,y(this,qt)!=null&&r.subscriber.pause(y(this,qt))),this}async once(e,t){const r=await K(this,Zu,lm).call(this,e);return r.listeners.push({listener:t,once:!0}),r.started||(r.subscriber.start(),r.started=!0,y(this,qt)!=null&&r.subscriber.pause(y(this,qt))),this}async emit(e,...t){const r=await K(this,Ta,Dh).call(this,e,t);if(!r||r.listeners.length===0)return!1;const i=r.listeners.length;return r.listeners=r.listeners.filter(({listener:s,once:o})=>{const a=new HR(this,o?null:s,e);try{s.call(this,...t,a)}catch{}return!o}),r.listeners.length===0&&(r.started&&r.subscriber.stop(),y(this,Qt).delete(r.tag)),i>0}async listenerCount(e){if(e){const r=await K(this,Ta,Dh).call(this,e);return r?r.listeners.length:0}let t=0;for(const{listeners:r}of y(this,Qt).values())t+=r.length;return t}async listeners(e){if(e){const r=await K(this,Ta,Dh).call(this,e);return r?r.listeners.map(({listener:i})=>i):[]}let t=[];for(const{listeners:r}of y(this,Qt).values())t=t.concat(r.map(({listener:i})=>i));return t}async off(e,t){const r=await K(this,Ta,Dh).call(this,e);if(!r)return this;if(t){const i=r.listeners.map(({listener:s})=>s).indexOf(t);i>=0&&r.listeners.splice(i,1)}return(!t||r.listeners.length===0)&&(r.started&&r.subscriber.stop(),y(this,Qt).delete(r.tag)),this}async removeAllListeners(e){if(e){const{tag:t,started:r,subscriber:i}=await K(this,Zu,lm).call(this,e);r&&i.stop(),y(this,Qt).delete(t)}else for(const[t,{started:r,subscriber:i}]of y(this,Qt))r&&i.stop(),y(this,Qt).delete(t);return this}async addListener(e,t){return await this.on(e,t)}async removeListener(e,t){return this.off(e,t)}get destroyed(){return y(this,Ju)}destroy(){this.removeAllListeners();for(const e of y(this,tr).keys())this._clearTimeout(e);k(this,Ju,!0)}get paused(){return y(this,qt)!=null}set paused(e){!!e!==this.paused&&(this.paused?this.resume():this.pause(!1))}pause(e){if(k(this,Ri,-1),y(this,qt)!=null){if(y(this,qt)==!!e)return;$(!1,"cannot change pause type; resume first","UNSUPPORTED_OPERATION",{operation:"pause"})}this._forEachSubscriber(t=>t.pause(e)),k(this,qt,!!e);for(const t of y(this,tr).values())t.timer&&clearTimeout(t.timer),t.time=tw()-t.time}resume(){if(y(this,qt)!=null){this._forEachSubscriber(e=>e.resume()),k(this,qt,null);for(const e of y(this,tr).values()){let t=e.time;t<0&&(t=0),e.time=tw(),setTimeout(e.func,t)}}}}Qt=new WeakMap,js=new WeakMap,qt=new WeakMap,Ju=new WeakMap,jn=new WeakMap,Aa=new WeakMap,zs=new WeakMap,Ri=new WeakMap,hf=new WeakMap,tr=new WeakMap,Yu=new WeakMap,Xu=new WeakMap,sn=new WeakSet,Vn=async function(e){const t=y(this,Xu).cacheTimeout;if(t<0)return await this._perform(e);const r=am(e.method,e);let i=y(this,zs).get(r);return i||(i=this._perform(e),y(this,zs).set(r,i),setTimeout(()=>{y(this,zs).get(r)===i&&y(this,zs).delete(r)},t)),await i},df=new WeakSet,Fv=async function(e,t,r){$(r<a6,"CCIP read exceeded maximum redirections","OFFCHAIN_FAULT",{reason:"TOO_MANY_REDIRECTS",transaction:Object.assign({},e,{blockTag:t,enableCcipRead:!0})});const i=lg(e);try{return te(await this._perform({method:"call",transaction:i,blockTag:t}))}catch(s){if(!this.disableCcipRead&&IE(s)&&s.data&&r>=0&&t==="latest"&&i.to!=null&&rt(s.data,0,4)==="0x556f1830"){const o=s.data,a=await dn(i.to,this);let l;try{l=m6(rt(s.data,4))}catch(d){$(!1,d.message,"OFFCHAIN_FAULT",{reason:"BAD_DATA",transaction:i,info:{data:o}})}$(l.sender.toLowerCase()===a.toLowerCase(),"CCIP Read sender mismatch","CALL_EXCEPTION",{action:"call",data:o,reason:"OffchainLookup",transaction:i,invocation:null,revert:{signature:"OffchainLookup(address,string[],bytes,bytes4,bytes)",name:"OffchainLookup",args:l.errorArgs}});const c=await this.ccipReadFetch(i,l.calldata,l.urls);$(c!=null,"CCIP Read failed to fetch data","OFFCHAIN_FAULT",{reason:"FETCH_FAILED",transaction:i,info:{data:s.data,errorArgs:l.errorArgs}});const h={to:a,data:ot([l.selector,p6([c,l.extraData])])};this.emit("debug",{action:"sendCcipReadCall",transaction:h});try{const d=await K(this,df,Fv).call(this,h,t,r+1);return this.emit("debug",{action:"receiveCcipReadCallResult",transaction:Object.assign({},h),result:d}),d}catch(d){throw this.emit("debug",{action:"receiveCcipReadCallError",transaction:Object.assign({},h),error:d}),d}}throw s}},ff=new WeakSet,Uv=async function(e){const{value:t}=await ln({network:this.getNetwork(),value:e});return t},Ia=new WeakSet,Nh=async function(e,t,r){let i=this._getAddress(t),s=this._getBlockTag(r);return(typeof i!="string"||typeof s!="string")&&([i,s]=await Promise.all([i,s])),await K(this,ff,Uv).call(this,K(this,sn,Vn).call(this,Object.assign(e,{address:i,blockTag:s})))},pf=new WeakSet,jv=async function(e,t){if(je(e,32))return await K(this,sn,Vn).call(this,{method:"getBlock",blockHash:e,includeTransactions:t});let r=this._getBlockTag(e);return typeof r!="string"&&(r=await r),await K(this,sn,Vn).call(this,{method:"getBlock",blockTag:r,includeTransactions:t})},Ta=new WeakSet,Dh=async function(e,t){let r=await ew(e,this);return r.type==="event"&&t&&t.length>0&&t[0].removed===!0&&(r=await ew({orphan:"drop-log",log:t[0]},this)),y(this,Qt).get(r.tag)||null},Zu=new WeakSet,lm=async function(e){const t=await ew(e,this),r=t.tag;let i=y(this,Qt).get(r);return i||(i={subscriber:this._getSubscriber(t),tag:r,addressableMap:new WeakMap,nameMap:new Map,started:!1,listeners:[]},y(this,Qt).set(r,i)),i};function h6(n,e){try{const t=zv(n,e);if(t)return Xm(t)}catch{}return null}function zv(n,e){if(n==="0x")return null;try{const t=ge(rt(n,e,e+32)),r=ge(rt(n,t,t+32));return rt(n,t+32,t+32+r)}catch{}return null}function _b(n){const e=Lt(n);if(e.length>32)throw new Error("internal; should not happen");const t=new Uint8Array(32);return t.set(e,32-e.length),t}function d6(n){if(n.length%32===0)return n;const e=new Uint8Array(Math.ceil(n.length/32)*32);return e.set(n),e}const f6=new Uint8Array([]);function p6(n){const e=[];let t=0;for(let r=0;r<n.length;r++)e.push(f6),t+=32;for(let r=0;r<n.length;r++){const i=we(n[r]);e[r]=_b(t),e.push(_b(i.length)),e.push(d6(i)),t+=32+Math.ceil(i.length/32)*32}return ot(e)}const Eb="0x0000000000000000000000000000000000000000000000000000000000000000";function m6(n){const e={sender:"",urls:[],calldata:"",selector:"",extraData:"",errorArgs:[]};$(su(n)>=5*32,"insufficient OffchainLookup data","OFFCHAIN_FAULT",{reason:"insufficient OffchainLookup data"});const t=rt(n,0,32);$(rt(t,0,12)===rt(Eb,0,12),"corrupt OffchainLookup sender","OFFCHAIN_FAULT",{reason:"corrupt OffchainLookup sender"}),e.sender=rt(t,12);try{const r=[],i=ge(rt(n,32,64)),s=ge(rt(n,i,i+32)),o=rt(n,i+32);for(let a=0;a<s;a++){const l=h6(o,a*32);if(l==null)throw new Error("abort");r.push(l)}e.urls=r}catch{$(!1,"corrupt OffchainLookup urls","OFFCHAIN_FAULT",{reason:"corrupt OffchainLookup urls"})}try{const r=zv(n,64);if(r==null)throw new Error("abort");e.calldata=r}catch{$(!1,"corrupt OffchainLookup calldata","OFFCHAIN_FAULT",{reason:"corrupt OffchainLookup calldata"})}$(rt(n,100,128)===rt(Eb,0,28),"corrupt OffchainLookup callbaackSelector","OFFCHAIN_FAULT",{reason:"corrupt OffchainLookup callbaackSelector"}),e.selector=rt(n,96,100);try{const r=zv(n,128);if(r==null)throw new Error("abort");e.extraData=r}catch{$(!1,"corrupt OffchainLookup extraData","OFFCHAIN_FAULT",{reason:"corrupt OffchainLookup extraData"})}return e.errorArgs="sender,urls,calldata,selector,extraData".split(/,/).map(r=>e[r]),e}function Vo(n,e){if(n.provider)return n.provider;$(!1,"missing provider","UNSUPPORTED_OPERATION",{operation:e})}async function Ab(n,e){let t=lg(e);if(t.to!=null&&(t.to=dn(t.to,n)),t.from!=null){const r=t.from;t.from=Promise.all([n.getAddress(),dn(r,n)]).then(([i,s])=>(O(i.toLowerCase()===s.toLowerCase(),"transaction from mismatch","tx.from",s),i))}else t.from=n.getAddress();return await ln(t)}class g6{constructor(e){B(this,"provider");ce(this,{provider:e||null})}async getNonce(e){return Vo(this,"getTransactionCount").getTransactionCount(await this.getAddress(),e)}async populateCall(e){return await Ab(this,e)}async populateTransaction(e){const t=Vo(this,"populateTransaction"),r=await Ab(this,e);r.nonce==null&&(r.nonce=await this.getNonce("pending")),r.gasLimit==null&&(r.gasLimit=await this.estimateGas(r));const i=await this.provider.getNetwork();if(r.chainId!=null){const o=se(r.chainId);O(o===i.chainId,"transaction chainId mismatch","tx.chainId",e.chainId)}else r.chainId=i.chainId;const s=r.maxFeePerGas!=null||r.maxPriorityFeePerGas!=null;if(r.gasPrice!=null&&(r.type===2||s)?O(!1,"eip-1559 transaction do not support gasPrice","tx",e):(r.type===0||r.type===1)&&s&&O(!1,"pre-eip-1559 transaction do not support maxFeePerGas/maxPriorityFeePerGas","tx",e),(r.type===2||r.type==null)&&r.maxFeePerGas!=null&&r.maxPriorityFeePerGas!=null)r.type=2;else if(r.type===0||r.type===1){const o=await t.getFeeData();$(o.gasPrice!=null,"network does not support gasPrice","UNSUPPORTED_OPERATION",{operation:"getGasPrice"}),r.gasPrice==null&&(r.gasPrice=o.gasPrice)}else{const o=await t.getFeeData();if(r.type==null)if(o.maxFeePerGas!=null&&o.maxPriorityFeePerGas!=null)if(r.authorizationList&&r.authorizationList.length?r.type=4:r.type=2,r.gasPrice!=null){const a=r.gasPrice;delete r.gasPrice,r.maxFeePerGas=a,r.maxPriorityFeePerGas=a}else r.maxFeePerGas==null&&(r.maxFeePerGas=o.maxFeePerGas),r.maxPriorityFeePerGas==null&&(r.maxPriorityFeePerGas=o.maxPriorityFeePerGas);else o.gasPrice!=null?($(!s,"network does not support EIP-1559","UNSUPPORTED_OPERATION",{operation:"populateTransaction"}),r.gasPrice==null&&(r.gasPrice=o.gasPrice),r.type=0):$(!1,"failed to get consistent fee data","UNSUPPORTED_OPERATION",{operation:"signer.getFeeData"});else(r.type===2||r.type===3||r.type===4)&&(r.maxFeePerGas==null&&(r.maxFeePerGas=o.maxFeePerGas),r.maxPriorityFeePerGas==null&&(r.maxPriorityFeePerGas=o.maxPriorityFeePerGas))}return await ln(r)}async populateAuthorization(e){const t=Object.assign({},e);return t.chainId==null&&(t.chainId=(await Vo(this,"getNetwork").getNetwork()).chainId),t.nonce==null&&(t.nonce=await this.getNonce()),t}async estimateGas(e){return Vo(this,"estimateGas").estimateGas(await this.populateCall(e))}async call(e){return Vo(this,"call").call(await this.populateCall(e))}async resolveName(e){return await Vo(this,"resolveName").resolveName(e)}async sendTransaction(e){const t=Vo(this,"sendTransaction"),r=await this.populateTransaction(e);delete r.from;const i=tg.from(r);return await t.broadcastTransaction(await this.signTransaction(i))}authorize(e){$(!1,"authorization not implemented for this signer","UNSUPPORTED_OPERATION",{operation:"authorize"})}}function y6(n){return JSON.parse(JSON.stringify(n))}var on,qr,ba,Gs,xa,ec,mf,Gv,gf,Hv;class Nk{constructor(e){U(this,mf);U(this,gf);U(this,on,void 0);U(this,qr,void 0);U(this,ba,void 0);U(this,Gs,void 0);U(this,xa,void 0);U(this,ec,void 0);k(this,on,e),k(this,qr,null),k(this,ba,K(this,mf,Gv).bind(this)),k(this,Gs,!1),k(this,xa,null),k(this,ec,!1)}_subscribe(e){throw new Error("subclasses must override this")}_emitResults(e,t){throw new Error("subclasses must override this")}_recover(e){throw new Error("subclasses must override this")}start(){y(this,Gs)||(k(this,Gs,!0),K(this,mf,Gv).call(this,-2))}stop(){y(this,Gs)&&(k(this,Gs,!1),k(this,ec,!0),K(this,gf,Hv).call(this),y(this,on).off("block",y(this,ba)))}pause(e){e&&K(this,gf,Hv).call(this),y(this,on).off("block",y(this,ba))}resume(){this.start()}}on=new WeakMap,qr=new WeakMap,ba=new WeakMap,Gs=new WeakMap,xa=new WeakMap,ec=new WeakMap,mf=new WeakSet,Gv=async function(e){try{y(this,qr)==null&&k(this,qr,this._subscribe(y(this,on)));let t=null;try{t=await y(this,qr)}catch(s){if(!Ot(s,"UNSUPPORTED_OPERATION")||s.operation!=="eth_newFilter")throw s}if(t==null){k(this,qr,null),y(this,on)._recoverSubscriber(this,this._recover(y(this,on)));return}const r=await y(this,on).getNetwork();if(y(this,xa)||k(this,xa,r),y(this,xa).chainId!==r.chainId)throw new Error("chaid changed");if(y(this,ec))return;const i=await y(this,on).send("eth_getFilterChanges",[t]);await this._emitResults(y(this,on),i)}catch(t){console.log("@TODO",t)}y(this,on).once("block",y(this,ba))},gf=new WeakSet,Hv=function(){const e=y(this,qr);e&&(k(this,qr,null),e.then(t=>{y(this,on).destroyed||y(this,on).send("eth_uninstallFilter",[t])}))};var Sa;class w6 extends Nk{constructor(t,r){super(t);U(this,Sa,void 0);k(this,Sa,y6(r))}_recover(t){return new jE(t,y(this,Sa))}async _subscribe(t){return await t.send("eth_newFilter",[y(this,Sa)])}async _emitResults(t,r){for(const i of r)t.emit(y(this,Sa),t._wrapLog(i,t._network))}}Sa=new WeakMap;class v6 extends Nk{async _subscribe(e){return await e.send("eth_newPendingTransactionFilter",[])}async _emitResults(e,t){for(const r of t)e.emit("pending",r)}}const _6="bigint,boolean,function,number,string,symbol".split(/,/g);function um(n){if(n==null||_6.indexOf(typeof n)>=0||typeof n.getAddress=="function")return n;if(Array.isArray(n))return n.map(um);if(typeof n=="object")return Object.keys(n).reduce((e,t)=>(e[t]=n[t],e),{});throw new Error(`should not happen: ${n} (${typeof n})`)}function E6(n){return new Promise(e=>{setTimeout(e,n)})}function El(n){return n&&n.toLowerCase()}function Ib(n){return n&&typeof n.pollingInterval=="number"}const Dk={polling:!1,staticNetwork:null,batchStallTime:10,batchMaxSize:1<<20,batchMaxCount:100,cacheTimeout:250,pollingInterval:4e3};class nw extends g6{constructor(t,r){super(t);B(this,"address");r=De(r),ce(this,{address:r})}connect(t){$(!1,"cannot reconnect JsonRpcSigner","UNSUPPORTED_OPERATION",{operation:"signer.connect"})}async getAddress(){return this.address}async populateTransaction(t){return await this.populateCall(t)}async sendUncheckedTransaction(t){const r=um(t),i=[];if(r.from){const o=r.from;i.push((async()=>{const a=await dn(o,this.provider);O(a!=null&&a.toLowerCase()===this.address.toLowerCase(),"from address mismatch","transaction",t),r.from=a})())}else r.from=this.address;if(r.gasLimit==null&&i.push((async()=>{r.gasLimit=await this.provider.estimateGas({...r,from:this.address})})()),r.to!=null){const o=r.to;i.push((async()=>{r.to=await dn(o,this.provider)})())}i.length&&await Promise.all(i);const s=this.provider.getRpcTransaction(r);return this.provider.send("eth_sendTransaction",[s])}async sendTransaction(t){const r=await this.provider.getBlockNumber(),i=await this.sendUncheckedTransaction(t);return await new Promise((s,o)=>{const a=[1e3,100];let l=0;const c=async()=>{try{const h=await this.provider.getTransaction(i);if(h!=null){s(h.replaceableTransaction(r));return}}catch(h){if(Ot(h,"CANCELLED")||Ot(h,"BAD_DATA")||Ot(h,"NETWORK_ERROR")||Ot(h,"UNSUPPORTED_OPERATION")){h.info==null&&(h.info={}),h.info.sendTransactionHash=i,o(h);return}if(Ot(h,"INVALID_ARGUMENT")&&(l++,h.info==null&&(h.info={}),h.info.sendTransactionHash=i,l>10)){o(h);return}this.provider.emit("error",$e("failed to fetch transation after sending (will try again)","UNKNOWN_ERROR",{error:h}))}this.provider._setTimeout(()=>{c()},a.pop()||4e3)};c()})}async signTransaction(t){const r=um(t);if(r.from){const s=await dn(r.from,this.provider);O(s!=null&&s.toLowerCase()===this.address.toLowerCase(),"from address mismatch","transaction",t),r.from=s}else r.from=this.address;const i=this.provider.getRpcTransaction(r);return await this.provider.send("eth_signTransaction",[i])}async signMessage(t){const r=typeof t=="string"?zi(t):t;return await this.provider.send("personal_sign",[te(r),this.address.toLowerCase()])}async signTypedData(t,r,i){const s=um(i),o=await ag.resolveNames(t,r,s,async a=>{const l=await dn(a);return O(l!=null,"TypedData does not support null address","value",a),l});return await this.provider.send("eth_signTypedData_v4",[this.address.toLowerCase(),JSON.stringify(ag.getPayload(o.domain,r,o.value))])}async unlock(t){return this.provider.send("personal_unlockAccount",[this.address.toLowerCase(),t,null])}async _legacySignMessage(t){const r=typeof t=="string"?zi(t):t;return await this.provider.send("eth_sign",[this.address.toLowerCase(),te(r)])}}var Pa,tc,Ci,Wr,xr,nr,An,yf,$v;class A6 extends c6{constructor(t,r){super(t,r);U(this,yf);U(this,Pa,void 0);U(this,tc,void 0);U(this,Ci,void 0);U(this,Wr,void 0);U(this,xr,void 0);U(this,nr,void 0);U(this,An,void 0);k(this,tc,1),k(this,Pa,Object.assign({},Dk,r||{})),k(this,Ci,[]),k(this,Wr,null),k(this,nr,null),k(this,An,null);{let s=null;const o=new Promise(a=>{s=a});k(this,xr,{promise:o,resolve:s})}const i=this._getOption("staticNetwork");typeof i=="boolean"?(O(!i||t!=="any","staticNetwork cannot be used on special network 'any'","options",r),i&&t!=null&&k(this,nr,Zr.from(t))):i&&(O(t==null||i.matches(t),"staticNetwork MUST match network object","options",r),k(this,nr,i))}_getOption(t){return y(this,Pa)[t]}get _network(){return $(y(this,nr),"network is not available yet","NETWORK_ERROR"),y(this,nr)}async _perform(t){if(t.method==="call"||t.method==="estimateGas"){let i=t.transaction;if(i&&i.type!=null&&se(i.type)&&i.maxFeePerGas==null&&i.maxPriorityFeePerGas==null){const s=await this.getFeeData();s.maxFeePerGas==null&&s.maxPriorityFeePerGas==null&&(t=Object.assign({},t,{transaction:Object.assign({},i,{type:void 0})}))}}const r=this.getRpcRequest(t);return r!=null?await this.send(r.method,r.args):super._perform(t)}async _detectNetwork(){const t=this._getOption("staticNetwork");if(t)if(t===!0){if(y(this,nr))return y(this,nr)}else return t;return y(this,An)?await y(this,An):this.ready?(k(this,An,(async()=>{try{const r=Zr.from(se(await this.send("eth_chainId",[])));return k(this,An,null),r}catch(r){throw k(this,An,null),r}})()),await y(this,An)):(k(this,An,(async()=>{const r={id:oh(this,tc)._++,method:"eth_chainId",params:[],jsonrpc:"2.0"};this.emit("debug",{action:"sendRpcPayload",payload:r});let i;try{i=(await this._send(r))[0],k(this,An,null)}catch(s){throw k(this,An,null),this.emit("debug",{action:"receiveRpcError",error:s}),s}if(this.emit("debug",{action:"receiveRpcResult",result:i}),"result"in i)return Zr.from(se(i.result));throw this.getRpcError(r,i)})()),await y(this,An))}_start(){y(this,xr)==null||y(this,xr).resolve==null||(y(this,xr).resolve(),k(this,xr,null),(async()=>{for(;y(this,nr)==null&&!this.destroyed;)try{k(this,nr,await this._detectNetwork())}catch(t){if(this.destroyed)break;console.log("JsonRpcProvider failed to detect network and cannot start up; retry in 1s (perhaps the URL is wrong or the node is not started)"),this.emit("error",$e("failed to bootstrap network detection","NETWORK_ERROR",{event:"initial-network-discovery",info:{error:t}})),await E6(1e3)}K(this,yf,$v).call(this)})())}async _waitUntilReady(){if(y(this,xr)!=null)return await y(this,xr).promise}_getSubscriber(t){return t.type==="pending"?new v6(this):t.type==="event"?this._getOption("polling")?new jE(this,t.filter):new w6(this,t.filter):t.type==="orphan"&&t.filter.orphan==="drop-log"?new kk("orphan"):super._getSubscriber(t)}get ready(){return y(this,xr)==null}getRpcTransaction(t){const r={};return["chainId","gasLimit","gasPrice","type","maxFeePerGas","maxPriorityFeePerGas","nonce","value"].forEach(i=>{if(t[i]==null)return;let s=i;i==="gasLimit"&&(s="gas"),r[s]=Oi(se(t[i],`tx.${i}`))}),["from","to","data"].forEach(i=>{t[i]!=null&&(r[i]=te(t[i]))}),t.accessList&&(r.accessList=ol(t.accessList)),t.blobVersionedHashes&&(r.blobVersionedHashes=t.blobVersionedHashes.map(i=>i.toLowerCase())),t.authorizationList&&(r.authorizationList=t.authorizationList.map(i=>{const s=LC(i);return{address:s.address,nonce:Oi(s.nonce),chainId:Oi(s.chainId),yParity:Oi(s.signature.yParity),r:s.signature.r,s:s.signature.s}})),r}getRpcRequest(t){switch(t.method){case"chainId":return{method:"eth_chainId",args:[]};case"getBlockNumber":return{method:"eth_blockNumber",args:[]};case"getGasPrice":return{method:"eth_gasPrice",args:[]};case"getPriorityFee":return{method:"eth_maxPriorityFeePerGas",args:[]};case"getBalance":return{method:"eth_getBalance",args:[El(t.address),t.blockTag]};case"getTransactionCount":return{method:"eth_getTransactionCount",args:[El(t.address),t.blockTag]};case"getCode":return{method:"eth_getCode",args:[El(t.address),t.blockTag]};case"getStorage":return{method:"eth_getStorageAt",args:[El(t.address),"0x"+t.position.toString(16),t.blockTag]};case"broadcastTransaction":return{method:"eth_sendRawTransaction",args:[t.signedTransaction]};case"getBlock":if("blockTag"in t)return{method:"eth_getBlockByNumber",args:[t.blockTag,!!t.includeTransactions]};if("blockHash"in t)return{method:"eth_getBlockByHash",args:[t.blockHash,!!t.includeTransactions]};break;case"getTransaction":return{method:"eth_getTransactionByHash",args:[t.hash]};case"getTransactionReceipt":return{method:"eth_getTransactionReceipt",args:[t.hash]};case"call":return{method:"eth_call",args:[this.getRpcTransaction(t.transaction),t.blockTag]};case"estimateGas":return{method:"eth_estimateGas",args:[this.getRpcTransaction(t.transaction)]};case"getLogs":return t.filter&&t.filter.address!=null&&(Array.isArray(t.filter.address)?t.filter.address=t.filter.address.map(El):t.filter.address=El(t.filter.address)),{method:"eth_getLogs",args:[t.filter]}}return null}getRpcError(t,r){const{method:i}=t,{error:s}=r;if(i==="eth_estimateGas"&&s.message){const l=s.message;if(!l.match(/revert/i)&&l.match(/insufficient funds/i))return $e("insufficient funds","INSUFFICIENT_FUNDS",{transaction:t.params[0],info:{payload:t,error:s}});if(l.match(/nonce/i)&&l.match(/too low/i))return $e("nonce has already been used","NONCE_EXPIRED",{transaction:t.params[0],info:{payload:t,error:s}})}if(i==="eth_call"||i==="eth_estimateGas"){const l=Kv(s),c=Nd.getBuiltinCallException(i==="eth_call"?"call":"estimateGas",t.params[0],l?l.data:null);return c.info={error:s,payload:t},c}const o=JSON.stringify(T6(s));if(typeof s.message=="string"&&s.message.match(/user denied|ethers-user-denied/i))return $e("user rejected action","ACTION_REJECTED",{action:{eth_sign:"signMessage",personal_sign:"signMessage",eth_signTypedData_v4:"signTypedData",eth_signTransaction:"signTransaction",eth_sendTransaction:"sendTransaction",eth_requestAccounts:"requestAccess",wallet_requestAccounts:"requestAccess"}[i]||"unknown",reason:"rejected",info:{payload:t,error:s}});if(i==="eth_sendRawTransaction"||i==="eth_sendTransaction"){const l=t.params[0];if(o.match(/insufficient funds|base fee exceeds gas limit/i))return $e("insufficient funds for intrinsic transaction cost","INSUFFICIENT_FUNDS",{transaction:l,info:{error:s}});if(o.match(/nonce/i)&&o.match(/too low/i))return $e("nonce has already been used","NONCE_EXPIRED",{transaction:l,info:{error:s}});if(o.match(/replacement transaction/i)&&o.match(/underpriced/i))return $e("replacement fee too low","REPLACEMENT_UNDERPRICED",{transaction:l,info:{error:s}});if(o.match(/only replay-protected/i))return $e("legacy pre-eip-155 transactions not supported","UNSUPPORTED_OPERATION",{operation:i,info:{transaction:l,info:{error:s}}})}let a=!!o.match(/the method .* does not exist/i);return a||s&&s.details&&s.details.startsWith("Unauthorized method:")&&(a=!0),a?$e("unsupported operation","UNSUPPORTED_OPERATION",{operation:t.method,info:{error:s,payload:t}}):$e("could not coalesce error","UNKNOWN_ERROR",{error:s,payload:t})}send(t,r){if(this.destroyed)return Promise.reject($e("provider destroyed; cancelled request","UNSUPPORTED_OPERATION",{operation:t}));const i=oh(this,tc)._++,s=new Promise((o,a)=>{y(this,Ci).push({resolve:o,reject:a,payload:{method:t,params:r,id:i,jsonrpc:"2.0"}})});return K(this,yf,$v).call(this),s}async getSigner(t){t==null&&(t=0);const r=this.send("eth_accounts",[]);if(typeof t=="number"){const s=await r;if(t>=s.length)throw new Error("no such account");return new nw(this,s[t])}const{accounts:i}=await ln({network:this.getNetwork(),accounts:r});t=De(t);for(const s of i)if(De(s)===t)return new nw(this,t);throw new Error("invalid account")}async listAccounts(){return(await this.send("eth_accounts",[])).map(r=>new nw(this,r))}destroy(){y(this,Wr)&&(clearTimeout(y(this,Wr)),k(this,Wr,null));for(const{payload:t,reject:r}of y(this,Ci))r($e("provider destroyed; cancelled request","UNSUPPORTED_OPERATION",{operation:t.method}));k(this,Ci,[]),super.destroy()}}Pa=new WeakMap,tc=new WeakMap,Ci=new WeakMap,Wr=new WeakMap,xr=new WeakMap,nr=new WeakMap,An=new WeakMap,yf=new WeakSet,$v=function(){if(y(this,Wr))return;const t=this._getOption("batchMaxCount")===1?0:this._getOption("batchStallTime");k(this,Wr,setTimeout(()=>{k(this,Wr,null);const r=y(this,Ci);for(k(this,Ci,[]);r.length;){const i=[r.shift()];for(;r.length&&i.length!==y(this,Pa).batchMaxCount;)if(i.push(r.shift()),JSON.stringify(i.map(o=>o.payload)).length>y(this,Pa).batchMaxSize){r.unshift(i.pop());break}(async()=>{const s=i.length===1?i[0].payload:i.map(o=>o.payload);this.emit("debug",{action:"sendRpcPayload",payload:s});try{const o=await this._send(s);this.emit("debug",{action:"receiveRpcResult",result:o});for(const{resolve:a,reject:l,payload:c}of i){if(this.destroyed){l($e("provider destroyed; cancelled request","UNSUPPORTED_OPERATION",{operation:c.method}));continue}const h=o.filter(d=>d.id===c.id)[0];if(h==null){const d=$e("missing response for request","BAD_DATA",{value:o,info:{payload:c}});this.emit("error",d),l(d);continue}if("error"in h){l(this.getRpcError(c,h));continue}a(h.result)}}catch(o){this.emit("debug",{action:"receiveRpcError",error:o});for(const{reject:a}of i)a(o)}})()}},t))};var Hs;class I6 extends A6{constructor(t,r){super(t,r);U(this,Hs,void 0);let i=this._getOption("pollingInterval");i==null&&(i=Dk.pollingInterval),k(this,Hs,i)}_getSubscriber(t){const r=super._getSubscriber(t);return Ib(r)&&(r.pollingInterval=y(this,Hs)),r}get pollingInterval(){return y(this,Hs)}set pollingInterval(t){if(!Number.isInteger(t)||t<0)throw new Error("invalid interval");k(this,Hs,t),this._forEachSubscriber(r=>{Ib(r)&&(r.pollingInterval=y(this,Hs))})}}Hs=new WeakMap;function Kv(n){if(n==null)return null;if(typeof n.message=="string"&&n.message.match(/revert/i)&&je(n.data))return{message:n.message,data:n.data};if(typeof n=="object"){for(const e in n){const t=Kv(n[e]);if(t)return t}return null}if(typeof n=="string")try{return Kv(JSON.parse(n))}catch{}return null}function Qv(n,e){if(n!=null){if(typeof n.message=="string"&&e.push(n.message),typeof n=="object")for(const t in n)Qv(n[t],e);if(typeof n=="string")try{return Qv(JSON.parse(n),e)}catch{}}}function T6(n){const e=[];return Qv(n,e),e}var nc,rc;const Xo=class Xo extends I6{constructor(t,r,i){const s=Object.assign({},i??{},{batchMaxCount:1});O(t&&t.request,"invalid EIP-1193 provider","ethereum",t);super(r,s);U(this,nc,void 0);U(this,rc,void 0);k(this,rc,null),i&&i.providerInfo&&k(this,rc,i.providerInfo),k(this,nc,async(o,a)=>{const l={method:o,params:a};this.emit("debug",{action:"sendEip1193Request",payload:l});try{const c=await t.request(l);return this.emit("debug",{action:"receiveEip1193Result",result:c}),c}catch(c){const h=new Error(c.message);throw h.code=c.code,h.data=c.data,h.payload=l,this.emit("debug",{action:"receiveEip1193Error",error:h}),h}})}get providerInfo(){return y(this,rc)}async send(t,r){return await this._start(),await super.send(t,r)}async _send(t){O(!Array.isArray(t),"EIP-1193 does not support batch request","payload",t);try{const r=await y(this,nc).call(this,t.method,t.params||[]);return[{id:t.id,result:r}]}catch(r){return[{id:t.id,error:{code:r.code,data:r.data,message:r.message}}]}}getRpcError(t,r){switch(r=JSON.parse(JSON.stringify(r)),r.error.code||-1){case 4001:r.error.message=`ethers-user-denied: ${r.error.message}`;break;case 4200:r.error.message=`ethers-unsupported: ${r.error.message}`;break}return super.getRpcError(t,r)}async hasSigner(t){t==null&&(t=0);const r=await this.send("eth_accounts",[]);return typeof t=="number"?r.length>t:(t=t.toLowerCase(),r.filter(i=>i.toLowerCase()===t).length!==0)}async getSigner(t){if(t==null&&(t=0),!await this.hasSigner(t))try{await y(this,nc).call(this,"eth_requestAccounts",[])}catch(r){const i=r.payload;throw this.getRpcError(i,{id:i.id,error:r})}return await super.getSigner(t)}static async discover(t){if(t==null&&(t={}),t.provider)return new Xo(t.provider);const r=t.window?t.window:typeof window<"u"?window:null;if(r==null)return null;const i=t.anyProvider;if(i&&r.ethereum)return new Xo(r.ethereum);if(!("addEventListener"in r&&"dispatchEvent"in r&&"removeEventListener"in r))return null;const s=t.timeout?t.timeout:300;return s===0?null:await new Promise((o,a)=>{let l=[];const c=p=>{l.push(p.detail),i&&h()},h=()=>{if(clearTimeout(d),l.length)if(t&&t.filter){const p=t.filter(l.map(g=>Object.assign({},g.info)));if(p==null)o(null);else if(p instanceof Xo)o(p);else{let g=null;if(p.uuid&&(g=l.filter(v=>p.uuid===v.info.uuid)[0]),g){const{provider:A,info:v}=g;o(new Xo(A,void 0,{providerInfo:v}))}else a($e("filter returned unknown info","UNSUPPORTED_OPERATION",{value:p}))}}else{const{provider:p,info:g}=l[0];o(new Xo(p,void 0,{providerInfo:g}))}else o(null);r.removeEventListener("eip6963:announceProvider",c)},d=setTimeout(()=>{h()},s);r.addEventListener("eip6963:announceProvider",c),r.dispatchEvent(new Event("eip6963:requestProvider"))})}};nc=new WeakMap,rc=new WeakMap;let qv=Xo;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ok=function(n){const e=[];let t=0;for(let r=0;r<n.length;r++){let i=n.charCodeAt(r);i<128?e[t++]=i:i<2048?(e[t++]=i>>6|192,e[t++]=i&63|128):(i&64512)===55296&&r+1<n.length&&(n.charCodeAt(r+1)&64512)===56320?(i=65536+((i&1023)<<10)+(n.charCodeAt(++r)&1023),e[t++]=i>>18|240,e[t++]=i>>12&63|128,e[t++]=i>>6&63|128,e[t++]=i&63|128):(e[t++]=i>>12|224,e[t++]=i>>6&63|128,e[t++]=i&63|128)}return e},b6=function(n){const e=[];let t=0,r=0;for(;t<n.length;){const i=n[t++];if(i<128)e[r++]=String.fromCharCode(i);else if(i>191&&i<224){const s=n[t++];e[r++]=String.fromCharCode((i&31)<<6|s&63)}else if(i>239&&i<365){const s=n[t++],o=n[t++],a=n[t++],l=((i&7)<<18|(s&63)<<12|(o&63)<<6|a&63)-65536;e[r++]=String.fromCharCode(55296+(l>>10)),e[r++]=String.fromCharCode(56320+(l&1023))}else{const s=n[t++],o=n[t++];e[r++]=String.fromCharCode((i&15)<<12|(s&63)<<6|o&63)}}return e.join("")},Lk={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(n,e){if(!Array.isArray(n))throw Error("encodeByteArray takes an array as a parameter");this.init_();const t=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[];for(let i=0;i<n.length;i+=3){const s=n[i],o=i+1<n.length,a=o?n[i+1]:0,l=i+2<n.length,c=l?n[i+2]:0,h=s>>2,d=(s&3)<<4|a>>4;let p=(a&15)<<2|c>>6,g=c&63;l||(g=64,o||(p=64)),r.push(t[h],t[d],t[p],t[g])}return r.join("")},encodeString(n,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(n):this.encodeByteArray(Ok(n),e)},decodeString(n,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(n):b6(this.decodeStringToByteArray(n,e))},decodeStringToByteArray(n,e){this.init_();const t=e?this.charToByteMapWebSafe_:this.charToByteMap_,r=[];for(let i=0;i<n.length;){const s=t[n.charAt(i++)],a=i<n.length?t[n.charAt(i)]:0;++i;const c=i<n.length?t[n.charAt(i)]:64;++i;const d=i<n.length?t[n.charAt(i)]:64;if(++i,s==null||a==null||c==null||d==null)throw new x6;const p=s<<2|a>>4;if(r.push(p),c!==64){const g=a<<4&240|c>>2;if(r.push(g),d!==64){const A=c<<6&192|d;r.push(A)}}}return r},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let n=0;n<this.ENCODED_VALS.length;n++)this.byteToCharMap_[n]=this.ENCODED_VALS.charAt(n),this.charToByteMap_[this.byteToCharMap_[n]]=n,this.byteToCharMapWebSafe_[n]=this.ENCODED_VALS_WEBSAFE.charAt(n),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[n]]=n,n>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(n)]=n,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(n)]=n)}}};class x6 extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const S6=function(n){const e=Ok(n);return Lk.encodeByteArray(e,!0)},hg=function(n){return S6(n).replace(/\./g,"")},Vk=function(n){try{return Lk.decodeString(n,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function P6(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const R6=()=>P6().__FIREBASE_DEFAULTS__,C6=()=>{if(typeof process>"u"||typeof process.env>"u")return;const n={}.__FIREBASE_DEFAULTS__;if(n)return JSON.parse(n)},k6=()=>{if(typeof document>"u")return;let n;try{n=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const e=n&&Vk(n[1]);return e&&JSON.parse(e)},_y=()=>{try{return R6()||C6()||k6()}catch(n){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${n}`);return}},Mk=n=>{var e,t;return(t=(e=_y())===null||e===void 0?void 0:e.emulatorHosts)===null||t===void 0?void 0:t[n]},N6=n=>{const e=Mk(n);if(!e)return;const t=e.lastIndexOf(":");if(t<=0||t+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);const r=parseInt(e.substring(t+1),10);return e[0]==="["?[e.substring(1,t-1),r]:[e.substring(0,t),r]},Bk=()=>{var n;return(n=_y())===null||n===void 0?void 0:n.config},Fk=n=>{var e;return(e=_y())===null||e===void 0?void 0:e[`_${n}`]};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class D6{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}wrapCallback(e){return(t,r)=>{t?this.reject(t):this.resolve(r),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(t):e(t,r))}}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function O6(n,e){if(n.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const t={alg:"none",type:"JWT"},r=e||"demo-project",i=n.iat||0,s=n.sub||n.user_id;if(!s)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const o=Object.assign({iss:`https://securetoken.google.com/${r}`,aud:r,iat:i,exp:i+3600,auth_time:i,sub:s,user_id:s,firebase:{sign_in_provider:"custom",identities:{}}},n),a="";return[hg(JSON.stringify(t)),hg(JSON.stringify(o)),a].join(".")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function wt(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function L6(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(wt())}function V6(){var n;const e=(n=_y())===null||n===void 0?void 0:n.forceEnvironment;if(e==="node")return!0;if(e==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function M6(){return typeof navigator<"u"&&navigator.userAgent==="Cloudflare-Workers"}function B6(){const n=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof n=="object"&&n.id!==void 0}function F6(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function U6(){const n=wt();return n.indexOf("MSIE ")>=0||n.indexOf("Trident/")>=0}function Uk(){return!V6()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function jk(){try{return typeof indexedDB=="object"}catch{return!1}}function j6(){return new Promise((n,e)=>{try{let t=!0;const r="validate-browser-context-for-indexeddb-analytics-module",i=self.indexedDB.open(r);i.onsuccess=()=>{i.result.close(),t||self.indexedDB.deleteDatabase(r),n(!0)},i.onupgradeneeded=()=>{t=!1},i.onerror=()=>{var s;e(((s=i.error)===null||s===void 0?void 0:s.message)||"")}}catch(t){e(t)}})}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const z6="FirebaseError";class rs extends Error{constructor(e,t,r){super(t),this.code=e,this.customData=r,this.name=z6,Object.setPrototypeOf(this,rs.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,kf.prototype.create)}}class kf{constructor(e,t,r){this.service=e,this.serviceName=t,this.errors=r}create(e,...t){const r=t[0]||{},i=`${this.service}/${e}`,s=this.errors[e],o=s?G6(s,r):"Error",a=`${this.serviceName}: ${o} (${i}).`;return new rs(i,a,r)}}function G6(n,e){return n.replace(H6,(t,r)=>{const i=e[r];return i!=null?String(i):`<${r}?>`})}const H6=/\{\$([^}]+)}/g;function $6(n){for(const e in n)if(Object.prototype.hasOwnProperty.call(n,e))return!1;return!0}function dg(n,e){if(n===e)return!0;const t=Object.keys(n),r=Object.keys(e);for(const i of t){if(!r.includes(i))return!1;const s=n[i],o=e[i];if(Tb(s)&&Tb(o)){if(!dg(s,o))return!1}else if(s!==o)return!1}for(const i of r)if(!t.includes(i))return!1;return!0}function Tb(n){return n!==null&&typeof n=="object"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Nf(n){const e=[];for(const[t,r]of Object.entries(n))Array.isArray(r)?r.forEach(i=>{e.push(encodeURIComponent(t)+"="+encodeURIComponent(i))}):e.push(encodeURIComponent(t)+"="+encodeURIComponent(r));return e.length?"&"+e.join("&"):""}function Oh(n){const e={};return n.replace(/^\?/,"").split("&").forEach(r=>{if(r){const[i,s]=r.split("=");e[decodeURIComponent(i)]=decodeURIComponent(s)}}),e}function Lh(n){const e=n.indexOf("?");if(!e)return"";const t=n.indexOf("#",e);return n.substring(e,t>0?t:void 0)}function K6(n,e){const t=new Q6(n,e);return t.subscribe.bind(t)}class Q6{constructor(e,t){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=t,this.task.then(()=>{e(this)}).catch(r=>{this.error(r)})}next(e){this.forEachObserver(t=>{t.next(e)})}error(e){this.forEachObserver(t=>{t.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,t,r){let i;if(e===void 0&&t===void 0&&r===void 0)throw new Error("Missing Observer.");q6(e,["next","error","complete"])?i=e:i={next:e,error:t,complete:r},i.next===void 0&&(i.next=rw),i.error===void 0&&(i.error=rw),i.complete===void 0&&(i.complete=rw);const s=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?i.error(this.finalError):i.complete()}catch{}}),this.observers.push(i),s}unsubscribeOne(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let t=0;t<this.observers.length;t++)this.sendOne(t,e)}sendOne(e,t){this.task.then(()=>{if(this.observers!==void 0&&this.observers[e]!==void 0)try{t(this.observers[e])}catch(r){typeof console<"u"&&console.error&&console.error(r)}})}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function q6(n,e){if(typeof n!="object"||n===null)return!1;for(const t of e)if(t in n&&typeof n[t]=="function")return!0;return!1}function rw(){}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function St(n){return n&&n._delegate?n._delegate:n}let Ha=class{constructor(e,t,r){this.name=e,this.instanceFactory=t,this.type=r,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const zo="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class W6{constructor(e,t){this.name=e,this.container=t,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const t=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(t)){const r=new D6;if(this.instancesDeferred.set(t,r),this.isInitialized(t)||this.shouldAutoInitialize())try{const i=this.getOrInitializeService({instanceIdentifier:t});i&&r.resolve(i)}catch{}}return this.instancesDeferred.get(t).promise}getImmediate(e){var t;const r=this.normalizeInstanceIdentifier(e==null?void 0:e.identifier),i=(t=e==null?void 0:e.optional)!==null&&t!==void 0?t:!1;if(this.isInitialized(r)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:r})}catch(s){if(i)return null;throw s}else{if(i)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(Y6(e))try{this.getOrInitializeService({instanceIdentifier:zo})}catch{}for(const[t,r]of this.instancesDeferred.entries()){const i=this.normalizeInstanceIdentifier(t);try{const s=this.getOrInitializeService({instanceIdentifier:i});r.resolve(s)}catch{}}}}clearInstance(e=zo){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(t=>"INTERNAL"in t).map(t=>t.INTERNAL.delete()),...e.filter(t=>"_delete"in t).map(t=>t._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=zo){return this.instances.has(e)}getOptions(e=zo){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:t={}}=e,r=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(r))throw Error(`${this.name}(${r}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const i=this.getOrInitializeService({instanceIdentifier:r,options:t});for(const[s,o]of this.instancesDeferred.entries()){const a=this.normalizeInstanceIdentifier(s);r===a&&o.resolve(i)}return i}onInit(e,t){var r;const i=this.normalizeInstanceIdentifier(t),s=(r=this.onInitCallbacks.get(i))!==null&&r!==void 0?r:new Set;s.add(e),this.onInitCallbacks.set(i,s);const o=this.instances.get(i);return o&&e(o,i),()=>{s.delete(e)}}invokeOnInitCallbacks(e,t){const r=this.onInitCallbacks.get(t);if(r)for(const i of r)try{i(e,t)}catch{}}getOrInitializeService({instanceIdentifier:e,options:t={}}){let r=this.instances.get(e);if(!r&&this.component&&(r=this.component.instanceFactory(this.container,{instanceIdentifier:J6(e),options:t}),this.instances.set(e,r),this.instancesOptions.set(e,t),this.invokeOnInitCallbacks(r,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,r)}catch{}return r||null}normalizeInstanceIdentifier(e=zo){return this.component?this.component.multipleInstances?e:zo:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function J6(n){return n===zo?void 0:n}function Y6(n){return n.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class X6{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const t=this.getProvider(e.name);if(t.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);t.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const t=new W6(e,this);return this.providers.set(e,t),t}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Ae;(function(n){n[n.DEBUG=0]="DEBUG",n[n.VERBOSE=1]="VERBOSE",n[n.INFO=2]="INFO",n[n.WARN=3]="WARN",n[n.ERROR=4]="ERROR",n[n.SILENT=5]="SILENT"})(Ae||(Ae={}));const Z6={debug:Ae.DEBUG,verbose:Ae.VERBOSE,info:Ae.INFO,warn:Ae.WARN,error:Ae.ERROR,silent:Ae.SILENT},e5=Ae.INFO,t5={[Ae.DEBUG]:"log",[Ae.VERBOSE]:"log",[Ae.INFO]:"info",[Ae.WARN]:"warn",[Ae.ERROR]:"error"},n5=(n,e,...t)=>{if(e<n.logLevel)return;const r=new Date().toISOString(),i=t5[e];if(i)console[i](`[${r}]  ${n.name}:`,...t);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)};class zE{constructor(e){this.name=e,this._logLevel=e5,this._logHandler=n5,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in Ae))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?Z6[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,Ae.DEBUG,...e),this._logHandler(this,Ae.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,Ae.VERBOSE,...e),this._logHandler(this,Ae.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,Ae.INFO,...e),this._logHandler(this,Ae.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,Ae.WARN,...e),this._logHandler(this,Ae.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,Ae.ERROR,...e),this._logHandler(this,Ae.ERROR,...e)}}const r5=(n,e)=>e.some(t=>n instanceof t);let bb,xb;function i5(){return bb||(bb=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function s5(){return xb||(xb=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const zk=new WeakMap,Wv=new WeakMap,Gk=new WeakMap,iw=new WeakMap,GE=new WeakMap;function o5(n){const e=new Promise((t,r)=>{const i=()=>{n.removeEventListener("success",s),n.removeEventListener("error",o)},s=()=>{t(so(n.result)),i()},o=()=>{r(n.error),i()};n.addEventListener("success",s),n.addEventListener("error",o)});return e.then(t=>{t instanceof IDBCursor&&zk.set(t,n)}).catch(()=>{}),GE.set(e,n),e}function a5(n){if(Wv.has(n))return;const e=new Promise((t,r)=>{const i=()=>{n.removeEventListener("complete",s),n.removeEventListener("error",o),n.removeEventListener("abort",o)},s=()=>{t(),i()},o=()=>{r(n.error||new DOMException("AbortError","AbortError")),i()};n.addEventListener("complete",s),n.addEventListener("error",o),n.addEventListener("abort",o)});Wv.set(n,e)}let Jv={get(n,e,t){if(n instanceof IDBTransaction){if(e==="done")return Wv.get(n);if(e==="objectStoreNames")return n.objectStoreNames||Gk.get(n);if(e==="store")return t.objectStoreNames[1]?void 0:t.objectStore(t.objectStoreNames[0])}return so(n[e])},set(n,e,t){return n[e]=t,!0},has(n,e){return n instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in n}};function l5(n){Jv=n(Jv)}function u5(n){return n===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...t){const r=n.call(sw(this),e,...t);return Gk.set(r,e.sort?e.sort():[e]),so(r)}:s5().includes(n)?function(...e){return n.apply(sw(this),e),so(zk.get(this))}:function(...e){return so(n.apply(sw(this),e))}}function c5(n){return typeof n=="function"?u5(n):(n instanceof IDBTransaction&&a5(n),r5(n,i5())?new Proxy(n,Jv):n)}function so(n){if(n instanceof IDBRequest)return o5(n);if(iw.has(n))return iw.get(n);const e=c5(n);return e!==n&&(iw.set(n,e),GE.set(e,n)),e}const sw=n=>GE.get(n);function h5(n,e,{blocked:t,upgrade:r,blocking:i,terminated:s}={}){const o=indexedDB.open(n,e),a=so(o);return r&&o.addEventListener("upgradeneeded",l=>{r(so(o.result),l.oldVersion,l.newVersion,so(o.transaction),l)}),t&&o.addEventListener("blocked",l=>t(l.oldVersion,l.newVersion,l)),a.then(l=>{s&&l.addEventListener("close",()=>s()),i&&l.addEventListener("versionchange",c=>i(c.oldVersion,c.newVersion,c))}).catch(()=>{}),a}const d5=["get","getKey","getAll","getAllKeys","count"],f5=["put","add","delete","clear"],ow=new Map;function Sb(n,e){if(!(n instanceof IDBDatabase&&!(e in n)&&typeof e=="string"))return;if(ow.get(e))return ow.get(e);const t=e.replace(/FromIndex$/,""),r=e!==t,i=f5.includes(t);if(!(t in(r?IDBIndex:IDBObjectStore).prototype)||!(i||d5.includes(t)))return;const s=async function(o,...a){const l=this.transaction(o,i?"readwrite":"readonly");let c=l.store;return r&&(c=c.index(a.shift())),(await Promise.all([c[t](...a),i&&l.done]))[0]};return ow.set(e,s),s}l5(n=>({...n,get:(e,t,r)=>Sb(e,t)||n.get(e,t,r),has:(e,t)=>!!Sb(e,t)||n.has(e,t)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class p5{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(t=>{if(m5(t)){const r=t.getImmediate();return`${r.library}/${r.version}`}else return null}).filter(t=>t).join(" ")}}function m5(n){const e=n.getComponent();return(e==null?void 0:e.type)==="VERSION"}const Yv="@firebase/app",Pb="0.10.13";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Xi=new zE("@firebase/app"),g5="@firebase/app-compat",y5="@firebase/analytics-compat",w5="@firebase/analytics",v5="@firebase/app-check-compat",_5="@firebase/app-check",E5="@firebase/auth",A5="@firebase/auth-compat",I5="@firebase/database",T5="@firebase/data-connect",b5="@firebase/database-compat",x5="@firebase/functions",S5="@firebase/functions-compat",P5="@firebase/installations",R5="@firebase/installations-compat",C5="@firebase/messaging",k5="@firebase/messaging-compat",N5="@firebase/performance",D5="@firebase/performance-compat",O5="@firebase/remote-config",L5="@firebase/remote-config-compat",V5="@firebase/storage",M5="@firebase/storage-compat",B5="@firebase/firestore",F5="@firebase/vertexai-preview",U5="@firebase/firestore-compat",j5="firebase",z5="10.14.1";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Xv="[DEFAULT]",G5={[Yv]:"fire-core",[g5]:"fire-core-compat",[w5]:"fire-analytics",[y5]:"fire-analytics-compat",[_5]:"fire-app-check",[v5]:"fire-app-check-compat",[E5]:"fire-auth",[A5]:"fire-auth-compat",[I5]:"fire-rtdb",[T5]:"fire-data-connect",[b5]:"fire-rtdb-compat",[x5]:"fire-fn",[S5]:"fire-fn-compat",[P5]:"fire-iid",[R5]:"fire-iid-compat",[C5]:"fire-fcm",[k5]:"fire-fcm-compat",[N5]:"fire-perf",[D5]:"fire-perf-compat",[O5]:"fire-rc",[L5]:"fire-rc-compat",[V5]:"fire-gcs",[M5]:"fire-gcs-compat",[B5]:"fire-fst",[U5]:"fire-fst-compat",[F5]:"fire-vertex","fire-js":"fire-js",[j5]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const fg=new Map,H5=new Map,Zv=new Map;function Rb(n,e){try{n.container.addComponent(e)}catch(t){Xi.debug(`Component ${e.name} failed to register with FirebaseApp ${n.name}`,t)}}function vc(n){const e=n.name;if(Zv.has(e))return Xi.debug(`There were multiple attempts to register component ${e}.`),!1;Zv.set(e,n);for(const t of fg.values())Rb(t,n);for(const t of H5.values())Rb(t,n);return!0}function HE(n,e){const t=n.container.getProvider("heartbeat").getImmediate({optional:!0});return t&&t.triggerHeartbeat(),n.container.getProvider(e)}function Vi(n){return n.settings!==void 0}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const $5={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},oo=new kf("app","Firebase",$5);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class K5{constructor(e,t,r){this._isDeleted=!1,this._options=Object.assign({},e),this._config=Object.assign({},t),this._name=t.name,this._automaticDataCollectionEnabled=t.automaticDataCollectionEnabled,this._container=r,this.container.addComponent(new Ha("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw oo.create("app-deleted",{appName:this._name})}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Vc=z5;function Hk(n,e={}){let t=n;typeof e!="object"&&(e={name:e});const r=Object.assign({name:Xv,automaticDataCollectionEnabled:!1},e),i=r.name;if(typeof i!="string"||!i)throw oo.create("bad-app-name",{appName:String(i)});if(t||(t=Bk()),!t)throw oo.create("no-options");const s=fg.get(i);if(s){if(dg(t,s.options)&&dg(r,s.config))return s;throw oo.create("duplicate-app",{appName:i})}const o=new X6(i);for(const l of Zv.values())o.addComponent(l);const a=new K5(t,r,o);return fg.set(i,a),a}function $k(n=Xv){const e=fg.get(n);if(!e&&n===Xv&&Bk())return Hk();if(!e)throw oo.create("no-app",{appName:n});return e}function ao(n,e,t){var r;let i=(r=G5[n])!==null&&r!==void 0?r:n;t&&(i+=`-${t}`);const s=i.match(/\s|\//),o=e.match(/\s|\//);if(s||o){const a=[`Unable to register library "${i}" with version "${e}":`];s&&a.push(`library name "${i}" contains illegal characters (whitespace or "/")`),s&&o&&a.push("and"),o&&a.push(`version name "${e}" contains illegal characters (whitespace or "/")`),Xi.warn(a.join(" "));return}vc(new Ha(`${i}-version`,()=>({library:i,version:e}),"VERSION"))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Q5="firebase-heartbeat-database",q5=1,Ld="firebase-heartbeat-store";let aw=null;function Kk(){return aw||(aw=h5(Q5,q5,{upgrade:(n,e)=>{switch(e){case 0:try{n.createObjectStore(Ld)}catch(t){console.warn(t)}}}}).catch(n=>{throw oo.create("idb-open",{originalErrorMessage:n.message})})),aw}async function W5(n){try{const t=(await Kk()).transaction(Ld),r=await t.objectStore(Ld).get(Qk(n));return await t.done,r}catch(e){if(e instanceof rs)Xi.warn(e.message);else{const t=oo.create("idb-get",{originalErrorMessage:e==null?void 0:e.message});Xi.warn(t.message)}}}async function Cb(n,e){try{const r=(await Kk()).transaction(Ld,"readwrite");await r.objectStore(Ld).put(e,Qk(n)),await r.done}catch(t){if(t instanceof rs)Xi.warn(t.message);else{const r=oo.create("idb-set",{originalErrorMessage:t==null?void 0:t.message});Xi.warn(r.message)}}}function Qk(n){return`${n.name}!${n.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const J5=1024,Y5=30*24*60*60*1e3;class X5{constructor(e){this.container=e,this._heartbeatsCache=null;const t=this.container.getProvider("app").getImmediate();this._storage=new e9(t),this._heartbeatsCachePromise=this._storage.read().then(r=>(this._heartbeatsCache=r,r))}async triggerHeartbeat(){var e,t;try{const i=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),s=kb();return((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,((t=this._heartbeatsCache)===null||t===void 0?void 0:t.heartbeats)==null)||this._heartbeatsCache.lastSentHeartbeatDate===s||this._heartbeatsCache.heartbeats.some(o=>o.date===s)?void 0:(this._heartbeatsCache.heartbeats.push({date:s,agent:i}),this._heartbeatsCache.heartbeats=this._heartbeatsCache.heartbeats.filter(o=>{const a=new Date(o.date).valueOf();return Date.now()-a<=Y5}),this._storage.overwrite(this._heartbeatsCache))}catch(r){Xi.warn(r)}}async getHeartbeatsHeader(){var e;try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";const t=kb(),{heartbeatsToSend:r,unsentEntries:i}=Z5(this._heartbeatsCache.heartbeats),s=hg(JSON.stringify({version:2,heartbeats:r}));return this._heartbeatsCache.lastSentHeartbeatDate=t,i.length>0?(this._heartbeatsCache.heartbeats=i,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),s}catch(t){return Xi.warn(t),""}}}function kb(){return new Date().toISOString().substring(0,10)}function Z5(n,e=J5){const t=[];let r=n.slice();for(const i of n){const s=t.find(o=>o.agent===i.agent);if(s){if(s.dates.push(i.date),Nb(t)>e){s.dates.pop();break}}else if(t.push({agent:i.agent,dates:[i.date]}),Nb(t)>e){t.pop();break}r=r.slice(1)}return{heartbeatsToSend:t,unsentEntries:r}}class e9{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return jk()?j6().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const t=await W5(this.app);return t!=null&&t.heartbeats?t:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(e){var t;if(await this._canUseIndexedDBPromise){const i=await this.read();return Cb(this.app,{lastSentHeartbeatDate:(t=e.lastSentHeartbeatDate)!==null&&t!==void 0?t:i.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){var t;if(await this._canUseIndexedDBPromise){const i=await this.read();return Cb(this.app,{lastSentHeartbeatDate:(t=e.lastSentHeartbeatDate)!==null&&t!==void 0?t:i.lastSentHeartbeatDate,heartbeats:[...i.heartbeats,...e.heartbeats]})}else return}}function Nb(n){return hg(JSON.stringify({version:2,heartbeats:n})).length}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function t9(n){vc(new Ha("platform-logger",e=>new p5(e),"PRIVATE")),vc(new Ha("heartbeat",e=>new X5(e),"PRIVATE")),ao(Yv,Pb,n),ao(Yv,Pb,"esm2017"),ao("fire-js","")}t9("");var n9="firebase",r9="10.14.1";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */ao(n9,r9,"app");var Db=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var Da,qk;(function(){var n;/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/function e(b,_){function S(){}S.prototype=_.prototype,b.D=_.prototype,b.prototype=new S,b.prototype.constructor=b,b.C=function(P,D,N){for(var R=Array(arguments.length-2),Te=2;Te<arguments.length;Te++)R[Te-2]=arguments[Te];return _.prototype[D].apply(P,R)}}function t(){this.blockSize=-1}function r(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.B=Array(this.blockSize),this.o=this.h=0,this.s()}e(r,t),r.prototype.s=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function i(b,_,S){S||(S=0);var P=Array(16);if(typeof _=="string")for(var D=0;16>D;++D)P[D]=_.charCodeAt(S++)|_.charCodeAt(S++)<<8|_.charCodeAt(S++)<<16|_.charCodeAt(S++)<<24;else for(D=0;16>D;++D)P[D]=_[S++]|_[S++]<<8|_[S++]<<16|_[S++]<<24;_=b.g[0],S=b.g[1],D=b.g[2];var N=b.g[3],R=_+(N^S&(D^N))+P[0]+3614090360&4294967295;_=S+(R<<7&4294967295|R>>>25),R=N+(D^_&(S^D))+P[1]+3905402710&4294967295,N=_+(R<<12&4294967295|R>>>20),R=D+(S^N&(_^S))+P[2]+606105819&4294967295,D=N+(R<<17&4294967295|R>>>15),R=S+(_^D&(N^_))+P[3]+3250441966&4294967295,S=D+(R<<22&4294967295|R>>>10),R=_+(N^S&(D^N))+P[4]+4118548399&4294967295,_=S+(R<<7&4294967295|R>>>25),R=N+(D^_&(S^D))+P[5]+1200080426&4294967295,N=_+(R<<12&4294967295|R>>>20),R=D+(S^N&(_^S))+P[6]+2821735955&4294967295,D=N+(R<<17&4294967295|R>>>15),R=S+(_^D&(N^_))+P[7]+4249261313&4294967295,S=D+(R<<22&4294967295|R>>>10),R=_+(N^S&(D^N))+P[8]+1770035416&4294967295,_=S+(R<<7&4294967295|R>>>25),R=N+(D^_&(S^D))+P[9]+2336552879&4294967295,N=_+(R<<12&4294967295|R>>>20),R=D+(S^N&(_^S))+P[10]+4294925233&4294967295,D=N+(R<<17&4294967295|R>>>15),R=S+(_^D&(N^_))+P[11]+2304563134&4294967295,S=D+(R<<22&4294967295|R>>>10),R=_+(N^S&(D^N))+P[12]+1804603682&4294967295,_=S+(R<<7&4294967295|R>>>25),R=N+(D^_&(S^D))+P[13]+4254626195&4294967295,N=_+(R<<12&4294967295|R>>>20),R=D+(S^N&(_^S))+P[14]+2792965006&4294967295,D=N+(R<<17&4294967295|R>>>15),R=S+(_^D&(N^_))+P[15]+1236535329&4294967295,S=D+(R<<22&4294967295|R>>>10),R=_+(D^N&(S^D))+P[1]+4129170786&4294967295,_=S+(R<<5&4294967295|R>>>27),R=N+(S^D&(_^S))+P[6]+3225465664&4294967295,N=_+(R<<9&4294967295|R>>>23),R=D+(_^S&(N^_))+P[11]+643717713&4294967295,D=N+(R<<14&4294967295|R>>>18),R=S+(N^_&(D^N))+P[0]+3921069994&4294967295,S=D+(R<<20&4294967295|R>>>12),R=_+(D^N&(S^D))+P[5]+3593408605&4294967295,_=S+(R<<5&4294967295|R>>>27),R=N+(S^D&(_^S))+P[10]+38016083&4294967295,N=_+(R<<9&4294967295|R>>>23),R=D+(_^S&(N^_))+P[15]+3634488961&4294967295,D=N+(R<<14&4294967295|R>>>18),R=S+(N^_&(D^N))+P[4]+3889429448&4294967295,S=D+(R<<20&4294967295|R>>>12),R=_+(D^N&(S^D))+P[9]+568446438&4294967295,_=S+(R<<5&4294967295|R>>>27),R=N+(S^D&(_^S))+P[14]+3275163606&4294967295,N=_+(R<<9&4294967295|R>>>23),R=D+(_^S&(N^_))+P[3]+4107603335&4294967295,D=N+(R<<14&4294967295|R>>>18),R=S+(N^_&(D^N))+P[8]+1163531501&4294967295,S=D+(R<<20&4294967295|R>>>12),R=_+(D^N&(S^D))+P[13]+2850285829&4294967295,_=S+(R<<5&4294967295|R>>>27),R=N+(S^D&(_^S))+P[2]+4243563512&4294967295,N=_+(R<<9&4294967295|R>>>23),R=D+(_^S&(N^_))+P[7]+1735328473&4294967295,D=N+(R<<14&4294967295|R>>>18),R=S+(N^_&(D^N))+P[12]+2368359562&4294967295,S=D+(R<<20&4294967295|R>>>12),R=_+(S^D^N)+P[5]+4294588738&4294967295,_=S+(R<<4&4294967295|R>>>28),R=N+(_^S^D)+P[8]+2272392833&4294967295,N=_+(R<<11&4294967295|R>>>21),R=D+(N^_^S)+P[11]+1839030562&4294967295,D=N+(R<<16&4294967295|R>>>16),R=S+(D^N^_)+P[14]+4259657740&4294967295,S=D+(R<<23&4294967295|R>>>9),R=_+(S^D^N)+P[1]+2763975236&4294967295,_=S+(R<<4&4294967295|R>>>28),R=N+(_^S^D)+P[4]+1272893353&4294967295,N=_+(R<<11&4294967295|R>>>21),R=D+(N^_^S)+P[7]+4139469664&4294967295,D=N+(R<<16&4294967295|R>>>16),R=S+(D^N^_)+P[10]+3200236656&4294967295,S=D+(R<<23&4294967295|R>>>9),R=_+(S^D^N)+P[13]+681279174&4294967295,_=S+(R<<4&4294967295|R>>>28),R=N+(_^S^D)+P[0]+3936430074&4294967295,N=_+(R<<11&4294967295|R>>>21),R=D+(N^_^S)+P[3]+3572445317&4294967295,D=N+(R<<16&4294967295|R>>>16),R=S+(D^N^_)+P[6]+76029189&4294967295,S=D+(R<<23&4294967295|R>>>9),R=_+(S^D^N)+P[9]+3654602809&4294967295,_=S+(R<<4&4294967295|R>>>28),R=N+(_^S^D)+P[12]+3873151461&4294967295,N=_+(R<<11&4294967295|R>>>21),R=D+(N^_^S)+P[15]+530742520&4294967295,D=N+(R<<16&4294967295|R>>>16),R=S+(D^N^_)+P[2]+3299628645&4294967295,S=D+(R<<23&4294967295|R>>>9),R=_+(D^(S|~N))+P[0]+4096336452&4294967295,_=S+(R<<6&4294967295|R>>>26),R=N+(S^(_|~D))+P[7]+1126891415&4294967295,N=_+(R<<10&4294967295|R>>>22),R=D+(_^(N|~S))+P[14]+2878612391&4294967295,D=N+(R<<15&4294967295|R>>>17),R=S+(N^(D|~_))+P[5]+4237533241&4294967295,S=D+(R<<21&4294967295|R>>>11),R=_+(D^(S|~N))+P[12]+1700485571&4294967295,_=S+(R<<6&4294967295|R>>>26),R=N+(S^(_|~D))+P[3]+2399980690&4294967295,N=_+(R<<10&4294967295|R>>>22),R=D+(_^(N|~S))+P[10]+4293915773&4294967295,D=N+(R<<15&4294967295|R>>>17),R=S+(N^(D|~_))+P[1]+2240044497&4294967295,S=D+(R<<21&4294967295|R>>>11),R=_+(D^(S|~N))+P[8]+1873313359&4294967295,_=S+(R<<6&4294967295|R>>>26),R=N+(S^(_|~D))+P[15]+4264355552&4294967295,N=_+(R<<10&4294967295|R>>>22),R=D+(_^(N|~S))+P[6]+2734768916&4294967295,D=N+(R<<15&4294967295|R>>>17),R=S+(N^(D|~_))+P[13]+1309151649&4294967295,S=D+(R<<21&4294967295|R>>>11),R=_+(D^(S|~N))+P[4]+4149444226&4294967295,_=S+(R<<6&4294967295|R>>>26),R=N+(S^(_|~D))+P[11]+3174756917&4294967295,N=_+(R<<10&4294967295|R>>>22),R=D+(_^(N|~S))+P[2]+718787259&4294967295,D=N+(R<<15&4294967295|R>>>17),R=S+(N^(D|~_))+P[9]+3951481745&4294967295,b.g[0]=b.g[0]+_&4294967295,b.g[1]=b.g[1]+(D+(R<<21&4294967295|R>>>11))&4294967295,b.g[2]=b.g[2]+D&4294967295,b.g[3]=b.g[3]+N&4294967295}r.prototype.u=function(b,_){_===void 0&&(_=b.length);for(var S=_-this.blockSize,P=this.B,D=this.h,N=0;N<_;){if(D==0)for(;N<=S;)i(this,b,N),N+=this.blockSize;if(typeof b=="string"){for(;N<_;)if(P[D++]=b.charCodeAt(N++),D==this.blockSize){i(this,P),D=0;break}}else for(;N<_;)if(P[D++]=b[N++],D==this.blockSize){i(this,P),D=0;break}}this.h=D,this.o+=_},r.prototype.v=function(){var b=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);b[0]=128;for(var _=1;_<b.length-8;++_)b[_]=0;var S=8*this.o;for(_=b.length-8;_<b.length;++_)b[_]=S&255,S/=256;for(this.u(b),b=Array(16),_=S=0;4>_;++_)for(var P=0;32>P;P+=8)b[S++]=this.g[_]>>>P&255;return b};function s(b,_){var S=a;return Object.prototype.hasOwnProperty.call(S,b)?S[b]:S[b]=_(b)}function o(b,_){this.h=_;for(var S=[],P=!0,D=b.length-1;0<=D;D--){var N=b[D]|0;P&&N==_||(S[D]=N,P=!1)}this.g=S}var a={};function l(b){return-128<=b&&128>b?s(b,function(_){return new o([_|0],0>_?-1:0)}):new o([b|0],0>b?-1:0)}function c(b){if(isNaN(b)||!isFinite(b))return d;if(0>b)return x(c(-b));for(var _=[],S=1,P=0;b>=S;P++)_[P]=b/S|0,S*=4294967296;return new o(_,0)}function h(b,_){if(b.length==0)throw Error("number format error: empty string");if(_=_||10,2>_||36<_)throw Error("radix out of range: "+_);if(b.charAt(0)=="-")return x(h(b.substring(1),_));if(0<=b.indexOf("-"))throw Error('number format error: interior "-" character');for(var S=c(Math.pow(_,8)),P=d,D=0;D<b.length;D+=8){var N=Math.min(8,b.length-D),R=parseInt(b.substring(D,D+N),_);8>N?(N=c(Math.pow(_,N)),P=P.j(N).add(c(R))):(P=P.j(S),P=P.add(c(R)))}return P}var d=l(0),p=l(1),g=l(16777216);n=o.prototype,n.m=function(){if(v(this))return-x(this).m();for(var b=0,_=1,S=0;S<this.g.length;S++){var P=this.i(S);b+=(0<=P?P:4294967296+P)*_,_*=4294967296}return b},n.toString=function(b){if(b=b||10,2>b||36<b)throw Error("radix out of range: "+b);if(A(this))return"0";if(v(this))return"-"+x(this).toString(b);for(var _=c(Math.pow(b,6)),S=this,P="";;){var D=L(S,_).g;S=w(S,D.j(_));var N=((0<S.g.length?S.g[0]:S.h)>>>0).toString(b);if(S=D,A(S))return N+P;for(;6>N.length;)N="0"+N;P=N+P}},n.i=function(b){return 0>b?0:b<this.g.length?this.g[b]:this.h};function A(b){if(b.h!=0)return!1;for(var _=0;_<b.g.length;_++)if(b.g[_]!=0)return!1;return!0}function v(b){return b.h==-1}n.l=function(b){return b=w(this,b),v(b)?-1:A(b)?0:1};function x(b){for(var _=b.g.length,S=[],P=0;P<_;P++)S[P]=~b.g[P];return new o(S,~b.h).add(p)}n.abs=function(){return v(this)?x(this):this},n.add=function(b){for(var _=Math.max(this.g.length,b.g.length),S=[],P=0,D=0;D<=_;D++){var N=P+(this.i(D)&65535)+(b.i(D)&65535),R=(N>>>16)+(this.i(D)>>>16)+(b.i(D)>>>16);P=R>>>16,N&=65535,R&=65535,S[D]=R<<16|N}return new o(S,S[S.length-1]&-2147483648?-1:0)};function w(b,_){return b.add(x(_))}n.j=function(b){if(A(this)||A(b))return d;if(v(this))return v(b)?x(this).j(x(b)):x(x(this).j(b));if(v(b))return x(this.j(x(b)));if(0>this.l(g)&&0>b.l(g))return c(this.m()*b.m());for(var _=this.g.length+b.g.length,S=[],P=0;P<2*_;P++)S[P]=0;for(P=0;P<this.g.length;P++)for(var D=0;D<b.g.length;D++){var N=this.i(P)>>>16,R=this.i(P)&65535,Te=b.i(D)>>>16,q=b.i(D)&65535;S[2*P+2*D]+=R*q,E(S,2*P+2*D),S[2*P+2*D+1]+=N*q,E(S,2*P+2*D+1),S[2*P+2*D+1]+=R*Te,E(S,2*P+2*D+1),S[2*P+2*D+2]+=N*Te,E(S,2*P+2*D+2)}for(P=0;P<_;P++)S[P]=S[2*P+1]<<16|S[2*P];for(P=_;P<2*_;P++)S[P]=0;return new o(S,0)};function E(b,_){for(;(b[_]&65535)!=b[_];)b[_+1]+=b[_]>>>16,b[_]&=65535,_++}function T(b,_){this.g=b,this.h=_}function L(b,_){if(A(_))throw Error("division by zero");if(A(b))return new T(d,d);if(v(b))return _=L(x(b),_),new T(x(_.g),x(_.h));if(v(_))return _=L(b,x(_)),new T(x(_.g),_.h);if(30<b.g.length){if(v(b)||v(_))throw Error("slowDivide_ only works with positive integers.");for(var S=p,P=_;0>=P.l(b);)S=F(S),P=F(P);var D=M(S,1),N=M(P,1);for(P=M(P,2),S=M(S,2);!A(P);){var R=N.add(P);0>=R.l(b)&&(D=D.add(S),N=R),P=M(P,1),S=M(S,1)}return _=w(b,D.j(_)),new T(D,_)}for(D=d;0<=b.l(_);){for(S=Math.max(1,Math.floor(b.m()/_.m())),P=Math.ceil(Math.log(S)/Math.LN2),P=48>=P?1:Math.pow(2,P-48),N=c(S),R=N.j(_);v(R)||0<R.l(b);)S-=P,N=c(S),R=N.j(_);A(N)&&(N=p),D=D.add(N),b=w(b,R)}return new T(D,b)}n.A=function(b){return L(this,b).h},n.and=function(b){for(var _=Math.max(this.g.length,b.g.length),S=[],P=0;P<_;P++)S[P]=this.i(P)&b.i(P);return new o(S,this.h&b.h)},n.or=function(b){for(var _=Math.max(this.g.length,b.g.length),S=[],P=0;P<_;P++)S[P]=this.i(P)|b.i(P);return new o(S,this.h|b.h)},n.xor=function(b){for(var _=Math.max(this.g.length,b.g.length),S=[],P=0;P<_;P++)S[P]=this.i(P)^b.i(P);return new o(S,this.h^b.h)};function F(b){for(var _=b.g.length+1,S=[],P=0;P<_;P++)S[P]=b.i(P)<<1|b.i(P-1)>>>31;return new o(S,b.h)}function M(b,_){var S=_>>5;_%=32;for(var P=b.g.length-S,D=[],N=0;N<P;N++)D[N]=0<_?b.i(N+S)>>>_|b.i(N+S+1)<<32-_:b.i(N+S);return new o(D,b.h)}r.prototype.digest=r.prototype.v,r.prototype.reset=r.prototype.s,r.prototype.update=r.prototype.u,qk=r,o.prototype.add=o.prototype.add,o.prototype.multiply=o.prototype.j,o.prototype.modulo=o.prototype.A,o.prototype.compare=o.prototype.l,o.prototype.toNumber=o.prototype.m,o.prototype.toString=o.prototype.toString,o.prototype.getBits=o.prototype.i,o.fromNumber=c,o.fromString=h,Da=o}).apply(typeof Db<"u"?Db:typeof self<"u"?self:typeof window<"u"?window:{});var Dp=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var Wk,Vh,Jk,cm,e_,Yk,Xk,Zk;(function(){var n,e=typeof Object.defineProperties=="function"?Object.defineProperty:function(u,f,m){return u==Array.prototype||u==Object.prototype||(u[f]=m.value),u};function t(u){u=[typeof globalThis=="object"&&globalThis,u,typeof window=="object"&&window,typeof self=="object"&&self,typeof Dp=="object"&&Dp];for(var f=0;f<u.length;++f){var m=u[f];if(m&&m.Math==Math)return m}throw Error("Cannot find global object")}var r=t(this);function i(u,f){if(f)e:{var m=r;u=u.split(".");for(var I=0;I<u.length-1;I++){var V=u[I];if(!(V in m))break e;m=m[V]}u=u[u.length-1],I=m[u],f=f(I),f!=I&&f!=null&&e(m,u,{configurable:!0,writable:!0,value:f})}}function s(u,f){u instanceof String&&(u+="");var m=0,I=!1,V={next:function(){if(!I&&m<u.length){var z=m++;return{value:f(z,u[z]),done:!1}}return I=!0,{done:!0,value:void 0}}};return V[Symbol.iterator]=function(){return V},V}i("Array.prototype.values",function(u){return u||function(){return s(this,function(f,m){return m})}});/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/var o=o||{},a=this||self;function l(u){var f=typeof u;return f=f!="object"?f:u?Array.isArray(u)?"array":f:"null",f=="array"||f=="object"&&typeof u.length=="number"}function c(u){var f=typeof u;return f=="object"&&u!=null||f=="function"}function h(u,f,m){return u.call.apply(u.bind,arguments)}function d(u,f,m){if(!u)throw Error();if(2<arguments.length){var I=Array.prototype.slice.call(arguments,2);return function(){var V=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(V,I),u.apply(f,V)}}return function(){return u.apply(f,arguments)}}function p(u,f,m){return p=Function.prototype.bind&&Function.prototype.bind.toString().indexOf("native code")!=-1?h:d,p.apply(null,arguments)}function g(u,f){var m=Array.prototype.slice.call(arguments,1);return function(){var I=m.slice();return I.push.apply(I,arguments),u.apply(this,I)}}function A(u,f){function m(){}m.prototype=f.prototype,u.aa=f.prototype,u.prototype=new m,u.prototype.constructor=u,u.Qb=function(I,V,z){for(var Y=Array(arguments.length-2),Fe=2;Fe<arguments.length;Fe++)Y[Fe-2]=arguments[Fe];return f.prototype[V].apply(I,Y)}}function v(u){const f=u.length;if(0<f){const m=Array(f);for(let I=0;I<f;I++)m[I]=u[I];return m}return[]}function x(u,f){for(let m=1;m<arguments.length;m++){const I=arguments[m];if(l(I)){const V=u.length||0,z=I.length||0;u.length=V+z;for(let Y=0;Y<z;Y++)u[V+Y]=I[Y]}else u.push(I)}}class w{constructor(f,m){this.i=f,this.j=m,this.h=0,this.g=null}get(){let f;return 0<this.h?(this.h--,f=this.g,this.g=f.next,f.next=null):f=this.i(),f}}function E(u){return/^[\s\xa0]*$/.test(u)}function T(){var u=a.navigator;return u&&(u=u.userAgent)?u:""}function L(u){return L[" "](u),u}L[" "]=function(){};var F=T().indexOf("Gecko")!=-1&&!(T().toLowerCase().indexOf("webkit")!=-1&&T().indexOf("Edge")==-1)&&!(T().indexOf("Trident")!=-1||T().indexOf("MSIE")!=-1)&&T().indexOf("Edge")==-1;function M(u,f,m){for(const I in u)f.call(m,u[I],I,u)}function b(u,f){for(const m in u)f.call(void 0,u[m],m,u)}function _(u){const f={};for(const m in u)f[m]=u[m];return f}const S="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function P(u,f){let m,I;for(let V=1;V<arguments.length;V++){I=arguments[V];for(m in I)u[m]=I[m];for(let z=0;z<S.length;z++)m=S[z],Object.prototype.hasOwnProperty.call(I,m)&&(u[m]=I[m])}}function D(u){var f=1;u=u.split(":");const m=[];for(;0<f&&u.length;)m.push(u.shift()),f--;return u.length&&m.push(u.join(":")),m}function N(u){a.setTimeout(()=>{throw u},0)}function R(){var u=ee;let f=null;return u.g&&(f=u.g,u.g=u.g.next,u.g||(u.h=null),f.next=null),f}class Te{constructor(){this.h=this.g=null}add(f,m){const I=q.get();I.set(f,m),this.h?this.h.next=I:this.g=I,this.h=I}}var q=new w(()=>new ne,u=>u.reset());class ne{constructor(){this.next=this.g=this.h=null}set(f,m){this.h=f,this.g=m,this.next=null}reset(){this.next=this.g=this.h=null}}let de,Q=!1,ee=new Te,ae=()=>{const u=a.Promise.resolve(void 0);de=()=>{u.then(_e)}};var _e=()=>{for(var u;u=R();){try{u.h.call(u.g)}catch(m){N(m)}var f=q;f.j(u),100>f.h&&(f.h++,u.next=f.g,f.g=u)}Q=!1};function me(){this.s=this.s,this.C=this.C}me.prototype.s=!1,me.prototype.ma=function(){this.s||(this.s=!0,this.N())},me.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function ke(u,f){this.type=u,this.g=this.target=f,this.defaultPrevented=!1}ke.prototype.h=function(){this.defaultPrevented=!0};var _t=function(){if(!a.addEventListener||!Object.defineProperty)return!1;var u=!1,f=Object.defineProperty({},"passive",{get:function(){u=!0}});try{const m=()=>{};a.addEventListener("test",m,f),a.removeEventListener("test",m,f)}catch{}return u}();function Ft(u,f){if(ke.call(this,u?u.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,u){var m=this.type=u.type,I=u.changedTouches&&u.changedTouches.length?u.changedTouches[0]:null;if(this.target=u.target||u.srcElement,this.g=f,f=u.relatedTarget){if(F){e:{try{L(f.nodeName);var V=!0;break e}catch{}V=!1}V||(f=null)}}else m=="mouseover"?f=u.fromElement:m=="mouseout"&&(f=u.toElement);this.relatedTarget=f,I?(this.clientX=I.clientX!==void 0?I.clientX:I.pageX,this.clientY=I.clientY!==void 0?I.clientY:I.pageY,this.screenX=I.screenX||0,this.screenY=I.screenY||0):(this.clientX=u.clientX!==void 0?u.clientX:u.pageX,this.clientY=u.clientY!==void 0?u.clientY:u.pageY,this.screenX=u.screenX||0,this.screenY=u.screenY||0),this.button=u.button,this.key=u.key||"",this.ctrlKey=u.ctrlKey,this.altKey=u.altKey,this.shiftKey=u.shiftKey,this.metaKey=u.metaKey,this.pointerId=u.pointerId||0,this.pointerType=typeof u.pointerType=="string"?u.pointerType:Zt[u.pointerType]||"",this.state=u.state,this.i=u,u.defaultPrevented&&Ft.aa.h.call(this)}}A(Ft,ke);var Zt={2:"touch",3:"pen",4:"mouse"};Ft.prototype.h=function(){Ft.aa.h.call(this);var u=this.i;u.preventDefault?u.preventDefault():u.returnValue=!1};var mt="closure_listenable_"+(1e6*Math.random()|0),$c=0;function ui(u,f,m,I,V){this.listener=u,this.proxy=null,this.src=f,this.type=m,this.capture=!!I,this.ha=V,this.key=++$c,this.da=this.fa=!1}function fr(u){u.da=!0,u.listener=null,u.proxy=null,u.src=null,u.ha=null}function Co(u){this.src=u,this.g={},this.h=0}Co.prototype.add=function(u,f,m,I,V){var z=u.toString();u=this.g[z],u||(u=this.g[z]=[],this.h++);var Y=en(u,f,I,V);return-1<Y?(f=u[Y],m||(f.fa=!1)):(f=new ui(f,this.src,z,!!I,V),f.fa=m,u.push(f)),f};function Vr(u,f){var m=f.type;if(m in u.g){var I=u.g[m],V=Array.prototype.indexOf.call(I,f,void 0),z;(z=0<=V)&&Array.prototype.splice.call(I,V,1),z&&(fr(f),u.g[m].length==0&&(delete u.g[m],u.h--))}}function en(u,f,m,I){for(var V=0;V<u.length;++V){var z=u[V];if(!z.da&&z.listener==f&&z.capture==!!m&&z.ha==I)return V}return-1}var Mr="closure_lm_"+(1e6*Math.random()|0),fl={};function Kc(u,f,m,I,V){if(I&&I.once)return WA(u,f,m,I,V);if(Array.isArray(f)){for(var z=0;z<f.length;z++)Kc(u,f[z],m,I,V);return null}return m=qy(m),u&&u[mt]?u.K(f,m,c(I)?!!I.capture:!!I,V):qA(u,f,m,!1,I,V)}function qA(u,f,m,I,V,z){if(!f)throw Error("Invalid event type");var Y=c(V)?!!V.capture:!!V,Fe=Ky(u);if(Fe||(u[Mr]=Fe=new Co(u)),m=Fe.add(f,m,I,Y,z),m.proxy)return m;if(I=zD(),m.proxy=I,I.src=u,I.listener=m,u.addEventListener)_t||(V=Y),V===void 0&&(V=!1),u.addEventListener(f.toString(),I,V);else if(u.attachEvent)u.attachEvent(YA(f.toString()),I);else if(u.addListener&&u.removeListener)u.addListener(I);else throw Error("addEventListener and attachEvent are unavailable.");return m}function zD(){function u(m){return f.call(u.src,u.listener,m)}const f=GD;return u}function WA(u,f,m,I,V){if(Array.isArray(f)){for(var z=0;z<f.length;z++)WA(u,f[z],m,I,V);return null}return m=qy(m),u&&u[mt]?u.L(f,m,c(I)?!!I.capture:!!I,V):qA(u,f,m,!0,I,V)}function JA(u,f,m,I,V){if(Array.isArray(f))for(var z=0;z<f.length;z++)JA(u,f[z],m,I,V);else I=c(I)?!!I.capture:!!I,m=qy(m),u&&u[mt]?(u=u.i,f=String(f).toString(),f in u.g&&(z=u.g[f],m=en(z,m,I,V),-1<m&&(fr(z[m]),Array.prototype.splice.call(z,m,1),z.length==0&&(delete u.g[f],u.h--)))):u&&(u=Ky(u))&&(f=u.g[f.toString()],u=-1,f&&(u=en(f,m,I,V)),(m=-1<u?f[u]:null)&&$y(m))}function $y(u){if(typeof u!="number"&&u&&!u.da){var f=u.src;if(f&&f[mt])Vr(f.i,u);else{var m=u.type,I=u.proxy;f.removeEventListener?f.removeEventListener(m,I,u.capture):f.detachEvent?f.detachEvent(YA(m),I):f.addListener&&f.removeListener&&f.removeListener(I),(m=Ky(f))?(Vr(m,u),m.h==0&&(m.src=null,f[Mr]=null)):fr(u)}}}function YA(u){return u in fl?fl[u]:fl[u]="on"+u}function GD(u,f){if(u.da)u=!0;else{f=new Ft(f,this);var m=u.listener,I=u.ha||u.src;u.fa&&$y(u),u=m.call(I,f)}return u}function Ky(u){return u=u[Mr],u instanceof Co?u:null}var Qy="__closure_events_fn_"+(1e9*Math.random()>>>0);function qy(u){return typeof u=="function"?u:(u[Qy]||(u[Qy]=function(f){return u.handleEvent(f)}),u[Qy])}function Ut(){me.call(this),this.i=new Co(this),this.M=this,this.F=null}A(Ut,me),Ut.prototype[mt]=!0,Ut.prototype.removeEventListener=function(u,f,m,I){JA(this,u,f,m,I)};function tn(u,f){var m,I=u.F;if(I)for(m=[];I;I=I.F)m.push(I);if(u=u.M,I=f.type||f,typeof f=="string")f=new ke(f,u);else if(f instanceof ke)f.target=f.target||u;else{var V=f;f=new ke(I,u),P(f,V)}if(V=!0,m)for(var z=m.length-1;0<=z;z--){var Y=f.g=m[z];V=Hf(Y,I,!0,f)&&V}if(Y=f.g=u,V=Hf(Y,I,!0,f)&&V,V=Hf(Y,I,!1,f)&&V,m)for(z=0;z<m.length;z++)Y=f.g=m[z],V=Hf(Y,I,!1,f)&&V}Ut.prototype.N=function(){if(Ut.aa.N.call(this),this.i){var u=this.i,f;for(f in u.g){for(var m=u.g[f],I=0;I<m.length;I++)fr(m[I]);delete u.g[f],u.h--}}this.F=null},Ut.prototype.K=function(u,f,m,I){return this.i.add(String(u),f,!1,m,I)},Ut.prototype.L=function(u,f,m,I){return this.i.add(String(u),f,!0,m,I)};function Hf(u,f,m,I){if(f=u.i.g[String(f)],!f)return!0;f=f.concat();for(var V=!0,z=0;z<f.length;++z){var Y=f[z];if(Y&&!Y.da&&Y.capture==m){var Fe=Y.listener,Pt=Y.ha||Y.src;Y.fa&&Vr(u.i,Y),V=Fe.call(Pt,I)!==!1&&V}}return V&&!I.defaultPrevented}function XA(u,f,m){if(typeof u=="function")m&&(u=p(u,m));else if(u&&typeof u.handleEvent=="function")u=p(u.handleEvent,u);else throw Error("Invalid listener argument");return 2147483647<Number(f)?-1:a.setTimeout(u,f||0)}function ZA(u){u.g=XA(()=>{u.g=null,u.i&&(u.i=!1,ZA(u))},u.l);const f=u.h;u.h=null,u.m.apply(null,f)}class HD extends me{constructor(f,m){super(),this.m=f,this.l=m,this.h=null,this.i=!1,this.g=null}j(f){this.h=arguments,this.g?this.i=!0:ZA(this)}N(){super.N(),this.g&&(a.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function Qc(u){me.call(this),this.h=u,this.g={}}A(Qc,me);var eI=[];function tI(u){M(u.g,function(f,m){this.g.hasOwnProperty(m)&&$y(f)},u),u.g={}}Qc.prototype.N=function(){Qc.aa.N.call(this),tI(this)},Qc.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var Wy=a.JSON.stringify,$D=a.JSON.parse,KD=class{stringify(u){return a.JSON.stringify(u,void 0)}parse(u){return a.JSON.parse(u,void 0)}};function Jy(){}Jy.prototype.h=null;function nI(u){return u.h||(u.h=u.i())}function rI(){}var qc={OPEN:"a",kb:"b",Ja:"c",wb:"d"};function Yy(){ke.call(this,"d")}A(Yy,ke);function Xy(){ke.call(this,"c")}A(Xy,ke);var ko={},iI=null;function $f(){return iI=iI||new Ut}ko.La="serverreachability";function sI(u){ke.call(this,ko.La,u)}A(sI,ke);function Wc(u){const f=$f();tn(f,new sI(f))}ko.STAT_EVENT="statevent";function oI(u,f){ke.call(this,ko.STAT_EVENT,u),this.stat=f}A(oI,ke);function nn(u){const f=$f();tn(f,new oI(f,u))}ko.Ma="timingevent";function aI(u,f){ke.call(this,ko.Ma,u),this.size=f}A(aI,ke);function Jc(u,f){if(typeof u!="function")throw Error("Fn must not be null and must be a function");return a.setTimeout(function(){u()},f)}function Yc(){this.g=!0}Yc.prototype.xa=function(){this.g=!1};function QD(u,f,m,I,V,z){u.info(function(){if(u.g)if(z)for(var Y="",Fe=z.split("&"),Pt=0;Pt<Fe.length;Pt++){var Re=Fe[Pt].split("=");if(1<Re.length){var jt=Re[0];Re=Re[1];var zt=jt.split("_");Y=2<=zt.length&&zt[1]=="type"?Y+(jt+"="+Re+"&"):Y+(jt+"=redacted&")}}else Y=null;else Y=z;return"XMLHTTP REQ ("+I+") [attempt "+V+"]: "+f+`
`+m+`
`+Y})}function qD(u,f,m,I,V,z,Y){u.info(function(){return"XMLHTTP RESP ("+I+") [ attempt "+V+"]: "+f+`
`+m+`
`+z+" "+Y})}function pl(u,f,m,I){u.info(function(){return"XMLHTTP TEXT ("+f+"): "+JD(u,m)+(I?" "+I:"")})}function WD(u,f){u.info(function(){return"TIMEOUT: "+f})}Yc.prototype.info=function(){};function JD(u,f){if(!u.g)return f;if(!f)return null;try{var m=JSON.parse(f);if(m){for(u=0;u<m.length;u++)if(Array.isArray(m[u])){var I=m[u];if(!(2>I.length)){var V=I[1];if(Array.isArray(V)&&!(1>V.length)){var z=V[0];if(z!="noop"&&z!="stop"&&z!="close")for(var Y=1;Y<V.length;Y++)V[Y]=""}}}}return Wy(m)}catch{return f}}var Kf={NO_ERROR:0,gb:1,tb:2,sb:3,nb:4,rb:5,ub:6,Ia:7,TIMEOUT:8,xb:9},lI={lb:"complete",Hb:"success",Ja:"error",Ia:"abort",zb:"ready",Ab:"readystatechange",TIMEOUT:"timeout",vb:"incrementaldata",yb:"progress",ob:"downloadprogress",Pb:"uploadprogress"},Zy;function Qf(){}A(Qf,Jy),Qf.prototype.g=function(){return new XMLHttpRequest},Qf.prototype.i=function(){return{}},Zy=new Qf;function ss(u,f,m,I){this.j=u,this.i=f,this.l=m,this.R=I||1,this.U=new Qc(this),this.I=45e3,this.H=null,this.o=!1,this.m=this.A=this.v=this.L=this.F=this.S=this.B=null,this.D=[],this.g=null,this.C=0,this.s=this.u=null,this.X=-1,this.J=!1,this.O=0,this.M=null,this.W=this.K=this.T=this.P=!1,this.h=new uI}function uI(){this.i=null,this.g="",this.h=!1}var cI={},e0={};function t0(u,f,m){u.L=1,u.v=Yf(ci(f)),u.m=m,u.P=!0,hI(u,null)}function hI(u,f){u.F=Date.now(),qf(u),u.A=ci(u.v);var m=u.A,I=u.R;Array.isArray(I)||(I=[String(I)]),bI(m.i,"t",I),u.C=0,m=u.j.J,u.h=new uI,u.g=GI(u.j,m?f:null,!u.m),0<u.O&&(u.M=new HD(p(u.Y,u,u.g),u.O)),f=u.U,m=u.g,I=u.ca;var V="readystatechange";Array.isArray(V)||(V&&(eI[0]=V.toString()),V=eI);for(var z=0;z<V.length;z++){var Y=Kc(m,V[z],I||f.handleEvent,!1,f.h||f);if(!Y)break;f.g[Y.key]=Y}f=u.H?_(u.H):{},u.m?(u.u||(u.u="POST"),f["Content-Type"]="application/x-www-form-urlencoded",u.g.ea(u.A,u.u,u.m,f)):(u.u="GET",u.g.ea(u.A,u.u,null,f)),Wc(),QD(u.i,u.u,u.A,u.l,u.R,u.m)}ss.prototype.ca=function(u){u=u.target;const f=this.M;f&&hi(u)==3?f.j():this.Y(u)},ss.prototype.Y=function(u){try{if(u==this.g)e:{const zt=hi(this.g);var f=this.g.Ba();const yl=this.g.Z();if(!(3>zt)&&(zt!=3||this.g&&(this.h.h||this.g.oa()||NI(this.g)))){this.J||zt!=4||f==7||(f==8||0>=yl?Wc(3):Wc(2)),n0(this);var m=this.g.Z();this.X=m;t:if(dI(this)){var I=NI(this.g);u="";var V=I.length,z=hi(this.g)==4;if(!this.h.i){if(typeof TextDecoder>"u"){No(this),Xc(this);var Y="";break t}this.h.i=new a.TextDecoder}for(f=0;f<V;f++)this.h.h=!0,u+=this.h.i.decode(I[f],{stream:!(z&&f==V-1)});I.length=0,this.h.g+=u,this.C=0,Y=this.h.g}else Y=this.g.oa();if(this.o=m==200,qD(this.i,this.u,this.A,this.l,this.R,zt,m),this.o){if(this.T&&!this.K){t:{if(this.g){var Fe,Pt=this.g;if((Fe=Pt.g?Pt.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!E(Fe)){var Re=Fe;break t}}Re=null}if(m=Re)pl(this.i,this.l,m,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,r0(this,m);else{this.o=!1,this.s=3,nn(12),No(this),Xc(this);break e}}if(this.P){m=!0;let pr;for(;!this.J&&this.C<Y.length;)if(pr=YD(this,Y),pr==e0){zt==4&&(this.s=4,nn(14),m=!1),pl(this.i,this.l,null,"[Incomplete Response]");break}else if(pr==cI){this.s=4,nn(15),pl(this.i,this.l,Y,"[Invalid Chunk]"),m=!1;break}else pl(this.i,this.l,pr,null),r0(this,pr);if(dI(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),zt!=4||Y.length!=0||this.h.h||(this.s=1,nn(16),m=!1),this.o=this.o&&m,!m)pl(this.i,this.l,Y,"[Invalid Chunked Response]"),No(this),Xc(this);else if(0<Y.length&&!this.W){this.W=!0;var jt=this.j;jt.g==this&&jt.ba&&!jt.M&&(jt.j.info("Great, no buffering proxy detected. Bytes received: "+Y.length),u0(jt),jt.M=!0,nn(11))}}else pl(this.i,this.l,Y,null),r0(this,Y);zt==4&&No(this),this.o&&!this.J&&(zt==4?FI(this.j,this):(this.o=!1,qf(this)))}else pO(this.g),m==400&&0<Y.indexOf("Unknown SID")?(this.s=3,nn(12)):(this.s=0,nn(13)),No(this),Xc(this)}}}catch{}finally{}};function dI(u){return u.g?u.u=="GET"&&u.L!=2&&u.j.Ca:!1}function YD(u,f){var m=u.C,I=f.indexOf(`
`,m);return I==-1?e0:(m=Number(f.substring(m,I)),isNaN(m)?cI:(I+=1,I+m>f.length?e0:(f=f.slice(I,I+m),u.C=I+m,f)))}ss.prototype.cancel=function(){this.J=!0,No(this)};function qf(u){u.S=Date.now()+u.I,fI(u,u.I)}function fI(u,f){if(u.B!=null)throw Error("WatchDog timer not null");u.B=Jc(p(u.ba,u),f)}function n0(u){u.B&&(a.clearTimeout(u.B),u.B=null)}ss.prototype.ba=function(){this.B=null;const u=Date.now();0<=u-this.S?(WD(this.i,this.A),this.L!=2&&(Wc(),nn(17)),No(this),this.s=2,Xc(this)):fI(this,this.S-u)};function Xc(u){u.j.G==0||u.J||FI(u.j,u)}function No(u){n0(u);var f=u.M;f&&typeof f.ma=="function"&&f.ma(),u.M=null,tI(u.U),u.g&&(f=u.g,u.g=null,f.abort(),f.ma())}function r0(u,f){try{var m=u.j;if(m.G!=0&&(m.g==u||i0(m.h,u))){if(!u.K&&i0(m.h,u)&&m.G==3){try{var I=m.Da.g.parse(f)}catch{I=null}if(Array.isArray(I)&&I.length==3){var V=I;if(V[0]==0){e:if(!m.u){if(m.g)if(m.g.F+3e3<u.F)rp(m),tp(m);else break e;l0(m),nn(18)}}else m.za=V[1],0<m.za-m.T&&37500>V[2]&&m.F&&m.v==0&&!m.C&&(m.C=Jc(p(m.Za,m),6e3));if(1>=gI(m.h)&&m.ca){try{m.ca()}catch{}m.ca=void 0}}else Oo(m,11)}else if((u.K||m.g==u)&&rp(m),!E(f))for(V=m.Da.g.parse(f),f=0;f<V.length;f++){let Re=V[f];if(m.T=Re[0],Re=Re[1],m.G==2)if(Re[0]=="c"){m.K=Re[1],m.ia=Re[2];const jt=Re[3];jt!=null&&(m.la=jt,m.j.info("VER="+m.la));const zt=Re[4];zt!=null&&(m.Aa=zt,m.j.info("SVER="+m.Aa));const yl=Re[5];yl!=null&&typeof yl=="number"&&0<yl&&(I=1.5*yl,m.L=I,m.j.info("backChannelRequestTimeoutMs_="+I)),I=m;const pr=u.g;if(pr){const sp=pr.g?pr.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(sp){var z=I.h;z.g||sp.indexOf("spdy")==-1&&sp.indexOf("quic")==-1&&sp.indexOf("h2")==-1||(z.j=z.l,z.g=new Set,z.h&&(s0(z,z.h),z.h=null))}if(I.D){const c0=pr.g?pr.g.getResponseHeader("X-HTTP-Session-Id"):null;c0&&(I.ya=c0,ze(I.I,I.D,c0))}}m.G=3,m.l&&m.l.ua(),m.ba&&(m.R=Date.now()-u.F,m.j.info("Handshake RTT: "+m.R+"ms")),I=m;var Y=u;if(I.qa=zI(I,I.J?I.ia:null,I.W),Y.K){yI(I.h,Y);var Fe=Y,Pt=I.L;Pt&&(Fe.I=Pt),Fe.B&&(n0(Fe),qf(Fe)),I.g=Y}else MI(I);0<m.i.length&&np(m)}else Re[0]!="stop"&&Re[0]!="close"||Oo(m,7);else m.G==3&&(Re[0]=="stop"||Re[0]=="close"?Re[0]=="stop"?Oo(m,7):a0(m):Re[0]!="noop"&&m.l&&m.l.ta(Re),m.v=0)}}Wc(4)}catch{}}var XD=class{constructor(u,f){this.g=u,this.map=f}};function pI(u){this.l=u||10,a.PerformanceNavigationTiming?(u=a.performance.getEntriesByType("navigation"),u=0<u.length&&(u[0].nextHopProtocol=="hq"||u[0].nextHopProtocol=="h2")):u=!!(a.chrome&&a.chrome.loadTimes&&a.chrome.loadTimes()&&a.chrome.loadTimes().wasFetchedViaSpdy),this.j=u?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}function mI(u){return u.h?!0:u.g?u.g.size>=u.j:!1}function gI(u){return u.h?1:u.g?u.g.size:0}function i0(u,f){return u.h?u.h==f:u.g?u.g.has(f):!1}function s0(u,f){u.g?u.g.add(f):u.h=f}function yI(u,f){u.h&&u.h==f?u.h=null:u.g&&u.g.has(f)&&u.g.delete(f)}pI.prototype.cancel=function(){if(this.i=wI(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const u of this.g.values())u.cancel();this.g.clear()}};function wI(u){if(u.h!=null)return u.i.concat(u.h.D);if(u.g!=null&&u.g.size!==0){let f=u.i;for(const m of u.g.values())f=f.concat(m.D);return f}return v(u.i)}function ZD(u){if(u.V&&typeof u.V=="function")return u.V();if(typeof Map<"u"&&u instanceof Map||typeof Set<"u"&&u instanceof Set)return Array.from(u.values());if(typeof u=="string")return u.split("");if(l(u)){for(var f=[],m=u.length,I=0;I<m;I++)f.push(u[I]);return f}f=[],m=0;for(I in u)f[m++]=u[I];return f}function eO(u){if(u.na&&typeof u.na=="function")return u.na();if(!u.V||typeof u.V!="function"){if(typeof Map<"u"&&u instanceof Map)return Array.from(u.keys());if(!(typeof Set<"u"&&u instanceof Set)){if(l(u)||typeof u=="string"){var f=[];u=u.length;for(var m=0;m<u;m++)f.push(m);return f}f=[],m=0;for(const I in u)f[m++]=I;return f}}}function vI(u,f){if(u.forEach&&typeof u.forEach=="function")u.forEach(f,void 0);else if(l(u)||typeof u=="string")Array.prototype.forEach.call(u,f,void 0);else for(var m=eO(u),I=ZD(u),V=I.length,z=0;z<V;z++)f.call(void 0,I[z],m&&m[z],u)}var _I=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function tO(u,f){if(u){u=u.split("&");for(var m=0;m<u.length;m++){var I=u[m].indexOf("="),V=null;if(0<=I){var z=u[m].substring(0,I);V=u[m].substring(I+1)}else z=u[m];f(z,V?decodeURIComponent(V.replace(/\+/g," ")):"")}}}function Do(u){if(this.g=this.o=this.j="",this.s=null,this.m=this.l="",this.h=!1,u instanceof Do){this.h=u.h,Wf(this,u.j),this.o=u.o,this.g=u.g,Jf(this,u.s),this.l=u.l;var f=u.i,m=new th;m.i=f.i,f.g&&(m.g=new Map(f.g),m.h=f.h),EI(this,m),this.m=u.m}else u&&(f=String(u).match(_I))?(this.h=!1,Wf(this,f[1]||"",!0),this.o=Zc(f[2]||""),this.g=Zc(f[3]||"",!0),Jf(this,f[4]),this.l=Zc(f[5]||"",!0),EI(this,f[6]||"",!0),this.m=Zc(f[7]||"")):(this.h=!1,this.i=new th(null,this.h))}Do.prototype.toString=function(){var u=[],f=this.j;f&&u.push(eh(f,AI,!0),":");var m=this.g;return(m||f=="file")&&(u.push("//"),(f=this.o)&&u.push(eh(f,AI,!0),"@"),u.push(encodeURIComponent(String(m)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),m=this.s,m!=null&&u.push(":",String(m))),(m=this.l)&&(this.g&&m.charAt(0)!="/"&&u.push("/"),u.push(eh(m,m.charAt(0)=="/"?iO:rO,!0))),(m=this.i.toString())&&u.push("?",m),(m=this.m)&&u.push("#",eh(m,oO)),u.join("")};function ci(u){return new Do(u)}function Wf(u,f,m){u.j=m?Zc(f,!0):f,u.j&&(u.j=u.j.replace(/:$/,""))}function Jf(u,f){if(f){if(f=Number(f),isNaN(f)||0>f)throw Error("Bad port number "+f);u.s=f}else u.s=null}function EI(u,f,m){f instanceof th?(u.i=f,aO(u.i,u.h)):(m||(f=eh(f,sO)),u.i=new th(f,u.h))}function ze(u,f,m){u.i.set(f,m)}function Yf(u){return ze(u,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),u}function Zc(u,f){return u?f?decodeURI(u.replace(/%25/g,"%2525")):decodeURIComponent(u):""}function eh(u,f,m){return typeof u=="string"?(u=encodeURI(u).replace(f,nO),m&&(u=u.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),u):null}function nO(u){return u=u.charCodeAt(0),"%"+(u>>4&15).toString(16)+(u&15).toString(16)}var AI=/[#\/\?@]/g,rO=/[#\?:]/g,iO=/[#\?]/g,sO=/[#\?@]/g,oO=/#/g;function th(u,f){this.h=this.g=null,this.i=u||null,this.j=!!f}function os(u){u.g||(u.g=new Map,u.h=0,u.i&&tO(u.i,function(f,m){u.add(decodeURIComponent(f.replace(/\+/g," ")),m)}))}n=th.prototype,n.add=function(u,f){os(this),this.i=null,u=ml(this,u);var m=this.g.get(u);return m||this.g.set(u,m=[]),m.push(f),this.h+=1,this};function II(u,f){os(u),f=ml(u,f),u.g.has(f)&&(u.i=null,u.h-=u.g.get(f).length,u.g.delete(f))}function TI(u,f){return os(u),f=ml(u,f),u.g.has(f)}n.forEach=function(u,f){os(this),this.g.forEach(function(m,I){m.forEach(function(V){u.call(f,V,I,this)},this)},this)},n.na=function(){os(this);const u=Array.from(this.g.values()),f=Array.from(this.g.keys()),m=[];for(let I=0;I<f.length;I++){const V=u[I];for(let z=0;z<V.length;z++)m.push(f[I])}return m},n.V=function(u){os(this);let f=[];if(typeof u=="string")TI(this,u)&&(f=f.concat(this.g.get(ml(this,u))));else{u=Array.from(this.g.values());for(let m=0;m<u.length;m++)f=f.concat(u[m])}return f},n.set=function(u,f){return os(this),this.i=null,u=ml(this,u),TI(this,u)&&(this.h-=this.g.get(u).length),this.g.set(u,[f]),this.h+=1,this},n.get=function(u,f){return u?(u=this.V(u),0<u.length?String(u[0]):f):f};function bI(u,f,m){II(u,f),0<m.length&&(u.i=null,u.g.set(ml(u,f),v(m)),u.h+=m.length)}n.toString=function(){if(this.i)return this.i;if(!this.g)return"";const u=[],f=Array.from(this.g.keys());for(var m=0;m<f.length;m++){var I=f[m];const z=encodeURIComponent(String(I)),Y=this.V(I);for(I=0;I<Y.length;I++){var V=z;Y[I]!==""&&(V+="="+encodeURIComponent(String(Y[I]))),u.push(V)}}return this.i=u.join("&")};function ml(u,f){return f=String(f),u.j&&(f=f.toLowerCase()),f}function aO(u,f){f&&!u.j&&(os(u),u.i=null,u.g.forEach(function(m,I){var V=I.toLowerCase();I!=V&&(II(this,I),bI(this,V,m))},u)),u.j=f}function lO(u,f){const m=new Yc;if(a.Image){const I=new Image;I.onload=g(as,m,"TestLoadImage: loaded",!0,f,I),I.onerror=g(as,m,"TestLoadImage: error",!1,f,I),I.onabort=g(as,m,"TestLoadImage: abort",!1,f,I),I.ontimeout=g(as,m,"TestLoadImage: timeout",!1,f,I),a.setTimeout(function(){I.ontimeout&&I.ontimeout()},1e4),I.src=u}else f(!1)}function uO(u,f){const m=new Yc,I=new AbortController,V=setTimeout(()=>{I.abort(),as(m,"TestPingServer: timeout",!1,f)},1e4);fetch(u,{signal:I.signal}).then(z=>{clearTimeout(V),z.ok?as(m,"TestPingServer: ok",!0,f):as(m,"TestPingServer: server error",!1,f)}).catch(()=>{clearTimeout(V),as(m,"TestPingServer: error",!1,f)})}function as(u,f,m,I,V){try{V&&(V.onload=null,V.onerror=null,V.onabort=null,V.ontimeout=null),I(m)}catch{}}function cO(){this.g=new KD}function hO(u,f,m){const I=m||"";try{vI(u,function(V,z){let Y=V;c(V)&&(Y=Wy(V)),f.push(I+z+"="+encodeURIComponent(Y))})}catch(V){throw f.push(I+"type="+encodeURIComponent("_badmap")),V}}function Xf(u){this.l=u.Ub||null,this.j=u.eb||!1}A(Xf,Jy),Xf.prototype.g=function(){return new Zf(this.l,this.j)},Xf.prototype.i=function(u){return function(){return u}}({});function Zf(u,f){Ut.call(this),this.D=u,this.o=f,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.u=new Headers,this.h=null,this.B="GET",this.A="",this.g=!1,this.v=this.j=this.l=null}A(Zf,Ut),n=Zf.prototype,n.open=function(u,f){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.B=u,this.A=f,this.readyState=1,rh(this)},n.send=function(u){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");this.g=!0;const f={headers:this.u,method:this.B,credentials:this.m,cache:void 0};u&&(f.body=u),(this.D||a).fetch(new Request(this.A,f)).then(this.Sa.bind(this),this.ga.bind(this))},n.abort=function(){this.response=this.responseText="",this.u=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&this.readyState!=4&&(this.g=!1,nh(this)),this.readyState=0},n.Sa=function(u){if(this.g&&(this.l=u,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=u.headers,this.readyState=2,rh(this)),this.g&&(this.readyState=3,rh(this),this.g)))if(this.responseType==="arraybuffer")u.arrayBuffer().then(this.Qa.bind(this),this.ga.bind(this));else if(typeof a.ReadableStream<"u"&&"body"in u){if(this.j=u.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.v=new TextDecoder;xI(this)}else u.text().then(this.Ra.bind(this),this.ga.bind(this))};function xI(u){u.j.read().then(u.Pa.bind(u)).catch(u.ga.bind(u))}n.Pa=function(u){if(this.g){if(this.o&&u.value)this.response.push(u.value);else if(!this.o){var f=u.value?u.value:new Uint8Array(0);(f=this.v.decode(f,{stream:!u.done}))&&(this.response=this.responseText+=f)}u.done?nh(this):rh(this),this.readyState==3&&xI(this)}},n.Ra=function(u){this.g&&(this.response=this.responseText=u,nh(this))},n.Qa=function(u){this.g&&(this.response=u,nh(this))},n.ga=function(){this.g&&nh(this)};function nh(u){u.readyState=4,u.l=null,u.j=null,u.v=null,rh(u)}n.setRequestHeader=function(u,f){this.u.append(u,f)},n.getResponseHeader=function(u){return this.h&&this.h.get(u.toLowerCase())||""},n.getAllResponseHeaders=function(){if(!this.h)return"";const u=[],f=this.h.entries();for(var m=f.next();!m.done;)m=m.value,u.push(m[0]+": "+m[1]),m=f.next();return u.join(`\r
`)};function rh(u){u.onreadystatechange&&u.onreadystatechange.call(u)}Object.defineProperty(Zf.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(u){this.m=u?"include":"same-origin"}});function SI(u){let f="";return M(u,function(m,I){f+=I,f+=":",f+=m,f+=`\r
`}),f}function o0(u,f,m){e:{for(I in m){var I=!1;break e}I=!0}I||(m=SI(m),typeof u=="string"?m!=null&&encodeURIComponent(String(m)):ze(u,f,m))}function nt(u){Ut.call(this),this.headers=new Map,this.o=u||null,this.h=!1,this.v=this.g=null,this.D="",this.m=0,this.l="",this.j=this.B=this.u=this.A=!1,this.I=null,this.H="",this.J=!1}A(nt,Ut);var dO=/^https?$/i,fO=["POST","PUT"];n=nt.prototype,n.Ha=function(u){this.J=u},n.ea=function(u,f,m,I){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+u);f=f?f.toUpperCase():"GET",this.D=u,this.l="",this.m=0,this.A=!1,this.h=!0,this.g=this.o?this.o.g():Zy.g(),this.v=this.o?nI(this.o):nI(Zy),this.g.onreadystatechange=p(this.Ea,this);try{this.B=!0,this.g.open(f,String(u),!0),this.B=!1}catch(z){PI(this,z);return}if(u=m||"",m=new Map(this.headers),I)if(Object.getPrototypeOf(I)===Object.prototype)for(var V in I)m.set(V,I[V]);else if(typeof I.keys=="function"&&typeof I.get=="function")for(const z of I.keys())m.set(z,I.get(z));else throw Error("Unknown input type for opt_headers: "+String(I));I=Array.from(m.keys()).find(z=>z.toLowerCase()=="content-type"),V=a.FormData&&u instanceof a.FormData,!(0<=Array.prototype.indexOf.call(fO,f,void 0))||I||V||m.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[z,Y]of m)this.g.setRequestHeader(z,Y);this.H&&(this.g.responseType=this.H),"withCredentials"in this.g&&this.g.withCredentials!==this.J&&(this.g.withCredentials=this.J);try{kI(this),this.u=!0,this.g.send(u),this.u=!1}catch(z){PI(this,z)}};function PI(u,f){u.h=!1,u.g&&(u.j=!0,u.g.abort(),u.j=!1),u.l=f,u.m=5,RI(u),ep(u)}function RI(u){u.A||(u.A=!0,tn(u,"complete"),tn(u,"error"))}n.abort=function(u){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.m=u||7,tn(this,"complete"),tn(this,"abort"),ep(this))},n.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),ep(this,!0)),nt.aa.N.call(this)},n.Ea=function(){this.s||(this.B||this.u||this.j?CI(this):this.bb())},n.bb=function(){CI(this)};function CI(u){if(u.h&&typeof o<"u"&&(!u.v[1]||hi(u)!=4||u.Z()!=2)){if(u.u&&hi(u)==4)XA(u.Ea,0,u);else if(tn(u,"readystatechange"),hi(u)==4){u.h=!1;try{const Y=u.Z();e:switch(Y){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var f=!0;break e;default:f=!1}var m;if(!(m=f)){var I;if(I=Y===0){var V=String(u.D).match(_I)[1]||null;!V&&a.self&&a.self.location&&(V=a.self.location.protocol.slice(0,-1)),I=!dO.test(V?V.toLowerCase():"")}m=I}if(m)tn(u,"complete"),tn(u,"success");else{u.m=6;try{var z=2<hi(u)?u.g.statusText:""}catch{z=""}u.l=z+" ["+u.Z()+"]",RI(u)}}finally{ep(u)}}}}function ep(u,f){if(u.g){kI(u);const m=u.g,I=u.v[0]?()=>{}:null;u.g=null,u.v=null,f||tn(u,"ready");try{m.onreadystatechange=I}catch{}}}function kI(u){u.I&&(a.clearTimeout(u.I),u.I=null)}n.isActive=function(){return!!this.g};function hi(u){return u.g?u.g.readyState:0}n.Z=function(){try{return 2<hi(this)?this.g.status:-1}catch{return-1}},n.oa=function(){try{return this.g?this.g.responseText:""}catch{return""}},n.Oa=function(u){if(this.g){var f=this.g.responseText;return u&&f.indexOf(u)==0&&(f=f.substring(u.length)),$D(f)}};function NI(u){try{if(!u.g)return null;if("response"in u.g)return u.g.response;switch(u.H){case"":case"text":return u.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in u.g)return u.g.mozResponseArrayBuffer}return null}catch{return null}}function pO(u){const f={};u=(u.g&&2<=hi(u)&&u.g.getAllResponseHeaders()||"").split(`\r
`);for(let I=0;I<u.length;I++){if(E(u[I]))continue;var m=D(u[I]);const V=m[0];if(m=m[1],typeof m!="string")continue;m=m.trim();const z=f[V]||[];f[V]=z,z.push(m)}b(f,function(I){return I.join(", ")})}n.Ba=function(){return this.m},n.Ka=function(){return typeof this.l=="string"?this.l:String(this.l)};function ih(u,f,m){return m&&m.internalChannelParams&&m.internalChannelParams[u]||f}function DI(u){this.Aa=0,this.i=[],this.j=new Yc,this.ia=this.qa=this.I=this.W=this.g=this.ya=this.D=this.H=this.m=this.S=this.o=null,this.Ya=this.U=0,this.Va=ih("failFast",!1,u),this.F=this.C=this.u=this.s=this.l=null,this.X=!0,this.za=this.T=-1,this.Y=this.v=this.B=0,this.Ta=ih("baseRetryDelayMs",5e3,u),this.cb=ih("retryDelaySeedMs",1e4,u),this.Wa=ih("forwardChannelMaxRetries",2,u),this.wa=ih("forwardChannelRequestTimeoutMs",2e4,u),this.pa=u&&u.xmlHttpFactory||void 0,this.Xa=u&&u.Tb||void 0,this.Ca=u&&u.useFetchStreams||!1,this.L=void 0,this.J=u&&u.supportsCrossDomainXhr||!1,this.K="",this.h=new pI(u&&u.concurrentRequestLimit),this.Da=new cO,this.P=u&&u.fastHandshake||!1,this.O=u&&u.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.Ua=u&&u.Rb||!1,u&&u.xa&&this.j.xa(),u&&u.forceLongPolling&&(this.X=!1),this.ba=!this.P&&this.X&&u&&u.detectBufferingProxy||!1,this.ja=void 0,u&&u.longPollingTimeout&&0<u.longPollingTimeout&&(this.ja=u.longPollingTimeout),this.ca=void 0,this.R=0,this.M=!1,this.ka=this.A=null}n=DI.prototype,n.la=8,n.G=1,n.connect=function(u,f,m,I){nn(0),this.W=u,this.H=f||{},m&&I!==void 0&&(this.H.OSID=m,this.H.OAID=I),this.F=this.X,this.I=zI(this,null,this.W),np(this)};function a0(u){if(OI(u),u.G==3){var f=u.U++,m=ci(u.I);if(ze(m,"SID",u.K),ze(m,"RID",f),ze(m,"TYPE","terminate"),sh(u,m),f=new ss(u,u.j,f),f.L=2,f.v=Yf(ci(m)),m=!1,a.navigator&&a.navigator.sendBeacon)try{m=a.navigator.sendBeacon(f.v.toString(),"")}catch{}!m&&a.Image&&(new Image().src=f.v,m=!0),m||(f.g=GI(f.j,null),f.g.ea(f.v)),f.F=Date.now(),qf(f)}jI(u)}function tp(u){u.g&&(u0(u),u.g.cancel(),u.g=null)}function OI(u){tp(u),u.u&&(a.clearTimeout(u.u),u.u=null),rp(u),u.h.cancel(),u.s&&(typeof u.s=="number"&&a.clearTimeout(u.s),u.s=null)}function np(u){if(!mI(u.h)&&!u.s){u.s=!0;var f=u.Ga;de||ae(),Q||(de(),Q=!0),ee.add(f,u),u.B=0}}function mO(u,f){return gI(u.h)>=u.h.j-(u.s?1:0)?!1:u.s?(u.i=f.D.concat(u.i),!0):u.G==1||u.G==2||u.B>=(u.Va?0:u.Wa)?!1:(u.s=Jc(p(u.Ga,u,f),UI(u,u.B)),u.B++,!0)}n.Ga=function(u){if(this.s)if(this.s=null,this.G==1){if(!u){this.U=Math.floor(1e5*Math.random()),u=this.U++;const V=new ss(this,this.j,u);let z=this.o;if(this.S&&(z?(z=_(z),P(z,this.S)):z=this.S),this.m!==null||this.O||(V.H=z,z=null),this.P)e:{for(var f=0,m=0;m<this.i.length;m++){t:{var I=this.i[m];if("__data__"in I.map&&(I=I.map.__data__,typeof I=="string")){I=I.length;break t}I=void 0}if(I===void 0)break;if(f+=I,4096<f){f=m;break e}if(f===4096||m===this.i.length-1){f=m+1;break e}}f=1e3}else f=1e3;f=VI(this,V,f),m=ci(this.I),ze(m,"RID",u),ze(m,"CVER",22),this.D&&ze(m,"X-HTTP-Session-Id",this.D),sh(this,m),z&&(this.O?f="headers="+encodeURIComponent(String(SI(z)))+"&"+f:this.m&&o0(m,this.m,z)),s0(this.h,V),this.Ua&&ze(m,"TYPE","init"),this.P?(ze(m,"$req",f),ze(m,"SID","null"),V.T=!0,t0(V,m,null)):t0(V,m,f),this.G=2}}else this.G==3&&(u?LI(this,u):this.i.length==0||mI(this.h)||LI(this))};function LI(u,f){var m;f?m=f.l:m=u.U++;const I=ci(u.I);ze(I,"SID",u.K),ze(I,"RID",m),ze(I,"AID",u.T),sh(u,I),u.m&&u.o&&o0(I,u.m,u.o),m=new ss(u,u.j,m,u.B+1),u.m===null&&(m.H=u.o),f&&(u.i=f.D.concat(u.i)),f=VI(u,m,1e3),m.I=Math.round(.5*u.wa)+Math.round(.5*u.wa*Math.random()),s0(u.h,m),t0(m,I,f)}function sh(u,f){u.H&&M(u.H,function(m,I){ze(f,I,m)}),u.l&&vI({},function(m,I){ze(f,I,m)})}function VI(u,f,m){m=Math.min(u.i.length,m);var I=u.l?p(u.l.Na,u.l,u):null;e:{var V=u.i;let z=-1;for(;;){const Y=["count="+m];z==-1?0<m?(z=V[0].g,Y.push("ofs="+z)):z=0:Y.push("ofs="+z);let Fe=!0;for(let Pt=0;Pt<m;Pt++){let Re=V[Pt].g;const jt=V[Pt].map;if(Re-=z,0>Re)z=Math.max(0,V[Pt].g-100),Fe=!1;else try{hO(jt,Y,"req"+Re+"_")}catch{I&&I(jt)}}if(Fe){I=Y.join("&");break e}}}return u=u.i.splice(0,m),f.D=u,I}function MI(u){if(!u.g&&!u.u){u.Y=1;var f=u.Fa;de||ae(),Q||(de(),Q=!0),ee.add(f,u),u.v=0}}function l0(u){return u.g||u.u||3<=u.v?!1:(u.Y++,u.u=Jc(p(u.Fa,u),UI(u,u.v)),u.v++,!0)}n.Fa=function(){if(this.u=null,BI(this),this.ba&&!(this.M||this.g==null||0>=this.R)){var u=2*this.R;this.j.info("BP detection timer enabled: "+u),this.A=Jc(p(this.ab,this),u)}},n.ab=function(){this.A&&(this.A=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.M=!0,nn(10),tp(this),BI(this))};function u0(u){u.A!=null&&(a.clearTimeout(u.A),u.A=null)}function BI(u){u.g=new ss(u,u.j,"rpc",u.Y),u.m===null&&(u.g.H=u.o),u.g.O=0;var f=ci(u.qa);ze(f,"RID","rpc"),ze(f,"SID",u.K),ze(f,"AID",u.T),ze(f,"CI",u.F?"0":"1"),!u.F&&u.ja&&ze(f,"TO",u.ja),ze(f,"TYPE","xmlhttp"),sh(u,f),u.m&&u.o&&o0(f,u.m,u.o),u.L&&(u.g.I=u.L);var m=u.g;u=u.ia,m.L=1,m.v=Yf(ci(f)),m.m=null,m.P=!0,hI(m,u)}n.Za=function(){this.C!=null&&(this.C=null,tp(this),l0(this),nn(19))};function rp(u){u.C!=null&&(a.clearTimeout(u.C),u.C=null)}function FI(u,f){var m=null;if(u.g==f){rp(u),u0(u),u.g=null;var I=2}else if(i0(u.h,f))m=f.D,yI(u.h,f),I=1;else return;if(u.G!=0){if(f.o)if(I==1){m=f.m?f.m.length:0,f=Date.now()-f.F;var V=u.B;I=$f(),tn(I,new aI(I,m)),np(u)}else MI(u);else if(V=f.s,V==3||V==0&&0<f.X||!(I==1&&mO(u,f)||I==2&&l0(u)))switch(m&&0<m.length&&(f=u.h,f.i=f.i.concat(m)),V){case 1:Oo(u,5);break;case 4:Oo(u,10);break;case 3:Oo(u,6);break;default:Oo(u,2)}}}function UI(u,f){let m=u.Ta+Math.floor(Math.random()*u.cb);return u.isActive()||(m*=2),m*f}function Oo(u,f){if(u.j.info("Error code "+f),f==2){var m=p(u.fb,u),I=u.Xa;const V=!I;I=new Do(I||"//www.google.com/images/cleardot.gif"),a.location&&a.location.protocol=="http"||Wf(I,"https"),Yf(I),V?lO(I.toString(),m):uO(I.toString(),m)}else nn(2);u.G=0,u.l&&u.l.sa(f),jI(u),OI(u)}n.fb=function(u){u?(this.j.info("Successfully pinged google.com"),nn(2)):(this.j.info("Failed to ping google.com"),nn(1))};function jI(u){if(u.G=0,u.ka=[],u.l){const f=wI(u.h);(f.length!=0||u.i.length!=0)&&(x(u.ka,f),x(u.ka,u.i),u.h.i.length=0,v(u.i),u.i.length=0),u.l.ra()}}function zI(u,f,m){var I=m instanceof Do?ci(m):new Do(m);if(I.g!="")f&&(I.g=f+"."+I.g),Jf(I,I.s);else{var V=a.location;I=V.protocol,f=f?f+"."+V.hostname:V.hostname,V=+V.port;var z=new Do(null);I&&Wf(z,I),f&&(z.g=f),V&&Jf(z,V),m&&(z.l=m),I=z}return m=u.D,f=u.ya,m&&f&&ze(I,m,f),ze(I,"VER",u.la),sh(u,I),I}function GI(u,f,m){if(f&&!u.J)throw Error("Can't create secondary domain capable XhrIo object.");return f=u.Ca&&!u.pa?new nt(new Xf({eb:m})):new nt(u.pa),f.Ha(u.J),f}n.isActive=function(){return!!this.l&&this.l.isActive(this)};function HI(){}n=HI.prototype,n.ua=function(){},n.ta=function(){},n.sa=function(){},n.ra=function(){},n.isActive=function(){return!0},n.Na=function(){};function ip(){}ip.prototype.g=function(u,f){return new Ln(u,f)};function Ln(u,f){Ut.call(this),this.g=new DI(f),this.l=u,this.h=f&&f.messageUrlParams||null,u=f&&f.messageHeaders||null,f&&f.clientProtocolHeaderRequired&&(u?u["X-Client-Protocol"]="webchannel":u={"X-Client-Protocol":"webchannel"}),this.g.o=u,u=f&&f.initMessageHeaders||null,f&&f.messageContentType&&(u?u["X-WebChannel-Content-Type"]=f.messageContentType:u={"X-WebChannel-Content-Type":f.messageContentType}),f&&f.va&&(u?u["X-WebChannel-Client-Profile"]=f.va:u={"X-WebChannel-Client-Profile":f.va}),this.g.S=u,(u=f&&f.Sb)&&!E(u)&&(this.g.m=u),this.v=f&&f.supportsCrossDomainXhr||!1,this.u=f&&f.sendRawJson||!1,(f=f&&f.httpSessionIdParam)&&!E(f)&&(this.g.D=f,u=this.h,u!==null&&f in u&&(u=this.h,f in u&&delete u[f])),this.j=new gl(this)}A(Ln,Ut),Ln.prototype.m=function(){this.g.l=this.j,this.v&&(this.g.J=!0),this.g.connect(this.l,this.h||void 0)},Ln.prototype.close=function(){a0(this.g)},Ln.prototype.o=function(u){var f=this.g;if(typeof u=="string"){var m={};m.__data__=u,u=m}else this.u&&(m={},m.__data__=Wy(u),u=m);f.i.push(new XD(f.Ya++,u)),f.G==3&&np(f)},Ln.prototype.N=function(){this.g.l=null,delete this.j,a0(this.g),delete this.g,Ln.aa.N.call(this)};function $I(u){Yy.call(this),u.__headers__&&(this.headers=u.__headers__,this.statusCode=u.__status__,delete u.__headers__,delete u.__status__);var f=u.__sm__;if(f){e:{for(const m in f){u=m;break e}u=void 0}(this.i=u)&&(u=this.i,f=f!==null&&u in f?f[u]:void 0),this.data=f}else this.data=u}A($I,Yy);function KI(){Xy.call(this),this.status=1}A(KI,Xy);function gl(u){this.g=u}A(gl,HI),gl.prototype.ua=function(){tn(this.g,"a")},gl.prototype.ta=function(u){tn(this.g,new $I(u))},gl.prototype.sa=function(u){tn(this.g,new KI)},gl.prototype.ra=function(){tn(this.g,"b")},ip.prototype.createWebChannel=ip.prototype.g,Ln.prototype.send=Ln.prototype.o,Ln.prototype.open=Ln.prototype.m,Ln.prototype.close=Ln.prototype.close,Zk=function(){return new ip},Xk=function(){return $f()},Yk=ko,e_={mb:0,pb:1,qb:2,Jb:3,Ob:4,Lb:5,Mb:6,Kb:7,Ib:8,Nb:9,PROXY:10,NOPROXY:11,Gb:12,Cb:13,Db:14,Bb:15,Eb:16,Fb:17,ib:18,hb:19,jb:20},Kf.NO_ERROR=0,Kf.TIMEOUT=8,Kf.HTTP_ERROR=6,cm=Kf,lI.COMPLETE="complete",Jk=lI,rI.EventType=qc,qc.OPEN="a",qc.CLOSE="b",qc.ERROR="c",qc.MESSAGE="d",Ut.prototype.listen=Ut.prototype.K,Vh=rI,nt.prototype.listenOnce=nt.prototype.L,nt.prototype.getLastError=nt.prototype.Ka,nt.prototype.getLastErrorCode=nt.prototype.Ba,nt.prototype.getStatus=nt.prototype.Z,nt.prototype.getResponseJson=nt.prototype.Oa,nt.prototype.getResponseText=nt.prototype.oa,nt.prototype.send=nt.prototype.ea,nt.prototype.setWithCredentials=nt.prototype.Ha,Wk=nt}).apply(typeof Dp<"u"?Dp:typeof self<"u"?self:typeof window<"u"?window:{});const Ob="@firebase/firestore";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kt{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}kt.UNAUTHENTICATED=new kt(null),kt.GOOGLE_CREDENTIALS=new kt("google-credentials-uid"),kt.FIRST_PARTY=new kt("first-party-uid"),kt.MOCK_USER=new kt("mock-user");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Mc="10.14.0";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const $a=new zE("@firebase/firestore");function Rl(){return $a.logLevel}function W(n,...e){if($a.logLevel<=Ae.DEBUG){const t=e.map($E);$a.debug(`Firestore (${Mc}): ${n}`,...t)}}function cn(n,...e){if($a.logLevel<=Ae.ERROR){const t=e.map($E);$a.error(`Firestore (${Mc}): ${n}`,...t)}}function Ka(n,...e){if($a.logLevel<=Ae.WARN){const t=e.map($E);$a.warn(`Firestore (${Mc}): ${n}`,...t)}}function $E(n){if(typeof n=="string")return n;try{/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/return function(t){return JSON.stringify(t)}(n)}catch{return n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function oe(n="Unexpected state"){const e=`FIRESTORE (${Mc}) INTERNAL ASSERTION FAILED: `+n;throw cn(e),new Error(e)}function le(n,e){n||oe()}function fe(n,e){return n}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const H={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class X extends rs{constructor(e,t){super(e,t),this.code=e,this.message=t,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ii{constructor(){this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class eN{constructor(e,t){this.user=t,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class i9{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,t){e.enqueueRetryable(()=>t(kt.UNAUTHENTICATED))}shutdown(){}}class s9{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,t){this.changeListener=t,e.enqueueRetryable(()=>t(this.token.user))}shutdown(){this.changeListener=null}}class o9{constructor(e){this.t=e,this.currentUser=kt.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,t){le(this.o===void 0);let r=this.i;const i=l=>this.i!==r?(r=this.i,t(l)):Promise.resolve();let s=new ii;this.o=()=>{this.i++,this.currentUser=this.u(),s.resolve(),s=new ii,e.enqueueRetryable(()=>i(this.currentUser))};const o=()=>{const l=s;e.enqueueRetryable(async()=>{await l.promise,await i(this.currentUser)})},a=l=>{W("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=l,this.o&&(this.auth.addAuthTokenListener(this.o),o())};this.t.onInit(l=>a(l)),setTimeout(()=>{if(!this.auth){const l=this.t.getImmediate({optional:!0});l?a(l):(W("FirebaseAuthCredentialsProvider","Auth not yet detected"),s.resolve(),s=new ii)}},0),o()}getToken(){const e=this.i,t=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(t).then(r=>this.i!==e?(W("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):r?(le(typeof r.accessToken=="string"),new eN(r.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const e=this.auth&&this.auth.getUid();return le(e===null||typeof e=="string"),new kt(e)}}class a9{constructor(e,t,r){this.l=e,this.h=t,this.P=r,this.type="FirstParty",this.user=kt.FIRST_PARTY,this.I=new Map}T(){return this.P?this.P():null}get headers(){this.I.set("X-Goog-AuthUser",this.l);const e=this.T();return e&&this.I.set("Authorization",e),this.h&&this.I.set("X-Goog-Iam-Authorization-Token",this.h),this.I}}class l9{constructor(e,t,r){this.l=e,this.h=t,this.P=r}getToken(){return Promise.resolve(new a9(this.l,this.h,this.P))}start(e,t){e.enqueueRetryable(()=>t(kt.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class u9{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class c9{constructor(e){this.A=e,this.forceRefresh=!1,this.appCheck=null,this.R=null}start(e,t){le(this.o===void 0);const r=s=>{s.error!=null&&W("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${s.error.message}`);const o=s.token!==this.R;return this.R=s.token,W("FirebaseAppCheckTokenProvider",`Received ${o?"new":"existing"} token.`),o?t(s.token):Promise.resolve()};this.o=s=>{e.enqueueRetryable(()=>r(s))};const i=s=>{W("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=s,this.o&&this.appCheck.addTokenListener(this.o)};this.A.onInit(s=>i(s)),setTimeout(()=>{if(!this.appCheck){const s=this.A.getImmediate({optional:!0});s?i(s):W("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(t=>t?(le(typeof t.token=="string"),this.R=t.token,new u9(t.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function h9(n){const e=typeof self<"u"&&(self.crypto||self.msCrypto),t=new Uint8Array(n);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(t);else for(let r=0;r<n;r++)t[r]=Math.floor(256*Math.random());return t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tN{static newId(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",t=Math.floor(256/e.length)*e.length;let r="";for(;r.length<20;){const i=h9(40);for(let s=0;s<i.length;++s)r.length<20&&i[s]<t&&(r+=e.charAt(i[s]%e.length))}return r}}function pe(n,e){return n<e?-1:n>e?1:0}function _c(n,e,t){return n.length===e.length&&n.every((r,i)=>t(r,e[i]))}function nN(n){return n+"\0"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class et{constructor(e,t){if(this.seconds=e,this.nanoseconds=t,t<0)throw new X(H.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(t>=1e9)throw new X(H.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(e<-62135596800)throw new X(H.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new X(H.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}static now(){return et.fromMillis(Date.now())}static fromDate(e){return et.fromMillis(e.getTime())}static fromMillis(e){const t=Math.floor(e/1e3),r=Math.floor(1e6*(e-1e3*t));return new et(t,r)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/1e6}_compareTo(e){return this.seconds===e.seconds?pe(this.nanoseconds,e.nanoseconds):pe(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){const e=this.seconds- -62135596800;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ue{constructor(e){this.timestamp=e}static fromTimestamp(e){return new ue(e)}static min(){return new ue(new et(0,0))}static max(){return new ue(new et(253402300799,999999999))}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Vd{constructor(e,t,r){t===void 0?t=0:t>e.length&&oe(),r===void 0?r=e.length-t:r>e.length-t&&oe(),this.segments=e,this.offset=t,this.len=r}get length(){return this.len}isEqual(e){return Vd.comparator(this,e)===0}child(e){const t=this.segments.slice(this.offset,this.limit());return e instanceof Vd?e.forEach(r=>{t.push(r)}):t.push(e),this.construct(t)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}forEach(e){for(let t=this.offset,r=this.limit();t<r;t++)e(this.segments[t])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,t){const r=Math.min(e.length,t.length);for(let i=0;i<r;i++){const s=e.get(i),o=t.get(i);if(s<o)return-1;if(s>o)return 1}return e.length<t.length?-1:e.length>t.length?1:0}}class Ne extends Vd{construct(e,t,r){return new Ne(e,t,r)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){const t=[];for(const r of e){if(r.indexOf("//")>=0)throw new X(H.INVALID_ARGUMENT,`Invalid segment (${r}). Paths must not contain // in them.`);t.push(...r.split("/").filter(i=>i.length>0))}return new Ne(t)}static emptyPath(){return new Ne([])}}const d9=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class Xe extends Vd{construct(e,t,r){return new Xe(e,t,r)}static isValidIdentifier(e){return d9.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),Xe.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)==="__name__"}static keyField(){return new Xe(["__name__"])}static fromServerFormat(e){const t=[];let r="",i=0;const s=()=>{if(r.length===0)throw new X(H.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);t.push(r),r=""};let o=!1;for(;i<e.length;){const a=e[i];if(a==="\\"){if(i+1===e.length)throw new X(H.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const l=e[i+1];if(l!=="\\"&&l!=="."&&l!=="`")throw new X(H.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);r+=l,i+=2}else a==="`"?(o=!o,i++):a!=="."||o?(r+=a,i++):(s(),i++)}if(s(),o)throw new X(H.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new Xe(t)}static emptyPath(){return new Xe([])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Z{constructor(e){this.path=e}static fromPath(e){return new Z(Ne.fromString(e))}static fromName(e){return new Z(Ne.fromString(e).popFirst(5))}static empty(){return new Z(Ne.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&Ne.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,t){return Ne.comparator(e.path,t.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new Z(new Ne(e.slice()))}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pg{constructor(e,t,r,i){this.indexId=e,this.collectionGroup=t,this.fields=r,this.indexState=i}}function t_(n){return n.fields.find(e=>e.kind===2)}function Go(n){return n.fields.filter(e=>e.kind!==2)}pg.UNKNOWN_ID=-1;class hm{constructor(e,t){this.fieldPath=e,this.kind=t}}class Md{constructor(e,t){this.sequenceNumber=e,this.offset=t}static empty(){return new Md(0,Qn.min())}}function f9(n,e){const t=n.toTimestamp().seconds,r=n.toTimestamp().nanoseconds+1,i=ue.fromTimestamp(r===1e9?new et(t+1,0):new et(t,r));return new Qn(i,Z.empty(),e)}function rN(n){return new Qn(n.readTime,n.key,-1)}class Qn{constructor(e,t,r){this.readTime=e,this.documentKey=t,this.largestBatchId=r}static min(){return new Qn(ue.min(),Z.empty(),-1)}static max(){return new Qn(ue.max(),Z.empty(),-1)}}function KE(n,e){let t=n.readTime.compareTo(e.readTime);return t!==0?t:(t=Z.comparator(n.documentKey,e.documentKey),t!==0?t:pe(n.largestBatchId,e.largestBatchId))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const iN="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class sN{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function ll(n){if(n.code!==H.FAILED_PRECONDITION||n.message!==iN)throw n;W("LocalStore","Unexpectedly lost primary lease")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class j{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(t=>{this.isDone=!0,this.result=t,this.nextCallback&&this.nextCallback(t)},t=>{this.isDone=!0,this.error=t,this.catchCallback&&this.catchCallback(t)})}catch(e){return this.next(void 0,e)}next(e,t){return this.callbackAttached&&oe(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(t,this.error):this.wrapSuccess(e,this.result):new j((r,i)=>{this.nextCallback=s=>{this.wrapSuccess(e,s).next(r,i)},this.catchCallback=s=>{this.wrapFailure(t,s).next(r,i)}})}toPromise(){return new Promise((e,t)=>{this.next(e,t)})}wrapUserFunction(e){try{const t=e();return t instanceof j?t:j.resolve(t)}catch(t){return j.reject(t)}}wrapSuccess(e,t){return e?this.wrapUserFunction(()=>e(t)):j.resolve(t)}wrapFailure(e,t){return e?this.wrapUserFunction(()=>e(t)):j.reject(t)}static resolve(e){return new j((t,r)=>{t(e)})}static reject(e){return new j((t,r)=>{r(e)})}static waitFor(e){return new j((t,r)=>{let i=0,s=0,o=!1;e.forEach(a=>{++i,a.next(()=>{++s,o&&s===i&&t()},l=>r(l))}),o=!0,s===i&&t()})}static or(e){let t=j.resolve(!1);for(const r of e)t=t.next(i=>i?j.resolve(i):r());return t}static forEach(e,t){const r=[];return e.forEach((i,s)=>{r.push(t.call(this,i,s))}),this.waitFor(r)}static mapArray(e,t){return new j((r,i)=>{const s=e.length,o=new Array(s);let a=0;for(let l=0;l<s;l++){const c=l;t(e[c]).next(h=>{o[c]=h,++a,a===s&&r(o)},h=>i(h))}})}static doWhile(e,t){return new j((r,i)=>{const s=()=>{e()===!0?t().next(()=>{s()},i):r()};s()})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ey{constructor(e,t){this.action=e,this.transaction=t,this.aborted=!1,this.V=new ii,this.transaction.oncomplete=()=>{this.V.resolve()},this.transaction.onabort=()=>{t.error?this.V.reject(new Xh(e,t.error)):this.V.resolve()},this.transaction.onerror=r=>{const i=QE(r.target.error);this.V.reject(new Xh(e,i))}}static open(e,t,r,i){try{return new Ey(t,e.transaction(i,r))}catch(s){throw new Xh(t,s)}}get m(){return this.V.promise}abort(e){e&&this.V.reject(e),this.aborted||(W("SimpleDb","Aborting transaction:",e?e.message:"Client-initiated abort"),this.aborted=!0,this.transaction.abort())}g(){const e=this.transaction;this.aborted||typeof e.commit!="function"||e.commit()}store(e){const t=this.transaction.objectStore(e);return new m9(t)}}class lo{constructor(e,t,r){this.name=e,this.version=t,this.p=r,lo.S(wt())===12.2&&cn("Firestore persistence suffers from a bug in iOS 12.2 Safari that may cause your app to stop working. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.")}static delete(e){return W("SimpleDb","Removing database:",e),Ko(window.indexedDB.deleteDatabase(e)).toPromise()}static D(){if(!jk())return!1;if(lo.v())return!0;const e=wt(),t=lo.S(e),r=0<t&&t<10,i=oN(e),s=0<i&&i<4.5;return!(e.indexOf("MSIE ")>0||e.indexOf("Trident/")>0||e.indexOf("Edge/")>0||r||s)}static v(){var e;return typeof process<"u"&&((e=process.__PRIVATE_env)===null||e===void 0?void 0:e.C)==="YES"}static F(e,t){return e.store(t)}static S(e){const t=e.match(/i(?:phone|pad|pod) os ([\d_]+)/i),r=t?t[1].split("_").slice(0,2).join("."):"-1";return Number(r)}async M(e){return this.db||(W("SimpleDb","Opening database:",this.name),this.db=await new Promise((t,r)=>{const i=indexedDB.open(this.name,this.version);i.onsuccess=s=>{const o=s.target.result;t(o)},i.onblocked=()=>{r(new Xh(e,"Cannot upgrade IndexedDB schema while another tab is open. Close all tabs that access Firestore and reload this page to proceed."))},i.onerror=s=>{const o=s.target.error;o.name==="VersionError"?r(new X(H.FAILED_PRECONDITION,"A newer version of the Firestore SDK was previously used and so the persisted data is not compatible with the version of the SDK you are now using. The SDK will operate with persistence disabled. If you need persistence, please re-upgrade to a newer version of the SDK or else clear the persisted IndexedDB data for your app to start fresh.")):o.name==="InvalidStateError"?r(new X(H.FAILED_PRECONDITION,"Unable to open an IndexedDB connection. This could be due to running in a private browsing session on a browser whose private browsing sessions do not support IndexedDB: "+o)):r(new Xh(e,o))},i.onupgradeneeded=s=>{W("SimpleDb",'Database "'+this.name+'" requires upgrade from version:',s.oldVersion);const o=s.target.result;this.p.O(o,i.transaction,s.oldVersion,this.version).next(()=>{W("SimpleDb","Database upgrade to version "+this.version+" complete")})}})),this.N&&(this.db.onversionchange=t=>this.N(t)),this.db}L(e){this.N=e,this.db&&(this.db.onversionchange=t=>e(t))}async runTransaction(e,t,r,i){const s=t==="readonly";let o=0;for(;;){++o;try{this.db=await this.M(e);const a=Ey.open(this.db,e,s?"readonly":"readwrite",r),l=i(a).next(c=>(a.g(),c)).catch(c=>(a.abort(c),j.reject(c))).toPromise();return l.catch(()=>{}),await a.m,l}catch(a){const l=a,c=l.name!=="FirebaseError"&&o<3;if(W("SimpleDb","Transaction failed with error:",l.message,"Retrying:",c),this.close(),!c)return Promise.reject(l)}}}close(){this.db&&this.db.close(),this.db=void 0}}function oN(n){const e=n.match(/Android ([\d.]+)/i),t=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(t)}class p9{constructor(e){this.B=e,this.k=!1,this.q=null}get isDone(){return this.k}get K(){return this.q}set cursor(e){this.B=e}done(){this.k=!0}$(e){this.q=e}delete(){return Ko(this.B.delete())}}class Xh extends X{constructor(e,t){super(H.UNAVAILABLE,`IndexedDB transaction '${e}' failed: ${t}`),this.name="IndexedDbTransactionError"}}function bo(n){return n.name==="IndexedDbTransactionError"}class m9{constructor(e){this.store=e}put(e,t){let r;return t!==void 0?(W("SimpleDb","PUT",this.store.name,e,t),r=this.store.put(t,e)):(W("SimpleDb","PUT",this.store.name,"<auto-key>",e),r=this.store.put(e)),Ko(r)}add(e){return W("SimpleDb","ADD",this.store.name,e,e),Ko(this.store.add(e))}get(e){return Ko(this.store.get(e)).next(t=>(t===void 0&&(t=null),W("SimpleDb","GET",this.store.name,e,t),t))}delete(e){return W("SimpleDb","DELETE",this.store.name,e),Ko(this.store.delete(e))}count(){return W("SimpleDb","COUNT",this.store.name),Ko(this.store.count())}U(e,t){const r=this.options(e,t),i=r.index?this.store.index(r.index):this.store;if(typeof i.getAll=="function"){const s=i.getAll(r.range);return new j((o,a)=>{s.onerror=l=>{a(l.target.error)},s.onsuccess=l=>{o(l.target.result)}})}{const s=this.cursor(r),o=[];return this.W(s,(a,l)=>{o.push(l)}).next(()=>o)}}G(e,t){const r=this.store.getAll(e,t===null?void 0:t);return new j((i,s)=>{r.onerror=o=>{s(o.target.error)},r.onsuccess=o=>{i(o.target.result)}})}j(e,t){W("SimpleDb","DELETE ALL",this.store.name);const r=this.options(e,t);r.H=!1;const i=this.cursor(r);return this.W(i,(s,o,a)=>a.delete())}J(e,t){let r;t?r=e:(r={},t=e);const i=this.cursor(r);return this.W(i,t)}Y(e){const t=this.cursor({});return new j((r,i)=>{t.onerror=s=>{const o=QE(s.target.error);i(o)},t.onsuccess=s=>{const o=s.target.result;o?e(o.primaryKey,o.value).next(a=>{a?o.continue():r()}):r()}})}W(e,t){const r=[];return new j((i,s)=>{e.onerror=o=>{s(o.target.error)},e.onsuccess=o=>{const a=o.target.result;if(!a)return void i();const l=new p9(a),c=t(a.primaryKey,a.value,l);if(c instanceof j){const h=c.catch(d=>(l.done(),j.reject(d)));r.push(h)}l.isDone?i():l.K===null?a.continue():a.continue(l.K)}}).next(()=>j.waitFor(r))}options(e,t){let r;return e!==void 0&&(typeof e=="string"?r=e:t=e),{index:r,range:t}}cursor(e){let t="next";if(e.reverse&&(t="prev"),e.index){const r=this.store.index(e.index);return e.H?r.openKeyCursor(e.range,t):r.openCursor(e.range,t)}return this.store.openCursor(e.range,t)}}function Ko(n){return new j((e,t)=>{n.onsuccess=r=>{const i=r.target.result;e(i)},n.onerror=r=>{const i=QE(r.target.error);t(i)}})}let Lb=!1;function QE(n){const e=lo.S(wt());if(e>=12.2&&e<13){const t="An internal error was encountered in the Indexed Database server";if(n.message.indexOf(t)>=0){const r=new X("internal",`IOS_INDEXEDDB_BUG1: IndexedDb has thrown '${t}'. This is likely due to an unavoidable bug in iOS. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.`);return Lb||(Lb=!0,setTimeout(()=>{throw r},0)),r}}return n}class g9{constructor(e,t){this.asyncQueue=e,this.Z=t,this.task=null}start(){this.X(15e3)}stop(){this.task&&(this.task.cancel(),this.task=null)}get started(){return this.task!==null}X(e){W("IndexBackfiller",`Scheduled in ${e}ms`),this.task=this.asyncQueue.enqueueAfterDelay("index_backfill",e,async()=>{this.task=null;try{W("IndexBackfiller",`Documents written: ${await this.Z.ee()}`)}catch(t){bo(t)?W("IndexBackfiller","Ignoring IndexedDB error during index backfill: ",t):await ll(t)}await this.X(6e4)})}}class y9{constructor(e,t){this.localStore=e,this.persistence=t}async ee(e=50){return this.persistence.runTransaction("Backfill Indexes","readwrite-primary",t=>this.te(t,e))}te(e,t){const r=new Set;let i=t,s=!0;return j.doWhile(()=>s===!0&&i>0,()=>this.localStore.indexManager.getNextCollectionGroupToUpdate(e).next(o=>{if(o!==null&&!r.has(o))return W("IndexBackfiller",`Processing collection: ${o}`),this.ne(e,o,i).next(a=>{i-=a,r.add(o)});s=!1})).next(()=>t-i)}ne(e,t,r){return this.localStore.indexManager.getMinOffsetFromCollectionGroup(e,t).next(i=>this.localStore.localDocuments.getNextDocuments(e,t,i,r).next(s=>{const o=s.changes;return this.localStore.indexManager.updateIndexEntries(e,o).next(()=>this.re(i,s)).next(a=>(W("IndexBackfiller",`Updating offset: ${a}`),this.localStore.indexManager.updateCollectionGroup(e,t,a))).next(()=>o.size)}))}re(e,t){let r=e;return t.changes.forEach((i,s)=>{const o=rN(s);KE(o,r)>0&&(r=o)}),new Qn(r.readTime,r.documentKey,Math.max(t.batchId,e.largestBatchId))}}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ar{constructor(e,t){this.previousValue=e,t&&(t.sequenceNumberHandler=r=>this.ie(r),this.se=r=>t.writeSequenceNumber(r))}ie(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.se&&this.se(e),e}}ar.oe=-1;function Ay(n){return n==null}function Bd(n){return n===0&&1/n==-1/0}function w9(n){return typeof n=="number"&&Number.isInteger(n)&&!Bd(n)&&n<=Number.MAX_SAFE_INTEGER&&n>=Number.MIN_SAFE_INTEGER}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function gn(n){let e="";for(let t=0;t<n.length;t++)e.length>0&&(e=Vb(e)),e=v9(n.get(t),e);return Vb(e)}function v9(n,e){let t=e;const r=n.length;for(let i=0;i<r;i++){const s=n.charAt(i);switch(s){case"\0":t+="";break;case"":t+="";break;default:t+=s}}return t}function Vb(n){return n+""}function ei(n){const e=n.length;if(le(e>=2),e===2)return le(n.charAt(0)===""&&n.charAt(1)===""),Ne.emptyPath();const t=e-2,r=[];let i="";for(let s=0;s<e;){const o=n.indexOf("",s);switch((o<0||o>t)&&oe(),n.charAt(o+1)){case"":const a=n.substring(s,o);let l;i.length===0?l=a:(i+=a,l=i,i=""),r.push(l);break;case"":i+=n.substring(s,o),i+="\0";break;case"":i+=n.substring(s,o+1);break;default:oe()}s=o+2}return new Ne(r)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Mb=["userId","batchId"];/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function dm(n,e){return[n,gn(e)]}function aN(n,e,t){return[n,gn(e),t]}const _9={},E9=["prefixPath","collectionGroup","readTime","documentId"],A9=["prefixPath","collectionGroup","documentId"],I9=["collectionGroup","readTime","prefixPath","documentId"],T9=["canonicalId","targetId"],b9=["targetId","path"],x9=["path","targetId"],S9=["collectionId","parent"],P9=["indexId","uid"],R9=["uid","sequenceNumber"],C9=["indexId","uid","arrayValue","directionalValue","orderedDocumentKey","documentKey"],k9=["indexId","uid","orderedDocumentKey"],N9=["userId","collectionPath","documentId"],D9=["userId","collectionPath","largestBatchId"],O9=["userId","collectionGroup","largestBatchId"],lN=["mutationQueues","mutations","documentMutations","remoteDocuments","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries"],L9=[...lN,"documentOverlays"],uN=["mutationQueues","mutations","documentMutations","remoteDocumentsV14","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries","documentOverlays"],cN=uN,qE=[...cN,"indexConfiguration","indexState","indexEntries"],V9=qE,M9=[...qE,"globals"];/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class n_ extends sN{constructor(e,t){super(),this._e=e,this.currentSequenceNumber=t}}function vt(n,e){const t=fe(n);return lo.F(t._e,e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Bb(n){let e=0;for(const t in n)Object.prototype.hasOwnProperty.call(n,t)&&e++;return e}function ul(n,e){for(const t in n)Object.prototype.hasOwnProperty.call(n,t)&&e(t,n[t])}function hN(n){for(const e in n)if(Object.prototype.hasOwnProperty.call(n,e))return!1;return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qe{constructor(e,t){this.comparator=e,this.root=t||Nt.EMPTY}insert(e,t){return new qe(this.comparator,this.root.insert(e,t,this.comparator).copy(null,null,Nt.BLACK,null,null))}remove(e){return new qe(this.comparator,this.root.remove(e,this.comparator).copy(null,null,Nt.BLACK,null,null))}get(e){let t=this.root;for(;!t.isEmpty();){const r=this.comparator(e,t.key);if(r===0)return t.value;r<0?t=t.left:r>0&&(t=t.right)}return null}indexOf(e){let t=0,r=this.root;for(;!r.isEmpty();){const i=this.comparator(e,r.key);if(i===0)return t+r.left.size;i<0?r=r.left:(t+=r.left.size+1,r=r.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((t,r)=>(e(t,r),!1))}toString(){const e=[];return this.inorderTraversal((t,r)=>(e.push(`${t}:${r}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new Op(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new Op(this.root,e,this.comparator,!1)}getReverseIterator(){return new Op(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new Op(this.root,e,this.comparator,!0)}}class Op{constructor(e,t,r,i){this.isReverse=i,this.nodeStack=[];let s=1;for(;!e.isEmpty();)if(s=t?r(e.key,t):1,t&&i&&(s*=-1),s<0)e=this.isReverse?e.left:e.right;else{if(s===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const t={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return t}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class Nt{constructor(e,t,r,i,s){this.key=e,this.value=t,this.color=r??Nt.RED,this.left=i??Nt.EMPTY,this.right=s??Nt.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,t,r,i,s){return new Nt(e??this.key,t??this.value,r??this.color,i??this.left,s??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,t,r){let i=this;const s=r(e,i.key);return i=s<0?i.copy(null,null,null,i.left.insert(e,t,r),null):s===0?i.copy(null,t,null,null,null):i.copy(null,null,null,null,i.right.insert(e,t,r)),i.fixUp()}removeMin(){if(this.left.isEmpty())return Nt.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,t){let r,i=this;if(t(e,i.key)<0)i.left.isEmpty()||i.left.isRed()||i.left.left.isRed()||(i=i.moveRedLeft()),i=i.copy(null,null,null,i.left.remove(e,t),null);else{if(i.left.isRed()&&(i=i.rotateRight()),i.right.isEmpty()||i.right.isRed()||i.right.left.isRed()||(i=i.moveRedRight()),t(e,i.key)===0){if(i.right.isEmpty())return Nt.EMPTY;r=i.right.min(),i=i.copy(r.key,r.value,null,null,i.right.removeMin())}i=i.copy(null,null,null,null,i.right.remove(e,t))}return i.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,Nt.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,Nt.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),t=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,t)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed()||this.right.isRed())throw oe();const e=this.left.check();if(e!==this.right.check())throw oe();return e+(this.isRed()?0:1)}}Nt.EMPTY=null,Nt.RED=!0,Nt.BLACK=!1;Nt.EMPTY=new class{constructor(){this.size=0}get key(){throw oe()}get value(){throw oe()}get color(){throw oe()}get left(){throw oe()}get right(){throw oe()}copy(e,t,r,i,s){return this}insert(e,t,r){return new Nt(e,t)}remove(e,t){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Be{constructor(e){this.comparator=e,this.data=new qe(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((t,r)=>(e(t),!1))}forEachInRange(e,t){const r=this.data.getIteratorFrom(e[0]);for(;r.hasNext();){const i=r.getNext();if(this.comparator(i.key,e[1])>=0)return;t(i.key)}}forEachWhile(e,t){let r;for(r=t!==void 0?this.data.getIteratorFrom(t):this.data.getIterator();r.hasNext();)if(!e(r.getNext().key))return}firstAfterOrEqual(e){const t=this.data.getIteratorFrom(e);return t.hasNext()?t.getNext().key:null}getIterator(){return new Fb(this.data.getIterator())}getIteratorFrom(e){return new Fb(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let t=this;return t.size<e.size&&(t=e,e=this),e.forEach(r=>{t=t.add(r)}),t}isEqual(e){if(!(e instanceof Be)||this.size!==e.size)return!1;const t=this.data.getIterator(),r=e.data.getIterator();for(;t.hasNext();){const i=t.getNext().key,s=r.getNext().key;if(this.comparator(i,s)!==0)return!1}return!0}toArray(){const e=[];return this.forEach(t=>{e.push(t)}),e}toString(){const e=[];return this.forEach(t=>e.push(t)),"SortedSet("+e.toString()+")"}copy(e){const t=new Be(this.comparator);return t.data=e,t}}class Fb{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}function Al(n){return n.hasNext()?n.getNext():void 0}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Pn{constructor(e){this.fields=e,e.sort(Xe.comparator)}static empty(){return new Pn([])}unionWith(e){let t=new Be(Xe.comparator);for(const r of this.fields)t=t.add(r);for(const r of e)t=t.add(r);return new Pn(t.toArray())}covers(e){for(const t of this.fields)if(t.isPrefixOf(e))return!0;return!1}isEqual(e){return _c(this.fields,e.fields,(t,r)=>t.isEqual(r))}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dN extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pt{constructor(e){this.binaryString=e}static fromBase64String(e){const t=function(i){try{return atob(i)}catch(s){throw typeof DOMException<"u"&&s instanceof DOMException?new dN("Invalid base64 string: "+s):s}}(e);return new pt(t)}static fromUint8Array(e){const t=function(i){let s="";for(let o=0;o<i.length;++o)s+=String.fromCharCode(i[o]);return s}(e);return new pt(t)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return function(t){return btoa(t)}(this.binaryString)}toUint8Array(){return function(t){const r=new Uint8Array(t.length);for(let i=0;i<t.length;i++)r[i]=t.charCodeAt(i);return r}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return pe(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}pt.EMPTY_BYTE_STRING=new pt("");const B9=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function Zi(n){if(le(!!n),typeof n=="string"){let e=0;const t=B9.exec(n);if(le(!!t),t[1]){let i=t[1];i=(i+"000000000").substr(0,9),e=Number(i)}const r=new Date(n);return{seconds:Math.floor(r.getTime()/1e3),nanos:e}}return{seconds:Ke(n.seconds),nanos:Ke(n.nanos)}}function Ke(n){return typeof n=="number"?n:typeof n=="string"?Number(n):0}function yo(n){return typeof n=="string"?pt.fromBase64String(n):pt.fromUint8Array(n)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function WE(n){var e,t;return((t=(((e=n==null?void 0:n.mapValue)===null||e===void 0?void 0:e.fields)||{}).__type__)===null||t===void 0?void 0:t.stringValue)==="server_timestamp"}function JE(n){const e=n.mapValue.fields.__previous_value__;return WE(e)?JE(e):e}function Fd(n){const e=Zi(n.mapValue.fields.__local_write_time__.timestampValue);return new et(e.seconds,e.nanos)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class F9{constructor(e,t,r,i,s,o,a,l,c){this.databaseId=e,this.appId=t,this.persistenceKey=r,this.host=i,this.ssl=s,this.forceLongPolling=o,this.autoDetectLongPolling=a,this.longPollingOptions=l,this.useFetchStreams=c}}class Qa{constructor(e,t){this.projectId=e,this.database=t||"(default)"}static empty(){return new Qa("","")}get isDefaultDatabase(){return this.database==="(default)"}isEqual(e){return e instanceof Qa&&e.projectId===this.projectId&&e.database===this.database}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const qs={mapValue:{fields:{__type__:{stringValue:"__max__"}}}},fm={nullValue:"NULL_VALUE"};function qa(n){return"nullValue"in n?0:"booleanValue"in n?1:"integerValue"in n||"doubleValue"in n?2:"timestampValue"in n?3:"stringValue"in n?5:"bytesValue"in n?6:"referenceValue"in n?7:"geoPointValue"in n?8:"arrayValue"in n?9:"mapValue"in n?WE(n)?4:fN(n)?9007199254740991:Iy(n)?10:11:oe()}function ai(n,e){if(n===e)return!0;const t=qa(n);if(t!==qa(e))return!1;switch(t){case 0:case 9007199254740991:return!0;case 1:return n.booleanValue===e.booleanValue;case 4:return Fd(n).isEqual(Fd(e));case 3:return function(i,s){if(typeof i.timestampValue=="string"&&typeof s.timestampValue=="string"&&i.timestampValue.length===s.timestampValue.length)return i.timestampValue===s.timestampValue;const o=Zi(i.timestampValue),a=Zi(s.timestampValue);return o.seconds===a.seconds&&o.nanos===a.nanos}(n,e);case 5:return n.stringValue===e.stringValue;case 6:return function(i,s){return yo(i.bytesValue).isEqual(yo(s.bytesValue))}(n,e);case 7:return n.referenceValue===e.referenceValue;case 8:return function(i,s){return Ke(i.geoPointValue.latitude)===Ke(s.geoPointValue.latitude)&&Ke(i.geoPointValue.longitude)===Ke(s.geoPointValue.longitude)}(n,e);case 2:return function(i,s){if("integerValue"in i&&"integerValue"in s)return Ke(i.integerValue)===Ke(s.integerValue);if("doubleValue"in i&&"doubleValue"in s){const o=Ke(i.doubleValue),a=Ke(s.doubleValue);return o===a?Bd(o)===Bd(a):isNaN(o)&&isNaN(a)}return!1}(n,e);case 9:return _c(n.arrayValue.values||[],e.arrayValue.values||[],ai);case 10:case 11:return function(i,s){const o=i.mapValue.fields||{},a=s.mapValue.fields||{};if(Bb(o)!==Bb(a))return!1;for(const l in o)if(o.hasOwnProperty(l)&&(a[l]===void 0||!ai(o[l],a[l])))return!1;return!0}(n,e);default:return oe()}}function Ud(n,e){return(n.values||[]).find(t=>ai(t,e))!==void 0}function wo(n,e){if(n===e)return 0;const t=qa(n),r=qa(e);if(t!==r)return pe(t,r);switch(t){case 0:case 9007199254740991:return 0;case 1:return pe(n.booleanValue,e.booleanValue);case 2:return function(s,o){const a=Ke(s.integerValue||s.doubleValue),l=Ke(o.integerValue||o.doubleValue);return a<l?-1:a>l?1:a===l?0:isNaN(a)?isNaN(l)?0:-1:1}(n,e);case 3:return Ub(n.timestampValue,e.timestampValue);case 4:return Ub(Fd(n),Fd(e));case 5:return pe(n.stringValue,e.stringValue);case 6:return function(s,o){const a=yo(s),l=yo(o);return a.compareTo(l)}(n.bytesValue,e.bytesValue);case 7:return function(s,o){const a=s.split("/"),l=o.split("/");for(let c=0;c<a.length&&c<l.length;c++){const h=pe(a[c],l[c]);if(h!==0)return h}return pe(a.length,l.length)}(n.referenceValue,e.referenceValue);case 8:return function(s,o){const a=pe(Ke(s.latitude),Ke(o.latitude));return a!==0?a:pe(Ke(s.longitude),Ke(o.longitude))}(n.geoPointValue,e.geoPointValue);case 9:return jb(n.arrayValue,e.arrayValue);case 10:return function(s,o){var a,l,c,h;const d=s.fields||{},p=o.fields||{},g=(a=d.value)===null||a===void 0?void 0:a.arrayValue,A=(l=p.value)===null||l===void 0?void 0:l.arrayValue,v=pe(((c=g==null?void 0:g.values)===null||c===void 0?void 0:c.length)||0,((h=A==null?void 0:A.values)===null||h===void 0?void 0:h.length)||0);return v!==0?v:jb(g,A)}(n.mapValue,e.mapValue);case 11:return function(s,o){if(s===qs.mapValue&&o===qs.mapValue)return 0;if(s===qs.mapValue)return 1;if(o===qs.mapValue)return-1;const a=s.fields||{},l=Object.keys(a),c=o.fields||{},h=Object.keys(c);l.sort(),h.sort();for(let d=0;d<l.length&&d<h.length;++d){const p=pe(l[d],h[d]);if(p!==0)return p;const g=wo(a[l[d]],c[h[d]]);if(g!==0)return g}return pe(l.length,h.length)}(n.mapValue,e.mapValue);default:throw oe()}}function Ub(n,e){if(typeof n=="string"&&typeof e=="string"&&n.length===e.length)return pe(n,e);const t=Zi(n),r=Zi(e),i=pe(t.seconds,r.seconds);return i!==0?i:pe(t.nanos,r.nanos)}function jb(n,e){const t=n.values||[],r=e.values||[];for(let i=0;i<t.length&&i<r.length;++i){const s=wo(t[i],r[i]);if(s)return s}return pe(t.length,r.length)}function Ec(n){return r_(n)}function r_(n){return"nullValue"in n?"null":"booleanValue"in n?""+n.booleanValue:"integerValue"in n?""+n.integerValue:"doubleValue"in n?""+n.doubleValue:"timestampValue"in n?function(t){const r=Zi(t);return`time(${r.seconds},${r.nanos})`}(n.timestampValue):"stringValue"in n?n.stringValue:"bytesValue"in n?function(t){return yo(t).toBase64()}(n.bytesValue):"referenceValue"in n?function(t){return Z.fromName(t).toString()}(n.referenceValue):"geoPointValue"in n?function(t){return`geo(${t.latitude},${t.longitude})`}(n.geoPointValue):"arrayValue"in n?function(t){let r="[",i=!0;for(const s of t.values||[])i?i=!1:r+=",",r+=r_(s);return r+"]"}(n.arrayValue):"mapValue"in n?function(t){const r=Object.keys(t.fields||{}).sort();let i="{",s=!0;for(const o of r)s?s=!1:i+=",",i+=`${o}:${r_(t.fields[o])}`;return i+"}"}(n.mapValue):oe()}function jd(n,e){return{referenceValue:`projects/${n.projectId}/databases/${n.database}/documents/${e.path.canonicalString()}`}}function i_(n){return!!n&&"integerValue"in n}function zd(n){return!!n&&"arrayValue"in n}function zb(n){return!!n&&"nullValue"in n}function Gb(n){return!!n&&"doubleValue"in n&&isNaN(Number(n.doubleValue))}function pm(n){return!!n&&"mapValue"in n}function Iy(n){var e,t;return((t=(((e=n==null?void 0:n.mapValue)===null||e===void 0?void 0:e.fields)||{}).__type__)===null||t===void 0?void 0:t.stringValue)==="__vector__"}function Zh(n){if(n.geoPointValue)return{geoPointValue:Object.assign({},n.geoPointValue)};if(n.timestampValue&&typeof n.timestampValue=="object")return{timestampValue:Object.assign({},n.timestampValue)};if(n.mapValue){const e={mapValue:{fields:{}}};return ul(n.mapValue.fields,(t,r)=>e.mapValue.fields[t]=Zh(r)),e}if(n.arrayValue){const e={arrayValue:{values:[]}};for(let t=0;t<(n.arrayValue.values||[]).length;++t)e.arrayValue.values[t]=Zh(n.arrayValue.values[t]);return e}return Object.assign({},n)}function fN(n){return(((n.mapValue||{}).fields||{}).__type__||{}).stringValue==="__max__"}const pN={mapValue:{fields:{__type__:{stringValue:"__vector__"},value:{arrayValue:{}}}}};function U9(n){return"nullValue"in n?fm:"booleanValue"in n?{booleanValue:!1}:"integerValue"in n||"doubleValue"in n?{doubleValue:NaN}:"timestampValue"in n?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"stringValue"in n?{stringValue:""}:"bytesValue"in n?{bytesValue:""}:"referenceValue"in n?jd(Qa.empty(),Z.empty()):"geoPointValue"in n?{geoPointValue:{latitude:-90,longitude:-180}}:"arrayValue"in n?{arrayValue:{}}:"mapValue"in n?Iy(n)?pN:{mapValue:{}}:oe()}function j9(n){return"nullValue"in n?{booleanValue:!1}:"booleanValue"in n?{doubleValue:NaN}:"integerValue"in n||"doubleValue"in n?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"timestampValue"in n?{stringValue:""}:"stringValue"in n?{bytesValue:""}:"bytesValue"in n?jd(Qa.empty(),Z.empty()):"referenceValue"in n?{geoPointValue:{latitude:-90,longitude:-180}}:"geoPointValue"in n?{arrayValue:{}}:"arrayValue"in n?pN:"mapValue"in n?Iy(n)?{mapValue:{}}:qs:oe()}function Hb(n,e){const t=wo(n.value,e.value);return t!==0?t:n.inclusive&&!e.inclusive?-1:!n.inclusive&&e.inclusive?1:0}function $b(n,e){const t=wo(n.value,e.value);return t!==0?t:n.inclusive&&!e.inclusive?1:!n.inclusive&&e.inclusive?-1:0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Jt{constructor(e){this.value=e}static empty(){return new Jt({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let t=this.value;for(let r=0;r<e.length-1;++r)if(t=(t.mapValue.fields||{})[e.get(r)],!pm(t))return null;return t=(t.mapValue.fields||{})[e.lastSegment()],t||null}}set(e,t){this.getFieldsMap(e.popLast())[e.lastSegment()]=Zh(t)}setAll(e){let t=Xe.emptyPath(),r={},i=[];e.forEach((o,a)=>{if(!t.isImmediateParentOf(a)){const l=this.getFieldsMap(t);this.applyChanges(l,r,i),r={},i=[],t=a.popLast()}o?r[a.lastSegment()]=Zh(o):i.push(a.lastSegment())});const s=this.getFieldsMap(t);this.applyChanges(s,r,i)}delete(e){const t=this.field(e.popLast());pm(t)&&t.mapValue.fields&&delete t.mapValue.fields[e.lastSegment()]}isEqual(e){return ai(this.value,e.value)}getFieldsMap(e){let t=this.value;t.mapValue.fields||(t.mapValue={fields:{}});for(let r=0;r<e.length;++r){let i=t.mapValue.fields[e.get(r)];pm(i)&&i.mapValue.fields||(i={mapValue:{fields:{}}},t.mapValue.fields[e.get(r)]=i),t=i}return t.mapValue.fields}applyChanges(e,t,r){ul(t,(i,s)=>e[i]=s);for(const i of r)delete e[i]}clone(){return new Jt(Zh(this.value))}}function mN(n){const e=[];return ul(n.fields,(t,r)=>{const i=new Xe([t]);if(pm(r)){const s=mN(r.mapValue).fields;if(s.length===0)e.push(i);else for(const o of s)e.push(i.child(o))}else e.push(i)}),new Pn(e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class st{constructor(e,t,r,i,s,o,a){this.key=e,this.documentType=t,this.version=r,this.readTime=i,this.createTime=s,this.data=o,this.documentState=a}static newInvalidDocument(e){return new st(e,0,ue.min(),ue.min(),ue.min(),Jt.empty(),0)}static newFoundDocument(e,t,r,i){return new st(e,1,t,ue.min(),r,i,0)}static newNoDocument(e,t){return new st(e,2,t,ue.min(),ue.min(),Jt.empty(),0)}static newUnknownDocument(e,t){return new st(e,3,t,ue.min(),ue.min(),Jt.empty(),2)}convertToFoundDocument(e,t){return!this.createTime.isEqual(ue.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=t,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=Jt.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=Jt.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=ue.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof st&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new st(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ac{constructor(e,t){this.position=e,this.inclusive=t}}function Kb(n,e,t){let r=0;for(let i=0;i<n.position.length;i++){const s=e[i],o=n.position[i];if(s.field.isKeyField()?r=Z.comparator(Z.fromName(o.referenceValue),t.key):r=wo(o,t.data.field(s.field)),s.dir==="desc"&&(r*=-1),r!==0)break}return r}function Qb(n,e){if(n===null)return e===null;if(e===null||n.inclusive!==e.inclusive||n.position.length!==e.position.length)return!1;for(let t=0;t<n.position.length;t++)if(!ai(n.position[t],e.position[t]))return!1;return!0}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Gd{constructor(e,t="asc"){this.field=e,this.dir=t}}function z9(n,e){return n.dir===e.dir&&n.field.isEqual(e.field)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gN{}class Ie extends gN{constructor(e,t,r){super(),this.field=e,this.op=t,this.value=r}static create(e,t,r){return e.isKeyField()?t==="in"||t==="not-in"?this.createKeyFieldInFilter(e,t,r):new G9(e,t,r):t==="array-contains"?new K9(e,r):t==="in"?new AN(e,r):t==="not-in"?new Q9(e,r):t==="array-contains-any"?new q9(e,r):new Ie(e,t,r)}static createKeyFieldInFilter(e,t,r){return t==="in"?new H9(e,r):new $9(e,r)}matches(e){const t=e.data.field(this.field);return this.op==="!="?t!==null&&this.matchesComparison(wo(t,this.value)):t!==null&&qa(this.value)===qa(t)&&this.matchesComparison(wo(t,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return oe()}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class Oe extends gN{constructor(e,t){super(),this.filters=e,this.op=t,this.ae=null}static create(e,t){return new Oe(e,t)}matches(e){return Ic(this)?this.filters.find(t=>!t.matches(e))===void 0:this.filters.find(t=>t.matches(e))!==void 0}getFlattenedFilters(){return this.ae!==null||(this.ae=this.filters.reduce((e,t)=>e.concat(t.getFlattenedFilters()),[])),this.ae}getFilters(){return Object.assign([],this.filters)}}function Ic(n){return n.op==="and"}function s_(n){return n.op==="or"}function YE(n){return yN(n)&&Ic(n)}function yN(n){for(const e of n.filters)if(e instanceof Oe)return!1;return!0}function o_(n){if(n instanceof Ie)return n.field.canonicalString()+n.op.toString()+Ec(n.value);if(YE(n))return n.filters.map(e=>o_(e)).join(",");{const e=n.filters.map(t=>o_(t)).join(",");return`${n.op}(${e})`}}function wN(n,e){return n instanceof Ie?function(r,i){return i instanceof Ie&&r.op===i.op&&r.field.isEqual(i.field)&&ai(r.value,i.value)}(n,e):n instanceof Oe?function(r,i){return i instanceof Oe&&r.op===i.op&&r.filters.length===i.filters.length?r.filters.reduce((s,o,a)=>s&&wN(o,i.filters[a]),!0):!1}(n,e):void oe()}function vN(n,e){const t=n.filters.concat(e);return Oe.create(t,n.op)}function _N(n){return n instanceof Ie?function(t){return`${t.field.canonicalString()} ${t.op} ${Ec(t.value)}`}(n):n instanceof Oe?function(t){return t.op.toString()+" {"+t.getFilters().map(_N).join(" ,")+"}"}(n):"Filter"}class G9 extends Ie{constructor(e,t,r){super(e,t,r),this.key=Z.fromName(r.referenceValue)}matches(e){const t=Z.comparator(e.key,this.key);return this.matchesComparison(t)}}class H9 extends Ie{constructor(e,t){super(e,"in",t),this.keys=EN("in",t)}matches(e){return this.keys.some(t=>t.isEqual(e.key))}}class $9 extends Ie{constructor(e,t){super(e,"not-in",t),this.keys=EN("not-in",t)}matches(e){return!this.keys.some(t=>t.isEqual(e.key))}}function EN(n,e){var t;return(((t=e.arrayValue)===null||t===void 0?void 0:t.values)||[]).map(r=>Z.fromName(r.referenceValue))}class K9 extends Ie{constructor(e,t){super(e,"array-contains",t)}matches(e){const t=e.data.field(this.field);return zd(t)&&Ud(t.arrayValue,this.value)}}class AN extends Ie{constructor(e,t){super(e,"in",t)}matches(e){const t=e.data.field(this.field);return t!==null&&Ud(this.value.arrayValue,t)}}class Q9 extends Ie{constructor(e,t){super(e,"not-in",t)}matches(e){if(Ud(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const t=e.data.field(this.field);return t!==null&&!Ud(this.value.arrayValue,t)}}class q9 extends Ie{constructor(e,t){super(e,"array-contains-any",t)}matches(e){const t=e.data.field(this.field);return!(!zd(t)||!t.arrayValue.values)&&t.arrayValue.values.some(r=>Ud(this.value.arrayValue,r))}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class W9{constructor(e,t=null,r=[],i=[],s=null,o=null,a=null){this.path=e,this.collectionGroup=t,this.orderBy=r,this.filters=i,this.limit=s,this.startAt=o,this.endAt=a,this.ue=null}}function a_(n,e=null,t=[],r=[],i=null,s=null,o=null){return new W9(n,e,t,r,i,s,o)}function Wa(n){const e=fe(n);if(e.ue===null){let t=e.path.canonicalString();e.collectionGroup!==null&&(t+="|cg:"+e.collectionGroup),t+="|f:",t+=e.filters.map(r=>o_(r)).join(","),t+="|ob:",t+=e.orderBy.map(r=>function(s){return s.field.canonicalString()+s.dir}(r)).join(","),Ay(e.limit)||(t+="|l:",t+=e.limit),e.startAt&&(t+="|lb:",t+=e.startAt.inclusive?"b:":"a:",t+=e.startAt.position.map(r=>Ec(r)).join(",")),e.endAt&&(t+="|ub:",t+=e.endAt.inclusive?"a:":"b:",t+=e.endAt.position.map(r=>Ec(r)).join(",")),e.ue=t}return e.ue}function Df(n,e){if(n.limit!==e.limit||n.orderBy.length!==e.orderBy.length)return!1;for(let t=0;t<n.orderBy.length;t++)if(!z9(n.orderBy[t],e.orderBy[t]))return!1;if(n.filters.length!==e.filters.length)return!1;for(let t=0;t<n.filters.length;t++)if(!wN(n.filters[t],e.filters[t]))return!1;return n.collectionGroup===e.collectionGroup&&!!n.path.isEqual(e.path)&&!!Qb(n.startAt,e.startAt)&&Qb(n.endAt,e.endAt)}function mg(n){return Z.isDocumentKey(n.path)&&n.collectionGroup===null&&n.filters.length===0}function gg(n,e){return n.filters.filter(t=>t instanceof Ie&&t.field.isEqual(e))}function qb(n,e,t){let r=fm,i=!0;for(const s of gg(n,e)){let o=fm,a=!0;switch(s.op){case"<":case"<=":o=U9(s.value);break;case"==":case"in":case">=":o=s.value;break;case">":o=s.value,a=!1;break;case"!=":case"not-in":o=fm}Hb({value:r,inclusive:i},{value:o,inclusive:a})<0&&(r=o,i=a)}if(t!==null){for(let s=0;s<n.orderBy.length;++s)if(n.orderBy[s].field.isEqual(e)){const o=t.position[s];Hb({value:r,inclusive:i},{value:o,inclusive:t.inclusive})<0&&(r=o,i=t.inclusive);break}}return{value:r,inclusive:i}}function Wb(n,e,t){let r=qs,i=!0;for(const s of gg(n,e)){let o=qs,a=!0;switch(s.op){case">=":case">":o=j9(s.value),a=!1;break;case"==":case"in":case"<=":o=s.value;break;case"<":o=s.value,a=!1;break;case"!=":case"not-in":o=qs}$b({value:r,inclusive:i},{value:o,inclusive:a})>0&&(r=o,i=a)}if(t!==null){for(let s=0;s<n.orderBy.length;++s)if(n.orderBy[s].field.isEqual(e)){const o=t.position[s];$b({value:r,inclusive:i},{value:o,inclusive:t.inclusive})>0&&(r=o,i=t.inclusive);break}}return{value:r,inclusive:i}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Bc{constructor(e,t=null,r=[],i=[],s=null,o="F",a=null,l=null){this.path=e,this.collectionGroup=t,this.explicitOrderBy=r,this.filters=i,this.limit=s,this.limitType=o,this.startAt=a,this.endAt=l,this.ce=null,this.le=null,this.he=null,this.startAt,this.endAt}}function J9(n,e,t,r,i,s,o,a){return new Bc(n,e,t,r,i,s,o,a)}function Ty(n){return new Bc(n)}function Jb(n){return n.filters.length===0&&n.limit===null&&n.startAt==null&&n.endAt==null&&(n.explicitOrderBy.length===0||n.explicitOrderBy.length===1&&n.explicitOrderBy[0].field.isKeyField())}function IN(n){return n.collectionGroup!==null}function ed(n){const e=fe(n);if(e.ce===null){e.ce=[];const t=new Set;for(const s of e.explicitOrderBy)e.ce.push(s),t.add(s.field.canonicalString());const r=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(o){let a=new Be(Xe.comparator);return o.filters.forEach(l=>{l.getFlattenedFilters().forEach(c=>{c.isInequality()&&(a=a.add(c.field))})}),a})(e).forEach(s=>{t.has(s.canonicalString())||s.isKeyField()||e.ce.push(new Gd(s,r))}),t.has(Xe.keyField().canonicalString())||e.ce.push(new Gd(Xe.keyField(),r))}return e.ce}function ur(n){const e=fe(n);return e.le||(e.le=Y9(e,ed(n))),e.le}function Y9(n,e){if(n.limitType==="F")return a_(n.path,n.collectionGroup,e,n.filters,n.limit,n.startAt,n.endAt);{e=e.map(i=>{const s=i.dir==="desc"?"asc":"desc";return new Gd(i.field,s)});const t=n.endAt?new Ac(n.endAt.position,n.endAt.inclusive):null,r=n.startAt?new Ac(n.startAt.position,n.startAt.inclusive):null;return a_(n.path,n.collectionGroup,e,n.filters,n.limit,t,r)}}function l_(n,e){const t=n.filters.concat([e]);return new Bc(n.path,n.collectionGroup,n.explicitOrderBy.slice(),t,n.limit,n.limitType,n.startAt,n.endAt)}function yg(n,e,t){return new Bc(n.path,n.collectionGroup,n.explicitOrderBy.slice(),n.filters.slice(),e,t,n.startAt,n.endAt)}function by(n,e){return Df(ur(n),ur(e))&&n.limitType===e.limitType}function TN(n){return`${Wa(ur(n))}|lt:${n.limitType}`}function Cl(n){return`Query(target=${function(t){let r=t.path.canonicalString();return t.collectionGroup!==null&&(r+=" collectionGroup="+t.collectionGroup),t.filters.length>0&&(r+=`, filters: [${t.filters.map(i=>_N(i)).join(", ")}]`),Ay(t.limit)||(r+=", limit: "+t.limit),t.orderBy.length>0&&(r+=`, orderBy: [${t.orderBy.map(i=>function(o){return`${o.field.canonicalString()} (${o.dir})`}(i)).join(", ")}]`),t.startAt&&(r+=", startAt: ",r+=t.startAt.inclusive?"b:":"a:",r+=t.startAt.position.map(i=>Ec(i)).join(",")),t.endAt&&(r+=", endAt: ",r+=t.endAt.inclusive?"a:":"b:",r+=t.endAt.position.map(i=>Ec(i)).join(",")),`Target(${r})`}(ur(n))}; limitType=${n.limitType})`}function Of(n,e){return e.isFoundDocument()&&function(r,i){const s=i.key.path;return r.collectionGroup!==null?i.key.hasCollectionId(r.collectionGroup)&&r.path.isPrefixOf(s):Z.isDocumentKey(r.path)?r.path.isEqual(s):r.path.isImmediateParentOf(s)}(n,e)&&function(r,i){for(const s of ed(r))if(!s.field.isKeyField()&&i.data.field(s.field)===null)return!1;return!0}(n,e)&&function(r,i){for(const s of r.filters)if(!s.matches(i))return!1;return!0}(n,e)&&function(r,i){return!(r.startAt&&!function(o,a,l){const c=Kb(o,a,l);return o.inclusive?c<=0:c<0}(r.startAt,ed(r),i)||r.endAt&&!function(o,a,l){const c=Kb(o,a,l);return o.inclusive?c>=0:c>0}(r.endAt,ed(r),i))}(n,e)}function X9(n){return n.collectionGroup||(n.path.length%2==1?n.path.lastSegment():n.path.get(n.path.length-2))}function bN(n){return(e,t)=>{let r=!1;for(const i of ed(n)){const s=Z9(i,e,t);if(s!==0)return s;r=r||i.field.isKeyField()}return 0}}function Z9(n,e,t){const r=n.field.isKeyField()?Z.comparator(e.key,t.key):function(s,o,a){const l=o.data.field(s),c=a.data.field(s);return l!==null&&c!==null?wo(l,c):oe()}(n.field,e,t);switch(n.dir){case"asc":return r;case"desc":return-1*r;default:return oe()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xo{constructor(e,t){this.mapKeyFn=e,this.equalsFn=t,this.inner={},this.innerSize=0}get(e){const t=this.mapKeyFn(e),r=this.inner[t];if(r!==void 0){for(const[i,s]of r)if(this.equalsFn(i,e))return s}}has(e){return this.get(e)!==void 0}set(e,t){const r=this.mapKeyFn(e),i=this.inner[r];if(i===void 0)return this.inner[r]=[[e,t]],void this.innerSize++;for(let s=0;s<i.length;s++)if(this.equalsFn(i[s][0],e))return void(i[s]=[e,t]);i.push([e,t]),this.innerSize++}delete(e){const t=this.mapKeyFn(e),r=this.inner[t];if(r===void 0)return!1;for(let i=0;i<r.length;i++)if(this.equalsFn(r[i][0],e))return r.length===1?delete this.inner[t]:r.splice(i,1),this.innerSize--,!0;return!1}forEach(e){ul(this.inner,(t,r)=>{for(const[i,s]of r)e(i,s)})}isEmpty(){return hN(this.inner)}size(){return this.innerSize}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const e8=new qe(Z.comparator);function Hn(){return e8}const xN=new qe(Z.comparator);function Mh(...n){let e=xN;for(const t of n)e=e.insert(t.key,t);return e}function SN(n){let e=xN;return n.forEach((t,r)=>e=e.insert(t,r.overlayedDocument)),e}function ti(){return td()}function PN(){return td()}function td(){return new xo(n=>n.toString(),(n,e)=>n.isEqual(e))}const t8=new qe(Z.comparator),n8=new Be(Z.comparator);function ve(...n){let e=n8;for(const t of n)e=e.add(t);return e}const r8=new Be(pe);function i8(){return r8}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function XE(n,e){if(n.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:Bd(e)?"-0":e}}function RN(n){return{integerValue:""+n}}function s8(n,e){return w9(e)?RN(e):XE(n,e)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xy{constructor(){this._=void 0}}function o8(n,e,t){return n instanceof Hd?function(i,s){const o={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:i.seconds,nanos:i.nanoseconds}}}};return s&&WE(s)&&(s=JE(s)),s&&(o.fields.__previous_value__=s),{mapValue:o}}(t,e):n instanceof Tc?kN(n,e):n instanceof bc?NN(n,e):function(i,s){const o=CN(i,s),a=Yb(o)+Yb(i.Pe);return i_(o)&&i_(i.Pe)?RN(a):XE(i.serializer,a)}(n,e)}function a8(n,e,t){return n instanceof Tc?kN(n,e):n instanceof bc?NN(n,e):t}function CN(n,e){return n instanceof $d?function(r){return i_(r)||function(s){return!!s&&"doubleValue"in s}(r)}(e)?e:{integerValue:0}:null}class Hd extends xy{}class Tc extends xy{constructor(e){super(),this.elements=e}}function kN(n,e){const t=DN(e);for(const r of n.elements)t.some(i=>ai(i,r))||t.push(r);return{arrayValue:{values:t}}}class bc extends xy{constructor(e){super(),this.elements=e}}function NN(n,e){let t=DN(e);for(const r of n.elements)t=t.filter(i=>!ai(i,r));return{arrayValue:{values:t}}}class $d extends xy{constructor(e,t){super(),this.serializer=e,this.Pe=t}}function Yb(n){return Ke(n.integerValue||n.doubleValue)}function DN(n){return zd(n)&&n.arrayValue.values?n.arrayValue.values.slice():[]}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class l8{constructor(e,t){this.field=e,this.transform=t}}function u8(n,e){return n.field.isEqual(e.field)&&function(r,i){return r instanceof Tc&&i instanceof Tc||r instanceof bc&&i instanceof bc?_c(r.elements,i.elements,ai):r instanceof $d&&i instanceof $d?ai(r.Pe,i.Pe):r instanceof Hd&&i instanceof Hd}(n.transform,e.transform)}class c8{constructor(e,t){this.version=e,this.transformResults=t}}class Rn{constructor(e,t){this.updateTime=e,this.exists=t}static none(){return new Rn}static exists(e){return new Rn(void 0,e)}static updateTime(e){return new Rn(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function mm(n,e){return n.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(n.updateTime):n.exists===void 0||n.exists===e.isFoundDocument()}class Sy{}function ON(n,e){if(!n.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return n.isNoDocument()?new ZE(n.key,Rn.none()):new Fc(n.key,n.data,Rn.none());{const t=n.data,r=Jt.empty();let i=new Be(Xe.comparator);for(let s of e.fields)if(!i.has(s)){let o=t.field(s);o===null&&s.length>1&&(s=s.popLast(),o=t.field(s)),o===null?r.delete(s):r.set(s,o),i=i.add(s)}return new is(n.key,r,new Pn(i.toArray()),Rn.none())}}function h8(n,e,t){n instanceof Fc?function(i,s,o){const a=i.value.clone(),l=Zb(i.fieldTransforms,s,o.transformResults);a.setAll(l),s.convertToFoundDocument(o.version,a).setHasCommittedMutations()}(n,e,t):n instanceof is?function(i,s,o){if(!mm(i.precondition,s))return void s.convertToUnknownDocument(o.version);const a=Zb(i.fieldTransforms,s,o.transformResults),l=s.data;l.setAll(LN(i)),l.setAll(a),s.convertToFoundDocument(o.version,l).setHasCommittedMutations()}(n,e,t):function(i,s,o){s.convertToNoDocument(o.version).setHasCommittedMutations()}(0,e,t)}function nd(n,e,t,r){return n instanceof Fc?function(s,o,a,l){if(!mm(s.precondition,o))return a;const c=s.value.clone(),h=ex(s.fieldTransforms,l,o);return c.setAll(h),o.convertToFoundDocument(o.version,c).setHasLocalMutations(),null}(n,e,t,r):n instanceof is?function(s,o,a,l){if(!mm(s.precondition,o))return a;const c=ex(s.fieldTransforms,l,o),h=o.data;return h.setAll(LN(s)),h.setAll(c),o.convertToFoundDocument(o.version,h).setHasLocalMutations(),a===null?null:a.unionWith(s.fieldMask.fields).unionWith(s.fieldTransforms.map(d=>d.field))}(n,e,t,r):function(s,o,a){return mm(s.precondition,o)?(o.convertToNoDocument(o.version).setHasLocalMutations(),null):a}(n,e,t)}function d8(n,e){let t=null;for(const r of n.fieldTransforms){const i=e.data.field(r.field),s=CN(r.transform,i||null);s!=null&&(t===null&&(t=Jt.empty()),t.set(r.field,s))}return t||null}function Xb(n,e){return n.type===e.type&&!!n.key.isEqual(e.key)&&!!n.precondition.isEqual(e.precondition)&&!!function(r,i){return r===void 0&&i===void 0||!(!r||!i)&&_c(r,i,(s,o)=>u8(s,o))}(n.fieldTransforms,e.fieldTransforms)&&(n.type===0?n.value.isEqual(e.value):n.type!==1||n.data.isEqual(e.data)&&n.fieldMask.isEqual(e.fieldMask))}class Fc extends Sy{constructor(e,t,r,i=[]){super(),this.key=e,this.value=t,this.precondition=r,this.fieldTransforms=i,this.type=0}getFieldMask(){return null}}class is extends Sy{constructor(e,t,r,i,s=[]){super(),this.key=e,this.data=t,this.fieldMask=r,this.precondition=i,this.fieldTransforms=s,this.type=1}getFieldMask(){return this.fieldMask}}function LN(n){const e=new Map;return n.fieldMask.fields.forEach(t=>{if(!t.isEmpty()){const r=n.data.field(t);e.set(t,r)}}),e}function Zb(n,e,t){const r=new Map;le(n.length===t.length);for(let i=0;i<t.length;i++){const s=n[i],o=s.transform,a=e.data.field(s.field);r.set(s.field,a8(o,a,t[i]))}return r}function ex(n,e,t){const r=new Map;for(const i of n){const s=i.transform,o=t.data.field(i.field);r.set(i.field,o8(s,o,e))}return r}class ZE extends Sy{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class VN extends Sy{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class eA{constructor(e,t,r,i){this.batchId=e,this.localWriteTime=t,this.baseMutations=r,this.mutations=i}applyToRemoteDocument(e,t){const r=t.mutationResults;for(let i=0;i<this.mutations.length;i++){const s=this.mutations[i];s.key.isEqual(e.key)&&h8(s,e,r[i])}}applyToLocalView(e,t){for(const r of this.baseMutations)r.key.isEqual(e.key)&&(t=nd(r,e,t,this.localWriteTime));for(const r of this.mutations)r.key.isEqual(e.key)&&(t=nd(r,e,t,this.localWriteTime));return t}applyToLocalDocumentSet(e,t){const r=PN();return this.mutations.forEach(i=>{const s=e.get(i.key),o=s.overlayedDocument;let a=this.applyToLocalView(o,s.mutatedFields);a=t.has(i.key)?null:a;const l=ON(o,a);l!==null&&r.set(i.key,l),o.isValidDocument()||o.convertToNoDocument(ue.min())}),r}keys(){return this.mutations.reduce((e,t)=>e.add(t.key),ve())}isEqual(e){return this.batchId===e.batchId&&_c(this.mutations,e.mutations,(t,r)=>Xb(t,r))&&_c(this.baseMutations,e.baseMutations,(t,r)=>Xb(t,r))}}class tA{constructor(e,t,r,i){this.batch=e,this.commitVersion=t,this.mutationResults=r,this.docVersions=i}static from(e,t,r){le(e.mutations.length===r.length);let i=function(){return t8}();const s=e.mutations;for(let o=0;o<s.length;o++)i=i.insert(s[o].key,r[o].version);return new tA(e,t,r,i)}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nA{constructor(e,t){this.largestBatchId=e,this.mutation=t}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class f8{constructor(e,t){this.count=e,this.unchangedNames=t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var ct,Se;function p8(n){switch(n){default:return oe();case H.CANCELLED:case H.UNKNOWN:case H.DEADLINE_EXCEEDED:case H.RESOURCE_EXHAUSTED:case H.INTERNAL:case H.UNAVAILABLE:case H.UNAUTHENTICATED:return!1;case H.INVALID_ARGUMENT:case H.NOT_FOUND:case H.ALREADY_EXISTS:case H.PERMISSION_DENIED:case H.FAILED_PRECONDITION:case H.ABORTED:case H.OUT_OF_RANGE:case H.UNIMPLEMENTED:case H.DATA_LOSS:return!0}}function MN(n){if(n===void 0)return cn("GRPC error has no .code"),H.UNKNOWN;switch(n){case ct.OK:return H.OK;case ct.CANCELLED:return H.CANCELLED;case ct.UNKNOWN:return H.UNKNOWN;case ct.DEADLINE_EXCEEDED:return H.DEADLINE_EXCEEDED;case ct.RESOURCE_EXHAUSTED:return H.RESOURCE_EXHAUSTED;case ct.INTERNAL:return H.INTERNAL;case ct.UNAVAILABLE:return H.UNAVAILABLE;case ct.UNAUTHENTICATED:return H.UNAUTHENTICATED;case ct.INVALID_ARGUMENT:return H.INVALID_ARGUMENT;case ct.NOT_FOUND:return H.NOT_FOUND;case ct.ALREADY_EXISTS:return H.ALREADY_EXISTS;case ct.PERMISSION_DENIED:return H.PERMISSION_DENIED;case ct.FAILED_PRECONDITION:return H.FAILED_PRECONDITION;case ct.ABORTED:return H.ABORTED;case ct.OUT_OF_RANGE:return H.OUT_OF_RANGE;case ct.UNIMPLEMENTED:return H.UNIMPLEMENTED;case ct.DATA_LOSS:return H.DATA_LOSS;default:return oe()}}(Se=ct||(ct={}))[Se.OK=0]="OK",Se[Se.CANCELLED=1]="CANCELLED",Se[Se.UNKNOWN=2]="UNKNOWN",Se[Se.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",Se[Se.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",Se[Se.NOT_FOUND=5]="NOT_FOUND",Se[Se.ALREADY_EXISTS=6]="ALREADY_EXISTS",Se[Se.PERMISSION_DENIED=7]="PERMISSION_DENIED",Se[Se.UNAUTHENTICATED=16]="UNAUTHENTICATED",Se[Se.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",Se[Se.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",Se[Se.ABORTED=10]="ABORTED",Se[Se.OUT_OF_RANGE=11]="OUT_OF_RANGE",Se[Se.UNIMPLEMENTED=12]="UNIMPLEMENTED",Se[Se.INTERNAL=13]="INTERNAL",Se[Se.UNAVAILABLE=14]="UNAVAILABLE",Se[Se.DATA_LOSS=15]="DATA_LOSS";/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function m8(){return new TextEncoder}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const g8=new Da([4294967295,4294967295],0);function tx(n){const e=m8().encode(n),t=new qk;return t.update(e),new Uint8Array(t.digest())}function nx(n){const e=new DataView(n.buffer),t=e.getUint32(0,!0),r=e.getUint32(4,!0),i=e.getUint32(8,!0),s=e.getUint32(12,!0);return[new Da([t,r],0),new Da([i,s],0)]}class rA{constructor(e,t,r){if(this.bitmap=e,this.padding=t,this.hashCount=r,t<0||t>=8)throw new Bh(`Invalid padding: ${t}`);if(r<0)throw new Bh(`Invalid hash count: ${r}`);if(e.length>0&&this.hashCount===0)throw new Bh(`Invalid hash count: ${r}`);if(e.length===0&&t!==0)throw new Bh(`Invalid padding when bitmap length is 0: ${t}`);this.Ie=8*e.length-t,this.Te=Da.fromNumber(this.Ie)}Ee(e,t,r){let i=e.add(t.multiply(Da.fromNumber(r)));return i.compare(g8)===1&&(i=new Da([i.getBits(0),i.getBits(1)],0)),i.modulo(this.Te).toNumber()}de(e){return(this.bitmap[Math.floor(e/8)]&1<<e%8)!=0}mightContain(e){if(this.Ie===0)return!1;const t=tx(e),[r,i]=nx(t);for(let s=0;s<this.hashCount;s++){const o=this.Ee(r,i,s);if(!this.de(o))return!1}return!0}static create(e,t,r){const i=e%8==0?0:8-e%8,s=new Uint8Array(Math.ceil(e/8)),o=new rA(s,i,t);return r.forEach(a=>o.insert(a)),o}insert(e){if(this.Ie===0)return;const t=tx(e),[r,i]=nx(t);for(let s=0;s<this.hashCount;s++){const o=this.Ee(r,i,s);this.Ae(o)}}Ae(e){const t=Math.floor(e/8),r=e%8;this.bitmap[t]|=1<<r}}class Bh extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Py{constructor(e,t,r,i,s){this.snapshotVersion=e,this.targetChanges=t,this.targetMismatches=r,this.documentUpdates=i,this.resolvedLimboDocuments=s}static createSynthesizedRemoteEventForCurrentChange(e,t,r){const i=new Map;return i.set(e,Lf.createSynthesizedTargetChangeForCurrentChange(e,t,r)),new Py(ue.min(),i,new qe(pe),Hn(),ve())}}class Lf{constructor(e,t,r,i,s){this.resumeToken=e,this.current=t,this.addedDocuments=r,this.modifiedDocuments=i,this.removedDocuments=s}static createSynthesizedTargetChangeForCurrentChange(e,t,r){return new Lf(r,t,ve(),ve(),ve())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gm{constructor(e,t,r,i){this.Re=e,this.removedTargetIds=t,this.key=r,this.Ve=i}}class BN{constructor(e,t){this.targetId=e,this.me=t}}class FN{constructor(e,t,r=pt.EMPTY_BYTE_STRING,i=null){this.state=e,this.targetIds=t,this.resumeToken=r,this.cause=i}}class rx{constructor(){this.fe=0,this.ge=sx(),this.pe=pt.EMPTY_BYTE_STRING,this.ye=!1,this.we=!0}get current(){return this.ye}get resumeToken(){return this.pe}get Se(){return this.fe!==0}get be(){return this.we}De(e){e.approximateByteSize()>0&&(this.we=!0,this.pe=e)}ve(){let e=ve(),t=ve(),r=ve();return this.ge.forEach((i,s)=>{switch(s){case 0:e=e.add(i);break;case 2:t=t.add(i);break;case 1:r=r.add(i);break;default:oe()}}),new Lf(this.pe,this.ye,e,t,r)}Ce(){this.we=!1,this.ge=sx()}Fe(e,t){this.we=!0,this.ge=this.ge.insert(e,t)}Me(e){this.we=!0,this.ge=this.ge.remove(e)}xe(){this.fe+=1}Oe(){this.fe-=1,le(this.fe>=0)}Ne(){this.we=!0,this.ye=!0}}class y8{constructor(e){this.Le=e,this.Be=new Map,this.ke=Hn(),this.qe=ix(),this.Qe=new qe(pe)}Ke(e){for(const t of e.Re)e.Ve&&e.Ve.isFoundDocument()?this.$e(t,e.Ve):this.Ue(t,e.key,e.Ve);for(const t of e.removedTargetIds)this.Ue(t,e.key,e.Ve)}We(e){this.forEachTarget(e,t=>{const r=this.Ge(t);switch(e.state){case 0:this.ze(t)&&r.De(e.resumeToken);break;case 1:r.Oe(),r.Se||r.Ce(),r.De(e.resumeToken);break;case 2:r.Oe(),r.Se||this.removeTarget(t);break;case 3:this.ze(t)&&(r.Ne(),r.De(e.resumeToken));break;case 4:this.ze(t)&&(this.je(t),r.De(e.resumeToken));break;default:oe()}})}forEachTarget(e,t){e.targetIds.length>0?e.targetIds.forEach(t):this.Be.forEach((r,i)=>{this.ze(i)&&t(i)})}He(e){const t=e.targetId,r=e.me.count,i=this.Je(t);if(i){const s=i.target;if(mg(s))if(r===0){const o=new Z(s.path);this.Ue(t,o,st.newNoDocument(o,ue.min()))}else le(r===1);else{const o=this.Ye(t);if(o!==r){const a=this.Ze(e),l=a?this.Xe(a,e,o):1;if(l!==0){this.je(t);const c=l===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Qe=this.Qe.insert(t,c)}}}}}Ze(e){const t=e.me.unchangedNames;if(!t||!t.bits)return null;const{bits:{bitmap:r="",padding:i=0},hashCount:s=0}=t;let o,a;try{o=yo(r).toUint8Array()}catch(l){if(l instanceof dN)return Ka("Decoding the base64 bloom filter in existence filter failed ("+l.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw l}try{a=new rA(o,i,s)}catch(l){return Ka(l instanceof Bh?"BloomFilter error: ":"Applying bloom filter failed: ",l),null}return a.Ie===0?null:a}Xe(e,t,r){return t.me.count===r-this.nt(e,t.targetId)?0:2}nt(e,t){const r=this.Le.getRemoteKeysForTarget(t);let i=0;return r.forEach(s=>{const o=this.Le.tt(),a=`projects/${o.projectId}/databases/${o.database}/documents/${s.path.canonicalString()}`;e.mightContain(a)||(this.Ue(t,s,null),i++)}),i}rt(e){const t=new Map;this.Be.forEach((s,o)=>{const a=this.Je(o);if(a){if(s.current&&mg(a.target)){const l=new Z(a.target.path);this.ke.get(l)!==null||this.it(o,l)||this.Ue(o,l,st.newNoDocument(l,e))}s.be&&(t.set(o,s.ve()),s.Ce())}});let r=ve();this.qe.forEach((s,o)=>{let a=!0;o.forEachWhile(l=>{const c=this.Je(l);return!c||c.purpose==="TargetPurposeLimboResolution"||(a=!1,!1)}),a&&(r=r.add(s))}),this.ke.forEach((s,o)=>o.setReadTime(e));const i=new Py(e,t,this.Qe,this.ke,r);return this.ke=Hn(),this.qe=ix(),this.Qe=new qe(pe),i}$e(e,t){if(!this.ze(e))return;const r=this.it(e,t.key)?2:0;this.Ge(e).Fe(t.key,r),this.ke=this.ke.insert(t.key,t),this.qe=this.qe.insert(t.key,this.st(t.key).add(e))}Ue(e,t,r){if(!this.ze(e))return;const i=this.Ge(e);this.it(e,t)?i.Fe(t,1):i.Me(t),this.qe=this.qe.insert(t,this.st(t).delete(e)),r&&(this.ke=this.ke.insert(t,r))}removeTarget(e){this.Be.delete(e)}Ye(e){const t=this.Ge(e).ve();return this.Le.getRemoteKeysForTarget(e).size+t.addedDocuments.size-t.removedDocuments.size}xe(e){this.Ge(e).xe()}Ge(e){let t=this.Be.get(e);return t||(t=new rx,this.Be.set(e,t)),t}st(e){let t=this.qe.get(e);return t||(t=new Be(pe),this.qe=this.qe.insert(e,t)),t}ze(e){const t=this.Je(e)!==null;return t||W("WatchChangeAggregator","Detected inactive target",e),t}Je(e){const t=this.Be.get(e);return t&&t.Se?null:this.Le.ot(e)}je(e){this.Be.set(e,new rx),this.Le.getRemoteKeysForTarget(e).forEach(t=>{this.Ue(e,t,null)})}it(e,t){return this.Le.getRemoteKeysForTarget(e).has(t)}}function ix(){return new qe(Z.comparator)}function sx(){return new qe(Z.comparator)}const w8=(()=>({asc:"ASCENDING",desc:"DESCENDING"}))(),v8=(()=>({"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"}))(),_8=(()=>({and:"AND",or:"OR"}))();class E8{constructor(e,t){this.databaseId=e,this.useProto3Json=t}}function u_(n,e){return n.useProto3Json||Ay(e)?e:{value:e}}function xc(n,e){return n.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function UN(n,e){return n.useProto3Json?e.toBase64():e.toUint8Array()}function A8(n,e){return xc(n,e.toTimestamp())}function yn(n){return le(!!n),ue.fromTimestamp(function(t){const r=Zi(t);return new et(r.seconds,r.nanos)}(n))}function iA(n,e){return c_(n,e).canonicalString()}function c_(n,e){const t=function(i){return new Ne(["projects",i.projectId,"databases",i.database])}(n).child("documents");return e===void 0?t:t.child(e)}function jN(n){const e=Ne.fromString(n);return le(JN(e)),e}function wg(n,e){return iA(n.databaseId,e.path)}function Oa(n,e){const t=jN(e);if(t.get(1)!==n.databaseId.projectId)throw new X(H.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+t.get(1)+" vs "+n.databaseId.projectId);if(t.get(3)!==n.databaseId.database)throw new X(H.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+t.get(3)+" vs "+n.databaseId.database);return new Z(HN(t))}function zN(n,e){return iA(n.databaseId,e)}function GN(n){const e=jN(n);return e.length===4?Ne.emptyPath():HN(e)}function h_(n){return new Ne(["projects",n.databaseId.projectId,"databases",n.databaseId.database]).canonicalString()}function HN(n){return le(n.length>4&&n.get(4)==="documents"),n.popFirst(5)}function ox(n,e,t){return{name:wg(n,e),fields:t.value.mapValue.fields}}function I8(n,e,t){const r=Oa(n,e.name),i=yn(e.updateTime),s=e.createTime?yn(e.createTime):ue.min(),o=new Jt({mapValue:{fields:e.fields}}),a=st.newFoundDocument(r,i,s,o);return t&&a.setHasCommittedMutations(),t?a.setHasCommittedMutations():a}function T8(n,e){let t;if("targetChange"in e){e.targetChange;const r=function(c){return c==="NO_CHANGE"?0:c==="ADD"?1:c==="REMOVE"?2:c==="CURRENT"?3:c==="RESET"?4:oe()}(e.targetChange.targetChangeType||"NO_CHANGE"),i=e.targetChange.targetIds||[],s=function(c,h){return c.useProto3Json?(le(h===void 0||typeof h=="string"),pt.fromBase64String(h||"")):(le(h===void 0||h instanceof Buffer||h instanceof Uint8Array),pt.fromUint8Array(h||new Uint8Array))}(n,e.targetChange.resumeToken),o=e.targetChange.cause,a=o&&function(c){const h=c.code===void 0?H.UNKNOWN:MN(c.code);return new X(h,c.message||"")}(o);t=new FN(r,i,s,a||null)}else if("documentChange"in e){e.documentChange;const r=e.documentChange;r.document,r.document.name,r.document.updateTime;const i=Oa(n,r.document.name),s=yn(r.document.updateTime),o=r.document.createTime?yn(r.document.createTime):ue.min(),a=new Jt({mapValue:{fields:r.document.fields}}),l=st.newFoundDocument(i,s,o,a),c=r.targetIds||[],h=r.removedTargetIds||[];t=new gm(c,h,l.key,l)}else if("documentDelete"in e){e.documentDelete;const r=e.documentDelete;r.document;const i=Oa(n,r.document),s=r.readTime?yn(r.readTime):ue.min(),o=st.newNoDocument(i,s),a=r.removedTargetIds||[];t=new gm([],a,o.key,o)}else if("documentRemove"in e){e.documentRemove;const r=e.documentRemove;r.document;const i=Oa(n,r.document),s=r.removedTargetIds||[];t=new gm([],s,i,null)}else{if(!("filter"in e))return oe();{e.filter;const r=e.filter;r.targetId;const{count:i=0,unchangedNames:s}=r,o=new f8(i,s),a=r.targetId;t=new BN(a,o)}}return t}function vg(n,e){let t;if(e instanceof Fc)t={update:ox(n,e.key,e.value)};else if(e instanceof ZE)t={delete:wg(n,e.key)};else if(e instanceof is)t={update:ox(n,e.key,e.data),updateMask:C8(e.fieldMask)};else{if(!(e instanceof VN))return oe();t={verify:wg(n,e.key)}}return e.fieldTransforms.length>0&&(t.updateTransforms=e.fieldTransforms.map(r=>function(s,o){const a=o.transform;if(a instanceof Hd)return{fieldPath:o.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(a instanceof Tc)return{fieldPath:o.field.canonicalString(),appendMissingElements:{values:a.elements}};if(a instanceof bc)return{fieldPath:o.field.canonicalString(),removeAllFromArray:{values:a.elements}};if(a instanceof $d)return{fieldPath:o.field.canonicalString(),increment:a.Pe};throw oe()}(0,r))),e.precondition.isNone||(t.currentDocument=function(i,s){return s.updateTime!==void 0?{updateTime:A8(i,s.updateTime)}:s.exists!==void 0?{exists:s.exists}:oe()}(n,e.precondition)),t}function d_(n,e){const t=e.currentDocument?function(s){return s.updateTime!==void 0?Rn.updateTime(yn(s.updateTime)):s.exists!==void 0?Rn.exists(s.exists):Rn.none()}(e.currentDocument):Rn.none(),r=e.updateTransforms?e.updateTransforms.map(i=>function(o,a){let l=null;if("setToServerValue"in a)le(a.setToServerValue==="REQUEST_TIME"),l=new Hd;else if("appendMissingElements"in a){const h=a.appendMissingElements.values||[];l=new Tc(h)}else if("removeAllFromArray"in a){const h=a.removeAllFromArray.values||[];l=new bc(h)}else"increment"in a?l=new $d(o,a.increment):oe();const c=Xe.fromServerFormat(a.fieldPath);return new l8(c,l)}(n,i)):[];if(e.update){e.update.name;const i=Oa(n,e.update.name),s=new Jt({mapValue:{fields:e.update.fields}});if(e.updateMask){const o=function(l){const c=l.fieldPaths||[];return new Pn(c.map(h=>Xe.fromServerFormat(h)))}(e.updateMask);return new is(i,s,o,t,r)}return new Fc(i,s,t,r)}if(e.delete){const i=Oa(n,e.delete);return new ZE(i,t)}if(e.verify){const i=Oa(n,e.verify);return new VN(i,t)}return oe()}function b8(n,e){return n&&n.length>0?(le(e!==void 0),n.map(t=>function(i,s){let o=i.updateTime?yn(i.updateTime):yn(s);return o.isEqual(ue.min())&&(o=yn(s)),new c8(o,i.transformResults||[])}(t,e))):[]}function $N(n,e){return{documents:[zN(n,e.path)]}}function KN(n,e){const t={structuredQuery:{}},r=e.path;let i;e.collectionGroup!==null?(i=r,t.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(i=r.popLast(),t.structuredQuery.from=[{collectionId:r.lastSegment()}]),t.parent=zN(n,i);const s=function(c){if(c.length!==0)return WN(Oe.create(c,"and"))}(e.filters);s&&(t.structuredQuery.where=s);const o=function(c){if(c.length!==0)return c.map(h=>function(p){return{field:kl(p.field),direction:S8(p.dir)}}(h))}(e.orderBy);o&&(t.structuredQuery.orderBy=o);const a=u_(n,e.limit);return a!==null&&(t.structuredQuery.limit=a),e.startAt&&(t.structuredQuery.startAt=function(c){return{before:c.inclusive,values:c.position}}(e.startAt)),e.endAt&&(t.structuredQuery.endAt=function(c){return{before:!c.inclusive,values:c.position}}(e.endAt)),{_t:t,parent:i}}function QN(n){let e=GN(n.parent);const t=n.structuredQuery,r=t.from?t.from.length:0;let i=null;if(r>0){le(r===1);const h=t.from[0];h.allDescendants?i=h.collectionId:e=e.child(h.collectionId)}let s=[];t.where&&(s=function(d){const p=qN(d);return p instanceof Oe&&YE(p)?p.getFilters():[p]}(t.where));let o=[];t.orderBy&&(o=function(d){return d.map(p=>function(A){return new Gd(Nl(A.field),function(x){switch(x){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(A.direction))}(p))}(t.orderBy));let a=null;t.limit&&(a=function(d){let p;return p=typeof d=="object"?d.value:d,Ay(p)?null:p}(t.limit));let l=null;t.startAt&&(l=function(d){const p=!!d.before,g=d.values||[];return new Ac(g,p)}(t.startAt));let c=null;return t.endAt&&(c=function(d){const p=!d.before,g=d.values||[];return new Ac(g,p)}(t.endAt)),J9(e,i,o,s,a,"F",l,c)}function x8(n,e){const t=function(i){switch(i){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return oe()}}(e.purpose);return t==null?null:{"goog-listen-tags":t}}function qN(n){return n.unaryFilter!==void 0?function(t){switch(t.unaryFilter.op){case"IS_NAN":const r=Nl(t.unaryFilter.field);return Ie.create(r,"==",{doubleValue:NaN});case"IS_NULL":const i=Nl(t.unaryFilter.field);return Ie.create(i,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const s=Nl(t.unaryFilter.field);return Ie.create(s,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const o=Nl(t.unaryFilter.field);return Ie.create(o,"!=",{nullValue:"NULL_VALUE"});default:return oe()}}(n):n.fieldFilter!==void 0?function(t){return Ie.create(Nl(t.fieldFilter.field),function(i){switch(i){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";default:return oe()}}(t.fieldFilter.op),t.fieldFilter.value)}(n):n.compositeFilter!==void 0?function(t){return Oe.create(t.compositeFilter.filters.map(r=>qN(r)),function(i){switch(i){case"AND":return"and";case"OR":return"or";default:return oe()}}(t.compositeFilter.op))}(n):oe()}function S8(n){return w8[n]}function P8(n){return v8[n]}function R8(n){return _8[n]}function kl(n){return{fieldPath:n.canonicalString()}}function Nl(n){return Xe.fromServerFormat(n.fieldPath)}function WN(n){return n instanceof Ie?function(t){if(t.op==="=="){if(Gb(t.value))return{unaryFilter:{field:kl(t.field),op:"IS_NAN"}};if(zb(t.value))return{unaryFilter:{field:kl(t.field),op:"IS_NULL"}}}else if(t.op==="!="){if(Gb(t.value))return{unaryFilter:{field:kl(t.field),op:"IS_NOT_NAN"}};if(zb(t.value))return{unaryFilter:{field:kl(t.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:kl(t.field),op:P8(t.op),value:t.value}}}(n):n instanceof Oe?function(t){const r=t.getFilters().map(i=>WN(i));return r.length===1?r[0]:{compositeFilter:{op:R8(t.op),filters:r}}}(n):oe()}function C8(n){const e=[];return n.fields.forEach(t=>e.push(t.canonicalString())),{fieldPaths:e}}function JN(n){return n.length>=4&&n.get(0)==="projects"&&n.get(2)==="databases"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Mi{constructor(e,t,r,i,s=ue.min(),o=ue.min(),a=pt.EMPTY_BYTE_STRING,l=null){this.target=e,this.targetId=t,this.purpose=r,this.sequenceNumber=i,this.snapshotVersion=s,this.lastLimboFreeSnapshotVersion=o,this.resumeToken=a,this.expectedCount=l}withSequenceNumber(e){return new Mi(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,t){return new Mi(this.target,this.targetId,this.purpose,this.sequenceNumber,t,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new Mi(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new Mi(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class YN{constructor(e){this.ct=e}}function k8(n,e){let t;if(e.document)t=I8(n.ct,e.document,!!e.hasCommittedMutations);else if(e.noDocument){const r=Z.fromSegments(e.noDocument.path),i=Ya(e.noDocument.readTime);t=st.newNoDocument(r,i),e.hasCommittedMutations&&t.setHasCommittedMutations()}else{if(!e.unknownDocument)return oe();{const r=Z.fromSegments(e.unknownDocument.path),i=Ya(e.unknownDocument.version);t=st.newUnknownDocument(r,i)}}return e.readTime&&t.setReadTime(function(i){const s=new et(i[0],i[1]);return ue.fromTimestamp(s)}(e.readTime)),t}function ax(n,e){const t=e.key,r={prefixPath:t.getCollectionPath().popLast().toArray(),collectionGroup:t.collectionGroup,documentId:t.path.lastSegment(),readTime:_g(e.readTime),hasCommittedMutations:e.hasCommittedMutations};if(e.isFoundDocument())r.document=function(s,o){return{name:wg(s,o.key),fields:o.data.value.mapValue.fields,updateTime:xc(s,o.version.toTimestamp()),createTime:xc(s,o.createTime.toTimestamp())}}(n.ct,e);else if(e.isNoDocument())r.noDocument={path:t.path.toArray(),readTime:Ja(e.version)};else{if(!e.isUnknownDocument())return oe();r.unknownDocument={path:t.path.toArray(),version:Ja(e.version)}}return r}function _g(n){const e=n.toTimestamp();return[e.seconds,e.nanoseconds]}function Ja(n){const e=n.toTimestamp();return{seconds:e.seconds,nanoseconds:e.nanoseconds}}function Ya(n){const e=new et(n.seconds,n.nanoseconds);return ue.fromTimestamp(e)}function Qo(n,e){const t=(e.baseMutations||[]).map(s=>d_(n.ct,s));for(let s=0;s<e.mutations.length-1;++s){const o=e.mutations[s];if(s+1<e.mutations.length&&e.mutations[s+1].transform!==void 0){const a=e.mutations[s+1];o.updateTransforms=a.transform.fieldTransforms,e.mutations.splice(s+1,1),++s}}const r=e.mutations.map(s=>d_(n.ct,s)),i=et.fromMillis(e.localWriteTimeMs);return new eA(e.batchId,i,t,r)}function Fh(n){const e=Ya(n.readTime),t=n.lastLimboFreeSnapshotVersion!==void 0?Ya(n.lastLimboFreeSnapshotVersion):ue.min();let r;return r=function(s){return s.documents!==void 0}(n.query)?function(s){return le(s.documents.length===1),ur(Ty(GN(s.documents[0])))}(n.query):function(s){return ur(QN(s))}(n.query),new Mi(r,n.targetId,"TargetPurposeListen",n.lastListenSequenceNumber,e,t,pt.fromBase64String(n.resumeToken))}function XN(n,e){const t=Ja(e.snapshotVersion),r=Ja(e.lastLimboFreeSnapshotVersion);let i;i=mg(e.target)?$N(n.ct,e.target):KN(n.ct,e.target)._t;const s=e.resumeToken.toBase64();return{targetId:e.targetId,canonicalId:Wa(e.target),readTime:t,resumeToken:s,lastListenSequenceNumber:e.sequenceNumber,lastLimboFreeSnapshotVersion:r,query:i}}function ZN(n){const e=QN({parent:n.parent,structuredQuery:n.structuredQuery});return n.limitType==="LAST"?yg(e,e.limit,"L"):e}function lw(n,e){return new nA(e.largestBatchId,d_(n.ct,e.overlayMutation))}function lx(n,e){const t=e.path.lastSegment();return[n,gn(e.path.popLast()),t]}function ux(n,e,t,r){return{indexId:n,uid:e,sequenceNumber:t,readTime:Ja(r.readTime),documentKey:gn(r.documentKey.path),largestBatchId:r.largestBatchId}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class N8{getBundleMetadata(e,t){return cx(e).get(t).next(r=>{if(r)return function(s){return{id:s.bundleId,createTime:Ya(s.createTime),version:s.version}}(r)})}saveBundleMetadata(e,t){return cx(e).put(function(i){return{bundleId:i.id,createTime:Ja(yn(i.createTime)),version:i.version}}(t))}getNamedQuery(e,t){return hx(e).get(t).next(r=>{if(r)return function(s){return{name:s.name,query:ZN(s.bundledQuery),readTime:Ya(s.readTime)}}(r)})}saveNamedQuery(e,t){return hx(e).put(function(i){return{name:i.name,readTime:Ja(yn(i.readTime)),bundledQuery:i.bundledQuery}}(t))}}function cx(n){return vt(n,"bundles")}function hx(n){return vt(n,"namedQueries")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ry{constructor(e,t){this.serializer=e,this.userId=t}static lt(e,t){const r=t.uid||"";return new Ry(e,r)}getOverlay(e,t){return vh(e).get(lx(this.userId,t)).next(r=>r?lw(this.serializer,r):null)}getOverlays(e,t){const r=ti();return j.forEach(t,i=>this.getOverlay(e,i).next(s=>{s!==null&&r.set(i,s)})).next(()=>r)}saveOverlays(e,t,r){const i=[];return r.forEach((s,o)=>{const a=new nA(t,o);i.push(this.ht(e,a))}),j.waitFor(i)}removeOverlaysForBatchId(e,t,r){const i=new Set;t.forEach(o=>i.add(gn(o.getCollectionPath())));const s=[];return i.forEach(o=>{const a=IDBKeyRange.bound([this.userId,o,r],[this.userId,o,r+1],!1,!0);s.push(vh(e).j("collectionPathOverlayIndex",a))}),j.waitFor(s)}getOverlaysForCollection(e,t,r){const i=ti(),s=gn(t),o=IDBKeyRange.bound([this.userId,s,r],[this.userId,s,Number.POSITIVE_INFINITY],!0);return vh(e).U("collectionPathOverlayIndex",o).next(a=>{for(const l of a){const c=lw(this.serializer,l);i.set(c.getKey(),c)}return i})}getOverlaysForCollectionGroup(e,t,r,i){const s=ti();let o;const a=IDBKeyRange.bound([this.userId,t,r],[this.userId,t,Number.POSITIVE_INFINITY],!0);return vh(e).J({index:"collectionGroupOverlayIndex",range:a},(l,c,h)=>{const d=lw(this.serializer,c);s.size()<i||d.largestBatchId===o?(s.set(d.getKey(),d),o=d.largestBatchId):h.done()}).next(()=>s)}ht(e,t){return vh(e).put(function(i,s,o){const[a,l,c]=lx(s,o.mutation.key);return{userId:s,collectionPath:l,documentId:c,collectionGroup:o.mutation.key.getCollectionGroup(),largestBatchId:o.largestBatchId,overlayMutation:vg(i.ct,o.mutation)}}(this.serializer,this.userId,t))}}function vh(n){return vt(n,"documentOverlays")}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class D8{Pt(e){return vt(e,"globals")}getSessionToken(e){return this.Pt(e).get("sessionToken").next(t=>{const r=t==null?void 0:t.value;return r?pt.fromUint8Array(r):pt.EMPTY_BYTE_STRING})}setSessionToken(e,t){return this.Pt(e).put({name:"sessionToken",value:t.toUint8Array()})}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qo{constructor(){}It(e,t){this.Tt(e,t),t.Et()}Tt(e,t){if("nullValue"in e)this.dt(t,5);else if("booleanValue"in e)this.dt(t,10),t.At(e.booleanValue?1:0);else if("integerValue"in e)this.dt(t,15),t.At(Ke(e.integerValue));else if("doubleValue"in e){const r=Ke(e.doubleValue);isNaN(r)?this.dt(t,13):(this.dt(t,15),Bd(r)?t.At(0):t.At(r))}else if("timestampValue"in e){let r=e.timestampValue;this.dt(t,20),typeof r=="string"&&(r=Zi(r)),t.Rt(`${r.seconds||""}`),t.At(r.nanos||0)}else if("stringValue"in e)this.Vt(e.stringValue,t),this.ft(t);else if("bytesValue"in e)this.dt(t,30),t.gt(yo(e.bytesValue)),this.ft(t);else if("referenceValue"in e)this.yt(e.referenceValue,t);else if("geoPointValue"in e){const r=e.geoPointValue;this.dt(t,45),t.At(r.latitude||0),t.At(r.longitude||0)}else"mapValue"in e?fN(e)?this.dt(t,Number.MAX_SAFE_INTEGER):Iy(e)?this.wt(e.mapValue,t):(this.St(e.mapValue,t),this.ft(t)):"arrayValue"in e?(this.bt(e.arrayValue,t),this.ft(t)):oe()}Vt(e,t){this.dt(t,25),this.Dt(e,t)}Dt(e,t){t.Rt(e)}St(e,t){const r=e.fields||{};this.dt(t,55);for(const i of Object.keys(r))this.Vt(i,t),this.Tt(r[i],t)}wt(e,t){var r,i;const s=e.fields||{};this.dt(t,53);const o="value",a=((i=(r=s[o].arrayValue)===null||r===void 0?void 0:r.values)===null||i===void 0?void 0:i.length)||0;this.dt(t,15),t.At(Ke(a)),this.Vt(o,t),this.Tt(s[o],t)}bt(e,t){const r=e.values||[];this.dt(t,50);for(const i of r)this.Tt(i,t)}yt(e,t){this.dt(t,37),Z.fromName(e).path.forEach(r=>{this.dt(t,60),this.Dt(r,t)})}dt(e,t){e.At(t)}ft(e){e.At(2)}}qo.vt=new qo;function O8(n){if(n===0)return 8;let e=0;return!(n>>4)&&(e+=4,n<<=4),!(n>>6)&&(e+=2,n<<=2),!(n>>7)&&(e+=1),e}function dx(n){const e=64-function(r){let i=0;for(let s=0;s<8;++s){const o=O8(255&r[s]);if(i+=o,o!==8)break}return i}(n);return Math.ceil(e/8)}class L8{constructor(){this.buffer=new Uint8Array(1024),this.position=0}Ct(e){const t=e[Symbol.iterator]();let r=t.next();for(;!r.done;)this.Ft(r.value),r=t.next();this.Mt()}xt(e){const t=e[Symbol.iterator]();let r=t.next();for(;!r.done;)this.Ot(r.value),r=t.next();this.Nt()}Lt(e){for(const t of e){const r=t.charCodeAt(0);if(r<128)this.Ft(r);else if(r<2048)this.Ft(960|r>>>6),this.Ft(128|63&r);else if(t<"\uD800"||"\uDBFF"<t)this.Ft(480|r>>>12),this.Ft(128|63&r>>>6),this.Ft(128|63&r);else{const i=t.codePointAt(0);this.Ft(240|i>>>18),this.Ft(128|63&i>>>12),this.Ft(128|63&i>>>6),this.Ft(128|63&i)}}this.Mt()}Bt(e){for(const t of e){const r=t.charCodeAt(0);if(r<128)this.Ot(r);else if(r<2048)this.Ot(960|r>>>6),this.Ot(128|63&r);else if(t<"\uD800"||"\uDBFF"<t)this.Ot(480|r>>>12),this.Ot(128|63&r>>>6),this.Ot(128|63&r);else{const i=t.codePointAt(0);this.Ot(240|i>>>18),this.Ot(128|63&i>>>12),this.Ot(128|63&i>>>6),this.Ot(128|63&i)}}this.Nt()}kt(e){const t=this.qt(e),r=dx(t);this.Qt(1+r),this.buffer[this.position++]=255&r;for(let i=t.length-r;i<t.length;++i)this.buffer[this.position++]=255&t[i]}Kt(e){const t=this.qt(e),r=dx(t);this.Qt(1+r),this.buffer[this.position++]=~(255&r);for(let i=t.length-r;i<t.length;++i)this.buffer[this.position++]=~(255&t[i])}$t(){this.Ut(255),this.Ut(255)}Wt(){this.Gt(255),this.Gt(255)}reset(){this.position=0}seed(e){this.Qt(e.length),this.buffer.set(e,this.position),this.position+=e.length}zt(){return this.buffer.slice(0,this.position)}qt(e){const t=function(s){const o=new DataView(new ArrayBuffer(8));return o.setFloat64(0,s,!1),new Uint8Array(o.buffer)}(e),r=(128&t[0])!=0;t[0]^=r?255:128;for(let i=1;i<t.length;++i)t[i]^=r?255:0;return t}Ft(e){const t=255&e;t===0?(this.Ut(0),this.Ut(255)):t===255?(this.Ut(255),this.Ut(0)):this.Ut(t)}Ot(e){const t=255&e;t===0?(this.Gt(0),this.Gt(255)):t===255?(this.Gt(255),this.Gt(0)):this.Gt(e)}Mt(){this.Ut(0),this.Ut(1)}Nt(){this.Gt(0),this.Gt(1)}Ut(e){this.Qt(1),this.buffer[this.position++]=e}Gt(e){this.Qt(1),this.buffer[this.position++]=~e}Qt(e){const t=e+this.position;if(t<=this.buffer.length)return;let r=2*this.buffer.length;r<t&&(r=t);const i=new Uint8Array(r);i.set(this.buffer),this.buffer=i}}class V8{constructor(e){this.jt=e}gt(e){this.jt.Ct(e)}Rt(e){this.jt.Lt(e)}At(e){this.jt.kt(e)}Et(){this.jt.$t()}}class M8{constructor(e){this.jt=e}gt(e){this.jt.xt(e)}Rt(e){this.jt.Bt(e)}At(e){this.jt.Kt(e)}Et(){this.jt.Wt()}}class _h{constructor(){this.jt=new L8,this.Ht=new V8(this.jt),this.Jt=new M8(this.jt)}seed(e){this.jt.seed(e)}Yt(e){return e===0?this.Ht:this.Jt}zt(){return this.jt.zt()}reset(){this.jt.reset()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Wo{constructor(e,t,r,i){this.indexId=e,this.documentKey=t,this.arrayValue=r,this.directionalValue=i}Zt(){const e=this.directionalValue.length,t=e===0||this.directionalValue[e-1]===255?e+1:e,r=new Uint8Array(t);return r.set(this.directionalValue,0),t!==e?r.set([0],this.directionalValue.length):++r[r.length-1],new Wo(this.indexId,this.documentKey,this.arrayValue,r)}}function fs(n,e){let t=n.indexId-e.indexId;return t!==0?t:(t=fx(n.arrayValue,e.arrayValue),t!==0?t:(t=fx(n.directionalValue,e.directionalValue),t!==0?t:Z.comparator(n.documentKey,e.documentKey)))}function fx(n,e){for(let t=0;t<n.length&&t<e.length;++t){const r=n[t]-e[t];if(r!==0)return r}return n.length-e.length}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class px{constructor(e){this.Xt=new Be((t,r)=>Xe.comparator(t.field,r.field)),this.collectionId=e.collectionGroup!=null?e.collectionGroup:e.path.lastSegment(),this.en=e.orderBy,this.tn=[];for(const t of e.filters){const r=t;r.isInequality()?this.Xt=this.Xt.add(r):this.tn.push(r)}}get nn(){return this.Xt.size>1}rn(e){if(le(e.collectionGroup===this.collectionId),this.nn)return!1;const t=t_(e);if(t!==void 0&&!this.sn(t))return!1;const r=Go(e);let i=new Set,s=0,o=0;for(;s<r.length&&this.sn(r[s]);++s)i=i.add(r[s].fieldPath.canonicalString());if(s===r.length)return!0;if(this.Xt.size>0){const a=this.Xt.getIterator().getNext();if(!i.has(a.field.canonicalString())){const l=r[s];if(!this.on(a,l)||!this._n(this.en[o++],l))return!1}++s}for(;s<r.length;++s){const a=r[s];if(o>=this.en.length||!this._n(this.en[o++],a))return!1}return!0}an(){if(this.nn)return null;let e=new Be(Xe.comparator);const t=[];for(const r of this.tn)if(!r.field.isKeyField())if(r.op==="array-contains"||r.op==="array-contains-any")t.push(new hm(r.field,2));else{if(e.has(r.field))continue;e=e.add(r.field),t.push(new hm(r.field,0))}for(const r of this.en)r.field.isKeyField()||e.has(r.field)||(e=e.add(r.field),t.push(new hm(r.field,r.dir==="asc"?0:1)));return new pg(pg.UNKNOWN_ID,this.collectionId,t,Md.empty())}sn(e){for(const t of this.tn)if(this.on(t,e))return!0;return!1}on(e,t){if(e===void 0||!e.field.isEqual(t.fieldPath))return!1;const r=e.op==="array-contains"||e.op==="array-contains-any";return t.kind===2===r}_n(e,t){return!!e.field.isEqual(t.fieldPath)&&(t.kind===0&&e.dir==="asc"||t.kind===1&&e.dir==="desc")}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function e2(n){var e,t;if(le(n instanceof Ie||n instanceof Oe),n instanceof Ie){if(n instanceof AN){const i=((t=(e=n.value.arrayValue)===null||e===void 0?void 0:e.values)===null||t===void 0?void 0:t.map(s=>Ie.create(n.field,"==",s)))||[];return Oe.create(i,"or")}return n}const r=n.filters.map(i=>e2(i));return Oe.create(r,n.op)}function B8(n){if(n.getFilters().length===0)return[];const e=m_(e2(n));return le(t2(e)),f_(e)||p_(e)?[e]:e.getFilters()}function f_(n){return n instanceof Ie}function p_(n){return n instanceof Oe&&YE(n)}function t2(n){return f_(n)||p_(n)||function(t){if(t instanceof Oe&&s_(t)){for(const r of t.getFilters())if(!f_(r)&&!p_(r))return!1;return!0}return!1}(n)}function m_(n){if(le(n instanceof Ie||n instanceof Oe),n instanceof Ie)return n;if(n.filters.length===1)return m_(n.filters[0]);const e=n.filters.map(r=>m_(r));let t=Oe.create(e,n.op);return t=Eg(t),t2(t)?t:(le(t instanceof Oe),le(Ic(t)),le(t.filters.length>1),t.filters.reduce((r,i)=>sA(r,i)))}function sA(n,e){let t;return le(n instanceof Ie||n instanceof Oe),le(e instanceof Ie||e instanceof Oe),t=n instanceof Ie?e instanceof Ie?function(i,s){return Oe.create([i,s],"and")}(n,e):mx(n,e):e instanceof Ie?mx(e,n):function(i,s){if(le(i.filters.length>0&&s.filters.length>0),Ic(i)&&Ic(s))return vN(i,s.getFilters());const o=s_(i)?i:s,a=s_(i)?s:i,l=o.filters.map(c=>sA(c,a));return Oe.create(l,"or")}(n,e),Eg(t)}function mx(n,e){if(Ic(e))return vN(e,n.getFilters());{const t=e.filters.map(r=>sA(n,r));return Oe.create(t,"or")}}function Eg(n){if(le(n instanceof Ie||n instanceof Oe),n instanceof Ie)return n;const e=n.getFilters();if(e.length===1)return Eg(e[0]);if(yN(n))return n;const t=e.map(i=>Eg(i)),r=[];return t.forEach(i=>{i instanceof Ie?r.push(i):i instanceof Oe&&(i.op===n.op?r.push(...i.filters):r.push(i))}),r.length===1?r[0]:Oe.create(r,n.op)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class F8{constructor(){this.un=new oA}addToCollectionParentIndex(e,t){return this.un.add(t),j.resolve()}getCollectionParents(e,t){return j.resolve(this.un.getEntries(t))}addFieldIndex(e,t){return j.resolve()}deleteFieldIndex(e,t){return j.resolve()}deleteAllFieldIndexes(e){return j.resolve()}createTargetIndexes(e,t){return j.resolve()}getDocumentsMatchingTarget(e,t){return j.resolve(null)}getIndexType(e,t){return j.resolve(0)}getFieldIndexes(e,t){return j.resolve([])}getNextCollectionGroupToUpdate(e){return j.resolve(null)}getMinOffset(e,t){return j.resolve(Qn.min())}getMinOffsetFromCollectionGroup(e,t){return j.resolve(Qn.min())}updateCollectionGroup(e,t,r){return j.resolve()}updateIndexEntries(e,t){return j.resolve()}}class oA{constructor(){this.index={}}add(e){const t=e.lastSegment(),r=e.popLast(),i=this.index[t]||new Be(Ne.comparator),s=!i.has(r);return this.index[t]=i.add(r),s}has(e){const t=e.lastSegment(),r=e.popLast(),i=this.index[t];return i&&i.has(r)}getEntries(e){return(this.index[e]||new Be(Ne.comparator)).toArray()}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Lp=new Uint8Array(0);class U8{constructor(e,t){this.databaseId=t,this.cn=new oA,this.ln=new xo(r=>Wa(r),(r,i)=>Df(r,i)),this.uid=e.uid||""}addToCollectionParentIndex(e,t){if(!this.cn.has(t)){const r=t.lastSegment(),i=t.popLast();e.addOnCommittedListener(()=>{this.cn.add(t)});const s={collectionId:r,parent:gn(i)};return gx(e).put(s)}return j.resolve()}getCollectionParents(e,t){const r=[],i=IDBKeyRange.bound([t,""],[nN(t),""],!1,!0);return gx(e).U(i).next(s=>{for(const o of s){if(o.collectionId!==t)break;r.push(ei(o.parent))}return r})}addFieldIndex(e,t){const r=Eh(e),i=function(a){return{indexId:a.indexId,collectionGroup:a.collectionGroup,fields:a.fields.map(l=>[l.fieldPath.canonicalString(),l.kind])}}(t);delete i.indexId;const s=r.add(i);if(t.indexState){const o=Tl(e);return s.next(a=>{o.put(ux(a,this.uid,t.indexState.sequenceNumber,t.indexState.offset))})}return s.next()}deleteFieldIndex(e,t){const r=Eh(e),i=Tl(e),s=Il(e);return r.delete(t.indexId).next(()=>i.delete(IDBKeyRange.bound([t.indexId],[t.indexId+1],!1,!0))).next(()=>s.delete(IDBKeyRange.bound([t.indexId],[t.indexId+1],!1,!0)))}deleteAllFieldIndexes(e){const t=Eh(e),r=Il(e),i=Tl(e);return t.j().next(()=>r.j()).next(()=>i.j())}createTargetIndexes(e,t){return j.forEach(this.hn(t),r=>this.getIndexType(e,r).next(i=>{if(i===0||i===1){const s=new px(r).an();if(s!=null)return this.addFieldIndex(e,s)}}))}getDocumentsMatchingTarget(e,t){const r=Il(e);let i=!0;const s=new Map;return j.forEach(this.hn(t),o=>this.Pn(e,o).next(a=>{i&&(i=!!a),s.set(o,a)})).next(()=>{if(i){let o=ve();const a=[];return j.forEach(s,(l,c)=>{W("IndexedDbIndexManager",`Using index ${function(T){return`id=${T.indexId}|cg=${T.collectionGroup}|f=${T.fields.map(L=>`${L.fieldPath}:${L.kind}`).join(",")}`}(l)} to execute ${Wa(t)}`);const h=function(T,L){const F=t_(L);if(F===void 0)return null;for(const M of gg(T,F.fieldPath))switch(M.op){case"array-contains-any":return M.value.arrayValue.values||[];case"array-contains":return[M.value]}return null}(c,l),d=function(T,L){const F=new Map;for(const M of Go(L))for(const b of gg(T,M.fieldPath))switch(b.op){case"==":case"in":F.set(M.fieldPath.canonicalString(),b.value);break;case"not-in":case"!=":return F.set(M.fieldPath.canonicalString(),b.value),Array.from(F.values())}return null}(c,l),p=function(T,L){const F=[];let M=!0;for(const b of Go(L)){const _=b.kind===0?qb(T,b.fieldPath,T.startAt):Wb(T,b.fieldPath,T.startAt);F.push(_.value),M&&(M=_.inclusive)}return new Ac(F,M)}(c,l),g=function(T,L){const F=[];let M=!0;for(const b of Go(L)){const _=b.kind===0?Wb(T,b.fieldPath,T.endAt):qb(T,b.fieldPath,T.endAt);F.push(_.value),M&&(M=_.inclusive)}return new Ac(F,M)}(c,l),A=this.In(l,c,p),v=this.In(l,c,g),x=this.Tn(l,c,d),w=this.En(l.indexId,h,A,p.inclusive,v,g.inclusive,x);return j.forEach(w,E=>r.G(E,t.limit).next(T=>{T.forEach(L=>{const F=Z.fromSegments(L.documentKey);o.has(F)||(o=o.add(F),a.push(F))})}))}).next(()=>a)}return j.resolve(null)})}hn(e){let t=this.ln.get(e);return t||(e.filters.length===0?t=[e]:t=B8(Oe.create(e.filters,"and")).map(r=>a_(e.path,e.collectionGroup,e.orderBy,r.getFilters(),e.limit,e.startAt,e.endAt)),this.ln.set(e,t),t)}En(e,t,r,i,s,o,a){const l=(t!=null?t.length:1)*Math.max(r.length,s.length),c=l/(t!=null?t.length:1),h=[];for(let d=0;d<l;++d){const p=t?this.dn(t[d/c]):Lp,g=this.An(e,p,r[d%c],i),A=this.Rn(e,p,s[d%c],o),v=a.map(x=>this.An(e,p,x,!0));h.push(...this.createRange(g,A,v))}return h}An(e,t,r,i){const s=new Wo(e,Z.empty(),t,r);return i?s:s.Zt()}Rn(e,t,r,i){const s=new Wo(e,Z.empty(),t,r);return i?s.Zt():s}Pn(e,t){const r=new px(t),i=t.collectionGroup!=null?t.collectionGroup:t.path.lastSegment();return this.getFieldIndexes(e,i).next(s=>{let o=null;for(const a of s)r.rn(a)&&(!o||a.fields.length>o.fields.length)&&(o=a);return o})}getIndexType(e,t){let r=2;const i=this.hn(t);return j.forEach(i,s=>this.Pn(e,s).next(o=>{o?r!==0&&o.fields.length<function(l){let c=new Be(Xe.comparator),h=!1;for(const d of l.filters)for(const p of d.getFlattenedFilters())p.field.isKeyField()||(p.op==="array-contains"||p.op==="array-contains-any"?h=!0:c=c.add(p.field));for(const d of l.orderBy)d.field.isKeyField()||(c=c.add(d.field));return c.size+(h?1:0)}(s)&&(r=1):r=0})).next(()=>function(o){return o.limit!==null}(t)&&i.length>1&&r===2?1:r)}Vn(e,t){const r=new _h;for(const i of Go(e)){const s=t.data.field(i.fieldPath);if(s==null)return null;const o=r.Yt(i.kind);qo.vt.It(s,o)}return r.zt()}dn(e){const t=new _h;return qo.vt.It(e,t.Yt(0)),t.zt()}mn(e,t){const r=new _h;return qo.vt.It(jd(this.databaseId,t),r.Yt(function(s){const o=Go(s);return o.length===0?0:o[o.length-1].kind}(e))),r.zt()}Tn(e,t,r){if(r===null)return[];let i=[];i.push(new _h);let s=0;for(const o of Go(e)){const a=r[s++];for(const l of i)if(this.fn(t,o.fieldPath)&&zd(a))i=this.gn(i,o,a);else{const c=l.Yt(o.kind);qo.vt.It(a,c)}}return this.pn(i)}In(e,t,r){return this.Tn(e,t,r.position)}pn(e){const t=[];for(let r=0;r<e.length;++r)t[r]=e[r].zt();return t}gn(e,t,r){const i=[...e],s=[];for(const o of r.arrayValue.values||[])for(const a of i){const l=new _h;l.seed(a.zt()),qo.vt.It(o,l.Yt(t.kind)),s.push(l)}return s}fn(e,t){return!!e.filters.find(r=>r instanceof Ie&&r.field.isEqual(t)&&(r.op==="in"||r.op==="not-in"))}getFieldIndexes(e,t){const r=Eh(e),i=Tl(e);return(t?r.U("collectionGroupIndex",IDBKeyRange.bound(t,t)):r.U()).next(s=>{const o=[];return j.forEach(s,a=>i.get([a.indexId,this.uid]).next(l=>{o.push(function(h,d){const p=d?new Md(d.sequenceNumber,new Qn(Ya(d.readTime),new Z(ei(d.documentKey)),d.largestBatchId)):Md.empty(),g=h.fields.map(([A,v])=>new hm(Xe.fromServerFormat(A),v));return new pg(h.indexId,h.collectionGroup,g,p)}(a,l))})).next(()=>o)})}getNextCollectionGroupToUpdate(e){return this.getFieldIndexes(e).next(t=>t.length===0?null:(t.sort((r,i)=>{const s=r.indexState.sequenceNumber-i.indexState.sequenceNumber;return s!==0?s:pe(r.collectionGroup,i.collectionGroup)}),t[0].collectionGroup))}updateCollectionGroup(e,t,r){const i=Eh(e),s=Tl(e);return this.yn(e).next(o=>i.U("collectionGroupIndex",IDBKeyRange.bound(t,t)).next(a=>j.forEach(a,l=>s.put(ux(l.indexId,this.uid,o,r)))))}updateIndexEntries(e,t){const r=new Map;return j.forEach(t,(i,s)=>{const o=r.get(i.collectionGroup);return(o?j.resolve(o):this.getFieldIndexes(e,i.collectionGroup)).next(a=>(r.set(i.collectionGroup,a),j.forEach(a,l=>this.wn(e,i,l).next(c=>{const h=this.Sn(s,l);return c.isEqual(h)?j.resolve():this.bn(e,s,l,c,h)}))))})}Dn(e,t,r,i){return Il(e).put({indexId:i.indexId,uid:this.uid,arrayValue:i.arrayValue,directionalValue:i.directionalValue,orderedDocumentKey:this.mn(r,t.key),documentKey:t.key.path.toArray()})}vn(e,t,r,i){return Il(e).delete([i.indexId,this.uid,i.arrayValue,i.directionalValue,this.mn(r,t.key),t.key.path.toArray()])}wn(e,t,r){const i=Il(e);let s=new Be(fs);return i.J({index:"documentKeyIndex",range:IDBKeyRange.only([r.indexId,this.uid,this.mn(r,t)])},(o,a)=>{s=s.add(new Wo(r.indexId,t,a.arrayValue,a.directionalValue))}).next(()=>s)}Sn(e,t){let r=new Be(fs);const i=this.Vn(t,e);if(i==null)return r;const s=t_(t);if(s!=null){const o=e.data.field(s.fieldPath);if(zd(o))for(const a of o.arrayValue.values||[])r=r.add(new Wo(t.indexId,e.key,this.dn(a),i))}else r=r.add(new Wo(t.indexId,e.key,Lp,i));return r}bn(e,t,r,i,s){W("IndexedDbIndexManager","Updating index entries for document '%s'",t.key);const o=[];return function(l,c,h,d,p){const g=l.getIterator(),A=c.getIterator();let v=Al(g),x=Al(A);for(;v||x;){let w=!1,E=!1;if(v&&x){const T=h(v,x);T<0?E=!0:T>0&&(w=!0)}else v!=null?E=!0:w=!0;w?(d(x),x=Al(A)):E?(p(v),v=Al(g)):(v=Al(g),x=Al(A))}}(i,s,fs,a=>{o.push(this.Dn(e,t,r,a))},a=>{o.push(this.vn(e,t,r,a))}),j.waitFor(o)}yn(e){let t=1;return Tl(e).J({index:"sequenceNumberIndex",reverse:!0,range:IDBKeyRange.upperBound([this.uid,Number.MAX_SAFE_INTEGER])},(r,i,s)=>{s.done(),t=i.sequenceNumber+1}).next(()=>t)}createRange(e,t,r){r=r.sort((o,a)=>fs(o,a)).filter((o,a,l)=>!a||fs(o,l[a-1])!==0);const i=[];i.push(e);for(const o of r){const a=fs(o,e),l=fs(o,t);if(a===0)i[0]=e.Zt();else if(a>0&&l<0)i.push(o),i.push(o.Zt());else if(l>0)break}i.push(t);const s=[];for(let o=0;o<i.length;o+=2){if(this.Cn(i[o],i[o+1]))return[];const a=[i[o].indexId,this.uid,i[o].arrayValue,i[o].directionalValue,Lp,[]],l=[i[o+1].indexId,this.uid,i[o+1].arrayValue,i[o+1].directionalValue,Lp,[]];s.push(IDBKeyRange.bound(a,l))}return s}Cn(e,t){return fs(e,t)>0}getMinOffsetFromCollectionGroup(e,t){return this.getFieldIndexes(e,t).next(yx)}getMinOffset(e,t){return j.mapArray(this.hn(t),r=>this.Pn(e,r).next(i=>i||oe())).next(yx)}}function gx(n){return vt(n,"collectionParents")}function Il(n){return vt(n,"indexEntries")}function Eh(n){return vt(n,"indexConfiguration")}function Tl(n){return vt(n,"indexState")}function yx(n){le(n.length!==0);let e=n[0].indexState.offset,t=e.largestBatchId;for(let r=1;r<n.length;r++){const i=n[r].indexState.offset;KE(i,e)<0&&(e=i),t<i.largestBatchId&&(t=i.largestBatchId)}return new Qn(e.readTime,e.documentKey,t)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const wx={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0};class In{constructor(e,t,r){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=t,this.maximumSequenceNumbersToCollect=r}static withCacheSize(e){return new In(e,In.DEFAULT_COLLECTION_PERCENTILE,In.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function n2(n,e,t){const r=n.store("mutations"),i=n.store("documentMutations"),s=[],o=IDBKeyRange.only(t.batchId);let a=0;const l=r.J({range:o},(h,d,p)=>(a++,p.delete()));s.push(l.next(()=>{le(a===1)}));const c=[];for(const h of t.mutations){const d=aN(e,h.key.path,t.batchId);s.push(i.delete(d)),c.push(h.key)}return j.waitFor(s).next(()=>c)}function Ag(n){if(!n)return 0;let e;if(n.document)e=n.document;else if(n.unknownDocument)e=n.unknownDocument;else{if(!n.noDocument)throw oe();e=n.noDocument}return JSON.stringify(e).length}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */In.DEFAULT_COLLECTION_PERCENTILE=10,In.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,In.DEFAULT=new In(41943040,In.DEFAULT_COLLECTION_PERCENTILE,In.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),In.DISABLED=new In(-1,0,0);class Cy{constructor(e,t,r,i){this.userId=e,this.serializer=t,this.indexManager=r,this.referenceDelegate=i,this.Fn={}}static lt(e,t,r,i){le(e.uid!=="");const s=e.isAuthenticated()?e.uid:"";return new Cy(s,t,r,i)}checkEmpty(e){let t=!0;const r=IDBKeyRange.bound([this.userId,Number.NEGATIVE_INFINITY],[this.userId,Number.POSITIVE_INFINITY]);return ps(e).J({index:"userMutationsIndex",range:r},(i,s,o)=>{t=!1,o.done()}).next(()=>t)}addMutationBatch(e,t,r,i){const s=Dl(e),o=ps(e);return o.add({}).next(a=>{le(typeof a=="number");const l=new eA(a,t,r,i),c=function(g,A,v){const x=v.baseMutations.map(E=>vg(g.ct,E)),w=v.mutations.map(E=>vg(g.ct,E));return{userId:A,batchId:v.batchId,localWriteTimeMs:v.localWriteTime.toMillis(),baseMutations:x,mutations:w}}(this.serializer,this.userId,l),h=[];let d=new Be((p,g)=>pe(p.canonicalString(),g.canonicalString()));for(const p of i){const g=aN(this.userId,p.key.path,a);d=d.add(p.key.path.popLast()),h.push(o.put(c)),h.push(s.put(g,_9))}return d.forEach(p=>{h.push(this.indexManager.addToCollectionParentIndex(e,p))}),e.addOnCommittedListener(()=>{this.Fn[a]=l.keys()}),j.waitFor(h).next(()=>l)})}lookupMutationBatch(e,t){return ps(e).get(t).next(r=>r?(le(r.userId===this.userId),Qo(this.serializer,r)):null)}Mn(e,t){return this.Fn[t]?j.resolve(this.Fn[t]):this.lookupMutationBatch(e,t).next(r=>{if(r){const i=r.keys();return this.Fn[t]=i,i}return null})}getNextMutationBatchAfterBatchId(e,t){const r=t+1,i=IDBKeyRange.lowerBound([this.userId,r]);let s=null;return ps(e).J({index:"userMutationsIndex",range:i},(o,a,l)=>{a.userId===this.userId&&(le(a.batchId>=r),s=Qo(this.serializer,a)),l.done()}).next(()=>s)}getHighestUnacknowledgedBatchId(e){const t=IDBKeyRange.upperBound([this.userId,Number.POSITIVE_INFINITY]);let r=-1;return ps(e).J({index:"userMutationsIndex",range:t,reverse:!0},(i,s,o)=>{r=s.batchId,o.done()}).next(()=>r)}getAllMutationBatches(e){const t=IDBKeyRange.bound([this.userId,-1],[this.userId,Number.POSITIVE_INFINITY]);return ps(e).U("userMutationsIndex",t).next(r=>r.map(i=>Qo(this.serializer,i)))}getAllMutationBatchesAffectingDocumentKey(e,t){const r=dm(this.userId,t.path),i=IDBKeyRange.lowerBound(r),s=[];return Dl(e).J({range:i},(o,a,l)=>{const[c,h,d]=o,p=ei(h);if(c===this.userId&&t.path.isEqual(p))return ps(e).get(d).next(g=>{if(!g)throw oe();le(g.userId===this.userId),s.push(Qo(this.serializer,g))});l.done()}).next(()=>s)}getAllMutationBatchesAffectingDocumentKeys(e,t){let r=new Be(pe);const i=[];return t.forEach(s=>{const o=dm(this.userId,s.path),a=IDBKeyRange.lowerBound(o),l=Dl(e).J({range:a},(c,h,d)=>{const[p,g,A]=c,v=ei(g);p===this.userId&&s.path.isEqual(v)?r=r.add(A):d.done()});i.push(l)}),j.waitFor(i).next(()=>this.xn(e,r))}getAllMutationBatchesAffectingQuery(e,t){const r=t.path,i=r.length+1,s=dm(this.userId,r),o=IDBKeyRange.lowerBound(s);let a=new Be(pe);return Dl(e).J({range:o},(l,c,h)=>{const[d,p,g]=l,A=ei(p);d===this.userId&&r.isPrefixOf(A)?A.length===i&&(a=a.add(g)):h.done()}).next(()=>this.xn(e,a))}xn(e,t){const r=[],i=[];return t.forEach(s=>{i.push(ps(e).get(s).next(o=>{if(o===null)throw oe();le(o.userId===this.userId),r.push(Qo(this.serializer,o))}))}),j.waitFor(i).next(()=>r)}removeMutationBatch(e,t){return n2(e._e,this.userId,t).next(r=>(e.addOnCommittedListener(()=>{this.On(t.batchId)}),j.forEach(r,i=>this.referenceDelegate.markPotentiallyOrphaned(e,i))))}On(e){delete this.Fn[e]}performConsistencyCheck(e){return this.checkEmpty(e).next(t=>{if(!t)return j.resolve();const r=IDBKeyRange.lowerBound(function(o){return[o]}(this.userId)),i=[];return Dl(e).J({range:r},(s,o,a)=>{if(s[0]===this.userId){const l=ei(s[1]);i.push(l)}else a.done()}).next(()=>{le(i.length===0)})})}containsKey(e,t){return r2(e,this.userId,t)}Nn(e){return i2(e).get(this.userId).next(t=>t||{userId:this.userId,lastAcknowledgedBatchId:-1,lastStreamToken:""})}}function r2(n,e,t){const r=dm(e,t.path),i=r[1],s=IDBKeyRange.lowerBound(r);let o=!1;return Dl(n).J({range:s,H:!0},(a,l,c)=>{const[h,d,p]=a;h===e&&d===i&&(o=!0),c.done()}).next(()=>o)}function ps(n){return vt(n,"mutations")}function Dl(n){return vt(n,"documentMutations")}function i2(n){return vt(n,"mutationQueues")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xa{constructor(e){this.Ln=e}next(){return this.Ln+=2,this.Ln}static Bn(){return new Xa(0)}static kn(){return new Xa(-1)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class j8{constructor(e,t){this.referenceDelegate=e,this.serializer=t}allocateTargetId(e){return this.qn(e).next(t=>{const r=new Xa(t.highestTargetId);return t.highestTargetId=r.next(),this.Qn(e,t).next(()=>t.highestTargetId)})}getLastRemoteSnapshotVersion(e){return this.qn(e).next(t=>ue.fromTimestamp(new et(t.lastRemoteSnapshotVersion.seconds,t.lastRemoteSnapshotVersion.nanoseconds)))}getHighestSequenceNumber(e){return this.qn(e).next(t=>t.highestListenSequenceNumber)}setTargetsMetadata(e,t,r){return this.qn(e).next(i=>(i.highestListenSequenceNumber=t,r&&(i.lastRemoteSnapshotVersion=r.toTimestamp()),t>i.highestListenSequenceNumber&&(i.highestListenSequenceNumber=t),this.Qn(e,i)))}addTargetData(e,t){return this.Kn(e,t).next(()=>this.qn(e).next(r=>(r.targetCount+=1,this.$n(t,r),this.Qn(e,r))))}updateTargetData(e,t){return this.Kn(e,t)}removeTargetData(e,t){return this.removeMatchingKeysForTargetId(e,t.targetId).next(()=>bl(e).delete(t.targetId)).next(()=>this.qn(e)).next(r=>(le(r.targetCount>0),r.targetCount-=1,this.Qn(e,r)))}removeTargets(e,t,r){let i=0;const s=[];return bl(e).J((o,a)=>{const l=Fh(a);l.sequenceNumber<=t&&r.get(l.targetId)===null&&(i++,s.push(this.removeTargetData(e,l)))}).next(()=>j.waitFor(s)).next(()=>i)}forEachTarget(e,t){return bl(e).J((r,i)=>{const s=Fh(i);t(s)})}qn(e){return vx(e).get("targetGlobalKey").next(t=>(le(t!==null),t))}Qn(e,t){return vx(e).put("targetGlobalKey",t)}Kn(e,t){return bl(e).put(XN(this.serializer,t))}$n(e,t){let r=!1;return e.targetId>t.highestTargetId&&(t.highestTargetId=e.targetId,r=!0),e.sequenceNumber>t.highestListenSequenceNumber&&(t.highestListenSequenceNumber=e.sequenceNumber,r=!0),r}getTargetCount(e){return this.qn(e).next(t=>t.targetCount)}getTargetData(e,t){const r=Wa(t),i=IDBKeyRange.bound([r,Number.NEGATIVE_INFINITY],[r,Number.POSITIVE_INFINITY]);let s=null;return bl(e).J({range:i,index:"queryTargetsIndex"},(o,a,l)=>{const c=Fh(a);Df(t,c.target)&&(s=c,l.done())}).next(()=>s)}addMatchingKeys(e,t,r){const i=[],s=Is(e);return t.forEach(o=>{const a=gn(o.path);i.push(s.put({targetId:r,path:a})),i.push(this.referenceDelegate.addReference(e,r,o))}),j.waitFor(i)}removeMatchingKeys(e,t,r){const i=Is(e);return j.forEach(t,s=>{const o=gn(s.path);return j.waitFor([i.delete([r,o]),this.referenceDelegate.removeReference(e,r,s)])})}removeMatchingKeysForTargetId(e,t){const r=Is(e),i=IDBKeyRange.bound([t],[t+1],!1,!0);return r.delete(i)}getMatchingKeysForTargetId(e,t){const r=IDBKeyRange.bound([t],[t+1],!1,!0),i=Is(e);let s=ve();return i.J({range:r,H:!0},(o,a,l)=>{const c=ei(o[1]),h=new Z(c);s=s.add(h)}).next(()=>s)}containsKey(e,t){const r=gn(t.path),i=IDBKeyRange.bound([r],[nN(r)],!1,!0);let s=0;return Is(e).J({index:"documentTargetsIndex",H:!0,range:i},([o,a],l,c)=>{o!==0&&(s++,c.done())}).next(()=>s>0)}ot(e,t){return bl(e).get(t).next(r=>r?Fh(r):null)}}function bl(n){return vt(n,"targets")}function vx(n){return vt(n,"targetGlobal")}function Is(n){return vt(n,"targetDocuments")}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function _x([n,e],[t,r]){const i=pe(n,t);return i===0?pe(e,r):i}class z8{constructor(e){this.Un=e,this.buffer=new Be(_x),this.Wn=0}Gn(){return++this.Wn}zn(e){const t=[e,this.Gn()];if(this.buffer.size<this.Un)this.buffer=this.buffer.add(t);else{const r=this.buffer.last();_x(t,r)<0&&(this.buffer=this.buffer.delete(r).add(t))}}get maxValue(){return this.buffer.last()[0]}}class G8{constructor(e,t,r){this.garbageCollector=e,this.asyncQueue=t,this.localStore=r,this.jn=null}start(){this.garbageCollector.params.cacheSizeCollectionThreshold!==-1&&this.Hn(6e4)}stop(){this.jn&&(this.jn.cancel(),this.jn=null)}get started(){return this.jn!==null}Hn(e){W("LruGarbageCollector",`Garbage collection scheduled in ${e}ms`),this.jn=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,async()=>{this.jn=null;try{await this.localStore.collectGarbage(this.garbageCollector)}catch(t){bo(t)?W("LruGarbageCollector","Ignoring IndexedDB error during garbage collection: ",t):await ll(t)}await this.Hn(3e5)})}}class H8{constructor(e,t){this.Jn=e,this.params=t}calculateTargetCount(e,t){return this.Jn.Yn(e).next(r=>Math.floor(t/100*r))}nthSequenceNumber(e,t){if(t===0)return j.resolve(ar.oe);const r=new z8(t);return this.Jn.forEachTarget(e,i=>r.zn(i.sequenceNumber)).next(()=>this.Jn.Zn(e,i=>r.zn(i))).next(()=>r.maxValue)}removeTargets(e,t,r){return this.Jn.removeTargets(e,t,r)}removeOrphanedDocuments(e,t){return this.Jn.removeOrphanedDocuments(e,t)}collect(e,t){return this.params.cacheSizeCollectionThreshold===-1?(W("LruGarbageCollector","Garbage collection skipped; disabled"),j.resolve(wx)):this.getCacheSize(e).next(r=>r<this.params.cacheSizeCollectionThreshold?(W("LruGarbageCollector",`Garbage collection skipped; Cache size ${r} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),wx):this.Xn(e,t))}getCacheSize(e){return this.Jn.getCacheSize(e)}Xn(e,t){let r,i,s,o,a,l,c;const h=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next(d=>(d>this.params.maximumSequenceNumbersToCollect?(W("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${d}`),i=this.params.maximumSequenceNumbersToCollect):i=d,o=Date.now(),this.nthSequenceNumber(e,i))).next(d=>(r=d,a=Date.now(),this.removeTargets(e,r,t))).next(d=>(s=d,l=Date.now(),this.removeOrphanedDocuments(e,r))).next(d=>(c=Date.now(),Rl()<=Ae.DEBUG&&W("LruGarbageCollector",`LRU Garbage Collection
	Counted targets in ${o-h}ms
	Determined least recently used ${i} in `+(a-o)+`ms
	Removed ${s} targets in `+(l-a)+`ms
	Removed ${d} documents in `+(c-l)+`ms
Total Duration: ${c-h}ms`),j.resolve({didRun:!0,sequenceNumbersCollected:i,targetsRemoved:s,documentsRemoved:d})))}}function $8(n,e){return new H8(n,e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class K8{constructor(e,t){this.db=e,this.garbageCollector=$8(this,t)}Yn(e){const t=this.er(e);return this.db.getTargetCache().getTargetCount(e).next(r=>t.next(i=>r+i))}er(e){let t=0;return this.Zn(e,r=>{t++}).next(()=>t)}forEachTarget(e,t){return this.db.getTargetCache().forEachTarget(e,t)}Zn(e,t){return this.tr(e,(r,i)=>t(i))}addReference(e,t,r){return Vp(e,r)}removeReference(e,t,r){return Vp(e,r)}removeTargets(e,t,r){return this.db.getTargetCache().removeTargets(e,t,r)}markPotentiallyOrphaned(e,t){return Vp(e,t)}nr(e,t){return function(i,s){let o=!1;return i2(i).Y(a=>r2(i,a,s).next(l=>(l&&(o=!0),j.resolve(!l)))).next(()=>o)}(e,t)}removeOrphanedDocuments(e,t){const r=this.db.getRemoteDocumentCache().newChangeBuffer(),i=[];let s=0;return this.tr(e,(o,a)=>{if(a<=t){const l=this.nr(e,o).next(c=>{if(!c)return s++,r.getEntry(e,o).next(()=>(r.removeEntry(o,ue.min()),Is(e).delete(function(d){return[0,gn(d.path)]}(o))))});i.push(l)}}).next(()=>j.waitFor(i)).next(()=>r.apply(e)).next(()=>s)}removeTarget(e,t){const r=t.withSequenceNumber(e.currentSequenceNumber);return this.db.getTargetCache().updateTargetData(e,r)}updateLimboDocument(e,t){return Vp(e,t)}tr(e,t){const r=Is(e);let i,s=ar.oe;return r.J({index:"documentTargetsIndex"},([o,a],{path:l,sequenceNumber:c})=>{o===0?(s!==ar.oe&&t(new Z(ei(i)),s),s=c,i=l):s=ar.oe}).next(()=>{s!==ar.oe&&t(new Z(ei(i)),s)})}getCacheSize(e){return this.db.getRemoteDocumentCache().getSize(e)}}function Vp(n,e){return Is(n).put(function(r,i){return{targetId:0,path:gn(r.path),sequenceNumber:i}}(e,n.currentSequenceNumber))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class s2{constructor(){this.changes=new xo(e=>e.toString(),(e,t)=>e.isEqual(t)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,t){this.assertNotApplied(),this.changes.set(e,st.newInvalidDocument(e).setReadTime(t))}getEntry(e,t){this.assertNotApplied();const r=this.changes.get(t);return r!==void 0?j.resolve(r):this.getFromCache(e,t)}getEntries(e,t){return this.getAllFromCache(e,t)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Q8{constructor(e){this.serializer=e}setIndexManager(e){this.indexManager=e}addEntry(e,t,r){return Mo(e).put(r)}removeEntry(e,t,r){return Mo(e).delete(function(s,o){const a=s.path.toArray();return[a.slice(0,a.length-2),a[a.length-2],_g(o),a[a.length-1]]}(t,r))}updateMetadata(e,t){return this.getMetadata(e).next(r=>(r.byteSize+=t,this.rr(e,r)))}getEntry(e,t){let r=st.newInvalidDocument(t);return Mo(e).J({index:"documentKeyIndex",range:IDBKeyRange.only(Ah(t))},(i,s)=>{r=this.ir(t,s)}).next(()=>r)}sr(e,t){let r={size:0,document:st.newInvalidDocument(t)};return Mo(e).J({index:"documentKeyIndex",range:IDBKeyRange.only(Ah(t))},(i,s)=>{r={document:this.ir(t,s),size:Ag(s)}}).next(()=>r)}getEntries(e,t){let r=Hn();return this._r(e,t,(i,s)=>{const o=this.ir(i,s);r=r.insert(i,o)}).next(()=>r)}ar(e,t){let r=Hn(),i=new qe(Z.comparator);return this._r(e,t,(s,o)=>{const a=this.ir(s,o);r=r.insert(s,a),i=i.insert(s,Ag(o))}).next(()=>({documents:r,ur:i}))}_r(e,t,r){if(t.isEmpty())return j.resolve();let i=new Be(Ix);t.forEach(l=>i=i.add(l));const s=IDBKeyRange.bound(Ah(i.first()),Ah(i.last())),o=i.getIterator();let a=o.getNext();return Mo(e).J({index:"documentKeyIndex",range:s},(l,c,h)=>{const d=Z.fromSegments([...c.prefixPath,c.collectionGroup,c.documentId]);for(;a&&Ix(a,d)<0;)r(a,null),a=o.getNext();a&&a.isEqual(d)&&(r(a,c),a=o.hasNext()?o.getNext():null),a?h.$(Ah(a)):h.done()}).next(()=>{for(;a;)r(a,null),a=o.hasNext()?o.getNext():null})}getDocumentsMatchingQuery(e,t,r,i,s){const o=t.path,a=[o.popLast().toArray(),o.lastSegment(),_g(r.readTime),r.documentKey.path.isEmpty()?"":r.documentKey.path.lastSegment()],l=[o.popLast().toArray(),o.lastSegment(),[Number.MAX_SAFE_INTEGER,Number.MAX_SAFE_INTEGER],""];return Mo(e).U(IDBKeyRange.bound(a,l,!0)).next(c=>{s==null||s.incrementDocumentReadCount(c.length);let h=Hn();for(const d of c){const p=this.ir(Z.fromSegments(d.prefixPath.concat(d.collectionGroup,d.documentId)),d);p.isFoundDocument()&&(Of(t,p)||i.has(p.key))&&(h=h.insert(p.key,p))}return h})}getAllFromCollectionGroup(e,t,r,i){let s=Hn();const o=Ax(t,r),a=Ax(t,Qn.max());return Mo(e).J({index:"collectionGroupIndex",range:IDBKeyRange.bound(o,a,!0)},(l,c,h)=>{const d=this.ir(Z.fromSegments(c.prefixPath.concat(c.collectionGroup,c.documentId)),c);s=s.insert(d.key,d),s.size===i&&h.done()}).next(()=>s)}newChangeBuffer(e){return new q8(this,!!e&&e.trackRemovals)}getSize(e){return this.getMetadata(e).next(t=>t.byteSize)}getMetadata(e){return Ex(e).get("remoteDocumentGlobalKey").next(t=>(le(!!t),t))}rr(e,t){return Ex(e).put("remoteDocumentGlobalKey",t)}ir(e,t){if(t){const r=k8(this.serializer,t);if(!(r.isNoDocument()&&r.version.isEqual(ue.min())))return r}return st.newInvalidDocument(e)}}function o2(n){return new Q8(n)}class q8 extends s2{constructor(e,t){super(),this.cr=e,this.trackRemovals=t,this.lr=new xo(r=>r.toString(),(r,i)=>r.isEqual(i))}applyChanges(e){const t=[];let r=0,i=new Be((s,o)=>pe(s.canonicalString(),o.canonicalString()));return this.changes.forEach((s,o)=>{const a=this.lr.get(s);if(t.push(this.cr.removeEntry(e,s,a.readTime)),o.isValidDocument()){const l=ax(this.cr.serializer,o);i=i.add(s.path.popLast());const c=Ag(l);r+=c-a.size,t.push(this.cr.addEntry(e,s,l))}else if(r-=a.size,this.trackRemovals){const l=ax(this.cr.serializer,o.convertToNoDocument(ue.min()));t.push(this.cr.addEntry(e,s,l))}}),i.forEach(s=>{t.push(this.cr.indexManager.addToCollectionParentIndex(e,s))}),t.push(this.cr.updateMetadata(e,r)),j.waitFor(t)}getFromCache(e,t){return this.cr.sr(e,t).next(r=>(this.lr.set(t,{size:r.size,readTime:r.document.readTime}),r.document))}getAllFromCache(e,t){return this.cr.ar(e,t).next(({documents:r,ur:i})=>(i.forEach((s,o)=>{this.lr.set(s,{size:o,readTime:r.get(s).readTime})}),r))}}function Ex(n){return vt(n,"remoteDocumentGlobal")}function Mo(n){return vt(n,"remoteDocumentsV14")}function Ah(n){const e=n.path.toArray();return[e.slice(0,e.length-2),e[e.length-2],e[e.length-1]]}function Ax(n,e){const t=e.documentKey.path.toArray();return[n,_g(e.readTime),t.slice(0,t.length-2),t.length>0?t[t.length-1]:""]}function Ix(n,e){const t=n.path.toArray(),r=e.path.toArray();let i=0;for(let s=0;s<t.length-2&&s<r.length-2;++s)if(i=pe(t[s],r[s]),i)return i;return i=pe(t.length,r.length),i||(i=pe(t[t.length-2],r[r.length-2]),i||pe(t[t.length-1],r[r.length-1]))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class W8{constructor(e,t){this.overlayedDocument=e,this.mutatedFields=t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class a2{constructor(e,t,r,i){this.remoteDocumentCache=e,this.mutationQueue=t,this.documentOverlayCache=r,this.indexManager=i}getDocument(e,t){let r=null;return this.documentOverlayCache.getOverlay(e,t).next(i=>(r=i,this.remoteDocumentCache.getEntry(e,t))).next(i=>(r!==null&&nd(r.mutation,i,Pn.empty(),et.now()),i))}getDocuments(e,t){return this.remoteDocumentCache.getEntries(e,t).next(r=>this.getLocalViewOfDocuments(e,r,ve()).next(()=>r))}getLocalViewOfDocuments(e,t,r=ve()){const i=ti();return this.populateOverlays(e,i,t).next(()=>this.computeViews(e,t,i,r).next(s=>{let o=Mh();return s.forEach((a,l)=>{o=o.insert(a,l.overlayedDocument)}),o}))}getOverlayedDocuments(e,t){const r=ti();return this.populateOverlays(e,r,t).next(()=>this.computeViews(e,t,r,ve()))}populateOverlays(e,t,r){const i=[];return r.forEach(s=>{t.has(s)||i.push(s)}),this.documentOverlayCache.getOverlays(e,i).next(s=>{s.forEach((o,a)=>{t.set(o,a)})})}computeViews(e,t,r,i){let s=Hn();const o=td(),a=function(){return td()}();return t.forEach((l,c)=>{const h=r.get(c.key);i.has(c.key)&&(h===void 0||h.mutation instanceof is)?s=s.insert(c.key,c):h!==void 0?(o.set(c.key,h.mutation.getFieldMask()),nd(h.mutation,c,h.mutation.getFieldMask(),et.now())):o.set(c.key,Pn.empty())}),this.recalculateAndSaveOverlays(e,s).next(l=>(l.forEach((c,h)=>o.set(c,h)),t.forEach((c,h)=>{var d;return a.set(c,new W8(h,(d=o.get(c))!==null&&d!==void 0?d:null))}),a))}recalculateAndSaveOverlays(e,t){const r=td();let i=new qe((o,a)=>o-a),s=ve();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,t).next(o=>{for(const a of o)a.keys().forEach(l=>{const c=t.get(l);if(c===null)return;let h=r.get(l)||Pn.empty();h=a.applyToLocalView(c,h),r.set(l,h);const d=(i.get(a.batchId)||ve()).add(l);i=i.insert(a.batchId,d)})}).next(()=>{const o=[],a=i.getReverseIterator();for(;a.hasNext();){const l=a.getNext(),c=l.key,h=l.value,d=PN();h.forEach(p=>{if(!s.has(p)){const g=ON(t.get(p),r.get(p));g!==null&&d.set(p,g),s=s.add(p)}}),o.push(this.documentOverlayCache.saveOverlays(e,c,d))}return j.waitFor(o)}).next(()=>r)}recalculateAndSaveOverlaysForDocumentKeys(e,t){return this.remoteDocumentCache.getEntries(e,t).next(r=>this.recalculateAndSaveOverlays(e,r))}getDocumentsMatchingQuery(e,t,r,i){return function(o){return Z.isDocumentKey(o.path)&&o.collectionGroup===null&&o.filters.length===0}(t)?this.getDocumentsMatchingDocumentQuery(e,t.path):IN(t)?this.getDocumentsMatchingCollectionGroupQuery(e,t,r,i):this.getDocumentsMatchingCollectionQuery(e,t,r,i)}getNextDocuments(e,t,r,i){return this.remoteDocumentCache.getAllFromCollectionGroup(e,t,r,i).next(s=>{const o=i-s.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,t,r.largestBatchId,i-s.size):j.resolve(ti());let a=-1,l=s;return o.next(c=>j.forEach(c,(h,d)=>(a<d.largestBatchId&&(a=d.largestBatchId),s.get(h)?j.resolve():this.remoteDocumentCache.getEntry(e,h).next(p=>{l=l.insert(h,p)}))).next(()=>this.populateOverlays(e,c,s)).next(()=>this.computeViews(e,l,c,ve())).next(h=>({batchId:a,changes:SN(h)})))})}getDocumentsMatchingDocumentQuery(e,t){return this.getDocument(e,new Z(t)).next(r=>{let i=Mh();return r.isFoundDocument()&&(i=i.insert(r.key,r)),i})}getDocumentsMatchingCollectionGroupQuery(e,t,r,i){const s=t.collectionGroup;let o=Mh();return this.indexManager.getCollectionParents(e,s).next(a=>j.forEach(a,l=>{const c=function(d,p){return new Bc(p,null,d.explicitOrderBy.slice(),d.filters.slice(),d.limit,d.limitType,d.startAt,d.endAt)}(t,l.child(s));return this.getDocumentsMatchingCollectionQuery(e,c,r,i).next(h=>{h.forEach((d,p)=>{o=o.insert(d,p)})})}).next(()=>o))}getDocumentsMatchingCollectionQuery(e,t,r,i){let s;return this.documentOverlayCache.getOverlaysForCollection(e,t.path,r.largestBatchId).next(o=>(s=o,this.remoteDocumentCache.getDocumentsMatchingQuery(e,t,r,s,i))).next(o=>{s.forEach((l,c)=>{const h=c.getKey();o.get(h)===null&&(o=o.insert(h,st.newInvalidDocument(h)))});let a=Mh();return o.forEach((l,c)=>{const h=s.get(l);h!==void 0&&nd(h.mutation,c,Pn.empty(),et.now()),Of(t,c)&&(a=a.insert(l,c))}),a})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class J8{constructor(e){this.serializer=e,this.hr=new Map,this.Pr=new Map}getBundleMetadata(e,t){return j.resolve(this.hr.get(t))}saveBundleMetadata(e,t){return this.hr.set(t.id,function(i){return{id:i.id,version:i.version,createTime:yn(i.createTime)}}(t)),j.resolve()}getNamedQuery(e,t){return j.resolve(this.Pr.get(t))}saveNamedQuery(e,t){return this.Pr.set(t.name,function(i){return{name:i.name,query:ZN(i.bundledQuery),readTime:yn(i.readTime)}}(t)),j.resolve()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Y8{constructor(){this.overlays=new qe(Z.comparator),this.Ir=new Map}getOverlay(e,t){return j.resolve(this.overlays.get(t))}getOverlays(e,t){const r=ti();return j.forEach(t,i=>this.getOverlay(e,i).next(s=>{s!==null&&r.set(i,s)})).next(()=>r)}saveOverlays(e,t,r){return r.forEach((i,s)=>{this.ht(e,t,s)}),j.resolve()}removeOverlaysForBatchId(e,t,r){const i=this.Ir.get(r);return i!==void 0&&(i.forEach(s=>this.overlays=this.overlays.remove(s)),this.Ir.delete(r)),j.resolve()}getOverlaysForCollection(e,t,r){const i=ti(),s=t.length+1,o=new Z(t.child("")),a=this.overlays.getIteratorFrom(o);for(;a.hasNext();){const l=a.getNext().value,c=l.getKey();if(!t.isPrefixOf(c.path))break;c.path.length===s&&l.largestBatchId>r&&i.set(l.getKey(),l)}return j.resolve(i)}getOverlaysForCollectionGroup(e,t,r,i){let s=new qe((c,h)=>c-h);const o=this.overlays.getIterator();for(;o.hasNext();){const c=o.getNext().value;if(c.getKey().getCollectionGroup()===t&&c.largestBatchId>r){let h=s.get(c.largestBatchId);h===null&&(h=ti(),s=s.insert(c.largestBatchId,h)),h.set(c.getKey(),c)}}const a=ti(),l=s.getIterator();for(;l.hasNext()&&(l.getNext().value.forEach((c,h)=>a.set(c,h)),!(a.size()>=i)););return j.resolve(a)}ht(e,t,r){const i=this.overlays.get(r.key);if(i!==null){const o=this.Ir.get(i.largestBatchId).delete(r.key);this.Ir.set(i.largestBatchId,o)}this.overlays=this.overlays.insert(r.key,new nA(t,r));let s=this.Ir.get(t);s===void 0&&(s=ve(),this.Ir.set(t,s)),this.Ir.set(t,s.add(r.key))}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class X8{constructor(){this.sessionToken=pt.EMPTY_BYTE_STRING}getSessionToken(e){return j.resolve(this.sessionToken)}setSessionToken(e,t){return this.sessionToken=t,j.resolve()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class aA{constructor(){this.Tr=new Be(At.Er),this.dr=new Be(At.Ar)}isEmpty(){return this.Tr.isEmpty()}addReference(e,t){const r=new At(e,t);this.Tr=this.Tr.add(r),this.dr=this.dr.add(r)}Rr(e,t){e.forEach(r=>this.addReference(r,t))}removeReference(e,t){this.Vr(new At(e,t))}mr(e,t){e.forEach(r=>this.removeReference(r,t))}gr(e){const t=new Z(new Ne([])),r=new At(t,e),i=new At(t,e+1),s=[];return this.dr.forEachInRange([r,i],o=>{this.Vr(o),s.push(o.key)}),s}pr(){this.Tr.forEach(e=>this.Vr(e))}Vr(e){this.Tr=this.Tr.delete(e),this.dr=this.dr.delete(e)}yr(e){const t=new Z(new Ne([])),r=new At(t,e),i=new At(t,e+1);let s=ve();return this.dr.forEachInRange([r,i],o=>{s=s.add(o.key)}),s}containsKey(e){const t=new At(e,0),r=this.Tr.firstAfterOrEqual(t);return r!==null&&e.isEqual(r.key)}}class At{constructor(e,t){this.key=e,this.wr=t}static Er(e,t){return Z.comparator(e.key,t.key)||pe(e.wr,t.wr)}static Ar(e,t){return pe(e.wr,t.wr)||Z.comparator(e.key,t.key)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Z8{constructor(e,t){this.indexManager=e,this.referenceDelegate=t,this.mutationQueue=[],this.Sr=1,this.br=new Be(At.Er)}checkEmpty(e){return j.resolve(this.mutationQueue.length===0)}addMutationBatch(e,t,r,i){const s=this.Sr;this.Sr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const o=new eA(s,t,r,i);this.mutationQueue.push(o);for(const a of i)this.br=this.br.add(new At(a.key,s)),this.indexManager.addToCollectionParentIndex(e,a.key.path.popLast());return j.resolve(o)}lookupMutationBatch(e,t){return j.resolve(this.Dr(t))}getNextMutationBatchAfterBatchId(e,t){const r=t+1,i=this.vr(r),s=i<0?0:i;return j.resolve(this.mutationQueue.length>s?this.mutationQueue[s]:null)}getHighestUnacknowledgedBatchId(){return j.resolve(this.mutationQueue.length===0?-1:this.Sr-1)}getAllMutationBatches(e){return j.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,t){const r=new At(t,0),i=new At(t,Number.POSITIVE_INFINITY),s=[];return this.br.forEachInRange([r,i],o=>{const a=this.Dr(o.wr);s.push(a)}),j.resolve(s)}getAllMutationBatchesAffectingDocumentKeys(e,t){let r=new Be(pe);return t.forEach(i=>{const s=new At(i,0),o=new At(i,Number.POSITIVE_INFINITY);this.br.forEachInRange([s,o],a=>{r=r.add(a.wr)})}),j.resolve(this.Cr(r))}getAllMutationBatchesAffectingQuery(e,t){const r=t.path,i=r.length+1;let s=r;Z.isDocumentKey(s)||(s=s.child(""));const o=new At(new Z(s),0);let a=new Be(pe);return this.br.forEachWhile(l=>{const c=l.key.path;return!!r.isPrefixOf(c)&&(c.length===i&&(a=a.add(l.wr)),!0)},o),j.resolve(this.Cr(a))}Cr(e){const t=[];return e.forEach(r=>{const i=this.Dr(r);i!==null&&t.push(i)}),t}removeMutationBatch(e,t){le(this.Fr(t.batchId,"removed")===0),this.mutationQueue.shift();let r=this.br;return j.forEach(t.mutations,i=>{const s=new At(i.key,t.batchId);return r=r.delete(s),this.referenceDelegate.markPotentiallyOrphaned(e,i.key)}).next(()=>{this.br=r})}On(e){}containsKey(e,t){const r=new At(t,0),i=this.br.firstAfterOrEqual(r);return j.resolve(t.isEqual(i&&i.key))}performConsistencyCheck(e){return this.mutationQueue.length,j.resolve()}Fr(e,t){return this.vr(e)}vr(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}Dr(e){const t=this.vr(e);return t<0||t>=this.mutationQueue.length?null:this.mutationQueue[t]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ej{constructor(e){this.Mr=e,this.docs=function(){return new qe(Z.comparator)}(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,t){const r=t.key,i=this.docs.get(r),s=i?i.size:0,o=this.Mr(t);return this.docs=this.docs.insert(r,{document:t.mutableCopy(),size:o}),this.size+=o-s,this.indexManager.addToCollectionParentIndex(e,r.path.popLast())}removeEntry(e){const t=this.docs.get(e);t&&(this.docs=this.docs.remove(e),this.size-=t.size)}getEntry(e,t){const r=this.docs.get(t);return j.resolve(r?r.document.mutableCopy():st.newInvalidDocument(t))}getEntries(e,t){let r=Hn();return t.forEach(i=>{const s=this.docs.get(i);r=r.insert(i,s?s.document.mutableCopy():st.newInvalidDocument(i))}),j.resolve(r)}getDocumentsMatchingQuery(e,t,r,i){let s=Hn();const o=t.path,a=new Z(o.child("")),l=this.docs.getIteratorFrom(a);for(;l.hasNext();){const{key:c,value:{document:h}}=l.getNext();if(!o.isPrefixOf(c.path))break;c.path.length>o.length+1||KE(rN(h),r)<=0||(i.has(h.key)||Of(t,h))&&(s=s.insert(h.key,h.mutableCopy()))}return j.resolve(s)}getAllFromCollectionGroup(e,t,r,i){oe()}Or(e,t){return j.forEach(this.docs,r=>t(r))}newChangeBuffer(e){return new tj(this)}getSize(e){return j.resolve(this.size)}}class tj extends s2{constructor(e){super(),this.cr=e}applyChanges(e){const t=[];return this.changes.forEach((r,i)=>{i.isValidDocument()?t.push(this.cr.addEntry(e,i)):this.cr.removeEntry(r)}),j.waitFor(t)}getFromCache(e,t){return this.cr.getEntry(e,t)}getAllFromCache(e,t){return this.cr.getEntries(e,t)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nj{constructor(e){this.persistence=e,this.Nr=new xo(t=>Wa(t),Df),this.lastRemoteSnapshotVersion=ue.min(),this.highestTargetId=0,this.Lr=0,this.Br=new aA,this.targetCount=0,this.kr=Xa.Bn()}forEachTarget(e,t){return this.Nr.forEach((r,i)=>t(i)),j.resolve()}getLastRemoteSnapshotVersion(e){return j.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return j.resolve(this.Lr)}allocateTargetId(e){return this.highestTargetId=this.kr.next(),j.resolve(this.highestTargetId)}setTargetsMetadata(e,t,r){return r&&(this.lastRemoteSnapshotVersion=r),t>this.Lr&&(this.Lr=t),j.resolve()}Kn(e){this.Nr.set(e.target,e);const t=e.targetId;t>this.highestTargetId&&(this.kr=new Xa(t),this.highestTargetId=t),e.sequenceNumber>this.Lr&&(this.Lr=e.sequenceNumber)}addTargetData(e,t){return this.Kn(t),this.targetCount+=1,j.resolve()}updateTargetData(e,t){return this.Kn(t),j.resolve()}removeTargetData(e,t){return this.Nr.delete(t.target),this.Br.gr(t.targetId),this.targetCount-=1,j.resolve()}removeTargets(e,t,r){let i=0;const s=[];return this.Nr.forEach((o,a)=>{a.sequenceNumber<=t&&r.get(a.targetId)===null&&(this.Nr.delete(o),s.push(this.removeMatchingKeysForTargetId(e,a.targetId)),i++)}),j.waitFor(s).next(()=>i)}getTargetCount(e){return j.resolve(this.targetCount)}getTargetData(e,t){const r=this.Nr.get(t)||null;return j.resolve(r)}addMatchingKeys(e,t,r){return this.Br.Rr(t,r),j.resolve()}removeMatchingKeys(e,t,r){this.Br.mr(t,r);const i=this.persistence.referenceDelegate,s=[];return i&&t.forEach(o=>{s.push(i.markPotentiallyOrphaned(e,o))}),j.waitFor(s)}removeMatchingKeysForTargetId(e,t){return this.Br.gr(t),j.resolve()}getMatchingKeysForTargetId(e,t){const r=this.Br.yr(t);return j.resolve(r)}containsKey(e,t){return j.resolve(this.Br.containsKey(t))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class l2{constructor(e,t){this.qr={},this.overlays={},this.Qr=new ar(0),this.Kr=!1,this.Kr=!0,this.$r=new X8,this.referenceDelegate=e(this),this.Ur=new nj(this),this.indexManager=new F8,this.remoteDocumentCache=function(i){return new ej(i)}(r=>this.referenceDelegate.Wr(r)),this.serializer=new YN(t),this.Gr=new J8(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.Kr=!1,Promise.resolve()}get started(){return this.Kr}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let t=this.overlays[e.toKey()];return t||(t=new Y8,this.overlays[e.toKey()]=t),t}getMutationQueue(e,t){let r=this.qr[e.toKey()];return r||(r=new Z8(t,this.referenceDelegate),this.qr[e.toKey()]=r),r}getGlobalsCache(){return this.$r}getTargetCache(){return this.Ur}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Gr}runTransaction(e,t,r){W("MemoryPersistence","Starting transaction:",e);const i=new rj(this.Qr.next());return this.referenceDelegate.zr(),r(i).next(s=>this.referenceDelegate.jr(i).next(()=>s)).toPromise().then(s=>(i.raiseOnCommittedEvent(),s))}Hr(e,t){return j.or(Object.values(this.qr).map(r=>()=>r.containsKey(e,t)))}}class rj extends sN{constructor(e){super(),this.currentSequenceNumber=e}}class ky{constructor(e){this.persistence=e,this.Jr=new aA,this.Yr=null}static Zr(e){return new ky(e)}get Xr(){if(this.Yr)return this.Yr;throw oe()}addReference(e,t,r){return this.Jr.addReference(r,t),this.Xr.delete(r.toString()),j.resolve()}removeReference(e,t,r){return this.Jr.removeReference(r,t),this.Xr.add(r.toString()),j.resolve()}markPotentiallyOrphaned(e,t){return this.Xr.add(t.toString()),j.resolve()}removeTarget(e,t){this.Jr.gr(t.targetId).forEach(i=>this.Xr.add(i.toString()));const r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(e,t.targetId).next(i=>{i.forEach(s=>this.Xr.add(s.toString()))}).next(()=>r.removeTargetData(e,t))}zr(){this.Yr=new Set}jr(e){const t=this.persistence.getRemoteDocumentCache().newChangeBuffer();return j.forEach(this.Xr,r=>{const i=Z.fromPath(r);return this.ei(e,i).next(s=>{s||t.removeEntry(i,ue.min())})}).next(()=>(this.Yr=null,t.apply(e)))}updateLimboDocument(e,t){return this.ei(e,t).next(r=>{r?this.Xr.delete(t.toString()):this.Xr.add(t.toString())})}Wr(e){return 0}ei(e,t){return j.or([()=>j.resolve(this.Jr.containsKey(t)),()=>this.persistence.getTargetCache().containsKey(e,t),()=>this.persistence.Hr(e,t)])}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ij{constructor(e){this.serializer=e}O(e,t,r,i){const s=new Ey("createOrUpgrade",t);r<1&&i>=1&&(function(l){l.createObjectStore("owner")}(e),function(l){l.createObjectStore("mutationQueues",{keyPath:"userId"}),l.createObjectStore("mutations",{keyPath:"batchId",autoIncrement:!0}).createIndex("userMutationsIndex",Mb,{unique:!0}),l.createObjectStore("documentMutations")}(e),Tx(e),function(l){l.createObjectStore("remoteDocuments")}(e));let o=j.resolve();return r<3&&i>=3&&(r!==0&&(function(l){l.deleteObjectStore("targetDocuments"),l.deleteObjectStore("targets"),l.deleteObjectStore("targetGlobal")}(e),Tx(e)),o=o.next(()=>function(l){const c=l.store("targetGlobal"),h={highestTargetId:0,highestListenSequenceNumber:0,lastRemoteSnapshotVersion:ue.min().toTimestamp(),targetCount:0};return c.put("targetGlobalKey",h)}(s))),r<4&&i>=4&&(r!==0&&(o=o.next(()=>function(l,c){return c.store("mutations").U().next(h=>{l.deleteObjectStore("mutations"),l.createObjectStore("mutations",{keyPath:"batchId",autoIncrement:!0}).createIndex("userMutationsIndex",Mb,{unique:!0});const d=c.store("mutations"),p=h.map(g=>d.put(g));return j.waitFor(p)})}(e,s))),o=o.next(()=>{(function(l){l.createObjectStore("clientMetadata",{keyPath:"clientId"})})(e)})),r<5&&i>=5&&(o=o.next(()=>this.ni(s))),r<6&&i>=6&&(o=o.next(()=>(function(l){l.createObjectStore("remoteDocumentGlobal")}(e),this.ri(s)))),r<7&&i>=7&&(o=o.next(()=>this.ii(s))),r<8&&i>=8&&(o=o.next(()=>this.si(e,s))),r<9&&i>=9&&(o=o.next(()=>{(function(l){l.objectStoreNames.contains("remoteDocumentChanges")&&l.deleteObjectStore("remoteDocumentChanges")})(e)})),r<10&&i>=10&&(o=o.next(()=>this.oi(s))),r<11&&i>=11&&(o=o.next(()=>{(function(l){l.createObjectStore("bundles",{keyPath:"bundleId"})})(e),function(l){l.createObjectStore("namedQueries",{keyPath:"name"})}(e)})),r<12&&i>=12&&(o=o.next(()=>{(function(l){const c=l.createObjectStore("documentOverlays",{keyPath:N9});c.createIndex("collectionPathOverlayIndex",D9,{unique:!1}),c.createIndex("collectionGroupOverlayIndex",O9,{unique:!1})})(e)})),r<13&&i>=13&&(o=o.next(()=>function(l){const c=l.createObjectStore("remoteDocumentsV14",{keyPath:E9});c.createIndex("documentKeyIndex",A9),c.createIndex("collectionGroupIndex",I9)}(e)).next(()=>this._i(e,s)).next(()=>e.deleteObjectStore("remoteDocuments"))),r<14&&i>=14&&(o=o.next(()=>this.ai(e,s))),r<15&&i>=15&&(o=o.next(()=>function(l){l.createObjectStore("indexConfiguration",{keyPath:"indexId",autoIncrement:!0}).createIndex("collectionGroupIndex","collectionGroup",{unique:!1}),l.createObjectStore("indexState",{keyPath:P9}).createIndex("sequenceNumberIndex",R9,{unique:!1}),l.createObjectStore("indexEntries",{keyPath:C9}).createIndex("documentKeyIndex",k9,{unique:!1})}(e))),r<16&&i>=16&&(o=o.next(()=>{t.objectStore("indexState").clear()}).next(()=>{t.objectStore("indexEntries").clear()})),r<17&&i>=17&&(o=o.next(()=>{(function(l){l.createObjectStore("globals",{keyPath:"name"})})(e)})),o}ri(e){let t=0;return e.store("remoteDocuments").J((r,i)=>{t+=Ag(i)}).next(()=>{const r={byteSize:t};return e.store("remoteDocumentGlobal").put("remoteDocumentGlobalKey",r)})}ni(e){const t=e.store("mutationQueues"),r=e.store("mutations");return t.U().next(i=>j.forEach(i,s=>{const o=IDBKeyRange.bound([s.userId,-1],[s.userId,s.lastAcknowledgedBatchId]);return r.U("userMutationsIndex",o).next(a=>j.forEach(a,l=>{le(l.userId===s.userId);const c=Qo(this.serializer,l);return n2(e,s.userId,c).next(()=>{})}))}))}ii(e){const t=e.store("targetDocuments"),r=e.store("remoteDocuments");return e.store("targetGlobal").get("targetGlobalKey").next(i=>{const s=[];return r.J((o,a)=>{const l=new Ne(o),c=function(d){return[0,gn(d)]}(l);s.push(t.get(c).next(h=>h?j.resolve():(d=>t.put({targetId:0,path:gn(d),sequenceNumber:i.highestListenSequenceNumber}))(l)))}).next(()=>j.waitFor(s))})}si(e,t){e.createObjectStore("collectionParents",{keyPath:S9});const r=t.store("collectionParents"),i=new oA,s=o=>{if(i.add(o)){const a=o.lastSegment(),l=o.popLast();return r.put({collectionId:a,parent:gn(l)})}};return t.store("remoteDocuments").J({H:!0},(o,a)=>{const l=new Ne(o);return s(l.popLast())}).next(()=>t.store("documentMutations").J({H:!0},([o,a,l],c)=>{const h=ei(a);return s(h.popLast())}))}oi(e){const t=e.store("targets");return t.J((r,i)=>{const s=Fh(i),o=XN(this.serializer,s);return t.put(o)})}_i(e,t){const r=t.store("remoteDocuments"),i=[];return r.J((s,o)=>{const a=t.store("remoteDocumentsV14"),l=function(d){return d.document?new Z(Ne.fromString(d.document.name).popFirst(5)):d.noDocument?Z.fromSegments(d.noDocument.path):d.unknownDocument?Z.fromSegments(d.unknownDocument.path):oe()}(o).path.toArray(),c={prefixPath:l.slice(0,l.length-2),collectionGroup:l[l.length-2],documentId:l[l.length-1],readTime:o.readTime||[0,0],unknownDocument:o.unknownDocument,noDocument:o.noDocument,document:o.document,hasCommittedMutations:!!o.hasCommittedMutations};i.push(a.put(c))}).next(()=>j.waitFor(i))}ai(e,t){const r=t.store("mutations"),i=o2(this.serializer),s=new l2(ky.Zr,this.serializer.ct);return r.U().next(o=>{const a=new Map;return o.forEach(l=>{var c;let h=(c=a.get(l.userId))!==null&&c!==void 0?c:ve();Qo(this.serializer,l).keys().forEach(d=>h=h.add(d)),a.set(l.userId,h)}),j.forEach(a,(l,c)=>{const h=new kt(c),d=Ry.lt(this.serializer,h),p=s.getIndexManager(h),g=Cy.lt(h,this.serializer,p,s.referenceDelegate);return new a2(i,g,d,p).recalculateAndSaveOverlaysForDocumentKeys(new n_(t,ar.oe),l).next()})})}}function Tx(n){n.createObjectStore("targetDocuments",{keyPath:b9}).createIndex("documentTargetsIndex",x9,{unique:!0}),n.createObjectStore("targets",{keyPath:"targetId"}).createIndex("queryTargetsIndex",T9,{unique:!0}),n.createObjectStore("targetGlobal")}const uw="Failed to obtain exclusive access to the persistence layer. To allow shared access, multi-tab synchronization has to be enabled in all tabs. If you are using `experimentalForceOwningTab:true`, make sure that only one tab has persistence enabled at any given time.";class lA{constructor(e,t,r,i,s,o,a,l,c,h,d=17){if(this.allowTabSynchronization=e,this.persistenceKey=t,this.clientId=r,this.ui=s,this.window=o,this.document=a,this.ci=c,this.li=h,this.hi=d,this.Qr=null,this.Kr=!1,this.isPrimary=!1,this.networkEnabled=!0,this.Pi=null,this.inForeground=!1,this.Ii=null,this.Ti=null,this.Ei=Number.NEGATIVE_INFINITY,this.di=p=>Promise.resolve(),!lA.D())throw new X(H.UNIMPLEMENTED,"This platform is either missing IndexedDB or is known to have an incomplete implementation. Offline persistence has been disabled.");this.referenceDelegate=new K8(this,i),this.Ai=t+"main",this.serializer=new YN(l),this.Ri=new lo(this.Ai,this.hi,new ij(this.serializer)),this.$r=new D8,this.Ur=new j8(this.referenceDelegate,this.serializer),this.remoteDocumentCache=o2(this.serializer),this.Gr=new N8,this.window&&this.window.localStorage?this.Vi=this.window.localStorage:(this.Vi=null,h===!1&&cn("IndexedDbPersistence","LocalStorage is unavailable. As a result, persistence may not work reliably. In particular enablePersistence() could fail immediately after refreshing the page."))}start(){return this.mi().then(()=>{if(!this.isPrimary&&!this.allowTabSynchronization)throw new X(H.FAILED_PRECONDITION,uw);return this.fi(),this.gi(),this.pi(),this.runTransaction("getHighestListenSequenceNumber","readonly",e=>this.Ur.getHighestSequenceNumber(e))}).then(e=>{this.Qr=new ar(e,this.ci)}).then(()=>{this.Kr=!0}).catch(e=>(this.Ri&&this.Ri.close(),Promise.reject(e)))}yi(e){return this.di=async t=>{if(this.started)return e(t)},e(this.isPrimary)}setDatabaseDeletedListener(e){this.Ri.L(async t=>{t.newVersion===null&&await e()})}setNetworkEnabled(e){this.networkEnabled!==e&&(this.networkEnabled=e,this.ui.enqueueAndForget(async()=>{this.started&&await this.mi()}))}mi(){return this.runTransaction("updateClientMetadataAndTryBecomePrimary","readwrite",e=>Mp(e).put({clientId:this.clientId,updateTimeMs:Date.now(),networkEnabled:this.networkEnabled,inForeground:this.inForeground}).next(()=>{if(this.isPrimary)return this.wi(e).next(t=>{t||(this.isPrimary=!1,this.ui.enqueueRetryable(()=>this.di(!1)))})}).next(()=>this.Si(e)).next(t=>this.isPrimary&&!t?this.bi(e).next(()=>!1):!!t&&this.Di(e).next(()=>!0))).catch(e=>{if(bo(e))return W("IndexedDbPersistence","Failed to extend owner lease: ",e),this.isPrimary;if(!this.allowTabSynchronization)throw e;return W("IndexedDbPersistence","Releasing owner lease after error during lease refresh",e),!1}).then(e=>{this.isPrimary!==e&&this.ui.enqueueRetryable(()=>this.di(e)),this.isPrimary=e})}wi(e){return Ih(e).get("owner").next(t=>j.resolve(this.vi(t)))}Ci(e){return Mp(e).delete(this.clientId)}async Fi(){if(this.isPrimary&&!this.Mi(this.Ei,18e5)){this.Ei=Date.now();const e=await this.runTransaction("maybeGarbageCollectMultiClientState","readwrite-primary",t=>{const r=vt(t,"clientMetadata");return r.U().next(i=>{const s=this.xi(i,18e5),o=i.filter(a=>s.indexOf(a)===-1);return j.forEach(o,a=>r.delete(a.clientId)).next(()=>o)})}).catch(()=>[]);if(this.Vi)for(const t of e)this.Vi.removeItem(this.Oi(t.clientId))}}pi(){this.Ti=this.ui.enqueueAfterDelay("client_metadata_refresh",4e3,()=>this.mi().then(()=>this.Fi()).then(()=>this.pi()))}vi(e){return!!e&&e.ownerId===this.clientId}Si(e){return this.li?j.resolve(!0):Ih(e).get("owner").next(t=>{if(t!==null&&this.Mi(t.leaseTimestampMs,5e3)&&!this.Ni(t.ownerId)){if(this.vi(t)&&this.networkEnabled)return!0;if(!this.vi(t)){if(!t.allowTabSynchronization)throw new X(H.FAILED_PRECONDITION,uw);return!1}}return!(!this.networkEnabled||!this.inForeground)||Mp(e).U().next(r=>this.xi(r,5e3).find(i=>{if(this.clientId!==i.clientId){const s=!this.networkEnabled&&i.networkEnabled,o=!this.inForeground&&i.inForeground,a=this.networkEnabled===i.networkEnabled;if(s||o&&a)return!0}return!1})===void 0)}).next(t=>(this.isPrimary!==t&&W("IndexedDbPersistence",`Client ${t?"is":"is not"} eligible for a primary lease.`),t))}async shutdown(){this.Kr=!1,this.Li(),this.Ti&&(this.Ti.cancel(),this.Ti=null),this.Bi(),this.ki(),await this.Ri.runTransaction("shutdown","readwrite",["owner","clientMetadata"],e=>{const t=new n_(e,ar.oe);return this.bi(t).next(()=>this.Ci(t))}),this.Ri.close(),this.qi()}xi(e,t){return e.filter(r=>this.Mi(r.updateTimeMs,t)&&!this.Ni(r.clientId))}Qi(){return this.runTransaction("getActiveClients","readonly",e=>Mp(e).U().next(t=>this.xi(t,18e5).map(r=>r.clientId)))}get started(){return this.Kr}getGlobalsCache(){return this.$r}getMutationQueue(e,t){return Cy.lt(e,this.serializer,t,this.referenceDelegate)}getTargetCache(){return this.Ur}getRemoteDocumentCache(){return this.remoteDocumentCache}getIndexManager(e){return new U8(e,this.serializer.ct.databaseId)}getDocumentOverlayCache(e){return Ry.lt(this.serializer,e)}getBundleCache(){return this.Gr}runTransaction(e,t,r){W("IndexedDbPersistence","Starting transaction:",e);const i=t==="readonly"?"readonly":"readwrite",s=function(l){return l===17?M9:l===16?V9:l===15?qE:l===14?cN:l===13?uN:l===12?L9:l===11?lN:void oe()}(this.hi);let o;return this.Ri.runTransaction(e,i,s,a=>(o=new n_(a,this.Qr?this.Qr.next():ar.oe),t==="readwrite-primary"?this.wi(o).next(l=>!!l||this.Si(o)).next(l=>{if(!l)throw cn(`Failed to obtain primary lease for action '${e}'.`),this.isPrimary=!1,this.ui.enqueueRetryable(()=>this.di(!1)),new X(H.FAILED_PRECONDITION,iN);return r(o)}).next(l=>this.Di(o).next(()=>l)):this.Ki(o).next(()=>r(o)))).then(a=>(o.raiseOnCommittedEvent(),a))}Ki(e){return Ih(e).get("owner").next(t=>{if(t!==null&&this.Mi(t.leaseTimestampMs,5e3)&&!this.Ni(t.ownerId)&&!this.vi(t)&&!(this.li||this.allowTabSynchronization&&t.allowTabSynchronization))throw new X(H.FAILED_PRECONDITION,uw)})}Di(e){const t={ownerId:this.clientId,allowTabSynchronization:this.allowTabSynchronization,leaseTimestampMs:Date.now()};return Ih(e).put("owner",t)}static D(){return lo.D()}bi(e){const t=Ih(e);return t.get("owner").next(r=>this.vi(r)?(W("IndexedDbPersistence","Releasing primary lease."),t.delete("owner")):j.resolve())}Mi(e,t){const r=Date.now();return!(e<r-t)&&(!(e>r)||(cn(`Detected an update time that is in the future: ${e} > ${r}`),!1))}fi(){this.document!==null&&typeof this.document.addEventListener=="function"&&(this.Ii=()=>{this.ui.enqueueAndForget(()=>(this.inForeground=this.document.visibilityState==="visible",this.mi()))},this.document.addEventListener("visibilitychange",this.Ii),this.inForeground=this.document.visibilityState==="visible")}Bi(){this.Ii&&(this.document.removeEventListener("visibilitychange",this.Ii),this.Ii=null)}gi(){var e;typeof((e=this.window)===null||e===void 0?void 0:e.addEventListener)=="function"&&(this.Pi=()=>{this.Li();const t=/(?:Version|Mobile)\/1[456]/;Uk()&&(navigator.appVersion.match(t)||navigator.userAgent.match(t))&&this.ui.enterRestrictedMode(!0),this.ui.enqueueAndForget(()=>this.shutdown())},this.window.addEventListener("pagehide",this.Pi))}ki(){this.Pi&&(this.window.removeEventListener("pagehide",this.Pi),this.Pi=null)}Ni(e){var t;try{const r=((t=this.Vi)===null||t===void 0?void 0:t.getItem(this.Oi(e)))!==null;return W("IndexedDbPersistence",`Client '${e}' ${r?"is":"is not"} zombied in LocalStorage`),r}catch(r){return cn("IndexedDbPersistence","Failed to get zombied client id.",r),!1}}Li(){if(this.Vi)try{this.Vi.setItem(this.Oi(this.clientId),String(Date.now()))}catch(e){cn("Failed to set zombie client id.",e)}}qi(){if(this.Vi)try{this.Vi.removeItem(this.Oi(this.clientId))}catch{}}Oi(e){return`firestore_zombie_${this.persistenceKey}_${e}`}}function Ih(n){return vt(n,"owner")}function Mp(n){return vt(n,"clientMetadata")}function sj(n,e){let t=n.projectId;return n.isDefaultDatabase||(t+="."+n.database),"firestore/"+e+"/"+t+"/"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class uA{constructor(e,t,r,i){this.targetId=e,this.fromCache=t,this.$i=r,this.Ui=i}static Wi(e,t){let r=ve(),i=ve();for(const s of t.docChanges)switch(s.type){case 0:r=r.add(s.doc.key);break;case 1:i=i.add(s.doc.key)}return new uA(e,t.fromCache,r,i)}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class oj{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class u2{constructor(){this.Gi=!1,this.zi=!1,this.ji=100,this.Hi=function(){return Uk()?8:oN(wt())>0?6:4}()}initialize(e,t){this.Ji=e,this.indexManager=t,this.Gi=!0}getDocumentsMatchingQuery(e,t,r,i){const s={result:null};return this.Yi(e,t).next(o=>{s.result=o}).next(()=>{if(!s.result)return this.Zi(e,t,i,r).next(o=>{s.result=o})}).next(()=>{if(s.result)return;const o=new oj;return this.Xi(e,t,o).next(a=>{if(s.result=a,this.zi)return this.es(e,t,o,a.size)})}).next(()=>s.result)}es(e,t,r,i){return r.documentReadCount<this.ji?(Rl()<=Ae.DEBUG&&W("QueryEngine","SDK will not create cache indexes for query:",Cl(t),"since it only creates cache indexes for collection contains","more than or equal to",this.ji,"documents"),j.resolve()):(Rl()<=Ae.DEBUG&&W("QueryEngine","Query:",Cl(t),"scans",r.documentReadCount,"local documents and returns",i,"documents as results."),r.documentReadCount>this.Hi*i?(Rl()<=Ae.DEBUG&&W("QueryEngine","The SDK decides to create cache indexes for query:",Cl(t),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,ur(t))):j.resolve())}Yi(e,t){if(Jb(t))return j.resolve(null);let r=ur(t);return this.indexManager.getIndexType(e,r).next(i=>i===0?null:(t.limit!==null&&i===1&&(t=yg(t,null,"F"),r=ur(t)),this.indexManager.getDocumentsMatchingTarget(e,r).next(s=>{const o=ve(...s);return this.Ji.getDocuments(e,o).next(a=>this.indexManager.getMinOffset(e,r).next(l=>{const c=this.ts(t,a);return this.ns(t,c,o,l.readTime)?this.Yi(e,yg(t,null,"F")):this.rs(e,c,t,l)}))})))}Zi(e,t,r,i){return Jb(t)||i.isEqual(ue.min())?j.resolve(null):this.Ji.getDocuments(e,r).next(s=>{const o=this.ts(t,s);return this.ns(t,o,r,i)?j.resolve(null):(Rl()<=Ae.DEBUG&&W("QueryEngine","Re-using previous result from %s to execute query: %s",i.toString(),Cl(t)),this.rs(e,o,t,f9(i,-1)).next(a=>a))})}ts(e,t){let r=new Be(bN(e));return t.forEach((i,s)=>{Of(e,s)&&(r=r.add(s))}),r}ns(e,t,r,i){if(e.limit===null)return!1;if(r.size!==t.size)return!0;const s=e.limitType==="F"?t.last():t.first();return!!s&&(s.hasPendingWrites||s.version.compareTo(i)>0)}Xi(e,t,r){return Rl()<=Ae.DEBUG&&W("QueryEngine","Using full collection scan to execute query:",Cl(t)),this.Ji.getDocumentsMatchingQuery(e,t,Qn.min(),r)}rs(e,t,r,i){return this.Ji.getDocumentsMatchingQuery(e,r,i).next(s=>(t.forEach(o=>{s=s.insert(o.key,o)}),s))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class aj{constructor(e,t,r,i){this.persistence=e,this.ss=t,this.serializer=i,this.os=new qe(pe),this._s=new xo(s=>Wa(s),Df),this.us=new Map,this.cs=e.getRemoteDocumentCache(),this.Ur=e.getTargetCache(),this.Gr=e.getBundleCache(),this.ls(r)}ls(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new a2(this.cs,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.cs.setIndexManager(this.indexManager),this.ss.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",t=>e.collect(t,this.os))}}function c2(n,e,t,r){return new aj(n,e,t,r)}async function h2(n,e){const t=fe(n);return await t.persistence.runTransaction("Handle user change","readonly",r=>{let i;return t.mutationQueue.getAllMutationBatches(r).next(s=>(i=s,t.ls(e),t.mutationQueue.getAllMutationBatches(r))).next(s=>{const o=[],a=[];let l=ve();for(const c of i){o.push(c.batchId);for(const h of c.mutations)l=l.add(h.key)}for(const c of s){a.push(c.batchId);for(const h of c.mutations)l=l.add(h.key)}return t.localDocuments.getDocuments(r,l).next(c=>({hs:c,removedBatchIds:o,addedBatchIds:a}))})})}function lj(n,e){const t=fe(n);return t.persistence.runTransaction("Acknowledge batch","readwrite-primary",r=>{const i=e.batch.keys(),s=t.cs.newChangeBuffer({trackRemovals:!0});return function(a,l,c,h){const d=c.batch,p=d.keys();let g=j.resolve();return p.forEach(A=>{g=g.next(()=>h.getEntry(l,A)).next(v=>{const x=c.docVersions.get(A);le(x!==null),v.version.compareTo(x)<0&&(d.applyToRemoteDocument(v,c),v.isValidDocument()&&(v.setReadTime(c.commitVersion),h.addEntry(v)))})}),g.next(()=>a.mutationQueue.removeMutationBatch(l,d))}(t,r,e,s).next(()=>s.apply(r)).next(()=>t.mutationQueue.performConsistencyCheck(r)).next(()=>t.documentOverlayCache.removeOverlaysForBatchId(r,i,e.batch.batchId)).next(()=>t.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(r,function(a){let l=ve();for(let c=0;c<a.mutationResults.length;++c)a.mutationResults[c].transformResults.length>0&&(l=l.add(a.batch.mutations[c].key));return l}(e))).next(()=>t.localDocuments.getDocuments(r,i))})}function d2(n){const e=fe(n);return e.persistence.runTransaction("Get last remote snapshot version","readonly",t=>e.Ur.getLastRemoteSnapshotVersion(t))}function uj(n,e){const t=fe(n),r=e.snapshotVersion;let i=t.os;return t.persistence.runTransaction("Apply remote event","readwrite-primary",s=>{const o=t.cs.newChangeBuffer({trackRemovals:!0});i=t.os;const a=[];e.targetChanges.forEach((h,d)=>{const p=i.get(d);if(!p)return;a.push(t.Ur.removeMatchingKeys(s,h.removedDocuments,d).next(()=>t.Ur.addMatchingKeys(s,h.addedDocuments,d)));let g=p.withSequenceNumber(s.currentSequenceNumber);e.targetMismatches.get(d)!==null?g=g.withResumeToken(pt.EMPTY_BYTE_STRING,ue.min()).withLastLimboFreeSnapshotVersion(ue.min()):h.resumeToken.approximateByteSize()>0&&(g=g.withResumeToken(h.resumeToken,r)),i=i.insert(d,g),function(v,x,w){return v.resumeToken.approximateByteSize()===0||x.snapshotVersion.toMicroseconds()-v.snapshotVersion.toMicroseconds()>=3e8?!0:w.addedDocuments.size+w.modifiedDocuments.size+w.removedDocuments.size>0}(p,g,h)&&a.push(t.Ur.updateTargetData(s,g))});let l=Hn(),c=ve();if(e.documentUpdates.forEach(h=>{e.resolvedLimboDocuments.has(h)&&a.push(t.persistence.referenceDelegate.updateLimboDocument(s,h))}),a.push(cj(s,o,e.documentUpdates).next(h=>{l=h.Ps,c=h.Is})),!r.isEqual(ue.min())){const h=t.Ur.getLastRemoteSnapshotVersion(s).next(d=>t.Ur.setTargetsMetadata(s,s.currentSequenceNumber,r));a.push(h)}return j.waitFor(a).next(()=>o.apply(s)).next(()=>t.localDocuments.getLocalViewOfDocuments(s,l,c)).next(()=>l)}).then(s=>(t.os=i,s))}function cj(n,e,t){let r=ve(),i=ve();return t.forEach(s=>r=r.add(s)),e.getEntries(n,r).next(s=>{let o=Hn();return t.forEach((a,l)=>{const c=s.get(a);l.isFoundDocument()!==c.isFoundDocument()&&(i=i.add(a)),l.isNoDocument()&&l.version.isEqual(ue.min())?(e.removeEntry(a,l.readTime),o=o.insert(a,l)):!c.isValidDocument()||l.version.compareTo(c.version)>0||l.version.compareTo(c.version)===0&&c.hasPendingWrites?(e.addEntry(l),o=o.insert(a,l)):W("LocalStore","Ignoring outdated watch update for ",a,". Current version:",c.version," Watch version:",l.version)}),{Ps:o,Is:i}})}function hj(n,e){const t=fe(n);return t.persistence.runTransaction("Get next mutation batch","readonly",r=>(e===void 0&&(e=-1),t.mutationQueue.getNextMutationBatchAfterBatchId(r,e)))}function dj(n,e){const t=fe(n);return t.persistence.runTransaction("Allocate target","readwrite",r=>{let i;return t.Ur.getTargetData(r,e).next(s=>s?(i=s,j.resolve(i)):t.Ur.allocateTargetId(r).next(o=>(i=new Mi(e,o,"TargetPurposeListen",r.currentSequenceNumber),t.Ur.addTargetData(r,i).next(()=>i))))}).then(r=>{const i=t.os.get(r.targetId);return(i===null||r.snapshotVersion.compareTo(i.snapshotVersion)>0)&&(t.os=t.os.insert(r.targetId,r),t._s.set(e,r.targetId)),r})}async function g_(n,e,t){const r=fe(n),i=r.os.get(e),s=t?"readwrite":"readwrite-primary";try{t||await r.persistence.runTransaction("Release target",s,o=>r.persistence.referenceDelegate.removeTarget(o,i))}catch(o){if(!bo(o))throw o;W("LocalStore",`Failed to update sequence numbers for target ${e}: ${o}`)}r.os=r.os.remove(e),r._s.delete(i.target)}function bx(n,e,t){const r=fe(n);let i=ue.min(),s=ve();return r.persistence.runTransaction("Execute query","readwrite",o=>function(l,c,h){const d=fe(l),p=d._s.get(h);return p!==void 0?j.resolve(d.os.get(p)):d.Ur.getTargetData(c,h)}(r,o,ur(e)).next(a=>{if(a)return i=a.lastLimboFreeSnapshotVersion,r.Ur.getMatchingKeysForTargetId(o,a.targetId).next(l=>{s=l})}).next(()=>r.ss.getDocumentsMatchingQuery(o,e,t?i:ue.min(),t?s:ve())).next(a=>(fj(r,X9(e),a),{documents:a,Ts:s})))}function fj(n,e,t){let r=n.us.get(e)||ue.min();t.forEach((i,s)=>{s.readTime.compareTo(r)>0&&(r=s.readTime)}),n.us.set(e,r)}class xx{constructor(){this.activeTargetIds=i8()}fs(e){this.activeTargetIds=this.activeTargetIds.add(e)}gs(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Vs(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class f2{constructor(){this.so=new xx,this.oo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,t,r){}addLocalQueryTarget(e,t=!0){return t&&this.so.fs(e),this.oo[e]||"not-current"}updateQueryState(e,t,r){this.oo[e]=t}removeLocalQueryTarget(e){this.so.gs(e)}isLocalQueryTarget(e){return this.so.activeTargetIds.has(e)}clearQueryState(e){delete this.oo[e]}getAllActiveQueryTargets(){return this.so.activeTargetIds}isActiveQueryTarget(e){return this.so.activeTargetIds.has(e)}start(){return this.so=new xx,Promise.resolve()}handleUserChange(e,t,r){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pj{_o(e){}shutdown(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Sx{constructor(){this.ao=()=>this.uo(),this.co=()=>this.lo(),this.ho=[],this.Po()}_o(e){this.ho.push(e)}shutdown(){window.removeEventListener("online",this.ao),window.removeEventListener("offline",this.co)}Po(){window.addEventListener("online",this.ao),window.addEventListener("offline",this.co)}uo(){W("ConnectivityMonitor","Network connectivity changed: AVAILABLE");for(const e of this.ho)e(0)}lo(){W("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");for(const e of this.ho)e(1)}static D(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Bp=null;function cw(){return Bp===null?Bp=function(){return 268435456+Math.round(2147483648*Math.random())}():Bp++,"0x"+Bp.toString(16)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const mj={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gj{constructor(e){this.Io=e.Io,this.To=e.To}Eo(e){this.Ao=e}Ro(e){this.Vo=e}mo(e){this.fo=e}onMessage(e){this.po=e}close(){this.To()}send(e){this.Io(e)}yo(){this.Ao()}wo(){this.Vo()}So(e){this.fo(e)}bo(e){this.po(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const $t="WebChannelConnection";class yj extends class{constructor(t){this.databaseInfo=t,this.databaseId=t.databaseId;const r=t.ssl?"https":"http",i=encodeURIComponent(this.databaseId.projectId),s=encodeURIComponent(this.databaseId.database);this.Do=r+"://"+t.host,this.vo=`projects/${i}/databases/${s}`,this.Co=this.databaseId.database==="(default)"?`project_id=${i}`:`project_id=${i}&database_id=${s}`}get Fo(){return!1}Mo(t,r,i,s,o){const a=cw(),l=this.xo(t,r.toUriEncodedString());W("RestConnection",`Sending RPC '${t}' ${a}:`,l,i);const c={"google-cloud-resource-prefix":this.vo,"x-goog-request-params":this.Co};return this.Oo(c,s,o),this.No(t,l,c,i).then(h=>(W("RestConnection",`Received RPC '${t}' ${a}: `,h),h),h=>{throw Ka("RestConnection",`RPC '${t}' ${a} failed with error: `,h,"url: ",l,"request:",i),h})}Lo(t,r,i,s,o,a){return this.Mo(t,r,i,s,o)}Oo(t,r,i){t["X-Goog-Api-Client"]=function(){return"gl-js/ fire/"+Mc}(),t["Content-Type"]="text/plain",this.databaseInfo.appId&&(t["X-Firebase-GMPID"]=this.databaseInfo.appId),r&&r.headers.forEach((s,o)=>t[o]=s),i&&i.headers.forEach((s,o)=>t[o]=s)}xo(t,r){const i=mj[t];return`${this.Do}/v1/${r}:${i}`}terminate(){}}{constructor(e){super(e),this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}No(e,t,r,i){const s=cw();return new Promise((o,a)=>{const l=new Wk;l.setWithCredentials(!0),l.listenOnce(Jk.COMPLETE,()=>{try{switch(l.getLastErrorCode()){case cm.NO_ERROR:const h=l.getResponseJson();W($t,`XHR for RPC '${e}' ${s} received:`,JSON.stringify(h)),o(h);break;case cm.TIMEOUT:W($t,`RPC '${e}' ${s} timed out`),a(new X(H.DEADLINE_EXCEEDED,"Request time out"));break;case cm.HTTP_ERROR:const d=l.getStatus();if(W($t,`RPC '${e}' ${s} failed with status:`,d,"response text:",l.getResponseText()),d>0){let p=l.getResponseJson();Array.isArray(p)&&(p=p[0]);const g=p==null?void 0:p.error;if(g&&g.status&&g.message){const A=function(x){const w=x.toLowerCase().replace(/_/g,"-");return Object.values(H).indexOf(w)>=0?w:H.UNKNOWN}(g.status);a(new X(A,g.message))}else a(new X(H.UNKNOWN,"Server responded with status "+l.getStatus()))}else a(new X(H.UNAVAILABLE,"Connection failed."));break;default:oe()}}finally{W($t,`RPC '${e}' ${s} completed.`)}});const c=JSON.stringify(i);W($t,`RPC '${e}' ${s} sending request:`,i),l.send(t,"POST",c,r,15)})}Bo(e,t,r){const i=cw(),s=[this.Do,"/","google.firestore.v1.Firestore","/",e,"/channel"],o=Zk(),a=Xk(),l={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},c=this.longPollingOptions.timeoutSeconds;c!==void 0&&(l.longPollingTimeout=Math.round(1e3*c)),this.useFetchStreams&&(l.useFetchStreams=!0),this.Oo(l.initMessageHeaders,t,r),l.encodeInitMessageHeaders=!0;const h=s.join("");W($t,`Creating RPC '${e}' stream ${i}: ${h}`,l);const d=o.createWebChannel(h,l);let p=!1,g=!1;const A=new gj({Io:x=>{g?W($t,`Not sending because RPC '${e}' stream ${i} is closed:`,x):(p||(W($t,`Opening RPC '${e}' stream ${i} transport.`),d.open(),p=!0),W($t,`RPC '${e}' stream ${i} sending:`,x),d.send(x))},To:()=>d.close()}),v=(x,w,E)=>{x.listen(w,T=>{try{E(T)}catch(L){setTimeout(()=>{throw L},0)}})};return v(d,Vh.EventType.OPEN,()=>{g||(W($t,`RPC '${e}' stream ${i} transport opened.`),A.yo())}),v(d,Vh.EventType.CLOSE,()=>{g||(g=!0,W($t,`RPC '${e}' stream ${i} transport closed`),A.So())}),v(d,Vh.EventType.ERROR,x=>{g||(g=!0,Ka($t,`RPC '${e}' stream ${i} transport errored:`,x),A.So(new X(H.UNAVAILABLE,"The operation could not be completed")))}),v(d,Vh.EventType.MESSAGE,x=>{var w;if(!g){const E=x.data[0];le(!!E);const T=E,L=T.error||((w=T[0])===null||w===void 0?void 0:w.error);if(L){W($t,`RPC '${e}' stream ${i} received error:`,L);const F=L.status;let M=function(S){const P=ct[S];if(P!==void 0)return MN(P)}(F),b=L.message;M===void 0&&(M=H.INTERNAL,b="Unknown error status: "+F+" with message "+L.message),g=!0,A.So(new X(M,b)),d.close()}else W($t,`RPC '${e}' stream ${i} received:`,E),A.bo(E)}}),v(a,Yk.STAT_EVENT,x=>{x.stat===e_.PROXY?W($t,`RPC '${e}' stream ${i} detected buffering proxy`):x.stat===e_.NOPROXY&&W($t,`RPC '${e}' stream ${i} detected no buffering proxy`)}),setTimeout(()=>{A.wo()},0),A}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function wj(){return typeof window<"u"?window:null}function ym(){return typeof document<"u"?document:null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ny(n){return new E8(n,!0)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class p2{constructor(e,t,r=1e3,i=1.5,s=6e4){this.ui=e,this.timerId=t,this.ko=r,this.qo=i,this.Qo=s,this.Ko=0,this.$o=null,this.Uo=Date.now(),this.reset()}reset(){this.Ko=0}Wo(){this.Ko=this.Qo}Go(e){this.cancel();const t=Math.floor(this.Ko+this.zo()),r=Math.max(0,Date.now()-this.Uo),i=Math.max(0,t-r);i>0&&W("ExponentialBackoff",`Backing off for ${i} ms (base delay: ${this.Ko} ms, delay with jitter: ${t} ms, last attempt: ${r} ms ago)`),this.$o=this.ui.enqueueAfterDelay(this.timerId,i,()=>(this.Uo=Date.now(),e())),this.Ko*=this.qo,this.Ko<this.ko&&(this.Ko=this.ko),this.Ko>this.Qo&&(this.Ko=this.Qo)}jo(){this.$o!==null&&(this.$o.skipDelay(),this.$o=null)}cancel(){this.$o!==null&&(this.$o.cancel(),this.$o=null)}zo(){return(Math.random()-.5)*this.Ko}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class m2{constructor(e,t,r,i,s,o,a,l){this.ui=e,this.Ho=r,this.Jo=i,this.connection=s,this.authCredentialsProvider=o,this.appCheckCredentialsProvider=a,this.listener=l,this.state=0,this.Yo=0,this.Zo=null,this.Xo=null,this.stream=null,this.e_=0,this.t_=new p2(e,t)}n_(){return this.state===1||this.state===5||this.r_()}r_(){return this.state===2||this.state===3}start(){this.e_=0,this.state!==4?this.auth():this.i_()}async stop(){this.n_()&&await this.close(0)}s_(){this.state=0,this.t_.reset()}o_(){this.r_()&&this.Zo===null&&(this.Zo=this.ui.enqueueAfterDelay(this.Ho,6e4,()=>this.__()))}a_(e){this.u_(),this.stream.send(e)}async __(){if(this.r_())return this.close(0)}u_(){this.Zo&&(this.Zo.cancel(),this.Zo=null)}c_(){this.Xo&&(this.Xo.cancel(),this.Xo=null)}async close(e,t){this.u_(),this.c_(),this.t_.cancel(),this.Yo++,e!==4?this.t_.reset():t&&t.code===H.RESOURCE_EXHAUSTED?(cn(t.toString()),cn("Using maximum backoff delay to prevent overloading the backend."),this.t_.Wo()):t&&t.code===H.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.l_(),this.stream.close(),this.stream=null),this.state=e,await this.listener.mo(t)}l_(){}auth(){this.state=1;const e=this.h_(this.Yo),t=this.Yo;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([r,i])=>{this.Yo===t&&this.P_(r,i)},r=>{e(()=>{const i=new X(H.UNKNOWN,"Fetching auth token failed: "+r.message);return this.I_(i)})})}P_(e,t){const r=this.h_(this.Yo);this.stream=this.T_(e,t),this.stream.Eo(()=>{r(()=>this.listener.Eo())}),this.stream.Ro(()=>{r(()=>(this.state=2,this.Xo=this.ui.enqueueAfterDelay(this.Jo,1e4,()=>(this.r_()&&(this.state=3),Promise.resolve())),this.listener.Ro()))}),this.stream.mo(i=>{r(()=>this.I_(i))}),this.stream.onMessage(i=>{r(()=>++this.e_==1?this.E_(i):this.onNext(i))})}i_(){this.state=5,this.t_.Go(async()=>{this.state=0,this.start()})}I_(e){return W("PersistentStream",`close with error: ${e}`),this.stream=null,this.close(4,e)}h_(e){return t=>{this.ui.enqueueAndForget(()=>this.Yo===e?t():(W("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class vj extends m2{constructor(e,t,r,i,s,o){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",t,r,i,o),this.serializer=s}T_(e,t){return this.connection.Bo("Listen",e,t)}E_(e){return this.onNext(e)}onNext(e){this.t_.reset();const t=T8(this.serializer,e),r=function(s){if(!("targetChange"in s))return ue.min();const o=s.targetChange;return o.targetIds&&o.targetIds.length?ue.min():o.readTime?yn(o.readTime):ue.min()}(e);return this.listener.d_(t,r)}A_(e){const t={};t.database=h_(this.serializer),t.addTarget=function(s,o){let a;const l=o.target;if(a=mg(l)?{documents:$N(s,l)}:{query:KN(s,l)._t},a.targetId=o.targetId,o.resumeToken.approximateByteSize()>0){a.resumeToken=UN(s,o.resumeToken);const c=u_(s,o.expectedCount);c!==null&&(a.expectedCount=c)}else if(o.snapshotVersion.compareTo(ue.min())>0){a.readTime=xc(s,o.snapshotVersion.toTimestamp());const c=u_(s,o.expectedCount);c!==null&&(a.expectedCount=c)}return a}(this.serializer,e);const r=x8(this.serializer,e);r&&(t.labels=r),this.a_(t)}R_(e){const t={};t.database=h_(this.serializer),t.removeTarget=e,this.a_(t)}}class _j extends m2{constructor(e,t,r,i,s,o){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",t,r,i,o),this.serializer=s}get V_(){return this.e_>0}start(){this.lastStreamToken=void 0,super.start()}l_(){this.V_&&this.m_([])}T_(e,t){return this.connection.Bo("Write",e,t)}E_(e){return le(!!e.streamToken),this.lastStreamToken=e.streamToken,le(!e.writeResults||e.writeResults.length===0),this.listener.f_()}onNext(e){le(!!e.streamToken),this.lastStreamToken=e.streamToken,this.t_.reset();const t=b8(e.writeResults,e.commitTime),r=yn(e.commitTime);return this.listener.g_(r,t)}p_(){const e={};e.database=h_(this.serializer),this.a_(e)}m_(e){const t={streamToken:this.lastStreamToken,writes:e.map(r=>vg(this.serializer,r))};this.a_(t)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ej extends class{}{constructor(e,t,r,i){super(),this.authCredentials=e,this.appCheckCredentials=t,this.connection=r,this.serializer=i,this.y_=!1}w_(){if(this.y_)throw new X(H.FAILED_PRECONDITION,"The client has already been terminated.")}Mo(e,t,r,i){return this.w_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([s,o])=>this.connection.Mo(e,c_(t,r),i,s,o)).catch(s=>{throw s.name==="FirebaseError"?(s.code===H.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),s):new X(H.UNKNOWN,s.toString())})}Lo(e,t,r,i,s){return this.w_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([o,a])=>this.connection.Lo(e,c_(t,r),i,o,a,s)).catch(o=>{throw o.name==="FirebaseError"?(o.code===H.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),o):new X(H.UNKNOWN,o.toString())})}terminate(){this.y_=!0,this.connection.terminate()}}class Aj{constructor(e,t){this.asyncQueue=e,this.onlineStateHandler=t,this.state="Unknown",this.S_=0,this.b_=null,this.D_=!0}v_(){this.S_===0&&(this.C_("Unknown"),this.b_=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this.b_=null,this.F_("Backend didn't respond within 10 seconds."),this.C_("Offline"),Promise.resolve())))}M_(e){this.state==="Online"?this.C_("Unknown"):(this.S_++,this.S_>=1&&(this.x_(),this.F_(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.C_("Offline")))}set(e){this.x_(),this.S_=0,e==="Online"&&(this.D_=!1),this.C_(e)}C_(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}F_(e){const t=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.D_?(cn(t),this.D_=!1):W("OnlineStateTracker",t)}x_(){this.b_!==null&&(this.b_.cancel(),this.b_=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ij{constructor(e,t,r,i,s){this.localStore=e,this.datastore=t,this.asyncQueue=r,this.remoteSyncer={},this.O_=[],this.N_=new Map,this.L_=new Set,this.B_=[],this.k_=s,this.k_._o(o=>{r.enqueueAndForget(async()=>{cl(this)&&(W("RemoteStore","Restarting streams for network reachability change."),await async function(l){const c=fe(l);c.L_.add(4),await Uc(c),c.q_.set("Unknown"),c.L_.delete(4),await Vf(c)}(this))})}),this.q_=new Aj(r,i)}}async function Vf(n){if(cl(n))for(const e of n.B_)await e(!0)}async function Uc(n){for(const e of n.B_)await e(!1)}function g2(n,e){const t=fe(n);t.N_.has(e.targetId)||(t.N_.set(e.targetId,e),fA(t)?dA(t):jc(t).r_()&&hA(t,e))}function cA(n,e){const t=fe(n),r=jc(t);t.N_.delete(e),r.r_()&&y2(t,e),t.N_.size===0&&(r.r_()?r.o_():cl(t)&&t.q_.set("Unknown"))}function hA(n,e){if(n.Q_.xe(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(ue.min())>0){const t=n.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(t)}jc(n).A_(e)}function y2(n,e){n.Q_.xe(e),jc(n).R_(e)}function dA(n){n.Q_=new y8({getRemoteKeysForTarget:e=>n.remoteSyncer.getRemoteKeysForTarget(e),ot:e=>n.N_.get(e)||null,tt:()=>n.datastore.serializer.databaseId}),jc(n).start(),n.q_.v_()}function fA(n){return cl(n)&&!jc(n).n_()&&n.N_.size>0}function cl(n){return fe(n).L_.size===0}function w2(n){n.Q_=void 0}async function Tj(n){n.q_.set("Online")}async function bj(n){n.N_.forEach((e,t)=>{hA(n,e)})}async function xj(n,e){w2(n),fA(n)?(n.q_.M_(e),dA(n)):n.q_.set("Unknown")}async function Sj(n,e,t){if(n.q_.set("Online"),e instanceof FN&&e.state===2&&e.cause)try{await async function(i,s){const o=s.cause;for(const a of s.targetIds)i.N_.has(a)&&(await i.remoteSyncer.rejectListen(a,o),i.N_.delete(a),i.Q_.removeTarget(a))}(n,e)}catch(r){W("RemoteStore","Failed to remove targets %s: %s ",e.targetIds.join(","),r),await Ig(n,r)}else if(e instanceof gm?n.Q_.Ke(e):e instanceof BN?n.Q_.He(e):n.Q_.We(e),!t.isEqual(ue.min()))try{const r=await d2(n.localStore);t.compareTo(r)>=0&&await function(s,o){const a=s.Q_.rt(o);return a.targetChanges.forEach((l,c)=>{if(l.resumeToken.approximateByteSize()>0){const h=s.N_.get(c);h&&s.N_.set(c,h.withResumeToken(l.resumeToken,o))}}),a.targetMismatches.forEach((l,c)=>{const h=s.N_.get(l);if(!h)return;s.N_.set(l,h.withResumeToken(pt.EMPTY_BYTE_STRING,h.snapshotVersion)),y2(s,l);const d=new Mi(h.target,l,c,h.sequenceNumber);hA(s,d)}),s.remoteSyncer.applyRemoteEvent(a)}(n,t)}catch(r){W("RemoteStore","Failed to raise snapshot:",r),await Ig(n,r)}}async function Ig(n,e,t){if(!bo(e))throw e;n.L_.add(1),await Uc(n),n.q_.set("Offline"),t||(t=()=>d2(n.localStore)),n.asyncQueue.enqueueRetryable(async()=>{W("RemoteStore","Retrying IndexedDB access"),await t(),n.L_.delete(1),await Vf(n)})}function v2(n,e){return e().catch(t=>Ig(n,t,e))}async function Mf(n){const e=fe(n),t=vo(e);let r=e.O_.length>0?e.O_[e.O_.length-1].batchId:-1;for(;Pj(e);)try{const i=await hj(e.localStore,r);if(i===null){e.O_.length===0&&t.o_();break}r=i.batchId,Rj(e,i)}catch(i){await Ig(e,i)}_2(e)&&E2(e)}function Pj(n){return cl(n)&&n.O_.length<10}function Rj(n,e){n.O_.push(e);const t=vo(n);t.r_()&&t.V_&&t.m_(e.mutations)}function _2(n){return cl(n)&&!vo(n).n_()&&n.O_.length>0}function E2(n){vo(n).start()}async function Cj(n){vo(n).p_()}async function kj(n){const e=vo(n);for(const t of n.O_)e.m_(t.mutations)}async function Nj(n,e,t){const r=n.O_.shift(),i=tA.from(r,e,t);await v2(n,()=>n.remoteSyncer.applySuccessfulWrite(i)),await Mf(n)}async function Dj(n,e){e&&vo(n).V_&&await async function(r,i){if(function(o){return p8(o)&&o!==H.ABORTED}(i.code)){const s=r.O_.shift();vo(r).s_(),await v2(r,()=>r.remoteSyncer.rejectFailedWrite(s.batchId,i)),await Mf(r)}}(n,e),_2(n)&&E2(n)}async function Px(n,e){const t=fe(n);t.asyncQueue.verifyOperationInProgress(),W("RemoteStore","RemoteStore received new credentials");const r=cl(t);t.L_.add(3),await Uc(t),r&&t.q_.set("Unknown"),await t.remoteSyncer.handleCredentialChange(e),t.L_.delete(3),await Vf(t)}async function Oj(n,e){const t=fe(n);e?(t.L_.delete(2),await Vf(t)):e||(t.L_.add(2),await Uc(t),t.q_.set("Unknown"))}function jc(n){return n.K_||(n.K_=function(t,r,i){const s=fe(t);return s.w_(),new vj(r,s.connection,s.authCredentials,s.appCheckCredentials,s.serializer,i)}(n.datastore,n.asyncQueue,{Eo:Tj.bind(null,n),Ro:bj.bind(null,n),mo:xj.bind(null,n),d_:Sj.bind(null,n)}),n.B_.push(async e=>{e?(n.K_.s_(),fA(n)?dA(n):n.q_.set("Unknown")):(await n.K_.stop(),w2(n))})),n.K_}function vo(n){return n.U_||(n.U_=function(t,r,i){const s=fe(t);return s.w_(),new _j(r,s.connection,s.authCredentials,s.appCheckCredentials,s.serializer,i)}(n.datastore,n.asyncQueue,{Eo:()=>Promise.resolve(),Ro:Cj.bind(null,n),mo:Dj.bind(null,n),f_:kj.bind(null,n),g_:Nj.bind(null,n)}),n.B_.push(async e=>{e?(n.U_.s_(),await Mf(n)):(await n.U_.stop(),n.O_.length>0&&(W("RemoteStore",`Stopping write stream with ${n.O_.length} pending writes`),n.O_=[]))})),n.U_}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pA{constructor(e,t,r,i,s){this.asyncQueue=e,this.timerId=t,this.targetTimeMs=r,this.op=i,this.removalCallback=s,this.deferred=new ii,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(o=>{})}get promise(){return this.deferred.promise}static createAndSchedule(e,t,r,i,s){const o=Date.now()+r,a=new pA(e,t,o,i,s);return a.start(r),a}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new X(H.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function mA(n,e){if(cn("AsyncQueue",`${e}: ${n}`),bo(n))return new X(H.UNAVAILABLE,`${e}: ${n}`);throw n}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cu{constructor(e){this.comparator=e?(t,r)=>e(t,r)||Z.comparator(t.key,r.key):(t,r)=>Z.comparator(t.key,r.key),this.keyedMap=Mh(),this.sortedSet=new qe(this.comparator)}static emptySet(e){return new cu(e.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const t=this.keyedMap.get(e);return t?this.sortedSet.indexOf(t):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((t,r)=>(e(t),!1))}add(e){const t=this.delete(e.key);return t.copy(t.keyedMap.insert(e.key,e),t.sortedSet.insert(e,null))}delete(e){const t=this.get(e);return t?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(t)):this}isEqual(e){if(!(e instanceof cu)||this.size!==e.size)return!1;const t=this.sortedSet.getIterator(),r=e.sortedSet.getIterator();for(;t.hasNext();){const i=t.getNext().key,s=r.getNext().key;if(!i.isEqual(s))return!1}return!0}toString(){const e=[];return this.forEach(t=>{e.push(t.toString())}),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,t){const r=new cu;return r.comparator=this.comparator,r.keyedMap=e,r.sortedSet=t,r}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Rx{constructor(){this.W_=new qe(Z.comparator)}track(e){const t=e.doc.key,r=this.W_.get(t);r?e.type!==0&&r.type===3?this.W_=this.W_.insert(t,e):e.type===3&&r.type!==1?this.W_=this.W_.insert(t,{type:r.type,doc:e.doc}):e.type===2&&r.type===2?this.W_=this.W_.insert(t,{type:2,doc:e.doc}):e.type===2&&r.type===0?this.W_=this.W_.insert(t,{type:0,doc:e.doc}):e.type===1&&r.type===0?this.W_=this.W_.remove(t):e.type===1&&r.type===2?this.W_=this.W_.insert(t,{type:1,doc:r.doc}):e.type===0&&r.type===1?this.W_=this.W_.insert(t,{type:2,doc:e.doc}):oe():this.W_=this.W_.insert(t,e)}G_(){const e=[];return this.W_.inorderTraversal((t,r)=>{e.push(r)}),e}}class Sc{constructor(e,t,r,i,s,o,a,l,c){this.query=e,this.docs=t,this.oldDocs=r,this.docChanges=i,this.mutatedKeys=s,this.fromCache=o,this.syncStateChanged=a,this.excludesMetadataChanges=l,this.hasCachedResults=c}static fromInitialDocuments(e,t,r,i,s){const o=[];return t.forEach(a=>{o.push({type:0,doc:a})}),new Sc(e,t,cu.emptySet(t),o,r,i,!0,!1,s)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&by(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const t=this.docChanges,r=e.docChanges;if(t.length!==r.length)return!1;for(let i=0;i<t.length;i++)if(t[i].type!==r[i].type||!t[i].doc.isEqual(r[i].doc))return!1;return!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Lj{constructor(){this.z_=void 0,this.j_=[]}H_(){return this.j_.some(e=>e.J_())}}class Vj{constructor(){this.queries=Cx(),this.onlineState="Unknown",this.Y_=new Set}terminate(){(function(t,r){const i=fe(t),s=i.queries;i.queries=Cx(),s.forEach((o,a)=>{for(const l of a.j_)l.onError(r)})})(this,new X(H.ABORTED,"Firestore shutting down"))}}function Cx(){return new xo(n=>TN(n),by)}async function A2(n,e){const t=fe(n);let r=3;const i=e.query;let s=t.queries.get(i);s?!s.H_()&&e.J_()&&(r=2):(s=new Lj,r=e.J_()?0:1);try{switch(r){case 0:s.z_=await t.onListen(i,!0);break;case 1:s.z_=await t.onListen(i,!1);break;case 2:await t.onFirstRemoteStoreListen(i)}}catch(o){const a=mA(o,`Initialization of query '${Cl(e.query)}' failed`);return void e.onError(a)}t.queries.set(i,s),s.j_.push(e),e.Z_(t.onlineState),s.z_&&e.X_(s.z_)&&gA(t)}async function I2(n,e){const t=fe(n),r=e.query;let i=3;const s=t.queries.get(r);if(s){const o=s.j_.indexOf(e);o>=0&&(s.j_.splice(o,1),s.j_.length===0?i=e.J_()?0:1:!s.H_()&&e.J_()&&(i=2))}switch(i){case 0:return t.queries.delete(r),t.onUnlisten(r,!0);case 1:return t.queries.delete(r),t.onUnlisten(r,!1);case 2:return t.onLastRemoteStoreUnlisten(r);default:return}}function Mj(n,e){const t=fe(n);let r=!1;for(const i of e){const s=i.query,o=t.queries.get(s);if(o){for(const a of o.j_)a.X_(i)&&(r=!0);o.z_=i}}r&&gA(t)}function Bj(n,e,t){const r=fe(n),i=r.queries.get(e);if(i)for(const s of i.j_)s.onError(t);r.queries.delete(e)}function gA(n){n.Y_.forEach(e=>{e.next()})}var y_,kx;(kx=y_||(y_={})).ea="default",kx.Cache="cache";class T2{constructor(e,t,r){this.query=e,this.ta=t,this.na=!1,this.ra=null,this.onlineState="Unknown",this.options=r||{}}X_(e){if(!this.options.includeMetadataChanges){const r=[];for(const i of e.docChanges)i.type!==3&&r.push(i);e=new Sc(e.query,e.docs,e.oldDocs,r,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let t=!1;return this.na?this.ia(e)&&(this.ta.next(e),t=!0):this.sa(e,this.onlineState)&&(this.oa(e),t=!0),this.ra=e,t}onError(e){this.ta.error(e)}Z_(e){this.onlineState=e;let t=!1;return this.ra&&!this.na&&this.sa(this.ra,e)&&(this.oa(this.ra),t=!0),t}sa(e,t){if(!e.fromCache||!this.J_())return!0;const r=t!=="Offline";return(!this.options._a||!r)&&(!e.docs.isEmpty()||e.hasCachedResults||t==="Offline")}ia(e){if(e.docChanges.length>0)return!0;const t=this.ra&&this.ra.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!t)&&this.options.includeMetadataChanges===!0}oa(e){e=Sc.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.na=!0,this.ta.next(e)}J_(){return this.options.source!==y_.Cache}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class b2{constructor(e){this.key=e}}class x2{constructor(e){this.key=e}}class Fj{constructor(e,t){this.query=e,this.Ta=t,this.Ea=null,this.hasCachedResults=!1,this.current=!1,this.da=ve(),this.mutatedKeys=ve(),this.Aa=bN(e),this.Ra=new cu(this.Aa)}get Va(){return this.Ta}ma(e,t){const r=t?t.fa:new Rx,i=t?t.Ra:this.Ra;let s=t?t.mutatedKeys:this.mutatedKeys,o=i,a=!1;const l=this.query.limitType==="F"&&i.size===this.query.limit?i.last():null,c=this.query.limitType==="L"&&i.size===this.query.limit?i.first():null;if(e.inorderTraversal((h,d)=>{const p=i.get(h),g=Of(this.query,d)?d:null,A=!!p&&this.mutatedKeys.has(p.key),v=!!g&&(g.hasLocalMutations||this.mutatedKeys.has(g.key)&&g.hasCommittedMutations);let x=!1;p&&g?p.data.isEqual(g.data)?A!==v&&(r.track({type:3,doc:g}),x=!0):this.ga(p,g)||(r.track({type:2,doc:g}),x=!0,(l&&this.Aa(g,l)>0||c&&this.Aa(g,c)<0)&&(a=!0)):!p&&g?(r.track({type:0,doc:g}),x=!0):p&&!g&&(r.track({type:1,doc:p}),x=!0,(l||c)&&(a=!0)),x&&(g?(o=o.add(g),s=v?s.add(h):s.delete(h)):(o=o.delete(h),s=s.delete(h)))}),this.query.limit!==null)for(;o.size>this.query.limit;){const h=this.query.limitType==="F"?o.last():o.first();o=o.delete(h.key),s=s.delete(h.key),r.track({type:1,doc:h})}return{Ra:o,fa:r,ns:a,mutatedKeys:s}}ga(e,t){return e.hasLocalMutations&&t.hasCommittedMutations&&!t.hasLocalMutations}applyChanges(e,t,r,i){const s=this.Ra;this.Ra=e.Ra,this.mutatedKeys=e.mutatedKeys;const o=e.fa.G_();o.sort((h,d)=>function(g,A){const v=x=>{switch(x){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return oe()}};return v(g)-v(A)}(h.type,d.type)||this.Aa(h.doc,d.doc)),this.pa(r),i=i!=null&&i;const a=t&&!i?this.ya():[],l=this.da.size===0&&this.current&&!i?1:0,c=l!==this.Ea;return this.Ea=l,o.length!==0||c?{snapshot:new Sc(this.query,e.Ra,s,o,e.mutatedKeys,l===0,c,!1,!!r&&r.resumeToken.approximateByteSize()>0),wa:a}:{wa:a}}Z_(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({Ra:this.Ra,fa:new Rx,mutatedKeys:this.mutatedKeys,ns:!1},!1)):{wa:[]}}Sa(e){return!this.Ta.has(e)&&!!this.Ra.has(e)&&!this.Ra.get(e).hasLocalMutations}pa(e){e&&(e.addedDocuments.forEach(t=>this.Ta=this.Ta.add(t)),e.modifiedDocuments.forEach(t=>{}),e.removedDocuments.forEach(t=>this.Ta=this.Ta.delete(t)),this.current=e.current)}ya(){if(!this.current)return[];const e=this.da;this.da=ve(),this.Ra.forEach(r=>{this.Sa(r.key)&&(this.da=this.da.add(r.key))});const t=[];return e.forEach(r=>{this.da.has(r)||t.push(new x2(r))}),this.da.forEach(r=>{e.has(r)||t.push(new b2(r))}),t}ba(e){this.Ta=e.Ts,this.da=ve();const t=this.ma(e.documents);return this.applyChanges(t,!0)}Da(){return Sc.fromInitialDocuments(this.query,this.Ra,this.mutatedKeys,this.Ea===0,this.hasCachedResults)}}class Uj{constructor(e,t,r){this.query=e,this.targetId=t,this.view=r}}class jj{constructor(e){this.key=e,this.va=!1}}class zj{constructor(e,t,r,i,s,o){this.localStore=e,this.remoteStore=t,this.eventManager=r,this.sharedClientState=i,this.currentUser=s,this.maxConcurrentLimboResolutions=o,this.Ca={},this.Fa=new xo(a=>TN(a),by),this.Ma=new Map,this.xa=new Set,this.Oa=new qe(Z.comparator),this.Na=new Map,this.La=new aA,this.Ba={},this.ka=new Map,this.qa=Xa.kn(),this.onlineState="Unknown",this.Qa=void 0}get isPrimaryClient(){return this.Qa===!0}}async function Gj(n,e,t=!0){const r=N2(n);let i;const s=r.Fa.get(e);return s?(r.sharedClientState.addLocalQueryTarget(s.targetId),i=s.view.Da()):i=await S2(r,e,t,!0),i}async function Hj(n,e){const t=N2(n);await S2(t,e,!0,!1)}async function S2(n,e,t,r){const i=await dj(n.localStore,ur(e)),s=i.targetId,o=n.sharedClientState.addLocalQueryTarget(s,t);let a;return r&&(a=await $j(n,e,s,o==="current",i.resumeToken)),n.isPrimaryClient&&t&&g2(n.remoteStore,i),a}async function $j(n,e,t,r,i){n.Ka=(d,p,g)=>async function(v,x,w,E){let T=x.view.ma(w);T.ns&&(T=await bx(v.localStore,x.query,!1).then(({documents:b})=>x.view.ma(b,T)));const L=E&&E.targetChanges.get(x.targetId),F=E&&E.targetMismatches.get(x.targetId)!=null,M=x.view.applyChanges(T,v.isPrimaryClient,L,F);return Dx(v,x.targetId,M.wa),M.snapshot}(n,d,p,g);const s=await bx(n.localStore,e,!0),o=new Fj(e,s.Ts),a=o.ma(s.documents),l=Lf.createSynthesizedTargetChangeForCurrentChange(t,r&&n.onlineState!=="Offline",i),c=o.applyChanges(a,n.isPrimaryClient,l);Dx(n,t,c.wa);const h=new Uj(e,t,o);return n.Fa.set(e,h),n.Ma.has(t)?n.Ma.get(t).push(e):n.Ma.set(t,[e]),c.snapshot}async function Kj(n,e,t){const r=fe(n),i=r.Fa.get(e),s=r.Ma.get(i.targetId);if(s.length>1)return r.Ma.set(i.targetId,s.filter(o=>!by(o,e))),void r.Fa.delete(e);r.isPrimaryClient?(r.sharedClientState.removeLocalQueryTarget(i.targetId),r.sharedClientState.isActiveQueryTarget(i.targetId)||await g_(r.localStore,i.targetId,!1).then(()=>{r.sharedClientState.clearQueryState(i.targetId),t&&cA(r.remoteStore,i.targetId),w_(r,i.targetId)}).catch(ll)):(w_(r,i.targetId),await g_(r.localStore,i.targetId,!0))}async function Qj(n,e){const t=fe(n),r=t.Fa.get(e),i=t.Ma.get(r.targetId);t.isPrimaryClient&&i.length===1&&(t.sharedClientState.removeLocalQueryTarget(r.targetId),cA(t.remoteStore,r.targetId))}async function qj(n,e,t){const r=D2(n);try{const i=await function(o,a){const l=fe(o),c=et.now(),h=a.reduce((g,A)=>g.add(A.key),ve());let d,p;return l.persistence.runTransaction("Locally write mutations","readwrite",g=>{let A=Hn(),v=ve();return l.cs.getEntries(g,h).next(x=>{A=x,A.forEach((w,E)=>{E.isValidDocument()||(v=v.add(w))})}).next(()=>l.localDocuments.getOverlayedDocuments(g,A)).next(x=>{d=x;const w=[];for(const E of a){const T=d8(E,d.get(E.key).overlayedDocument);T!=null&&w.push(new is(E.key,T,mN(T.value.mapValue),Rn.exists(!0)))}return l.mutationQueue.addMutationBatch(g,c,w,a)}).next(x=>{p=x;const w=x.applyToLocalDocumentSet(d,v);return l.documentOverlayCache.saveOverlays(g,x.batchId,w)})}).then(()=>({batchId:p.batchId,changes:SN(d)}))}(r.localStore,e);r.sharedClientState.addPendingMutation(i.batchId),function(o,a,l){let c=o.Ba[o.currentUser.toKey()];c||(c=new qe(pe)),c=c.insert(a,l),o.Ba[o.currentUser.toKey()]=c}(r,i.batchId,t),await Bf(r,i.changes),await Mf(r.remoteStore)}catch(i){const s=mA(i,"Failed to persist write");t.reject(s)}}async function P2(n,e){const t=fe(n);try{const r=await uj(t.localStore,e);e.targetChanges.forEach((i,s)=>{const o=t.Na.get(s);o&&(le(i.addedDocuments.size+i.modifiedDocuments.size+i.removedDocuments.size<=1),i.addedDocuments.size>0?o.va=!0:i.modifiedDocuments.size>0?le(o.va):i.removedDocuments.size>0&&(le(o.va),o.va=!1))}),await Bf(t,r,e)}catch(r){await ll(r)}}function Nx(n,e,t){const r=fe(n);if(r.isPrimaryClient&&t===0||!r.isPrimaryClient&&t===1){const i=[];r.Fa.forEach((s,o)=>{const a=o.view.Z_(e);a.snapshot&&i.push(a.snapshot)}),function(o,a){const l=fe(o);l.onlineState=a;let c=!1;l.queries.forEach((h,d)=>{for(const p of d.j_)p.Z_(a)&&(c=!0)}),c&&gA(l)}(r.eventManager,e),i.length&&r.Ca.d_(i),r.onlineState=e,r.isPrimaryClient&&r.sharedClientState.setOnlineState(e)}}async function Wj(n,e,t){const r=fe(n);r.sharedClientState.updateQueryState(e,"rejected",t);const i=r.Na.get(e),s=i&&i.key;if(s){let o=new qe(Z.comparator);o=o.insert(s,st.newNoDocument(s,ue.min()));const a=ve().add(s),l=new Py(ue.min(),new Map,new qe(pe),o,a);await P2(r,l),r.Oa=r.Oa.remove(s),r.Na.delete(e),yA(r)}else await g_(r.localStore,e,!1).then(()=>w_(r,e,t)).catch(ll)}async function Jj(n,e){const t=fe(n),r=e.batch.batchId;try{const i=await lj(t.localStore,e);C2(t,r,null),R2(t,r),t.sharedClientState.updateMutationState(r,"acknowledged"),await Bf(t,i)}catch(i){await ll(i)}}async function Yj(n,e,t){const r=fe(n);try{const i=await function(o,a){const l=fe(o);return l.persistence.runTransaction("Reject batch","readwrite-primary",c=>{let h;return l.mutationQueue.lookupMutationBatch(c,a).next(d=>(le(d!==null),h=d.keys(),l.mutationQueue.removeMutationBatch(c,d))).next(()=>l.mutationQueue.performConsistencyCheck(c)).next(()=>l.documentOverlayCache.removeOverlaysForBatchId(c,h,a)).next(()=>l.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(c,h)).next(()=>l.localDocuments.getDocuments(c,h))})}(r.localStore,e);C2(r,e,t),R2(r,e),r.sharedClientState.updateMutationState(e,"rejected",t),await Bf(r,i)}catch(i){await ll(i)}}function R2(n,e){(n.ka.get(e)||[]).forEach(t=>{t.resolve()}),n.ka.delete(e)}function C2(n,e,t){const r=fe(n);let i=r.Ba[r.currentUser.toKey()];if(i){const s=i.get(e);s&&(t?s.reject(t):s.resolve(),i=i.remove(e)),r.Ba[r.currentUser.toKey()]=i}}function w_(n,e,t=null){n.sharedClientState.removeLocalQueryTarget(e);for(const r of n.Ma.get(e))n.Fa.delete(r),t&&n.Ca.$a(r,t);n.Ma.delete(e),n.isPrimaryClient&&n.La.gr(e).forEach(r=>{n.La.containsKey(r)||k2(n,r)})}function k2(n,e){n.xa.delete(e.path.canonicalString());const t=n.Oa.get(e);t!==null&&(cA(n.remoteStore,t),n.Oa=n.Oa.remove(e),n.Na.delete(t),yA(n))}function Dx(n,e,t){for(const r of t)r instanceof b2?(n.La.addReference(r.key,e),Xj(n,r)):r instanceof x2?(W("SyncEngine","Document no longer in limbo: "+r.key),n.La.removeReference(r.key,e),n.La.containsKey(r.key)||k2(n,r.key)):oe()}function Xj(n,e){const t=e.key,r=t.path.canonicalString();n.Oa.get(t)||n.xa.has(r)||(W("SyncEngine","New document in limbo: "+t),n.xa.add(r),yA(n))}function yA(n){for(;n.xa.size>0&&n.Oa.size<n.maxConcurrentLimboResolutions;){const e=n.xa.values().next().value;n.xa.delete(e);const t=new Z(Ne.fromString(e)),r=n.qa.next();n.Na.set(r,new jj(t)),n.Oa=n.Oa.insert(t,r),g2(n.remoteStore,new Mi(ur(Ty(t.path)),r,"TargetPurposeLimboResolution",ar.oe))}}async function Bf(n,e,t){const r=fe(n),i=[],s=[],o=[];r.Fa.isEmpty()||(r.Fa.forEach((a,l)=>{o.push(r.Ka(l,e,t).then(c=>{var h;if((c||t)&&r.isPrimaryClient){const d=c?!c.fromCache:(h=t==null?void 0:t.targetChanges.get(l.targetId))===null||h===void 0?void 0:h.current;r.sharedClientState.updateQueryState(l.targetId,d?"current":"not-current")}if(c){i.push(c);const d=uA.Wi(l.targetId,c);s.push(d)}}))}),await Promise.all(o),r.Ca.d_(i),await async function(l,c){const h=fe(l);try{await h.persistence.runTransaction("notifyLocalViewChanges","readwrite",d=>j.forEach(c,p=>j.forEach(p.$i,g=>h.persistence.referenceDelegate.addReference(d,p.targetId,g)).next(()=>j.forEach(p.Ui,g=>h.persistence.referenceDelegate.removeReference(d,p.targetId,g)))))}catch(d){if(!bo(d))throw d;W("LocalStore","Failed to update sequence numbers: "+d)}for(const d of c){const p=d.targetId;if(!d.fromCache){const g=h.os.get(p),A=g.snapshotVersion,v=g.withLastLimboFreeSnapshotVersion(A);h.os=h.os.insert(p,v)}}}(r.localStore,s))}async function Zj(n,e){const t=fe(n);if(!t.currentUser.isEqual(e)){W("SyncEngine","User change. New user:",e.toKey());const r=await h2(t.localStore,e);t.currentUser=e,function(s,o){s.ka.forEach(a=>{a.forEach(l=>{l.reject(new X(H.CANCELLED,o))})}),s.ka.clear()}(t,"'waitForPendingWrites' promise is rejected due to a user change."),t.sharedClientState.handleUserChange(e,r.removedBatchIds,r.addedBatchIds),await Bf(t,r.hs)}}function ez(n,e){const t=fe(n),r=t.Na.get(e);if(r&&r.va)return ve().add(r.key);{let i=ve();const s=t.Ma.get(e);if(!s)return i;for(const o of s){const a=t.Fa.get(o);i=i.unionWith(a.view.Va)}return i}}function N2(n){const e=fe(n);return e.remoteStore.remoteSyncer.applyRemoteEvent=P2.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=ez.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=Wj.bind(null,e),e.Ca.d_=Mj.bind(null,e.eventManager),e.Ca.$a=Bj.bind(null,e.eventManager),e}function D2(n){const e=fe(n);return e.remoteStore.remoteSyncer.applySuccessfulWrite=Jj.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=Yj.bind(null,e),e}class Kd{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(e){this.serializer=Ny(e.databaseInfo.databaseId),this.sharedClientState=this.Wa(e),this.persistence=this.Ga(e),await this.persistence.start(),this.localStore=this.za(e),this.gcScheduler=this.ja(e,this.localStore),this.indexBackfillerScheduler=this.Ha(e,this.localStore)}ja(e,t){return null}Ha(e,t){return null}za(e){return c2(this.persistence,new u2,e.initialUser,this.serializer)}Ga(e){return new l2(ky.Zr,this.serializer)}Wa(e){return new f2}async terminate(){var e,t;(e=this.gcScheduler)===null||e===void 0||e.stop(),(t=this.indexBackfillerScheduler)===null||t===void 0||t.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}Kd.provider={build:()=>new Kd};class tz extends Kd{constructor(e,t,r){super(),this.Ja=e,this.cacheSizeBytes=t,this.forceOwnership=r,this.kind="persistent",this.synchronizeTabs=!1}async initialize(e){await super.initialize(e),await this.Ja.initialize(this,e),await D2(this.Ja.syncEngine),await Mf(this.Ja.remoteStore),await this.persistence.yi(()=>(this.gcScheduler&&!this.gcScheduler.started&&this.gcScheduler.start(),this.indexBackfillerScheduler&&!this.indexBackfillerScheduler.started&&this.indexBackfillerScheduler.start(),Promise.resolve()))}za(e){return c2(this.persistence,new u2,e.initialUser,this.serializer)}ja(e,t){const r=this.persistence.referenceDelegate.garbageCollector;return new G8(r,e.asyncQueue,t)}Ha(e,t){const r=new y9(t,this.persistence);return new g9(e.asyncQueue,r)}Ga(e){const t=sj(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey),r=this.cacheSizeBytes!==void 0?In.withCacheSize(this.cacheSizeBytes):In.DEFAULT;return new lA(this.synchronizeTabs,t,e.clientId,r,e.asyncQueue,wj(),ym(),this.serializer,this.sharedClientState,!!this.forceOwnership)}Wa(e){return new f2}}class Tg{async initialize(e,t){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(t),this.remoteStore=this.createRemoteStore(t),this.eventManager=this.createEventManager(t),this.syncEngine=this.createSyncEngine(t,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=r=>Nx(this.syncEngine,r,1),this.remoteStore.remoteSyncer.handleCredentialChange=Zj.bind(null,this.syncEngine),await Oj(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return function(){return new Vj}()}createDatastore(e){const t=Ny(e.databaseInfo.databaseId),r=function(s){return new yj(s)}(e.databaseInfo);return function(s,o,a,l){return new Ej(s,o,a,l)}(e.authCredentials,e.appCheckCredentials,r,t)}createRemoteStore(e){return function(r,i,s,o,a){return new Ij(r,i,s,o,a)}(this.localStore,this.datastore,e.asyncQueue,t=>Nx(this.syncEngine,t,0),function(){return Sx.D()?new Sx:new pj}())}createSyncEngine(e,t){return function(i,s,o,a,l,c,h){const d=new zj(i,s,o,a,l,c);return h&&(d.Qa=!0),d}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,t)}async terminate(){var e,t;await async function(i){const s=fe(i);W("RemoteStore","RemoteStore shutting down."),s.L_.add(5),await Uc(s),s.k_.shutdown(),s.q_.set("Unknown")}(this.remoteStore),(e=this.datastore)===null||e===void 0||e.terminate(),(t=this.eventManager)===null||t===void 0||t.terminate()}}Tg.provider={build:()=>new Tg};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class O2{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.Ya(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.Ya(this.observer.error,e):cn("Uncaught Error in snapshot listener:",e.toString()))}Za(){this.muted=!0}Ya(e,t){setTimeout(()=>{this.muted||e(t)},0)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nz{constructor(e,t,r,i,s){this.authCredentials=e,this.appCheckCredentials=t,this.asyncQueue=r,this.databaseInfo=i,this.user=kt.UNAUTHENTICATED,this.clientId=tN.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=s,this.authCredentials.start(r,async o=>{W("FirestoreClient","Received user=",o.uid),await this.authCredentialListener(o),this.user=o}),this.appCheckCredentials.start(r,o=>(W("FirestoreClient","Received new app check token=",o),this.appCheckCredentialListener(o,this.user)))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();const e=new ii;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(t){const r=mA(t,"Failed to shutdown persistence");e.reject(r)}}),e.promise}}async function hw(n,e){n.asyncQueue.verifyOperationInProgress(),W("FirestoreClient","Initializing OfflineComponentProvider");const t=n.configuration;await e.initialize(t);let r=t.initialUser;n.setCredentialChangeListener(async i=>{r.isEqual(i)||(await h2(e.localStore,i),r=i)}),e.persistence.setDatabaseDeletedListener(()=>n.terminate()),n._offlineComponents=e}async function Ox(n,e){n.asyncQueue.verifyOperationInProgress();const t=await L2(n);W("FirestoreClient","Initializing OnlineComponentProvider"),await e.initialize(t,n.configuration),n.setCredentialChangeListener(r=>Px(e.remoteStore,r)),n.setAppCheckTokenChangeListener((r,i)=>Px(e.remoteStore,i)),n._onlineComponents=e}async function L2(n){if(!n._offlineComponents)if(n._uninitializedComponentsProvider){W("FirestoreClient","Using user provided OfflineComponentProvider");try{await hw(n,n._uninitializedComponentsProvider._offline)}catch(e){const t=e;if(!function(i){return i.name==="FirebaseError"?i.code===H.FAILED_PRECONDITION||i.code===H.UNIMPLEMENTED:!(typeof DOMException<"u"&&i instanceof DOMException)||i.code===22||i.code===20||i.code===11}(t))throw t;Ka("Error using user provided cache. Falling back to memory cache: "+t),await hw(n,new Kd)}}else W("FirestoreClient","Using default OfflineComponentProvider"),await hw(n,new Kd);return n._offlineComponents}async function wA(n){return n._onlineComponents||(n._uninitializedComponentsProvider?(W("FirestoreClient","Using user provided OnlineComponentProvider"),await Ox(n,n._uninitializedComponentsProvider._online)):(W("FirestoreClient","Using default OnlineComponentProvider"),await Ox(n,new Tg))),n._onlineComponents}function V2(n){return L2(n).then(e=>e.persistence)}function M2(n){return wA(n).then(e=>e.remoteStore)}function rz(n){return wA(n).then(e=>e.syncEngine)}async function B2(n){const e=await wA(n),t=e.eventManager;return t.onListen=Gj.bind(null,e.syncEngine),t.onUnlisten=Kj.bind(null,e.syncEngine),t.onFirstRemoteStoreListen=Hj.bind(null,e.syncEngine),t.onLastRemoteStoreUnlisten=Qj.bind(null,e.syncEngine),t}function iz(n){return n.asyncQueue.enqueue(async()=>{const e=await V2(n),t=await M2(n);return e.setNetworkEnabled(!0),function(i){const s=fe(i);return s.L_.delete(0),Vf(s)}(t)})}function sz(n){return n.asyncQueue.enqueue(async()=>{const e=await V2(n),t=await M2(n);return e.setNetworkEnabled(!1),async function(i){const s=fe(i);s.L_.add(0),await Uc(s),s.q_.set("Offline")}(t)})}function oz(n,e,t={}){const r=new ii;return n.asyncQueue.enqueueAndForget(async()=>function(s,o,a,l,c){const h=new O2({next:p=>{h.Za(),o.enqueueAndForget(()=>I2(s,d));const g=p.docs.has(a);!g&&p.fromCache?c.reject(new X(H.UNAVAILABLE,"Failed to get document because the client is offline.")):g&&p.fromCache&&l&&l.source==="server"?c.reject(new X(H.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):c.resolve(p)},error:p=>c.reject(p)}),d=new T2(Ty(a.path),h,{includeMetadataChanges:!0,_a:!0});return A2(s,d)}(await B2(n),n.asyncQueue,e,t,r)),r.promise}function az(n,e,t={}){const r=new ii;return n.asyncQueue.enqueueAndForget(async()=>function(s,o,a,l,c){const h=new O2({next:p=>{h.Za(),o.enqueueAndForget(()=>I2(s,d)),p.fromCache&&l.source==="server"?c.reject(new X(H.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):c.resolve(p)},error:p=>c.reject(p)}),d=new T2(a,h,{includeMetadataChanges:!0,_a:!0});return A2(s,d)}(await B2(n),n.asyncQueue,e,t,r)),r.promise}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function F2(n){const e={};return n.timeoutSeconds!==void 0&&(e.timeoutSeconds=n.timeoutSeconds),e}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Lx=new Map;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function U2(n,e,t){if(!t)throw new X(H.INVALID_ARGUMENT,`Function ${n}() cannot be called with an empty ${e}.`)}function lz(n,e,t,r){if(e===!0&&r===!0)throw new X(H.INVALID_ARGUMENT,`${n} and ${t} cannot be used together.`)}function Vx(n){if(!Z.isDocumentKey(n))throw new X(H.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${n} has ${n.length}.`)}function Mx(n){if(Z.isDocumentKey(n))throw new X(H.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${n} has ${n.length}.`)}function Dy(n){if(n===void 0)return"undefined";if(n===null)return"null";if(typeof n=="string")return n.length>20&&(n=`${n.substring(0,20)}...`),JSON.stringify(n);if(typeof n=="number"||typeof n=="boolean")return""+n;if(typeof n=="object"){if(n instanceof Array)return"an array";{const e=function(r){return r.constructor?r.constructor.name:null}(n);return e?`a custom ${e} object`:"an object"}}return typeof n=="function"?"a function":oe()}function dr(n,e){if("_delegate"in n&&(n=n._delegate),!(n instanceof e)){if(e.name===n.constructor.name)throw new X(H.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const t=Dy(n);throw new X(H.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${t}`)}}return n}function uz(n,e){if(e<=0)throw new X(H.INVALID_ARGUMENT,`Function ${n}() requires a positive number, but it was: ${e}.`)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Bx{constructor(e){var t,r;if(e.host===void 0){if(e.ssl!==void 0)throw new X(H.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=e.host,this.ssl=(t=e.ssl)===null||t===void 0||t;if(this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=41943040;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<1048576)throw new X(H.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}lz("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=F2((r=e.experimentalLongPollingOptions)!==null&&r!==void 0?r:{}),function(s){if(s.timeoutSeconds!==void 0){if(isNaN(s.timeoutSeconds))throw new X(H.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (must not be NaN)`);if(s.timeoutSeconds<5)throw new X(H.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (minimum allowed value is 5)`);if(s.timeoutSeconds>30)throw new X(H.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (maximum allowed value is 30)`)}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&function(r,i){return r.timeoutSeconds===i.timeoutSeconds}(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class Oy{constructor(e,t,r,i){this._authCredentials=e,this._appCheckCredentials=t,this._databaseId=r,this._app=i,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new Bx({}),this._settingsFrozen=!1,this._terminateTask="notTerminated"}get app(){if(!this._app)throw new X(H.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(e){if(this._settingsFrozen)throw new X(H.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new Bx(e),e.credentials!==void 0&&(this._authCredentials=function(r){if(!r)return new i9;switch(r.type){case"firstParty":return new l9(r.sessionIndex||"0",r.iamToken||null,r.authTokenFactory||null);case"provider":return r.client;default:throw new X(H.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask==="notTerminated"?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(t){const r=Lx.get(t);r&&(W("ComponentProvider","Removing Datastore"),Lx.delete(t),r.terminate())}(this),Promise.resolve()}}function cz(n,e,t,r={}){var i;const s=(n=dr(n,Oy))._getSettings(),o=`${e}:${t}`;if(s.host!=="firestore.googleapis.com"&&s.host!==o&&Ka("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used."),n._setSettings(Object.assign(Object.assign({},s),{host:o,ssl:!1})),r.mockUserToken){let a,l;if(typeof r.mockUserToken=="string")a=r.mockUserToken,l=kt.MOCK_USER;else{a=O6(r.mockUserToken,(i=n._app)===null||i===void 0?void 0:i.options.projectId);const c=r.mockUserToken.sub||r.mockUserToken.user_id;if(!c)throw new X(H.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");l=new kt(c)}n._authCredentials=new s9(new eN(a,l))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class So{constructor(e,t,r){this.converter=t,this._query=r,this.type="query",this.firestore=e}withConverter(e){return new So(this.firestore,e,this._query)}}class wn{constructor(e,t,r){this.converter=t,this._key=r,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new uo(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new wn(this.firestore,e,this._key)}}class uo extends So{constructor(e,t,r){super(e,t,Ty(r)),this._path=r,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new wn(this.firestore,null,new Z(e))}withConverter(e){return new uo(this.firestore,e,this._path)}}function vA(n,e,...t){if(n=St(n),U2("collection","path",e),n instanceof Oy){const r=Ne.fromString(e,...t);return Mx(r),new uo(n,null,r)}{if(!(n instanceof wn||n instanceof uo))throw new X(H.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=n._path.child(Ne.fromString(e,...t));return Mx(r),new uo(n.firestore,null,r)}}function Hi(n,e,...t){if(n=St(n),arguments.length===1&&(e=tN.newId()),U2("doc","path",e),n instanceof Oy){const r=Ne.fromString(e,...t);return Vx(r),new wn(n,null,new Z(r))}{if(!(n instanceof wn||n instanceof uo))throw new X(H.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=n._path.child(Ne.fromString(e,...t));return Vx(r),new wn(n.firestore,n instanceof uo?n.converter:null,new Z(r))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Fx{constructor(e=Promise.resolve()){this.Pu=[],this.Iu=!1,this.Tu=[],this.Eu=null,this.du=!1,this.Au=!1,this.Ru=[],this.t_=new p2(this,"async_queue_retry"),this.Vu=()=>{const r=ym();r&&W("AsyncQueue","Visibility state changed to "+r.visibilityState),this.t_.jo()},this.mu=e;const t=ym();t&&typeof t.addEventListener=="function"&&t.addEventListener("visibilitychange",this.Vu)}get isShuttingDown(){return this.Iu}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.fu(),this.gu(e)}enterRestrictedMode(e){if(!this.Iu){this.Iu=!0,this.Au=e||!1;const t=ym();t&&typeof t.removeEventListener=="function"&&t.removeEventListener("visibilitychange",this.Vu)}}enqueue(e){if(this.fu(),this.Iu)return new Promise(()=>{});const t=new ii;return this.gu(()=>this.Iu&&this.Au?Promise.resolve():(e().then(t.resolve,t.reject),t.promise)).then(()=>t.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.Pu.push(e),this.pu()))}async pu(){if(this.Pu.length!==0){try{await this.Pu[0](),this.Pu.shift(),this.t_.reset()}catch(e){if(!bo(e))throw e;W("AsyncQueue","Operation failed with retryable error: "+e)}this.Pu.length>0&&this.t_.Go(()=>this.pu())}}gu(e){const t=this.mu.then(()=>(this.du=!0,e().catch(r=>{this.Eu=r,this.du=!1;const i=function(o){let a=o.message||"";return o.stack&&(a=o.stack.includes(o.message)?o.stack:o.message+`
`+o.stack),a}(r);throw cn("INTERNAL UNHANDLED ERROR: ",i),r}).then(r=>(this.du=!1,r))));return this.mu=t,t}enqueueAfterDelay(e,t,r){this.fu(),this.Ru.indexOf(e)>-1&&(t=0);const i=pA.createAndSchedule(this,e,t,r,s=>this.yu(s));return this.Tu.push(i),i}fu(){this.Eu&&oe()}verifyOperationInProgress(){}async wu(){let e;do e=this.mu,await e;while(e!==this.mu)}Su(e){for(const t of this.Tu)if(t.timerId===e)return!0;return!1}bu(e){return this.wu().then(()=>{this.Tu.sort((t,r)=>t.targetTimeMs-r.targetTimeMs);for(const t of this.Tu)if(t.skipDelay(),e!=="all"&&t.timerId===e)break;return this.wu()})}Du(e){this.Ru.push(e)}yu(e){const t=this.Tu.indexOf(e);this.Tu.splice(t,1)}}class Po extends Oy{constructor(e,t,r,i){super(e,t,r,i),this.type="firestore",this._queue=new Fx,this._persistenceKey=(i==null?void 0:i.name)||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const e=this._firestoreClient.terminate();this._queue=new Fx(e),this._firestoreClient=void 0,await e}}}function hz(n,e){const t=typeof n=="object"?n:$k(),r=typeof n=="string"?n:e||"(default)",i=HE(t,"firestore").getImmediate({identifier:r});if(!i._initialized){const s=N6("firestore");s&&cz(i,...s)}return i}function Ff(n){if(n._terminated)throw new X(H.FAILED_PRECONDITION,"The client has already been terminated.");return n._firestoreClient||j2(n),n._firestoreClient}function j2(n){var e,t,r;const i=n._freezeSettings(),s=function(a,l,c,h){return new F9(a,l,c,h.host,h.ssl,h.experimentalForceLongPolling,h.experimentalAutoDetectLongPolling,F2(h.experimentalLongPollingOptions),h.useFetchStreams)}(n._databaseId,((e=n._app)===null||e===void 0?void 0:e.options.appId)||"",n._persistenceKey,i);n._componentsProvider||!((t=i.localCache)===null||t===void 0)&&t._offlineComponentProvider&&(!((r=i.localCache)===null||r===void 0)&&r._onlineComponentProvider)&&(n._componentsProvider={_offline:i.localCache._offlineComponentProvider,_online:i.localCache._onlineComponentProvider}),n._firestoreClient=new nz(n._authCredentials,n._appCheckCredentials,n._queue,s,n._componentsProvider&&function(a){const l=a==null?void 0:a._online.build();return{_offline:a==null?void 0:a._offline.build(l),_online:l}}(n._componentsProvider))}function dz(n,e){Ka("enableIndexedDbPersistence() will be deprecated in the future, you can use `FirestoreSettings.cache` instead.");const t=n._freezeSettings();return fz(n,Tg.provider,{build:r=>new tz(r,t.cacheSizeBytes,e==null?void 0:e.forceOwnership)}),Promise.resolve()}function fz(n,e,t){if((n=dr(n,Po))._firestoreClient||n._terminated)throw new X(H.FAILED_PRECONDITION,"Firestore has already been started and persistence can no longer be enabled. You can only enable persistence before calling any other methods on a Firestore object.");if(n._componentsProvider||n._getSettings().localCache)throw new X(H.FAILED_PRECONDITION,"SDK cache is already specified.");n._componentsProvider={_online:e,_offline:t},j2(n)}function pz(n){return iz(Ff(n=dr(n,Po)))}function mz(n){return sz(Ff(n=dr(n,Po)))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Pc{constructor(e){this._byteString=e}static fromBase64String(e){try{return new Pc(pt.fromBase64String(e))}catch(t){throw new X(H.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+t)}}static fromUint8Array(e){return new Pc(pt.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ly{constructor(...e){for(let t=0;t<e.length;++t)if(e[t].length===0)throw new X(H.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new Xe(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _A{constructor(e){this._methodName=e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class EA{constructor(e,t){if(!isFinite(e)||e<-90||e>90)throw new X(H.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(t)||t<-180||t>180)throw new X(H.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+t);this._lat=e,this._long=t}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(e){return pe(this._lat,e._lat)||pe(this._long,e._long)}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class AA{constructor(e){this._values=(e||[]).map(t=>t)}toArray(){return this._values.map(e=>e)}isEqual(e){return function(r,i){if(r.length!==i.length)return!1;for(let s=0;s<r.length;++s)if(r[s]!==i[s])return!1;return!0}(this._values,e._values)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const gz=/^__.*__$/;class yz{constructor(e,t,r){this.data=e,this.fieldMask=t,this.fieldTransforms=r}toMutation(e,t){return this.fieldMask!==null?new is(e,this.data,this.fieldMask,t,this.fieldTransforms):new Fc(e,this.data,t,this.fieldTransforms)}}class z2{constructor(e,t,r){this.data=e,this.fieldMask=t,this.fieldTransforms=r}toMutation(e,t){return new is(e,this.data,this.fieldMask,t,this.fieldTransforms)}}function G2(n){switch(n){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw oe()}}class IA{constructor(e,t,r,i,s,o){this.settings=e,this.databaseId=t,this.serializer=r,this.ignoreUndefinedProperties=i,s===void 0&&this.vu(),this.fieldTransforms=s||[],this.fieldMask=o||[]}get path(){return this.settings.path}get Cu(){return this.settings.Cu}Fu(e){return new IA(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}Mu(e){var t;const r=(t=this.path)===null||t===void 0?void 0:t.child(e),i=this.Fu({path:r,xu:!1});return i.Ou(e),i}Nu(e){var t;const r=(t=this.path)===null||t===void 0?void 0:t.child(e),i=this.Fu({path:r,xu:!1});return i.vu(),i}Lu(e){return this.Fu({path:void 0,xu:!0})}Bu(e){return bg(e,this.settings.methodName,this.settings.ku||!1,this.path,this.settings.qu)}contains(e){return this.fieldMask.find(t=>e.isPrefixOf(t))!==void 0||this.fieldTransforms.find(t=>e.isPrefixOf(t.field))!==void 0}vu(){if(this.path)for(let e=0;e<this.path.length;e++)this.Ou(this.path.get(e))}Ou(e){if(e.length===0)throw this.Bu("Document fields must not be empty");if(G2(this.Cu)&&gz.test(e))throw this.Bu('Document fields cannot begin and end with "__"')}}class wz{constructor(e,t,r){this.databaseId=e,this.ignoreUndefinedProperties=t,this.serializer=r||Ny(e)}Qu(e,t,r,i=!1){return new IA({Cu:e,methodName:t,qu:r,path:Xe.emptyPath(),xu:!1,ku:i},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function TA(n){const e=n._freezeSettings(),t=Ny(n._databaseId);return new wz(n._databaseId,!!e.ignoreUndefinedProperties,t)}function vz(n,e,t,r,i,s={}){const o=n.Qu(s.merge||s.mergeFields?2:0,e,t,i);bA("Data must be an object, but it was:",o,r);const a=H2(r,o);let l,c;if(s.merge)l=new Pn(o.fieldMask),c=o.fieldTransforms;else if(s.mergeFields){const h=[];for(const d of s.mergeFields){const p=v_(e,d,t);if(!o.contains(p))throw new X(H.INVALID_ARGUMENT,`Field '${p}' is specified in your field mask but missing from your input data.`);K2(h,p)||h.push(p)}l=new Pn(h),c=o.fieldTransforms.filter(d=>l.covers(d.field))}else l=null,c=o.fieldTransforms;return new yz(new Jt(a),l,c)}class Vy extends _A{_toFieldTransform(e){if(e.Cu!==2)throw e.Cu===1?e.Bu(`${this._methodName}() can only appear at the top level of your update data`):e.Bu(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof Vy}}function _z(n,e,t,r){const i=n.Qu(1,e,t);bA("Data must be an object, but it was:",i,r);const s=[],o=Jt.empty();ul(r,(l,c)=>{const h=xA(e,l,t);c=St(c);const d=i.Nu(h);if(c instanceof Vy)s.push(h);else{const p=Uf(c,d);p!=null&&(s.push(h),o.set(h,p))}});const a=new Pn(s);return new z2(o,a,i.fieldTransforms)}function Ez(n,e,t,r,i,s){const o=n.Qu(1,e,t),a=[v_(e,r,t)],l=[i];if(s.length%2!=0)throw new X(H.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let p=0;p<s.length;p+=2)a.push(v_(e,s[p])),l.push(s[p+1]);const c=[],h=Jt.empty();for(let p=a.length-1;p>=0;--p)if(!K2(c,a[p])){const g=a[p];let A=l[p];A=St(A);const v=o.Nu(g);if(A instanceof Vy)c.push(g);else{const x=Uf(A,v);x!=null&&(c.push(g),h.set(g,x))}}const d=new Pn(c);return new z2(h,d,o.fieldTransforms)}function Az(n,e,t,r=!1){return Uf(t,n.Qu(r?4:3,e))}function Uf(n,e){if($2(n=St(n)))return bA("Unsupported field value:",e,n),H2(n,e);if(n instanceof _A)return function(r,i){if(!G2(i.Cu))throw i.Bu(`${r._methodName}() can only be used with update() and set()`);if(!i.path)throw i.Bu(`${r._methodName}() is not currently supported inside arrays`);const s=r._toFieldTransform(i);s&&i.fieldTransforms.push(s)}(n,e),null;if(n===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),n instanceof Array){if(e.settings.xu&&e.Cu!==4)throw e.Bu("Nested arrays are not supported");return function(r,i){const s=[];let o=0;for(const a of r){let l=Uf(a,i.Lu(o));l==null&&(l={nullValue:"NULL_VALUE"}),s.push(l),o++}return{arrayValue:{values:s}}}(n,e)}return function(r,i){if((r=St(r))===null)return{nullValue:"NULL_VALUE"};if(typeof r=="number")return s8(i.serializer,r);if(typeof r=="boolean")return{booleanValue:r};if(typeof r=="string")return{stringValue:r};if(r instanceof Date){const s=et.fromDate(r);return{timestampValue:xc(i.serializer,s)}}if(r instanceof et){const s=new et(r.seconds,1e3*Math.floor(r.nanoseconds/1e3));return{timestampValue:xc(i.serializer,s)}}if(r instanceof EA)return{geoPointValue:{latitude:r.latitude,longitude:r.longitude}};if(r instanceof Pc)return{bytesValue:UN(i.serializer,r._byteString)};if(r instanceof wn){const s=i.databaseId,o=r.firestore._databaseId;if(!o.isEqual(s))throw i.Bu(`Document reference is for database ${o.projectId}/${o.database} but should be for database ${s.projectId}/${s.database}`);return{referenceValue:iA(r.firestore._databaseId||i.databaseId,r._key.path)}}if(r instanceof AA)return function(o,a){return{mapValue:{fields:{__type__:{stringValue:"__vector__"},value:{arrayValue:{values:o.toArray().map(l=>{if(typeof l!="number")throw a.Bu("VectorValues must only contain numeric values.");return XE(a.serializer,l)})}}}}}}(r,i);throw i.Bu(`Unsupported field value: ${Dy(r)}`)}(n,e)}function H2(n,e){const t={};return hN(n)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):ul(n,(r,i)=>{const s=Uf(i,e.Mu(r));s!=null&&(t[r]=s)}),{mapValue:{fields:t}}}function $2(n){return!(typeof n!="object"||n===null||n instanceof Array||n instanceof Date||n instanceof et||n instanceof EA||n instanceof Pc||n instanceof wn||n instanceof _A||n instanceof AA)}function bA(n,e,t){if(!$2(t)||!function(i){return typeof i=="object"&&i!==null&&(Object.getPrototypeOf(i)===Object.prototype||Object.getPrototypeOf(i)===null)}(t)){const r=Dy(t);throw r==="an object"?e.Bu(n+" a custom object"):e.Bu(n+" "+r)}}function v_(n,e,t){if((e=St(e))instanceof Ly)return e._internalPath;if(typeof e=="string")return xA(n,e);throw bg("Field path arguments must be of type string or ",n,!1,void 0,t)}const Iz=new RegExp("[~\\*/\\[\\]]");function xA(n,e,t){if(e.search(Iz)>=0)throw bg(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,n,!1,void 0,t);try{return new Ly(...e.split("."))._internalPath}catch{throw bg(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,n,!1,void 0,t)}}function bg(n,e,t,r,i){const s=r&&!r.isEmpty(),o=i!==void 0;let a=`Function ${e}() called with invalid data`;t&&(a+=" (via `toFirestore()`)"),a+=". ";let l="";return(s||o)&&(l+=" (found",s&&(l+=` in field ${r}`),o&&(l+=` in document ${i}`),l+=")"),new X(H.INVALID_ARGUMENT,a+n+l)}function K2(n,e){return n.some(t=>t.isEqual(e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Q2{constructor(e,t,r,i,s){this._firestore=e,this._userDataWriter=t,this._key=r,this._document=i,this._converter=s}get id(){return this._key.path.lastSegment()}get ref(){return new wn(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const e=new Tz(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const t=this._document.data.field(My("DocumentSnapshot.get",e));if(t!==null)return this._userDataWriter.convertValue(t)}}}class Tz extends Q2{data(){return super.data()}}function My(n,e){return typeof e=="string"?xA(n,e):e instanceof Ly?e._internalPath:e._delegate._internalPath}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function bz(n){if(n.limitType==="L"&&n.explicitOrderBy.length===0)throw new X(H.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class SA{}class PA extends SA{}function RA(n,e,...t){let r=[];e instanceof SA&&r.push(e),r=r.concat(t),function(s){const o=s.filter(l=>l instanceof CA).length,a=s.filter(l=>l instanceof By).length;if(o>1||o>0&&a>0)throw new X(H.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")}(r);for(const i of r)n=i._apply(n);return n}class By extends PA{constructor(e,t,r){super(),this._field=e,this._op=t,this._value=r,this.type="where"}static _create(e,t,r){return new By(e,t,r)}_apply(e){const t=this._parse(e);return J2(e._query,t),new So(e.firestore,e.converter,l_(e._query,t))}_parse(e){const t=TA(e.firestore);return function(s,o,a,l,c,h,d){let p;if(c.isKeyField()){if(h==="array-contains"||h==="array-contains-any")throw new X(H.INVALID_ARGUMENT,`Invalid Query. You can't perform '${h}' queries on documentId().`);if(h==="in"||h==="not-in"){jx(d,h);const g=[];for(const A of d)g.push(Ux(l,s,A));p={arrayValue:{values:g}}}else p=Ux(l,s,d)}else h!=="in"&&h!=="not-in"&&h!=="array-contains-any"||jx(d,h),p=Az(a,o,d,h==="in"||h==="not-in");return Ie.create(c,h,p)}(e._query,"where",t,e.firestore._databaseId,this._field,this._op,this._value)}}function q2(n,e,t){const r=e,i=My("where",n);return By._create(i,r,t)}class CA extends SA{constructor(e,t){super(),this.type=e,this._queryConstraints=t}static _create(e,t){return new CA(e,t)}_parse(e){const t=this._queryConstraints.map(r=>r._parse(e)).filter(r=>r.getFilters().length>0);return t.length===1?t[0]:Oe.create(t,this._getOperator())}_apply(e){const t=this._parse(e);return t.getFilters().length===0?e:(function(i,s){let o=i;const a=s.getFlattenedFilters();for(const l of a)J2(o,l),o=l_(o,l)}(e._query,t),new So(e.firestore,e.converter,l_(e._query,t)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return this.type==="and"?"and":"or"}}class kA extends PA{constructor(e,t){super(),this._field=e,this._direction=t,this.type="orderBy"}static _create(e,t){return new kA(e,t)}_apply(e){const t=function(i,s,o){if(i.startAt!==null)throw new X(H.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(i.endAt!==null)throw new X(H.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");return new Gd(s,o)}(e._query,this._field,this._direction);return new So(e.firestore,e.converter,function(i,s){const o=i.explicitOrderBy.concat([s]);return new Bc(i.path,i.collectionGroup,o,i.filters.slice(),i.limit,i.limitType,i.startAt,i.endAt)}(e._query,t))}}function W2(n,e="asc"){const t=e,r=My("orderBy",n);return kA._create(r,t)}class NA extends PA{constructor(e,t,r){super(),this.type=e,this._limit=t,this._limitType=r}static _create(e,t,r){return new NA(e,t,r)}_apply(e){return new So(e.firestore,e.converter,yg(e._query,this._limit,this._limitType))}}function xz(n){return uz("limit",n),NA._create("limit",n,"F")}function Ux(n,e,t){if(typeof(t=St(t))=="string"){if(t==="")throw new X(H.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!IN(e)&&t.indexOf("/")!==-1)throw new X(H.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${t}' contains a '/' character.`);const r=e.path.child(Ne.fromString(t));if(!Z.isDocumentKey(r))throw new X(H.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${r}' is not because it has an odd number of segments (${r.length}).`);return jd(n,new Z(r))}if(t instanceof wn)return jd(n,t._key);throw new X(H.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${Dy(t)}.`)}function jx(n,e){if(!Array.isArray(n)||n.length===0)throw new X(H.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`)}function J2(n,e){const t=function(i,s){for(const o of i)for(const a of o.getFlattenedFilters())if(s.indexOf(a.op)>=0)return a.op;return null}(n.filters,function(i){switch(i){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}}(e.op));if(t!==null)throw t===e.op?new X(H.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${e.op.toString()}' filter.`):new X(H.INVALID_ARGUMENT,`Invalid query. You cannot use '${e.op.toString()}' filters with '${t.toString()}' filters.`)}class Sz{convertValue(e,t="none"){switch(qa(e)){case 0:return null;case 1:return e.booleanValue;case 2:return Ke(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,t);case 5:return e.stringValue;case 6:return this.convertBytes(yo(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,t);case 11:return this.convertObject(e.mapValue,t);case 10:return this.convertVectorValue(e.mapValue);default:throw oe()}}convertObject(e,t){return this.convertObjectMap(e.fields,t)}convertObjectMap(e,t="none"){const r={};return ul(e,(i,s)=>{r[i]=this.convertValue(s,t)}),r}convertVectorValue(e){var t,r,i;const s=(i=(r=(t=e.fields)===null||t===void 0?void 0:t.value.arrayValue)===null||r===void 0?void 0:r.values)===null||i===void 0?void 0:i.map(o=>Ke(o.doubleValue));return new AA(s)}convertGeoPoint(e){return new EA(Ke(e.latitude),Ke(e.longitude))}convertArray(e,t){return(e.values||[]).map(r=>this.convertValue(r,t))}convertServerTimestamp(e,t){switch(t){case"previous":const r=JE(e);return r==null?null:this.convertValue(r,t);case"estimate":return this.convertTimestamp(Fd(e));default:return null}}convertTimestamp(e){const t=Zi(e);return new et(t.seconds,t.nanos)}convertDocumentKey(e,t){const r=Ne.fromString(e);le(JN(r));const i=new Qa(r.get(1),r.get(3)),s=new Z(r.popFirst(5));return i.isEqual(t)||cn(`Document ${s} contains a document reference within a different database (${i.projectId}/${i.database}) which is not supported. It will be treated as a reference in the current database (${t.projectId}/${t.database}) instead.`),s}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Pz(n,e,t){let r;return r=n?t&&(t.merge||t.mergeFields)?n.toFirestore(e,t):n.toFirestore(e):e,r}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Uh{constructor(e,t){this.hasPendingWrites=e,this.fromCache=t}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class Y2 extends Q2{constructor(e,t,r,i,s,o){super(e,t,r,i,o),this._firestore=e,this._firestoreImpl=e,this.metadata=s}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const t=new wm(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(t,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,t={}){if(this._document){const r=this._document.data.field(My("DocumentSnapshot.get",e));if(r!==null)return this._userDataWriter.convertValue(r,t.serverTimestamps)}}}class wm extends Y2{data(e={}){return super.data(e)}}class Rz{constructor(e,t,r,i){this._firestore=e,this._userDataWriter=t,this._snapshot=i,this.metadata=new Uh(i.hasPendingWrites,i.fromCache),this.query=r}get docs(){const e=[];return this.forEach(t=>e.push(t)),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,t){this._snapshot.docs.forEach(r=>{e.call(t,new wm(this._firestore,this._userDataWriter,r.key,r,new Uh(this._snapshot.mutatedKeys.has(r.key),this._snapshot.fromCache),this.query.converter))})}docChanges(e={}){const t=!!e.includeMetadataChanges;if(t&&this._snapshot.excludesMetadataChanges)throw new X(H.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===t||(this._cachedChanges=function(i,s){if(i._snapshot.oldDocs.isEmpty()){let o=0;return i._snapshot.docChanges.map(a=>{const l=new wm(i._firestore,i._userDataWriter,a.doc.key,a.doc,new Uh(i._snapshot.mutatedKeys.has(a.doc.key),i._snapshot.fromCache),i.query.converter);return a.doc,{type:"added",doc:l,oldIndex:-1,newIndex:o++}})}{let o=i._snapshot.oldDocs;return i._snapshot.docChanges.filter(a=>s||a.type!==3).map(a=>{const l=new wm(i._firestore,i._userDataWriter,a.doc.key,a.doc,new Uh(i._snapshot.mutatedKeys.has(a.doc.key),i._snapshot.fromCache),i.query.converter);let c=-1,h=-1;return a.type!==0&&(c=o.indexOf(a.doc.key),o=o.delete(a.doc.key)),a.type!==1&&(o=o.add(a.doc),h=o.indexOf(a.doc.key)),{type:Cz(a.type),doc:l,oldIndex:c,newIndex:h}})}}(this,t),this._cachedChangesIncludeMetadataChanges=t),this._cachedChanges}}function Cz(n){switch(n){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return oe()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Za(n){n=dr(n,wn);const e=dr(n.firestore,Po);return oz(Ff(e),n._key).then(t=>kz(e,n,t))}class X2 extends Sz{constructor(e){super(),this.firestore=e}convertBytes(e){return new Pc(e)}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return new wn(this.firestore,null,t)}}function DA(n){n=dr(n,So);const e=dr(n.firestore,Po),t=Ff(e),r=new X2(e);return bz(n._query),az(t,n._query).then(i=>new Rz(e,r,n,i))}function OA(n,e,t){n=dr(n,wn);const r=dr(n.firestore,Po),i=Pz(n.converter,e,t);return Z2(r,[vz(TA(r),"setDoc",n._key,i,n.converter!==null,t).toMutation(n._key,Rn.none())])}function Fy(n,e,t,...r){n=dr(n,wn);const i=dr(n.firestore,Po),s=TA(i);let o;return o=typeof(e=St(e))=="string"||e instanceof Ly?Ez(s,"updateDoc",n._key,e,t,r):_z(s,"updateDoc",n._key,e),Z2(i,[o.toMutation(n._key,Rn.exists(!0))])}function Z2(n,e){return function(r,i){const s=new ii;return r.asyncQueue.enqueueAndForget(async()=>qj(await rz(r),i,s)),s.promise}(Ff(n),e)}function kz(n,e,t){const r=t.docs.get(e._key),i=new X2(n);return new Y2(n,i,e._key,r,new Uh(t.hasPendingWrites,t.fromCache),e.converter)}(function(e,t=!0){(function(i){Mc=i})(Vc),vc(new Ha("firestore",(r,{instanceIdentifier:i,options:s})=>{const o=r.getProvider("app").getImmediate(),a=new Po(new o9(r.getProvider("auth-internal")),new c9(r.getProvider("app-check-internal")),function(c,h){if(!Object.prototype.hasOwnProperty.apply(c.options,["projectId"]))throw new X(H.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new Qa(c.options.projectId,h)}(o,i),o);return s=Object.assign({useFetchStreams:t},s),a._setSettings(s),a},"PUBLIC").setMultipleInstances(!0)),ao(Ob,"4.7.3",e),ao(Ob,"4.7.3","esm2017")})();function LA(n,e){var t={};for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&e.indexOf(r)<0&&(t[r]=n[r]);if(n!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(n);i<r.length;i++)e.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(n,r[i])&&(t[r[i]]=n[r[i]]);return t}function eD(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const Nz=eD,tD=new kf("auth","Firebase",eD());/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const xg=new zE("@firebase/auth");function Dz(n,...e){xg.logLevel<=Ae.WARN&&xg.warn(`Auth (${Vc}): ${n}`,...e)}function vm(n,...e){xg.logLevel<=Ae.ERROR&&xg.error(`Auth (${Vc}): ${n}`,...e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Or(n,...e){throw VA(n,...e)}function si(n,...e){return VA(n,...e)}function nD(n,e,t){const r=Object.assign(Object.assign({},Nz()),{[e]:t});return new kf("auth","Firebase",r).create(e,{appName:n.name})}function co(n){return nD(n,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function VA(n,...e){if(typeof n!="string"){const t=e[0],r=[...e.slice(1)];return r[0]&&(r[0].appName=n.name),n._errorFactory.create(t,...r)}return tD.create(n,...e)}function he(n,e,...t){if(!n)throw VA(e,...t)}function Bi(n){const e="INTERNAL ASSERTION FAILED: "+n;throw vm(e),new Error(e)}function es(n,e){n||Bi(e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function __(){var n;return typeof self<"u"&&((n=self.location)===null||n===void 0?void 0:n.href)||""}function Oz(){return zx()==="http:"||zx()==="https:"}function zx(){var n;return typeof self<"u"&&((n=self.location)===null||n===void 0?void 0:n.protocol)||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Lz(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(Oz()||B6()||"connection"in navigator)?navigator.onLine:!0}function Vz(){if(typeof navigator>"u")return null;const n=navigator;return n.languages&&n.languages[0]||n.language||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jf{constructor(e,t){this.shortDelay=e,this.longDelay=t,es(t>e,"Short delay should be less than long delay!"),this.isMobile=L6()||F6()}get(){return Lz()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function MA(n,e){es(n.emulator,"Emulator should always be set here");const{url:t}=n.emulator;return e?`${t}${e.startsWith("/")?e.slice(1):e}`:t}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rD{static initialize(e,t,r){this.fetchImpl=e,t&&(this.headersImpl=t),r&&(this.responseImpl=r)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;Bi("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;Bi("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;Bi("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Mz={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Bz=new jf(3e4,6e4);function hl(n,e){return n.tenantId&&!e.tenantId?Object.assign(Object.assign({},e),{tenantId:n.tenantId}):e}async function Ro(n,e,t,r,i={}){return iD(n,i,async()=>{let s={},o={};r&&(e==="GET"?o=r:s={body:JSON.stringify(r)});const a=Nf(Object.assign({key:n.config.apiKey},o)).slice(1),l=await n._getAdditionalHeaders();l["Content-Type"]="application/json",n.languageCode&&(l["X-Firebase-Locale"]=n.languageCode);const c=Object.assign({method:e,headers:l},s);return M6()||(c.referrerPolicy="no-referrer"),rD.fetch()(sD(n,n.config.apiHost,t,a),c)})}async function iD(n,e,t){n._canInitEmulator=!1;const r=Object.assign(Object.assign({},Mz),e);try{const i=new Uz(n),s=await Promise.race([t(),i.promise]);i.clearNetworkTimeout();const o=await s.json();if("needConfirmation"in o)throw Fp(n,"account-exists-with-different-credential",o);if(s.ok&&!("errorMessage"in o))return o;{const a=s.ok?o.errorMessage:o.error.message,[l,c]=a.split(" : ");if(l==="FEDERATED_USER_ID_ALREADY_LINKED")throw Fp(n,"credential-already-in-use",o);if(l==="EMAIL_EXISTS")throw Fp(n,"email-already-in-use",o);if(l==="USER_DISABLED")throw Fp(n,"user-disabled",o);const h=r[l]||l.toLowerCase().replace(/[_\s]+/g,"-");if(c)throw nD(n,h,c);Or(n,h)}}catch(i){if(i instanceof rs)throw i;Or(n,"network-request-failed",{message:String(i)})}}async function Uy(n,e,t,r,i={}){const s=await Ro(n,e,t,r,i);return"mfaPendingCredential"in s&&Or(n,"multi-factor-auth-required",{_serverResponse:s}),s}function sD(n,e,t,r){const i=`${e}${t}?${r}`;return n.config.emulator?MA(n.config,i):`${n.config.apiScheme}://${i}`}function Fz(n){switch(n){case"ENFORCE":return"ENFORCE";case"AUDIT":return"AUDIT";case"OFF":return"OFF";default:return"ENFORCEMENT_STATE_UNSPECIFIED"}}class Uz{constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((t,r)=>{this.timer=setTimeout(()=>r(si(this.auth,"network-request-failed")),Bz.get())})}clearNetworkTimeout(){clearTimeout(this.timer)}}function Fp(n,e,t){const r={appName:n.name};t.email&&(r.email=t.email),t.phoneNumber&&(r.phoneNumber=t.phoneNumber);const i=si(n,e,r);return i.customData._tokenResponse=t,i}function Gx(n){return n!==void 0&&n.enterprise!==void 0}class jz{constructor(e){if(this.siteKey="",this.recaptchaEnforcementState=[],e.recaptchaKey===void 0)throw new Error("recaptchaKey undefined");this.siteKey=e.recaptchaKey.split("/")[3],this.recaptchaEnforcementState=e.recaptchaEnforcementState}getProviderEnforcementState(e){if(!this.recaptchaEnforcementState||this.recaptchaEnforcementState.length===0)return null;for(const t of this.recaptchaEnforcementState)if(t.provider&&t.provider===e)return Fz(t.enforcementState);return null}isProviderEnabled(e){return this.getProviderEnforcementState(e)==="ENFORCE"||this.getProviderEnforcementState(e)==="AUDIT"}}async function zz(n,e){return Ro(n,"GET","/v2/recaptchaConfig",hl(n,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Gz(n,e){return Ro(n,"POST","/v1/accounts:delete",e)}async function oD(n,e){return Ro(n,"POST","/v1/accounts:lookup",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function rd(n){if(n)try{const e=new Date(Number(n));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}async function Hz(n,e=!1){const t=St(n),r=await t.getIdToken(e),i=BA(r);he(i&&i.exp&&i.auth_time&&i.iat,t.auth,"internal-error");const s=typeof i.firebase=="object"?i.firebase:void 0,o=s==null?void 0:s.sign_in_provider;return{claims:i,token:r,authTime:rd(dw(i.auth_time)),issuedAtTime:rd(dw(i.iat)),expirationTime:rd(dw(i.exp)),signInProvider:o||null,signInSecondFactor:(s==null?void 0:s.sign_in_second_factor)||null}}function dw(n){return Number(n)*1e3}function BA(n){const[e,t,r]=n.split(".");if(e===void 0||t===void 0||r===void 0)return vm("JWT malformed, contained fewer than 3 sections"),null;try{const i=Vk(t);return i?JSON.parse(i):(vm("Failed to decode base64 JWT payload"),null)}catch(i){return vm("Caught error parsing JWT payload as JSON",i==null?void 0:i.toString()),null}}function Hx(n){const e=BA(n);return he(e,"internal-error"),he(typeof e.exp<"u","internal-error"),he(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Qd(n,e,t=!1){if(t)return e;try{return await e}catch(r){throw r instanceof rs&&$z(r)&&n.auth.currentUser===n&&await n.auth.signOut(),r}}function $z({code:n}){return n==="auth/user-disabled"||n==="auth/user-token-expired"}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Kz{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(e){var t;if(e){const r=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),r}else{this.errorBackoff=3e4;const i=((t=this.user.stsTokenManager.expirationTime)!==null&&t!==void 0?t:0)-Date.now()-3e5;return Math.max(0,i)}}schedule(e=!1){if(!this.isRunning)return;const t=this.getInterval(e);this.timerId=setTimeout(async()=>{await this.iteration()},t)}async iteration(){try{await this.user.getIdToken(!0)}catch(e){(e==null?void 0:e.code)==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class E_{constructor(e,t){this.createdAt=e,this.lastLoginAt=t,this._initializeTime()}_initializeTime(){this.lastSignInTime=rd(this.lastLoginAt),this.creationTime=rd(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Sg(n){var e;const t=n.auth,r=await n.getIdToken(),i=await Qd(n,oD(t,{idToken:r}));he(i==null?void 0:i.users.length,t,"internal-error");const s=i.users[0];n._notifyReloadListener(s);const o=!((e=s.providerUserInfo)===null||e===void 0)&&e.length?aD(s.providerUserInfo):[],a=qz(n.providerData,o),l=n.isAnonymous,c=!(n.email&&s.passwordHash)&&!(a!=null&&a.length),h=l?c:!1,d={uid:s.localId,displayName:s.displayName||null,photoURL:s.photoUrl||null,email:s.email||null,emailVerified:s.emailVerified||!1,phoneNumber:s.phoneNumber||null,tenantId:s.tenantId||null,providerData:a,metadata:new E_(s.createdAt,s.lastLoginAt),isAnonymous:h};Object.assign(n,d)}async function Qz(n){const e=St(n);await Sg(e),await e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)}function qz(n,e){return[...n.filter(r=>!e.some(i=>i.providerId===r.providerId)),...e]}function aD(n){return n.map(e=>{var{providerId:t}=e,r=LA(e,["providerId"]);return{providerId:t,uid:r.rawId||"",displayName:r.displayName||null,email:r.email||null,phoneNumber:r.phoneNumber||null,photoURL:r.photoUrl||null}})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Wz(n,e){const t=await iD(n,{},async()=>{const r=Nf({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:i,apiKey:s}=n.config,o=sD(n,i,"/v1/token",`key=${s}`),a=await n._getAdditionalHeaders();return a["Content-Type"]="application/x-www-form-urlencoded",rD.fetch()(o,{method:"POST",headers:a,body:r})});return{accessToken:t.access_token,expiresIn:t.expires_in,refreshToken:t.refresh_token}}async function Jz(n,e){return Ro(n,"POST","/v2/accounts:revokeToken",hl(n,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hu{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){he(e.idToken,"internal-error"),he(typeof e.idToken<"u","internal-error"),he(typeof e.refreshToken<"u","internal-error");const t="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):Hx(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,t)}updateFromIdToken(e){he(e.length!==0,"internal-error");const t=Hx(e);this.updateTokensAndExpiration(e,null,t)}async getToken(e,t=!1){return!t&&this.accessToken&&!this.isExpired?this.accessToken:(he(this.refreshToken,e,"user-token-expired"),this.refreshToken?(await this.refresh(e,this.refreshToken),this.accessToken):null)}clearRefreshToken(){this.refreshToken=null}async refresh(e,t){const{accessToken:r,refreshToken:i,expiresIn:s}=await Wz(e,t);this.updateTokensAndExpiration(r,i,Number(s))}updateTokensAndExpiration(e,t,r){this.refreshToken=t||null,this.accessToken=e||null,this.expirationTime=Date.now()+r*1e3}static fromJSON(e,t){const{refreshToken:r,accessToken:i,expirationTime:s}=t,o=new hu;return r&&(he(typeof r=="string","internal-error",{appName:e}),o.refreshToken=r),i&&(he(typeof i=="string","internal-error",{appName:e}),o.accessToken=i),s&&(he(typeof s=="number","internal-error",{appName:e}),o.expirationTime=s),o}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new hu,this.toJSON())}_performRefresh(){return Bi("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ms(n,e){he(typeof n=="string"||typeof n>"u","internal-error",{appName:e})}class Fi{constructor(e){var{uid:t,auth:r,stsTokenManager:i}=e,s=LA(e,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new Kz(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=t,this.auth=r,this.stsTokenManager=i,this.accessToken=i.accessToken,this.displayName=s.displayName||null,this.email=s.email||null,this.emailVerified=s.emailVerified||!1,this.phoneNumber=s.phoneNumber||null,this.photoURL=s.photoURL||null,this.isAnonymous=s.isAnonymous||!1,this.tenantId=s.tenantId||null,this.providerData=s.providerData?[...s.providerData]:[],this.metadata=new E_(s.createdAt||void 0,s.lastLoginAt||void 0)}async getIdToken(e){const t=await Qd(this,this.stsTokenManager.getToken(this.auth,e));return he(t,this.auth,"internal-error"),this.accessToken!==t&&(this.accessToken=t,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),t}getIdTokenResult(e){return Hz(this,e)}reload(){return Qz(this)}_assign(e){this!==e&&(he(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(t=>Object.assign({},t)),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){const t=new Fi(Object.assign(Object.assign({},this),{auth:e,stsTokenManager:this.stsTokenManager._clone()}));return t.metadata._copy(this.metadata),t}_onReload(e){he(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(e,t=!1){let r=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),r=!0),t&&await Sg(this),await this.auth._persistUserIfCurrent(this),r&&this.auth._notifyListenersIfCurrent(this)}async delete(){if(Vi(this.auth.app))return Promise.reject(co(this.auth));const e=await this.getIdToken();return await Qd(this,Gz(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>Object.assign({},e)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,t){var r,i,s,o,a,l,c,h;const d=(r=t.displayName)!==null&&r!==void 0?r:void 0,p=(i=t.email)!==null&&i!==void 0?i:void 0,g=(s=t.phoneNumber)!==null&&s!==void 0?s:void 0,A=(o=t.photoURL)!==null&&o!==void 0?o:void 0,v=(a=t.tenantId)!==null&&a!==void 0?a:void 0,x=(l=t._redirectEventId)!==null&&l!==void 0?l:void 0,w=(c=t.createdAt)!==null&&c!==void 0?c:void 0,E=(h=t.lastLoginAt)!==null&&h!==void 0?h:void 0,{uid:T,emailVerified:L,isAnonymous:F,providerData:M,stsTokenManager:b}=t;he(T&&b,e,"internal-error");const _=hu.fromJSON(this.name,b);he(typeof T=="string",e,"internal-error"),ms(d,e.name),ms(p,e.name),he(typeof L=="boolean",e,"internal-error"),he(typeof F=="boolean",e,"internal-error"),ms(g,e.name),ms(A,e.name),ms(v,e.name),ms(x,e.name),ms(w,e.name),ms(E,e.name);const S=new Fi({uid:T,auth:e,email:p,emailVerified:L,displayName:d,isAnonymous:F,photoURL:A,phoneNumber:g,tenantId:v,stsTokenManager:_,createdAt:w,lastLoginAt:E});return M&&Array.isArray(M)&&(S.providerData=M.map(P=>Object.assign({},P))),x&&(S._redirectEventId=x),S}static async _fromIdTokenResponse(e,t,r=!1){const i=new hu;i.updateFromServerResponse(t);const s=new Fi({uid:t.localId,auth:e,stsTokenManager:i,isAnonymous:r});return await Sg(s),s}static async _fromGetAccountInfoResponse(e,t,r){const i=t.users[0];he(i.localId!==void 0,"internal-error");const s=i.providerUserInfo!==void 0?aD(i.providerUserInfo):[],o=!(i.email&&i.passwordHash)&&!(s!=null&&s.length),a=new hu;a.updateFromIdToken(r);const l=new Fi({uid:i.localId,auth:e,stsTokenManager:a,isAnonymous:o}),c={uid:i.localId,displayName:i.displayName||null,photoURL:i.photoUrl||null,email:i.email||null,emailVerified:i.emailVerified||!1,phoneNumber:i.phoneNumber||null,tenantId:i.tenantId||null,providerData:s,metadata:new E_(i.createdAt,i.lastLoginAt),isAnonymous:!(i.email&&i.passwordHash)&&!(s!=null&&s.length)};return Object.assign(l,c),l}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const $x=new Map;function Ui(n){es(n instanceof Function,"Expected a class definition");let e=$x.get(n);return e?(es(e instanceof n,"Instance stored in cache mismatched with class"),e):(e=new n,$x.set(n,e),e)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lD{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(e,t){this.storage[e]=t}async _get(e){const t=this.storage[e];return t===void 0?null:t}async _remove(e){delete this.storage[e]}_addListener(e,t){}_removeListener(e,t){}}lD.type="NONE";const Kx=lD;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function _m(n,e,t){return`firebase:${n}:${e}:${t}`}class du{constructor(e,t,r){this.persistence=e,this.auth=t,this.userKey=r;const{config:i,name:s}=this.auth;this.fullUserKey=_m(this.userKey,i.apiKey,s),this.fullPersistenceKey=_m("persistence",i.apiKey,s),this.boundEventHandler=t._onStorageEvent.bind(t),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}async getCurrentUser(){const e=await this.persistence._get(this.fullUserKey);return e?Fi._fromJSON(this.auth,e):null}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(e){if(this.persistence===e)return;const t=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=e,t)return this.setCurrentUser(t)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(e,t,r="authUser"){if(!t.length)return new du(Ui(Kx),e,r);const i=(await Promise.all(t.map(async c=>{if(await c._isAvailable())return c}))).filter(c=>c);let s=i[0]||Ui(Kx);const o=_m(r,e.config.apiKey,e.name);let a=null;for(const c of t)try{const h=await c._get(o);if(h){const d=Fi._fromJSON(e,h);c!==s&&(a=d),s=c;break}}catch{}const l=i.filter(c=>c._shouldAllowMigration);return!s._shouldAllowMigration||!l.length?new du(s,e,r):(s=l[0],a&&await s._set(o,a.toJSON()),await Promise.all(t.map(async c=>{if(c!==s)try{await c._remove(o)}catch{}})),new du(s,e,r))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Qx(n){const e=n.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(dD(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(uD(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(pD(e))return"Blackberry";if(mD(e))return"Webos";if(cD(e))return"Safari";if((e.includes("chrome/")||hD(e))&&!e.includes("edge/"))return"Chrome";if(fD(e))return"Android";{const t=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,r=n.match(t);if((r==null?void 0:r.length)===2)return r[1]}return"Other"}function uD(n=wt()){return/firefox\//i.test(n)}function cD(n=wt()){const e=n.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function hD(n=wt()){return/crios\//i.test(n)}function dD(n=wt()){return/iemobile/i.test(n)}function fD(n=wt()){return/android/i.test(n)}function pD(n=wt()){return/blackberry/i.test(n)}function mD(n=wt()){return/webos/i.test(n)}function FA(n=wt()){return/iphone|ipad|ipod/i.test(n)||/macintosh/i.test(n)&&/mobile/i.test(n)}function Yz(n=wt()){var e;return FA(n)&&!!(!((e=window.navigator)===null||e===void 0)&&e.standalone)}function Xz(){return U6()&&document.documentMode===10}function gD(n=wt()){return FA(n)||fD(n)||mD(n)||pD(n)||/windows phone/i.test(n)||dD(n)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function yD(n,e=[]){let t;switch(n){case"Browser":t=Qx(wt());break;case"Worker":t=`${Qx(wt())}-${n}`;break;default:t=n}const r=e.length?e.join(","):"FirebaseCore-web";return`${t}/JsCore/${Vc}/${r}`}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Zz{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,t){const r=s=>new Promise((o,a)=>{try{const l=e(s);o(l)}catch(l){a(l)}});r.onAbort=t,this.queue.push(r);const i=this.queue.length-1;return()=>{this.queue[i]=()=>Promise.resolve()}}async runMiddleware(e){if(this.auth.currentUser===e)return;const t=[];try{for(const r of this.queue)await r(e),r.onAbort&&t.push(r.onAbort)}catch(r){t.reverse();for(const i of t)try{i()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:r==null?void 0:r.message})}}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function eG(n,e={}){return Ro(n,"GET","/v2/passwordPolicy",hl(n,e))}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const tG=6;class nG{constructor(e){var t,r,i,s;const o=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=(t=o.minPasswordLength)!==null&&t!==void 0?t:tG,o.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=o.maxPasswordLength),o.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=o.containsLowercaseCharacter),o.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=o.containsUppercaseCharacter),o.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=o.containsNumericCharacter),o.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=o.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=(i=(r=e.allowedNonAlphanumericCharacters)===null||r===void 0?void 0:r.join(""))!==null&&i!==void 0?i:"",this.forceUpgradeOnSignin=(s=e.forceUpgradeOnSignin)!==null&&s!==void 0?s:!1,this.schemaVersion=e.schemaVersion}validatePassword(e){var t,r,i,s,o,a;const l={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,l),this.validatePasswordCharacterOptions(e,l),l.isValid&&(l.isValid=(t=l.meetsMinPasswordLength)!==null&&t!==void 0?t:!0),l.isValid&&(l.isValid=(r=l.meetsMaxPasswordLength)!==null&&r!==void 0?r:!0),l.isValid&&(l.isValid=(i=l.containsLowercaseLetter)!==null&&i!==void 0?i:!0),l.isValid&&(l.isValid=(s=l.containsUppercaseLetter)!==null&&s!==void 0?s:!0),l.isValid&&(l.isValid=(o=l.containsNumericCharacter)!==null&&o!==void 0?o:!0),l.isValid&&(l.isValid=(a=l.containsNonAlphanumericCharacter)!==null&&a!==void 0?a:!0),l}validatePasswordLengthOptions(e,t){const r=this.customStrengthOptions.minPasswordLength,i=this.customStrengthOptions.maxPasswordLength;r&&(t.meetsMinPasswordLength=e.length>=r),i&&(t.meetsMaxPasswordLength=e.length<=i)}validatePasswordCharacterOptions(e,t){this.updatePasswordCharacterOptionsStatuses(t,!1,!1,!1,!1);let r;for(let i=0;i<e.length;i++)r=e.charAt(i),this.updatePasswordCharacterOptionsStatuses(t,r>="a"&&r<="z",r>="A"&&r<="Z",r>="0"&&r<="9",this.allowedNonAlphanumericCharacters.includes(r))}updatePasswordCharacterOptionsStatuses(e,t,r,i,s){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=t)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=r)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=i)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=s))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rG{constructor(e,t,r,i){this.app=e,this.heartbeatServiceProvider=t,this.appCheckServiceProvider=r,this.config=i,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new qx(this),this.idTokenSubscription=new qx(this),this.beforeStateQueue=new Zz(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=tD,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=i.sdkClientVersion}_initializeWithPersistence(e,t){return t&&(this._popupRedirectResolver=Ui(t)),this._initializationPromise=this.queue(async()=>{var r,i;if(!this._deleted&&(this.persistenceManager=await du.create(this,e),!this._deleted)){if(!((r=this._popupRedirectResolver)===null||r===void 0)&&r._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch{}await this.initializeCurrentUser(t),this.lastNotifiedUid=((i=this.currentUser)===null||i===void 0?void 0:i.uid)||null,!this._deleted&&(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const e=await this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!e)){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),await this.currentUser.getIdToken();return}await this._updateCurrentUser(e,!0)}}async initializeCurrentUserFromIdToken(e){try{const t=await oD(this,{idToken:e}),r=await Fi._fromGetAccountInfoResponse(this,t,e);await this.directlySetCurrentUser(r)}catch(t){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",t),await this.directlySetCurrentUser(null)}}async initializeCurrentUser(e){var t;if(Vi(this.app)){const o=this.app.settings.authIdToken;return o?new Promise(a=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(o).then(a,a))}):this.directlySetCurrentUser(null)}const r=await this.assertedPersistence.getCurrentUser();let i=r,s=!1;if(e&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const o=(t=this.redirectUser)===null||t===void 0?void 0:t._redirectEventId,a=i==null?void 0:i._redirectEventId,l=await this.tryRedirectSignIn(e);(!o||o===a)&&(l!=null&&l.user)&&(i=l.user,s=!0)}if(!i)return this.directlySetCurrentUser(null);if(!i._redirectEventId){if(s)try{await this.beforeStateQueue.runMiddleware(i)}catch(o){i=r,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(o))}return i?this.reloadAndSetCurrentUserOrClear(i):this.directlySetCurrentUser(null)}return he(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===i._redirectEventId?this.directlySetCurrentUser(i):this.reloadAndSetCurrentUserOrClear(i)}async tryRedirectSignIn(e){let t=null;try{t=await this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch{await this._setRedirectUser(null)}return t}async reloadAndSetCurrentUserOrClear(e){try{await Sg(e)}catch(t){if((t==null?void 0:t.code)!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)}useDeviceLanguage(){this.languageCode=Vz()}async _delete(){this._deleted=!0}async updateCurrentUser(e){if(Vi(this.app))return Promise.reject(co(this));const t=e?St(e):null;return t&&he(t.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(t&&t._clone(this))}async _updateCurrentUser(e,t=!1){if(!this._deleted)return e&&he(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),t||await this.beforeStateQueue.runMiddleware(e),this.queue(async()=>{await this.directlySetCurrentUser(e),this.notifyAuthListeners()})}async signOut(){return Vi(this.app)?Promise.reject(co(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(e){return Vi(this.app)?Promise.reject(co(this)):this.queue(async()=>{await this.assertedPersistence.setPersistence(Ui(e))})}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(e){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const t=this._getPasswordPolicyInternal();return t.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):t.validatePassword(e)}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const e=await eG(this),t=new nG(e);this.tenantId===null?this._projectPasswordPolicy=t:this._tenantPasswordPolicies[this.tenantId]=t}_getPersistence(){return this.assertedPersistence.persistence.type}_updateErrorMap(e){this._errorFactory=new kf("auth","Firebase",e())}onAuthStateChanged(e,t,r){return this.registerStateListener(this.authStateSubscription,e,t,r)}beforeAuthStateChanged(e,t){return this.beforeStateQueue.pushCallback(e,t)}onIdTokenChanged(e,t,r){return this.registerStateListener(this.idTokenSubscription,e,t,r)}authStateReady(){return new Promise((e,t)=>{if(this.currentUser)e();else{const r=this.onAuthStateChanged(()=>{r(),e()},t)}})}async revokeAccessToken(e){if(this.currentUser){const t=await this.currentUser.getIdToken(),r={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:t};this.tenantId!=null&&(r.tenantId=this.tenantId),await Jz(this,r)}}toJSON(){var e;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:(e=this._currentUser)===null||e===void 0?void 0:e.toJSON()}}async _setRedirectUser(e,t){const r=await this.getOrInitRedirectPersistenceManager(t);return e===null?r.removeCurrentUser():r.setCurrentUser(e)}async getOrInitRedirectPersistenceManager(e){if(!this.redirectPersistenceManager){const t=e&&Ui(e)||this._popupRedirectResolver;he(t,this,"argument-error"),this.redirectPersistenceManager=await du.create(this,[Ui(t._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(e){var t,r;return this._isInitialized&&await this.queue(async()=>{}),((t=this._currentUser)===null||t===void 0?void 0:t._redirectEventId)===e?this._currentUser:((r=this.redirectUser)===null||r===void 0?void 0:r._redirectEventId)===e?this.redirectUser:null}async _persistUserIfCurrent(e){if(e===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(e))}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var e,t;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const r=(t=(e=this.currentUser)===null||e===void 0?void 0:e.uid)!==null&&t!==void 0?t:null;this.lastNotifiedUid!==r&&(this.lastNotifiedUid=r,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,t,r,i){if(this._deleted)return()=>{};const s=typeof t=="function"?t:t.next.bind(t);let o=!1;const a=this._isInitialized?Promise.resolve():this._initializationPromise;if(he(a,this,"internal-error"),a.then(()=>{o||s(this.currentUser)}),typeof t=="function"){const l=e.addObserver(t,r,i);return()=>{o=!0,l()}}else{const l=e.addObserver(t);return()=>{o=!0,l()}}}async directlySetCurrentUser(e){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?await this.assertedPersistence.setCurrentUser(e):await this.assertedPersistence.removeCurrentUser()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return he(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=yD(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){var e;const t={"X-Client-Version":this.clientVersion};this.app.options.appId&&(t["X-Firebase-gmpid"]=this.app.options.appId);const r=await((e=this.heartbeatServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getHeartbeatsHeader());r&&(t["X-Firebase-Client"]=r);const i=await this._getAppCheckToken();return i&&(t["X-Firebase-AppCheck"]=i),t}async _getAppCheckToken(){var e;const t=await((e=this.appCheckServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getToken());return t!=null&&t.error&&Dz(`Error while retrieving App Check token: ${t.error}`),t==null?void 0:t.token}}function zc(n){return St(n)}class qx{constructor(e){this.auth=e,this.observer=null,this.addObserver=K6(t=>this.observer=t)}get next(){return he(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let jy={async loadJS(){throw new Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function iG(n){jy=n}function wD(n){return jy.loadJS(n)}function sG(){return jy.recaptchaEnterpriseScript}function oG(){return jy.gapiScript}function aG(n){return`__${n}${Math.floor(Math.random()*1e6)}`}const lG="recaptcha-enterprise",uG="NO_RECAPTCHA";class cG{constructor(e){this.type=lG,this.auth=zc(e)}async verify(e="verify",t=!1){async function r(s){if(!t){if(s.tenantId==null&&s._agentRecaptchaConfig!=null)return s._agentRecaptchaConfig.siteKey;if(s.tenantId!=null&&s._tenantRecaptchaConfigs[s.tenantId]!==void 0)return s._tenantRecaptchaConfigs[s.tenantId].siteKey}return new Promise(async(o,a)=>{zz(s,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}).then(l=>{if(l.recaptchaKey===void 0)a(new Error("recaptcha Enterprise site key undefined"));else{const c=new jz(l);return s.tenantId==null?s._agentRecaptchaConfig=c:s._tenantRecaptchaConfigs[s.tenantId]=c,o(c.siteKey)}}).catch(l=>{a(l)})})}function i(s,o,a){const l=window.grecaptcha;Gx(l)?l.enterprise.ready(()=>{l.enterprise.execute(s,{action:e}).then(c=>{o(c)}).catch(()=>{o(uG)})}):a(Error("No reCAPTCHA enterprise script loaded."))}return new Promise((s,o)=>{r(this.auth).then(a=>{if(!t&&Gx(window.grecaptcha))i(a,s,o);else{if(typeof window>"u"){o(new Error("RecaptchaVerifier is only supported in browser"));return}let l=sG();l.length!==0&&(l+=a),wD(l).then(()=>{i(a,s,o)}).catch(c=>{o(c)})}}).catch(a=>{o(a)})})}}async function Wx(n,e,t,r=!1){const i=new cG(n);let s;try{s=await i.verify(t)}catch{s=await i.verify(t,!0)}const o=Object.assign({},e);return r?Object.assign(o,{captchaResp:s}):Object.assign(o,{captchaResponse:s}),Object.assign(o,{clientType:"CLIENT_TYPE_WEB"}),Object.assign(o,{recaptchaVersion:"RECAPTCHA_ENTERPRISE"}),o}async function Jx(n,e,t,r){var i;if(!((i=n._getRecaptchaConfig())===null||i===void 0)&&i.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")){const s=await Wx(n,e,t,t==="getOobCode");return r(n,s)}else return r(n,e).catch(async s=>{if(s.code==="auth/missing-recaptcha-token"){console.log(`${t} is protected by reCAPTCHA Enterprise for this project. Automatically triggering the reCAPTCHA flow and restarting the flow.`);const o=await Wx(n,e,t,t==="getOobCode");return r(n,o)}else return Promise.reject(s)})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function hG(n,e){const t=HE(n,"auth");if(t.isInitialized()){const i=t.getImmediate(),s=t.getOptions();if(dg(s,e??{}))return i;Or(i,"already-initialized")}return t.initialize({options:e})}function dG(n,e){const t=(e==null?void 0:e.persistence)||[],r=(Array.isArray(t)?t:[t]).map(Ui);e!=null&&e.errorMap&&n._updateErrorMap(e.errorMap),n._initializeWithPersistence(r,e==null?void 0:e.popupRedirectResolver)}function fG(n,e,t){const r=zc(n);he(r._canInitEmulator,r,"emulator-config-failed"),he(/^https?:\/\//.test(e),r,"invalid-emulator-scheme");const i=!!(t!=null&&t.disableWarnings),s=vD(e),{host:o,port:a}=pG(e),l=a===null?"":`:${a}`;r.config.emulator={url:`${s}//${o}${l}/`},r.settings.appVerificationDisabledForTesting=!0,r.emulatorConfig=Object.freeze({host:o,port:a,protocol:s.replace(":",""),options:Object.freeze({disableWarnings:i})}),i||mG()}function vD(n){const e=n.indexOf(":");return e<0?"":n.substr(0,e+1)}function pG(n){const e=vD(n),t=/(\/\/)?([^?#/]+)/.exec(n.substr(e.length));if(!t)return{host:"",port:null};const r=t[2].split("@").pop()||"",i=/^(\[[^\]]+\])(:|$)/.exec(r);if(i){const s=i[1];return{host:s,port:Yx(r.substr(s.length+1))}}else{const[s,o]=r.split(":");return{host:s,port:Yx(o)}}}function Yx(n){if(!n)return null;const e=Number(n);return isNaN(e)?null:e}function mG(){function n(){const e=document.createElement("p"),t=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",t.position="fixed",t.width="100%",t.backgroundColor="#ffffff",t.border=".1em solid #000000",t.color="#b50000",t.bottom="0px",t.left="0px",t.margin="0px",t.zIndex="10000",t.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",n):n())}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class UA{constructor(e,t){this.providerId=e,this.signInMethod=t}toJSON(){return Bi("not implemented")}_getIdTokenResponse(e){return Bi("not implemented")}_linkToIdToken(e,t){return Bi("not implemented")}_getReauthenticationResolver(e){return Bi("not implemented")}}async function gG(n,e){return Ro(n,"POST","/v1/accounts:signUp",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function yG(n,e){return Uy(n,"POST","/v1/accounts:signInWithPassword",hl(n,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function wG(n,e){return Uy(n,"POST","/v1/accounts:signInWithEmailLink",hl(n,e))}async function vG(n,e){return Uy(n,"POST","/v1/accounts:signInWithEmailLink",hl(n,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qd extends UA{constructor(e,t,r,i=null){super("password",r),this._email=e,this._password=t,this._tenantId=i}static _fromEmailAndPassword(e,t){return new qd(e,t,"password")}static _fromEmailAndCode(e,t,r=null){return new qd(e,t,"emailLink",r)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(e){const t=typeof e=="string"?JSON.parse(e):e;if(t!=null&&t.email&&(t!=null&&t.password)){if(t.signInMethod==="password")return this._fromEmailAndPassword(t.email,t.password);if(t.signInMethod==="emailLink")return this._fromEmailAndCode(t.email,t.password,t.tenantId)}return null}async _getIdTokenResponse(e){switch(this.signInMethod){case"password":const t={returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return Jx(e,t,"signInWithPassword",yG);case"emailLink":return wG(e,{email:this._email,oobCode:this._password});default:Or(e,"internal-error")}}async _linkToIdToken(e,t){switch(this.signInMethod){case"password":const r={idToken:t,returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return Jx(e,r,"signUpPassword",gG);case"emailLink":return vG(e,{idToken:t,email:this._email,oobCode:this._password});default:Or(e,"internal-error")}}_getReauthenticationResolver(e){return this._getIdTokenResponse(e)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function fu(n,e){return Uy(n,"POST","/v1/accounts:signInWithIdp",hl(n,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const _G="http://localhost";class el extends UA{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(e){const t=new el(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(t.idToken=e.idToken),e.accessToken&&(t.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(t.nonce=e.nonce),e.pendingToken&&(t.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(t.accessToken=e.oauthToken,t.secret=e.oauthTokenSecret):Or("argument-error"),t}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(e){const t=typeof e=="string"?JSON.parse(e):e,{providerId:r,signInMethod:i}=t,s=LA(t,["providerId","signInMethod"]);if(!r||!i)return null;const o=new el(r,i);return o.idToken=s.idToken||void 0,o.accessToken=s.accessToken||void 0,o.secret=s.secret,o.nonce=s.nonce,o.pendingToken=s.pendingToken||null,o}_getIdTokenResponse(e){const t=this.buildRequest();return fu(e,t)}_linkToIdToken(e,t){const r=this.buildRequest();return r.idToken=t,fu(e,r)}_getReauthenticationResolver(e){const t=this.buildRequest();return t.autoCreate=!1,fu(e,t)}buildRequest(){const e={requestUri:_G,returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{const t={};this.idToken&&(t.id_token=this.idToken),this.accessToken&&(t.access_token=this.accessToken),this.secret&&(t.oauth_token_secret=this.secret),t.providerId=this.providerId,this.nonce&&!this.pendingToken&&(t.nonce=this.nonce),e.postBody=Nf(t)}return e}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function EG(n){switch(n){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}function AG(n){const e=Oh(Lh(n)).link,t=e?Oh(Lh(e)).deep_link_id:null,r=Oh(Lh(n)).deep_link_id;return(r?Oh(Lh(r)).link:null)||r||t||e||n}class jA{constructor(e){var t,r,i,s,o,a;const l=Oh(Lh(e)),c=(t=l.apiKey)!==null&&t!==void 0?t:null,h=(r=l.oobCode)!==null&&r!==void 0?r:null,d=EG((i=l.mode)!==null&&i!==void 0?i:null);he(c&&h&&d,"argument-error"),this.apiKey=c,this.operation=d,this.code=h,this.continueUrl=(s=l.continueUrl)!==null&&s!==void 0?s:null,this.languageCode=(o=l.languageCode)!==null&&o!==void 0?o:null,this.tenantId=(a=l.tenantId)!==null&&a!==void 0?a:null}static parseLink(e){const t=AG(e);try{return new jA(t)}catch{return null}}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Gc{constructor(){this.providerId=Gc.PROVIDER_ID}static credential(e,t){return qd._fromEmailAndPassword(e,t)}static credentialWithLink(e,t){const r=jA.parseLink(t);return he(r,"argument-error"),qd._fromEmailAndCode(e,r.code,r.tenantId)}}Gc.PROVIDER_ID="password";Gc.EMAIL_PASSWORD_SIGN_IN_METHOD="password";Gc.EMAIL_LINK_SIGN_IN_METHOD="emailLink";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _D{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zf extends _D{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ts extends zf{constructor(){super("facebook.com")}static credential(e){return el._fromParams({providerId:Ts.PROVIDER_ID,signInMethod:Ts.FACEBOOK_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return Ts.credentialFromTaggedObject(e)}static credentialFromError(e){return Ts.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return Ts.credential(e.oauthAccessToken)}catch{return null}}}Ts.FACEBOOK_SIGN_IN_METHOD="facebook.com";Ts.PROVIDER_ID="facebook.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bs extends zf{constructor(){super("google.com"),this.addScope("profile")}static credential(e,t){return el._fromParams({providerId:bs.PROVIDER_ID,signInMethod:bs.GOOGLE_SIGN_IN_METHOD,idToken:e,accessToken:t})}static credentialFromResult(e){return bs.credentialFromTaggedObject(e)}static credentialFromError(e){return bs.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthIdToken:t,oauthAccessToken:r}=e;if(!t&&!r)return null;try{return bs.credential(t,r)}catch{return null}}}bs.GOOGLE_SIGN_IN_METHOD="google.com";bs.PROVIDER_ID="google.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xs extends zf{constructor(){super("github.com")}static credential(e){return el._fromParams({providerId:xs.PROVIDER_ID,signInMethod:xs.GITHUB_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return xs.credentialFromTaggedObject(e)}static credentialFromError(e){return xs.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return xs.credential(e.oauthAccessToken)}catch{return null}}}xs.GITHUB_SIGN_IN_METHOD="github.com";xs.PROVIDER_ID="github.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ss extends zf{constructor(){super("twitter.com")}static credential(e,t){return el._fromParams({providerId:Ss.PROVIDER_ID,signInMethod:Ss.TWITTER_SIGN_IN_METHOD,oauthToken:e,oauthTokenSecret:t})}static credentialFromResult(e){return Ss.credentialFromTaggedObject(e)}static credentialFromError(e){return Ss.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthAccessToken:t,oauthTokenSecret:r}=e;if(!t||!r)return null;try{return Ss.credential(t,r)}catch{return null}}}Ss.TWITTER_SIGN_IN_METHOD="twitter.com";Ss.PROVIDER_ID="twitter.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Rc{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static async _fromIdTokenResponse(e,t,r,i=!1){const s=await Fi._fromIdTokenResponse(e,r,i),o=Xx(r);return new Rc({user:s,providerId:o,_tokenResponse:r,operationType:t})}static async _forOperation(e,t,r){await e._updateTokensIfNecessary(r,!0);const i=Xx(r);return new Rc({user:e,providerId:i,_tokenResponse:r,operationType:t})}}function Xx(n){return n.providerId?n.providerId:"phoneNumber"in n?"phone":null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Pg extends rs{constructor(e,t,r,i){var s;super(t.code,t.message),this.operationType=r,this.user=i,Object.setPrototypeOf(this,Pg.prototype),this.customData={appName:e.name,tenantId:(s=e.tenantId)!==null&&s!==void 0?s:void 0,_serverResponse:t.customData._serverResponse,operationType:r}}static _fromErrorAndOperation(e,t,r,i){return new Pg(e,t,r,i)}}function ED(n,e,t,r){return(e==="reauthenticate"?t._getReauthenticationResolver(n):t._getIdTokenResponse(n)).catch(s=>{throw s.code==="auth/multi-factor-auth-required"?Pg._fromErrorAndOperation(n,s,e,r):s})}async function IG(n,e,t=!1){const r=await Qd(n,e._linkToIdToken(n.auth,await n.getIdToken()),t);return Rc._forOperation(n,"link",r)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function TG(n,e,t=!1){const{auth:r}=n;if(Vi(r.app))return Promise.reject(co(r));const i="reauthenticate";try{const s=await Qd(n,ED(r,i,e,n),t);he(s.idToken,r,"internal-error");const o=BA(s.idToken);he(o,r,"internal-error");const{sub:a}=o;return he(n.uid===a,r,"user-mismatch"),Rc._forOperation(n,i,s)}catch(s){throw(s==null?void 0:s.code)==="auth/user-not-found"&&Or(r,"user-mismatch"),s}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function AD(n,e,t=!1){if(Vi(n.app))return Promise.reject(co(n));const r="signIn",i=await ED(n,r,e),s=await Rc._fromIdTokenResponse(n,r,i);return t||await n._updateCurrentUser(s.user),s}async function bG(n,e){return AD(zc(n),e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function xG(n){const e=zc(n);e._getPasswordPolicyInternal()&&await e._updatePasswordPolicy()}function SG(n,e,t){return Vi(n.app)?Promise.reject(co(n)):bG(St(n),Gc.credential(e,t)).catch(async r=>{throw r.code==="auth/password-does-not-meet-requirements"&&xG(n),r})}function PG(n,e,t,r){return St(n).onIdTokenChanged(e,t,r)}function RG(n,e,t){return St(n).beforeAuthStateChanged(e,t)}function ID(n,e,t,r){return St(n).onAuthStateChanged(e,t,r)}function CG(n){return St(n).signOut()}const Rg="__sak";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class TD{constructor(e,t){this.storageRetriever=e,this.type=t}_isAvailable(){try{return this.storage?(this.storage.setItem(Rg,"1"),this.storage.removeItem(Rg),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(e,t){return this.storage.setItem(e,JSON.stringify(t)),Promise.resolve()}_get(e){const t=this.storage.getItem(e);return Promise.resolve(t?JSON.parse(t):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const kG=1e3,NG=10;class bD extends TD{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(e,t)=>this.onStorageEvent(e,t),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=gD(),this._shouldAllowMigration=!0}forAllChangedKeys(e){for(const t of Object.keys(this.listeners)){const r=this.storage.getItem(t),i=this.localCache[t];r!==i&&e(t,i,r)}}onStorageEvent(e,t=!1){if(!e.key){this.forAllChangedKeys((o,a,l)=>{this.notifyListeners(o,l)});return}const r=e.key;t?this.detachListener():this.stopPolling();const i=()=>{const o=this.storage.getItem(r);!t&&this.localCache[r]===o||this.notifyListeners(r,o)},s=this.storage.getItem(r);Xz()&&s!==e.newValue&&e.newValue!==e.oldValue?setTimeout(i,NG):i()}notifyListeners(e,t){this.localCache[e]=t;const r=this.listeners[e];if(r)for(const i of Array.from(r))i(t&&JSON.parse(t))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((e,t,r)=>{this.onStorageEvent(new StorageEvent("storage",{key:e,oldValue:t,newValue:r}),!0)})},kG)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(e,t){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(t)}_removeListener(e,t){this.listeners[e]&&(this.listeners[e].delete(t),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}async _set(e,t){await super._set(e,t),this.localCache[e]=JSON.stringify(t)}async _get(e){const t=await super._get(e);return this.localCache[e]=JSON.stringify(t),t}async _remove(e){await super._remove(e),delete this.localCache[e]}}bD.type="LOCAL";const DG=bD;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xD extends TD{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(e,t){}_removeListener(e,t){}}xD.type="SESSION";const SD=xD;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function OG(n){return Promise.all(n.map(async e=>{try{return{fulfilled:!0,value:await e}}catch(t){return{fulfilled:!1,reason:t}}}))}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zy{constructor(e){this.eventTarget=e,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(e){const t=this.receivers.find(i=>i.isListeningto(e));if(t)return t;const r=new zy(e);return this.receivers.push(r),r}isListeningto(e){return this.eventTarget===e}async handleEvent(e){const t=e,{eventId:r,eventType:i,data:s}=t.data,o=this.handlersMap[i];if(!(o!=null&&o.size))return;t.ports[0].postMessage({status:"ack",eventId:r,eventType:i});const a=Array.from(o).map(async c=>c(t.origin,s)),l=await OG(a);t.ports[0].postMessage({status:"done",eventId:r,eventType:i,response:l})}_subscribe(e,t){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(t)}_unsubscribe(e,t){this.handlersMap[e]&&t&&this.handlersMap[e].delete(t),(!t||this.handlersMap[e].size===0)&&delete this.handlersMap[e],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}zy.receivers=[];/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function zA(n="",e=10){let t="";for(let r=0;r<e;r++)t+=Math.floor(Math.random()*10);return n+t}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class LG{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}async _send(e,t,r=50){const i=typeof MessageChannel<"u"?new MessageChannel:null;if(!i)throw new Error("connection_unavailable");let s,o;return new Promise((a,l)=>{const c=zA("",20);i.port1.start();const h=setTimeout(()=>{l(new Error("unsupported_event"))},r);o={messageChannel:i,onMessage(d){const p=d;if(p.data.eventId===c)switch(p.data.status){case"ack":clearTimeout(h),s=setTimeout(()=>{l(new Error("timeout"))},3e3);break;case"done":clearTimeout(s),a(p.data.response);break;default:clearTimeout(h),clearTimeout(s),l(new Error("invalid_response"));break}}},this.handlers.add(o),i.port1.addEventListener("message",o.onMessage),this.target.postMessage({eventType:e,eventId:c,data:t},[i.port2])}).finally(()=>{o&&this.removeMessageHandler(o)})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function oi(){return window}function VG(n){oi().location.href=n}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function PD(){return typeof oi().WorkerGlobalScope<"u"&&typeof oi().importScripts=="function"}async function MG(){if(!(navigator!=null&&navigator.serviceWorker))return null;try{return(await navigator.serviceWorker.ready).active}catch{return null}}function BG(){var n;return((n=navigator==null?void 0:navigator.serviceWorker)===null||n===void 0?void 0:n.controller)||null}function FG(){return PD()?self:null}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const RD="firebaseLocalStorageDb",UG=1,Cg="firebaseLocalStorage",CD="fbase_key";class Gf{constructor(e){this.request=e}toPromise(){return new Promise((e,t)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{t(this.request.error)})})}}function Gy(n,e){return n.transaction([Cg],e?"readwrite":"readonly").objectStore(Cg)}function jG(){const n=indexedDB.deleteDatabase(RD);return new Gf(n).toPromise()}function A_(){const n=indexedDB.open(RD,UG);return new Promise((e,t)=>{n.addEventListener("error",()=>{t(n.error)}),n.addEventListener("upgradeneeded",()=>{const r=n.result;try{r.createObjectStore(Cg,{keyPath:CD})}catch(i){t(i)}}),n.addEventListener("success",async()=>{const r=n.result;r.objectStoreNames.contains(Cg)?e(r):(r.close(),await jG(),e(await A_()))})})}async function Zx(n,e,t){const r=Gy(n,!0).put({[CD]:e,value:t});return new Gf(r).toPromise()}async function zG(n,e){const t=Gy(n,!1).get(e),r=await new Gf(t).toPromise();return r===void 0?null:r.value}function eS(n,e){const t=Gy(n,!0).delete(e);return new Gf(t).toPromise()}const GG=800,HG=3;class kD{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db?this.db:(this.db=await A_(),this.db)}async _withRetries(e){let t=0;for(;;)try{const r=await this._openDb();return await e(r)}catch(r){if(t++>HG)throw r;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return PD()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=zy._getInstance(FG()),this.receiver._subscribe("keyChanged",async(e,t)=>({keyProcessed:(await this._poll()).includes(t.key)})),this.receiver._subscribe("ping",async(e,t)=>["keyChanged"])}async initializeSender(){var e,t;if(this.activeServiceWorker=await MG(),!this.activeServiceWorker)return;this.sender=new LG(this.activeServiceWorker);const r=await this.sender._send("ping",{},800);r&&!((e=r[0])===null||e===void 0)&&e.fulfilled&&!((t=r[0])===null||t===void 0)&&t.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(e){if(!(!this.sender||!this.activeServiceWorker||BG()!==this.activeServiceWorker))try{await this.sender._send("keyChanged",{key:e},this.serviceWorkerReceiverAvailable?800:50)}catch{}}async _isAvailable(){try{if(!indexedDB)return!1;const e=await A_();return await Zx(e,Rg,"1"),await eS(e,Rg),!0}catch{}return!1}async _withPendingWrite(e){this.pendingWrites++;try{await e()}finally{this.pendingWrites--}}async _set(e,t){return this._withPendingWrite(async()=>(await this._withRetries(r=>Zx(r,e,t)),this.localCache[e]=t,this.notifyServiceWorker(e)))}async _get(e){const t=await this._withRetries(r=>zG(r,e));return this.localCache[e]=t,t}async _remove(e){return this._withPendingWrite(async()=>(await this._withRetries(t=>eS(t,e)),delete this.localCache[e],this.notifyServiceWorker(e)))}async _poll(){const e=await this._withRetries(i=>{const s=Gy(i,!1).getAll();return new Gf(s).toPromise()});if(!e)return[];if(this.pendingWrites!==0)return[];const t=[],r=new Set;if(e.length!==0)for(const{fbase_key:i,value:s}of e)r.add(i),JSON.stringify(this.localCache[i])!==JSON.stringify(s)&&(this.notifyListeners(i,s),t.push(i));for(const i of Object.keys(this.localCache))this.localCache[i]&&!r.has(i)&&(this.notifyListeners(i,null),t.push(i));return t}notifyListeners(e,t){this.localCache[e]=t;const r=this.listeners[e];if(r)for(const i of Array.from(r))i(t)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),GG)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(e,t){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(t)}_removeListener(e,t){this.listeners[e]&&(this.listeners[e].delete(t),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&this.stopPolling()}}kD.type="LOCAL";const $G=kD;new jf(3e4,6e4);/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function KG(n,e){return e?Ui(e):(he(n._popupRedirectResolver,n,"argument-error"),n._popupRedirectResolver)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class GA extends UA{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return fu(e,this._buildIdpRequest())}_linkToIdToken(e,t){return fu(e,this._buildIdpRequest(t))}_getReauthenticationResolver(e){return fu(e,this._buildIdpRequest())}_buildIdpRequest(e){const t={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(t.idToken=e),t}}function QG(n){return AD(n.auth,new GA(n),n.bypassAuthState)}function qG(n){const{auth:e,user:t}=n;return he(t,e,"internal-error"),TG(t,new GA(n),n.bypassAuthState)}async function WG(n){const{auth:e,user:t}=n;return he(t,e,"internal-error"),IG(t,new GA(n),n.bypassAuthState)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ND{constructor(e,t,r,i,s=!1){this.auth=e,this.resolver=r,this.user=i,this.bypassAuthState=s,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(t)?t:[t]}execute(){return new Promise(async(e,t)=>{this.pendingPromise={resolve:e,reject:t};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(r){this.reject(r)}})}async onAuthEvent(e){const{urlResponse:t,sessionId:r,postBody:i,tenantId:s,error:o,type:a}=e;if(o){this.reject(o);return}const l={auth:this.auth,requestUri:t,sessionId:r,tenantId:s||void 0,postBody:i||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(a)(l))}catch(c){this.reject(c)}}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return QG;case"linkViaPopup":case"linkViaRedirect":return WG;case"reauthViaPopup":case"reauthViaRedirect":return qG;default:Or(this.auth,"internal-error")}}resolve(e){es(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){es(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const JG=new jf(2e3,1e4);class Wl extends ND{constructor(e,t,r,i,s){super(e,t,i,s),this.provider=r,this.authWindow=null,this.pollId=null,Wl.currentPopupAction&&Wl.currentPopupAction.cancel(),Wl.currentPopupAction=this}async executeNotNull(){const e=await this.execute();return he(e,this.auth,"internal-error"),e}async onExecution(){es(this.filter.length===1,"Popup operations only handle one event");const e=zA();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],e),this.authWindow.associatedEvent=e,this.resolver._originValidation(this.auth).catch(t=>{this.reject(t)}),this.resolver._isIframeWebStorageSupported(this.auth,t=>{t||this.reject(si(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){var e;return((e=this.authWindow)===null||e===void 0?void 0:e.associatedEvent)||null}cancel(){this.reject(si(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,Wl.currentPopupAction=null}pollUserCancellation(){const e=()=>{var t,r;if(!((r=(t=this.authWindow)===null||t===void 0?void 0:t.window)===null||r===void 0)&&r.closed){this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(si(this.auth,"popup-closed-by-user"))},8e3);return}this.pollId=window.setTimeout(e,JG.get())};e()}}Wl.currentPopupAction=null;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const YG="pendingRedirect",Em=new Map;class XG extends ND{constructor(e,t,r=!1){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],t,void 0,r),this.eventId=null}async execute(){let e=Em.get(this.auth._key());if(!e){try{const r=await ZG(this.resolver,this.auth)?await super.execute():null;e=()=>Promise.resolve(r)}catch(t){e=()=>Promise.reject(t)}Em.set(this.auth._key(),e)}return this.bypassAuthState||Em.set(this.auth._key(),()=>Promise.resolve(null)),e()}async onAuthEvent(e){if(e.type==="signInViaRedirect")return super.onAuthEvent(e);if(e.type==="unknown"){this.resolve(null);return}if(e.eventId){const t=await this.auth._redirectUserForId(e.eventId);if(t)return this.user=t,super.onAuthEvent(e);this.resolve(null)}}async onExecution(){}cleanUp(){}}async function ZG(n,e){const t=n7(e),r=t7(n);if(!await r._isAvailable())return!1;const i=await r._get(t)==="true";return await r._remove(t),i}function e7(n,e){Em.set(n._key(),e)}function t7(n){return Ui(n._redirectPersistence)}function n7(n){return _m(YG,n.config.apiKey,n.name)}async function r7(n,e,t=!1){if(Vi(n.app))return Promise.reject(co(n));const r=zc(n),i=KG(r,e),o=await new XG(r,i,t).execute();return o&&!t&&(delete o.user._redirectEventId,await r._persistUserIfCurrent(o.user),await r._setRedirectUser(null,e)),o}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const i7=10*60*1e3;class s7{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let t=!1;return this.consumers.forEach(r=>{this.isEventForConsumer(e,r)&&(t=!0,this.sendToConsumer(e,r),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!o7(e)||(this.hasHandledPotentialRedirect=!0,t||(this.queuedRedirectEvent=e,t=!0)),t}sendToConsumer(e,t){var r;if(e.error&&!DD(e)){const i=((r=e.error.code)===null||r===void 0?void 0:r.split("auth/")[1])||"internal-error";t.onError(si(this.auth,i))}else t.onAuthEvent(e)}isEventForConsumer(e,t){const r=t.eventId===null||!!e.eventId&&e.eventId===t.eventId;return t.filter.includes(e.type)&&r}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=i7&&this.cachedEventUids.clear(),this.cachedEventUids.has(tS(e))}saveEventToCache(e){this.cachedEventUids.add(tS(e)),this.lastProcessedEventTime=Date.now()}}function tS(n){return[n.type,n.eventId,n.sessionId,n.tenantId].filter(e=>e).join("-")}function DD({type:n,error:e}){return n==="unknown"&&(e==null?void 0:e.code)==="auth/no-auth-event"}function o7(n){switch(n.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return DD(n);default:return!1}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function a7(n,e={}){return Ro(n,"GET","/v1/projects",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const l7=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,u7=/^https?/;async function c7(n){if(n.config.emulator)return;const{authorizedDomains:e}=await a7(n);for(const t of e)try{if(h7(t))return}catch{}Or(n,"unauthorized-domain")}function h7(n){const e=__(),{protocol:t,hostname:r}=new URL(e);if(n.startsWith("chrome-extension://")){const o=new URL(n);return o.hostname===""&&r===""?t==="chrome-extension:"&&n.replace("chrome-extension://","")===e.replace("chrome-extension://",""):t==="chrome-extension:"&&o.hostname===r}if(!u7.test(t))return!1;if(l7.test(n))return r===n;const i=n.replace(/\./g,"\\.");return new RegExp("^(.+\\."+i+"|"+i+")$","i").test(r)}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const d7=new jf(3e4,6e4);function nS(){const n=oi().___jsl;if(n!=null&&n.H){for(const e of Object.keys(n.H))if(n.H[e].r=n.H[e].r||[],n.H[e].L=n.H[e].L||[],n.H[e].r=[...n.H[e].L],n.CP)for(let t=0;t<n.CP.length;t++)n.CP[t]=null}}function f7(n){return new Promise((e,t)=>{var r,i,s;function o(){nS(),gapi.load("gapi.iframes",{callback:()=>{e(gapi.iframes.getContext())},ontimeout:()=>{nS(),t(si(n,"network-request-failed"))},timeout:d7.get()})}if(!((i=(r=oi().gapi)===null||r===void 0?void 0:r.iframes)===null||i===void 0)&&i.Iframe)e(gapi.iframes.getContext());else if(!((s=oi().gapi)===null||s===void 0)&&s.load)o();else{const a=aG("iframefcb");return oi()[a]=()=>{gapi.load?o():t(si(n,"network-request-failed"))},wD(`${oG()}?onload=${a}`).catch(l=>t(l))}}).catch(e=>{throw Am=null,e})}let Am=null;function p7(n){return Am=Am||f7(n),Am}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const m7=new jf(5e3,15e3),g7="__/auth/iframe",y7="emulator/auth/iframe",w7={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},v7=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function _7(n){const e=n.config;he(e.authDomain,n,"auth-domain-config-required");const t=e.emulator?MA(e,y7):`https://${n.config.authDomain}/${g7}`,r={apiKey:e.apiKey,appName:n.name,v:Vc},i=v7.get(n.config.apiHost);i&&(r.eid=i);const s=n._getFrameworks();return s.length&&(r.fw=s.join(",")),`${t}?${Nf(r).slice(1)}`}async function E7(n){const e=await p7(n),t=oi().gapi;return he(t,n,"internal-error"),e.open({where:document.body,url:_7(n),messageHandlersFilter:t.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:w7,dontclear:!0},r=>new Promise(async(i,s)=>{await r.restyle({setHideOnLeave:!1});const o=si(n,"network-request-failed"),a=oi().setTimeout(()=>{s(o)},m7.get());function l(){oi().clearTimeout(a),i(r)}r.ping(l).then(l,()=>{s(o)})}))}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const A7={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},I7=500,T7=600,b7="_blank",x7="http://localhost";class rS{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}function S7(n,e,t,r=I7,i=T7){const s=Math.max((window.screen.availHeight-i)/2,0).toString(),o=Math.max((window.screen.availWidth-r)/2,0).toString();let a="";const l=Object.assign(Object.assign({},A7),{width:r.toString(),height:i.toString(),top:s,left:o}),c=wt().toLowerCase();t&&(a=hD(c)?b7:t),uD(c)&&(e=e||x7,l.scrollbars="yes");const h=Object.entries(l).reduce((p,[g,A])=>`${p}${g}=${A},`,"");if(Yz(c)&&a!=="_self")return P7(e||"",a),new rS(null);const d=window.open(e||"",a,h);he(d,n,"popup-blocked");try{d.focus()}catch{}return new rS(d)}function P7(n,e){const t=document.createElement("a");t.href=n,t.target=e;const r=document.createEvent("MouseEvent");r.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),t.dispatchEvent(r)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const R7="__/auth/handler",C7="emulator/auth/handler",k7=encodeURIComponent("fac");async function iS(n,e,t,r,i,s){he(n.config.authDomain,n,"auth-domain-config-required"),he(n.config.apiKey,n,"invalid-api-key");const o={apiKey:n.config.apiKey,appName:n.name,authType:t,redirectUrl:r,v:Vc,eventId:i};if(e instanceof _D){e.setDefaultLanguage(n.languageCode),o.providerId=e.providerId||"",$6(e.getCustomParameters())||(o.customParameters=JSON.stringify(e.getCustomParameters()));for(const[h,d]of Object.entries(s||{}))o[h]=d}if(e instanceof zf){const h=e.getScopes().filter(d=>d!=="");h.length>0&&(o.scopes=h.join(","))}n.tenantId&&(o.tid=n.tenantId);const a=o;for(const h of Object.keys(a))a[h]===void 0&&delete a[h];const l=await n._getAppCheckToken(),c=l?`#${k7}=${encodeURIComponent(l)}`:"";return`${N7(n)}?${Nf(a).slice(1)}${c}`}function N7({config:n}){return n.emulator?MA(n,C7):`https://${n.authDomain}/${R7}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const fw="webStorageSupport";class D7{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=SD,this._completeRedirectFn=r7,this._overrideRedirectResult=e7}async _openPopup(e,t,r,i){var s;es((s=this.eventManagers[e._key()])===null||s===void 0?void 0:s.manager,"_initialize() not called before _openPopup()");const o=await iS(e,t,r,__(),i);return S7(e,o,zA())}async _openRedirect(e,t,r,i){await this._originValidation(e);const s=await iS(e,t,r,__(),i);return VG(s),new Promise(()=>{})}_initialize(e){const t=e._key();if(this.eventManagers[t]){const{manager:i,promise:s}=this.eventManagers[t];return i?Promise.resolve(i):(es(s,"If manager is not set, promise should be"),s)}const r=this.initAndGetManager(e);return this.eventManagers[t]={promise:r},r.catch(()=>{delete this.eventManagers[t]}),r}async initAndGetManager(e){const t=await E7(e),r=new s7(e);return t.register("authEvent",i=>(he(i==null?void 0:i.authEvent,e,"invalid-auth-event"),{status:r.onEvent(i.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:r},this.iframes[e._key()]=t,r}_isIframeWebStorageSupported(e,t){this.iframes[e._key()].send(fw,{type:fw},i=>{var s;const o=(s=i==null?void 0:i[0])===null||s===void 0?void 0:s[fw];o!==void 0&&t(!!o),Or(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){const t=e._key();return this.originValidationPromises[t]||(this.originValidationPromises[t]=c7(e)),this.originValidationPromises[t]}get _shouldInitProactively(){return gD()||cD()||FA()}}const O7=D7;var sS="@firebase/auth",oS="1.7.9";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class L7{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){var e;return this.assertAuthConfigured(),((e=this.auth.currentUser)===null||e===void 0?void 0:e.uid)||null}async getToken(e){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(e)}:null}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;const t=this.auth.onIdTokenChanged(r=>{e((r==null?void 0:r.stsTokenManager.accessToken)||null)});this.internalListeners.set(e,t),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();const t=this.internalListeners.get(e);t&&(this.internalListeners.delete(e),t(),this.updateProactiveRefresh())}assertAuthConfigured(){he(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function V7(n){switch(n){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function M7(n){vc(new Ha("auth",(e,{options:t})=>{const r=e.getProvider("app").getImmediate(),i=e.getProvider("heartbeat"),s=e.getProvider("app-check-internal"),{apiKey:o,authDomain:a}=r.options;he(o&&!o.includes(":"),"invalid-api-key",{appName:r.name});const l={apiKey:o,authDomain:a,clientPlatform:n,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:yD(n)},c=new rG(r,i,s,l);return dG(c,t),c},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,t,r)=>{e.getProvider("auth-internal").initialize()})),vc(new Ha("auth-internal",e=>{const t=zc(e.getProvider("auth").getImmediate());return(r=>new L7(r))(t)},"PRIVATE").setInstantiationMode("EXPLICIT")),ao(sS,oS,V7(n)),ao(sS,oS,"esm2017")}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const B7=5*60,F7=Fk("authIdTokenMaxAge")||B7;let aS=null;const U7=n=>async e=>{const t=e&&await e.getIdTokenResult(),r=t&&(new Date().getTime()-Date.parse(t.issuedAtTime))/1e3;if(r&&r>F7)return;const i=t==null?void 0:t.token;aS!==i&&(aS=i,await fetch(n,{method:i?"POST":"DELETE",headers:i?{Authorization:`Bearer ${i}`}:{}}))};function j7(n=$k()){const e=HE(n,"auth");if(e.isInitialized())return e.getImmediate();const t=hG(n,{popupRedirectResolver:O7,persistence:[$G,DG,SD]}),r=Fk("authTokenSyncURL");if(r&&typeof isSecureContext=="boolean"&&isSecureContext){const s=new URL(r,location.origin);if(location.origin===s.origin){const o=U7(s.toString());RG(t,o,()=>o(t.currentUser)),PG(t,a=>o(a))}}const i=Mk("auth");return i&&fG(t,`http://${i}`),t}function z7(){var n,e;return(e=(n=document.getElementsByTagName("head"))===null||n===void 0?void 0:n[0])!==null&&e!==void 0?e:document}iG({loadJS(n){return new Promise((e,t)=>{const r=document.createElement("script");r.setAttribute("src",n),r.onload=e,r.onerror=i=>{const s=si("internal-error");s.customData=i,t(s)},r.type="text/javascript",r.charset="UTF-8",z7().appendChild(r)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});M7("Browser");const G7={apiKey:"AIzaSyCA54gUoSLB5yGJvDc18SyTwbZhYTeImhE",authDomain:"kingbob-presale.firebaseapp.com",projectId:"kingbob-presale",storageBucket:"kingbob-presale.appspot.com",messagingSenderId:"619526393437",appId:"1:619526393437:web:a3676355b559d82aff07b4"},OD=Hk(G7),pn=hz(OD),H7=window.location.hostname.includes("192.168.")||window.location.hostname.includes("localhost")||window.location.hostname.includes("127.0.0.1")||window.location.hostname.includes("netlify.app"),$7=async()=>{try{if(H7)console.log("Running on local network, configuring Firestore for insecure context"),await mz(pn),await pz(pn);else try{await dz(pn),console.log("Firestore persistence enabled")}catch(n){n.code==="failed-precondition"?console.warn("Multiple tabs open, persistence can only be enabled in one tab at a time."):n.code==="unimplemented"&&console.warn("The current browser does not support all of the features required to enable persistence")}}catch(n){console.error("Error initializing Firestore:",n)}},Im=j7(OD),li="users",K7="0x1664a66d105B93d44F3B107a370648A5Bf68f0a5",Q7=["function buyPackage(string packageId) external payable","function getPackage(string packageId) external view returns (uint256 price, uint256 tokenAmount, uint256 refillCount)","function refill(string packageId) external","function getTokenBalance(address user) external view returns (uint256)","function getRefillCount(address user) external view returns (uint256)","function getReferral(address user) external view returns (address)","function getClaimStatus(address user) external view returns (bool)","function referrals(address referrer) external view returns (uint256)","function claim() external","function setClaimStatus(address user, bool status) external","function setGlobalClaimStatus(bool status) external","function getGlobalClaimStatus() external view returns (bool)"],Hc=n=>new uu(K7,Q7,n),q7=async(n,e,t,r)=>{const i=Hc(n);return r&&r!=="0x0000000000000000000000000000000000000000"&&console.log(`Using referrer: ${r}`),await(await i.buyPackage(e,{value:h4(t)})).wait()},W7=async(n,e)=>{const r=await Hc(n).getTokenBalance(e);return ZR(r,18)},J7=async(n,e)=>(await Hc(n).getRefillCount(e)).toString(),LD=async(n,e)=>await Hc(n).getClaimStatus(e),VD=async n=>await Hc(n).getGlobalClaimStatus(),Y7=async n=>await(await Hc(n).claim()).wait(),MD=[{id:"basic",name:"Basic",priceUSD:100,priceBNB:"0.25",tokenAmount:1e3,refillCount:0},{id:"standard",name:"Standard",priceUSD:200,priceBNB:"0.5",tokenAmount:2200,refillCount:4},{id:"premium",name:"Premium",priceUSD:500,priceBNB:"1.25",tokenAmount:6e3,refillCount:0},{id:"royal",name:"Royal",priceUSD:1e3,priceBNB:"2.5",tokenAmount:13e3,refillCount:0}],BD=()=>25e-5,I_=200,dl=()=>{if(window.ethereum)return new qv(window.ethereum);throw new Error("MetaMask not detected")},X7=async()=>{if(!window.ethereum)throw console.error("MetaMask not detected"),alert("MetaMask is not installed! Please install MetaMask to connect your wallet."),new Error("MetaMask not detected");try{console.log("Requesting accounts...");const n=await window.ethereum.request({method:"eth_requestAccounts"});if(!n||n.length===0)throw new Error("No accounts found. Please unlock your MetaMask and try again.");const e=n[0];console.log("Connected wallet address:",e);const t=Hi(pn,li,e);if(!(await Za(t)).exists()){const s=new URLSearchParams(window.location.search).get("ref");if(await OA(t,{address:e,referrer:s||null,tokenBalance:0,package:null,refillCount:0,refillsUsed:0,referralRewards:0,referralCount:0,claimEnabled:!1,createdAt:new Date().toISOString()}),s){const o=Hi(pn,li,s),a=await Za(o);if(a.exists()){const l=a.data().referralCount||0,c=a.data().referralRewards||0;await Fy(o,{referralRewards:c+I_,referralCount:l+1})}}}return e}catch(n){throw console.error("Error connecting wallet:",n),n}},Z7=async n=>{const t=await dl().getBalance(n);return c4(t)},eH=async n=>{try{const e=dl();return await W7(e,n)}catch(e){return console.error("Error getting token balance:",e),"0"}},tH=async n=>{try{const e=dl();return await J7(e,n)}catch(e){return console.error("Error getting refill count:",e),"0"}},nH=async n=>{try{const e=dl();return await LD(e,n)}catch(e){return console.error("Error getting claim status:",e),!1}},rH=async(n,e)=>{const t=MD.find(s=>s.id===n);if(!t)throw new Error("Invalid package");const i=await dl().getSigner();try{const o=new URLSearchParams(window.location.search).get("ref");console.log(`Purchasing package ${n} for ${t.priceBNB} BNB`);const a=await q7(i,n,t.priceBNB,o||void 0);console.log("Purchase transaction successful:",a.hash);const l=Hi(pn,li,e);return(await Za(l)).exists()?await Fy(l,{package:n,purchasedAt:new Date().toISOString(),txHash:a.hash}):await OA(l,{address:e,package:n,purchasedAt:new Date().toISOString(),txHash:a.hash}),a.hash}catch(s){throw console.error("Error purchasing package:",s),s}},iH=async n=>{if(!window.ethereum)throw new Error("MetaMask not detected");try{const e=Hi(pn,li,n);if(!(await Za(e)).exists())throw new Error("User not found");const r=dl();if(!await VD(r))throw new Error("Claiming is not enabled yet");if(await LD(r,n))throw new Error("You have already claimed your tokens");const o=await r.getSigner();console.log("Claiming tokens for address:",n);const a=await Y7(o);return console.log("Claim transaction successful:",a.hash),await Fy(e,{claimedAt:new Date().toISOString(),claimTxHash:a.hash}),{success:!0,message:"Tokens claimed successfully",txHash:a.hash}}catch(e){throw console.error("Error claiming tokens:",e),e}},sH=async()=>{try{const n=dl();return await VD(n)}catch(n){return console.error("Error checking claim status:",n),!1}},oH=({onConnect:n})=>{const[e,t]=G.useState(""),[r,i]=G.useState(""),[s,o]=G.useState(!1),[a,l]=G.useState("");G.useEffect(()=>((async()=>{try{if(!window.ethereum){console.log("MetaMask not detected");return}if(window.ethereum.selectedAddress){const p=window.ethereum.selectedAddress;console.log("Already connected to wallet:",p),t(p),n(p),c(p)}window.ethereum.on("accountsChanged",p=>{console.log("Account changed:",p),p.length===0?(t(""),i("")):(t(p[0]),n(p[0]),c(p[0]))})}catch(p){console.error("Error checking wallet connection:",p)}})(),()=>{window.ethereum&&window.ethereum.removeListener&&window.ethereum.removeListener("accountsChanged",()=>{})}),[n]);const c=async d=>{try{const p=await Z7(d);i(parseFloat(p).toFixed(4))}catch(p){console.error("Error fetching balance:",p)}},h=async()=>{o(!0),l("");try{if(!window.ethereum)throw new Error("MetaMask not installed. Please install MetaMask to connect your wallet.");console.log("Attempting to connect wallet...");const d=await X7();if(!d)throw new Error("No wallet address returned. Please check your MetaMask extension.");console.log("Successfully connected to wallet:",d),t(d),n(d),c(d)}catch(d){console.error("Wallet connection error:",d),l(d.message||"Failed to connect wallet"),d.message.includes("MetaMask not detected")?alert("MetaMask is not installed! Please install the MetaMask browser extension to connect your wallet."):d.message.includes("User rejected")&&l("Connection request rejected. Please try again.")}finally{o(!1)}};return C.jsxs("div",{className:"flex flex-col items-center",children:[e?C.jsx("div",{className:"flex flex-col items-center",children:C.jsxs("div",{className:"bg-gradient-to-r from-red-900 to-yellow-600 text-white px-4 py-2 rounded-full shadow-lg",children:[C.jsxs("span",{className:"font-bold",children:[e.slice(0,6),"...",e.slice(-4)]}),r&&C.jsxs("span",{className:"ml-2 text-yellow-200",children:[r," BNB"]})]})}):C.jsx("button",{onClick:h,disabled:s,className:"bg-gradient-to-r from-red-800 to-yellow-500 text-white font-bold py-2 px-6 rounded-full shadow-lg hover:from-red-700 hover:to-yellow-400 transition-all duration-300 transform hover:scale-105 disabled:opacity-70",children:s?"Connecting...":"Connect Wallet"}),a&&C.jsx("div",{className:"text-red-500 mt-2 text-sm",children:a})]})},aH=({onConnect:n})=>C.jsxs("section",{className:"relative py-20 overflow-hidden",children:[C.jsx("div",{className:"absolute inset-0 bg-gradient-to-br from-red-900 via-red-800 to-yellow-700 opacity-90"}),C.jsx("div",{className:"absolute inset-0 bg-[url('/crown-pattern.png')] bg-repeat opacity-10"}),C.jsxs("div",{className:"relative max-w-6xl mx-auto px-4 z-10",children:[C.jsxs("div",{className:"flex flex-col md:flex-row items-center justify-between",children:[C.jsxs("div",{className:"md:w-1/2 mb-10 md:mb-0 text-center md:text-left",children:[C.jsxs("h1",{className:"text-4xl md:text-5xl lg:text-6xl font-bold text-white mb-6",children:[C.jsx("span",{className:"block",children:"KINGBOB Presale"}),C.jsx("span",{className:"block text-yellow-300",children:"Token Launch"})]}),C.jsx("p",{className:"text-xl text-yellow-100 mb-8 max-w-lg",children:"Secure your position in our exclusive presale. Connect your wallet and choose your royal package today."}),C.jsxs("div",{className:"flex justify-center md:justify-start space-x-4",children:[C.jsx(oH,{onConnect:n}),C.jsx("button",{onClick:()=>{var e;return(e=document.getElementById("packages"))==null?void 0:e.scrollIntoView({behavior:"smooth"})},className:"bg-white text-red-800 font-bold py-2 px-6 rounded-full shadow-lg hover:bg-yellow-100 transition-all duration-300 transform hover:scale-105",children:"View Packages"})]})]}),C.jsx("div",{className:"md:w-1/2 flex justify-center md:justify-end",children:C.jsxs("div",{className:"relative",children:[C.jsx("div",{className:"w-64 h-64 md:w-80 md:h-80 bg-gradient-to-br from-yellow-300 to-yellow-600 rounded-full flex items-center justify-center shadow-2xl overflow-hidden border-4 border-red-800 relative",children:C.jsx("img",{src:"/bobcoi-n-removebg-preview.png",alt:"KingBob Logo",className:"absolute inset-0 w-full h-full object-cover"})}),C.jsx("div",{className:"absolute -top-4 -right-4 w-12 h-12 bg-yellow-300 rounded-full animate-pulse"}),C.jsx("div",{className:"absolute -bottom-2 -left-2 w-8 h-8 bg-red-600 rounded-full animate-pulse delay-300"})]})})]}),C.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4 mt-16 text-center",children:[C.jsxs("div",{className:"bg-white bg-opacity-10 backdrop-blur-sm rounded-lg p-4",children:[C.jsx("p",{className:"text-3xl font-bold text-yellow-300",children:"4"}),C.jsx("p",{className:"text-sm text-yellow-100",children:"Royal Packages"})]}),C.jsxs("div",{className:"bg-white bg-opacity-10 backdrop-blur-sm rounded-lg p-4",children:[C.jsx("p",{className:"text-3xl font-bold text-yellow-300",children:"$20"}),C.jsx("p",{className:"text-sm text-yellow-100",children:"Referral Reward"})]}),C.jsxs("div",{className:"bg-white bg-opacity-10 backdrop-blur-sm rounded-lg p-4",children:[C.jsx("p",{className:"text-3xl font-bold text-yellow-300",children:"13,000"}),C.jsx("p",{className:"text-sm text-yellow-100",children:"Max Tokens"})]}),C.jsxs("div",{className:"bg-white bg-opacity-10 backdrop-blur-sm rounded-lg p-4",children:[C.jsx("p",{className:"text-3xl font-bold text-yellow-300",children:"BNB"}),C.jsx("p",{className:"text-sm text-yellow-100",children:"Payment Method"})]})]})]})]}),lH=({userAddress:n,onPurchase:e})=>{const[t,r]=G.useState(null),i=async s=>{if(!n){Je.error("Please connect your wallet first");return}r(s);try{await rH(s,n),Je.success("Purchase successful!"),e&&e()}catch(o){console.error("Purchase error:",o),Je.error(o.message||"Failed to purchase package")}finally{r(null)}};return C.jsx("section",{className:"py-12 px-4",children:C.jsxs("div",{className:"max-w-6xl mx-auto",children:[C.jsx("h2",{className:"text-3xl font-bold text-center mb-2 text-red-800",children:"Royal Presale Packages"}),C.jsx("p",{className:"text-center text-gray-600 mb-10",children:"Select your preferred package to participate in our presale"}),C.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6",children:MD.map(s=>C.jsxs("div",{className:"bg-gradient-to-b from-red-50 to-yellow-50 rounded-xl shadow-xl overflow-hidden transform transition-all duration-300 hover:scale-105 border border-yellow-200",children:[C.jsxs("div",{className:"bg-gradient-to-r from-red-800 to-yellow-600 py-4 px-6 text-white",children:[C.jsx("h3",{className:"text-xl font-bold",children:s.name}),C.jsxs("p",{className:"text-yellow-200 text-sm",children:["$",s.priceUSD," USD"]})]}),C.jsxs("div",{className:"p-6",children:[C.jsxs("div",{className:"flex justify-between mb-4",children:[C.jsx("span",{className:"text-gray-600",children:"Price:"}),C.jsxs("span",{className:"font-bold",children:[s.priceBNB," BNB"]})]}),C.jsxs("div",{className:"flex justify-between mb-4",children:[C.jsx("span",{className:"text-gray-600",children:"Tokens:"}),C.jsx("span",{className:"font-bold",children:s.tokenAmount.toLocaleString()})]}),s.refillCount>0&&C.jsxs("div",{className:"flex justify-between mb-4",children:[C.jsx("span",{className:"text-gray-600",children:"Refills:"}),C.jsx("span",{className:"font-bold",children:s.refillCount})]}),C.jsx("button",{onClick:()=>i(s.id),disabled:!n||t===s.id,className:"w-full mt-4 bg-gradient-to-r from-red-700 to-yellow-500 text-white py-2 rounded-lg font-bold shadow-md hover:from-red-600 hover:to-yellow-400 transition-all duration-300 disabled:opacity-70",children:t===s.id?"Processing...":"Purchase Now"})]})]},s.id))})]})})};var Hy={},uH=function(){var n=document.getSelection();if(!n.rangeCount)return function(){};for(var e=document.activeElement,t=[],r=0;r<n.rangeCount;r++)t.push(n.getRangeAt(r));switch(e.tagName.toUpperCase()){case"INPUT":case"TEXTAREA":e.blur();break;default:e=null;break}return n.removeAllRanges(),function(){n.type==="Caret"&&n.removeAllRanges(),n.rangeCount||t.forEach(function(i){n.addRange(i)}),e&&e.focus()}},cH=uH,lS={"text/plain":"Text","text/html":"Url",default:"Text"},hH="Copy to clipboard: #{key}, Enter";function dH(n){var e=(/mac os x/i.test(navigator.userAgent)?"":"Ctrl")+"+C";return n.replace(/#{\s*key\s*}/g,e)}function fH(n,e){var t,r,i,s,o,a,l=!1;e||(e={}),t=e.debug||!1;try{i=cH(),s=document.createRange(),o=document.getSelection(),a=document.createElement("span"),a.textContent=n,a.ariaHidden="true",a.style.all="unset",a.style.position="fixed",a.style.top=0,a.style.clip="rect(0, 0, 0, 0)",a.style.whiteSpace="pre",a.style.webkitUserSelect="text",a.style.MozUserSelect="text",a.style.msUserSelect="text",a.style.userSelect="text",a.addEventListener("copy",function(h){if(h.stopPropagation(),e.format)if(h.preventDefault(),typeof h.clipboardData>"u"){t&&console.warn("unable to use e.clipboardData"),t&&console.warn("trying IE specific stuff"),window.clipboardData.clearData();var d=lS[e.format]||lS.default;window.clipboardData.setData(d,n)}else h.clipboardData.clearData(),h.clipboardData.setData(e.format,n);e.onCopy&&(h.preventDefault(),e.onCopy(h.clipboardData))}),document.body.appendChild(a),s.selectNodeContents(a),o.addRange(s);var c=document.execCommand("copy");if(!c)throw new Error("copy command was unsuccessful");l=!0}catch(h){t&&console.error("unable to copy using execCommand: ",h),t&&console.warn("trying IE specific stuff");try{window.clipboardData.setData(e.format||"text",n),e.onCopy&&e.onCopy(window.clipboardData),l=!0}catch(d){t&&console.error("unable to copy using clipboardData: ",d),t&&console.error("falling back to prompt"),r=dH("message"in e?e.message:hH),window.prompt(r,n)}}finally{o&&(typeof o.removeRange=="function"?o.removeRange(s):o.removeAllRanges()),a&&document.body.removeChild(a),i()}return l}var pH=fH;function T_(n){"@babel/helpers - typeof";return T_=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},T_(n)}Object.defineProperty(Hy,"__esModule",{value:!0});Hy.CopyToClipboard=void 0;var Up=FD(G),mH=FD(pH),gH=["text","onCopy","options","children"];function FD(n){return n&&n.__esModule?n:{default:n}}function uS(n,e){var t=Object.keys(n);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(n);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(n,i).enumerable})),t.push.apply(t,r)}return t}function cS(n){for(var e=1;e<arguments.length;e++){var t=arguments[e]!=null?arguments[e]:{};e%2?uS(Object(t),!0).forEach(function(r){HA(n,r,t[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(t)):uS(Object(t)).forEach(function(r){Object.defineProperty(n,r,Object.getOwnPropertyDescriptor(t,r))})}return n}function yH(n,e){if(n==null)return{};var t=wH(n,e),r,i;if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(n);for(i=0;i<s.length;i++)r=s[i],!(e.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(n,r)&&(t[r]=n[r])}return t}function wH(n,e){if(n==null)return{};var t={},r=Object.keys(n),i,s;for(s=0;s<r.length;s++)i=r[s],!(e.indexOf(i)>=0)&&(t[i]=n[i]);return t}function vH(n,e){if(!(n instanceof e))throw new TypeError("Cannot call a class as a function")}function hS(n,e){for(var t=0;t<e.length;t++){var r=e[t];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(n,r.key,r)}}function _H(n,e,t){return e&&hS(n.prototype,e),t&&hS(n,t),Object.defineProperty(n,"prototype",{writable:!1}),n}function EH(n,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");n.prototype=Object.create(e&&e.prototype,{constructor:{value:n,writable:!0,configurable:!0}}),Object.defineProperty(n,"prototype",{writable:!1}),e&&b_(n,e)}function b_(n,e){return b_=Object.setPrototypeOf||function(r,i){return r.__proto__=i,r},b_(n,e)}function AH(n){var e=TH();return function(){var r=kg(n),i;if(e){var s=kg(this).constructor;i=Reflect.construct(r,arguments,s)}else i=r.apply(this,arguments);return IH(this,i)}}function IH(n,e){if(e&&(T_(e)==="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return UD(n)}function UD(n){if(n===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return n}function TH(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}function kg(n){return kg=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)},kg(n)}function HA(n,e,t){return e in n?Object.defineProperty(n,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):n[e]=t,n}var jD=function(n){EH(t,n);var e=AH(t);function t(){var r;vH(this,t);for(var i=arguments.length,s=new Array(i),o=0;o<i;o++)s[o]=arguments[o];return r=e.call.apply(e,[this].concat(s)),HA(UD(r),"onClick",function(a){var l=r.props,c=l.text,h=l.onCopy,d=l.children,p=l.options,g=Up.default.Children.only(d),A=(0,mH.default)(c,p);h&&h(c,A),g&&g.props&&typeof g.props.onClick=="function"&&g.props.onClick(a)}),r}return _H(t,[{key:"render",value:function(){var i=this.props;i.text,i.onCopy,i.options;var s=i.children,o=yH(i,gH),a=Up.default.Children.only(s);return Up.default.cloneElement(a,cS(cS({},o),{},{onClick:this.onClick}))}}]),t}(Up.default.PureComponent);Hy.CopyToClipboard=jD;HA(jD,"defaultProps",{onCopy:void 0,options:void 0});var bH=Hy,x_=bH.CopyToClipboard;x_.CopyToClipboard=x_;var xH=x_;const SH=({userAddress:n})=>{const[e,t]=G.useState(!1),[r,i]=G.useState(0),[s,o]=G.useState(0),[a,l]=G.useState(!0),c=n?`${window.location.origin}?ref=${n}`:"",h=p=>{const g=BD();return(p*g*400).toFixed(2)};G.useEffect(()=>{(async()=>{if(!n){l(!1);return}try{l(!0);const g=Hi(pn,li,n),A=await Za(g);if(A.exists()){const v=A.data();i(v.referralRewards||0);const x=RA(vA(pn,li),q2("referrer","==",n)),w=await DA(x);o(w.size)}}catch(g){console.error("Error fetching referral data:",g)}finally{l(!1)}})()},[n]);const d=()=>{t(!0),Je.success("Referral link copied to clipboard!",{icon:"",style:{borderRadius:"10px",background:"#FFF5F5",color:"#822727",border:"1px solid #D4AF37"}}),setTimeout(()=>t(!1),2e3)};return n?C.jsx("section",{className:"py-10 px-4",children:C.jsx("div",{className:"max-w-4xl mx-auto",children:C.jsxs("div",{className:"bg-gradient-to-r from-red-50 to-yellow-50 rounded-xl shadow-lg p-6 border border-yellow-200",children:[C.jsx("h2",{className:"text-2xl font-bold text-red-800 mb-2",children:"Royal Referral Program"}),C.jsxs("p",{className:"text-gray-600 mb-6",children:["Invite friends and earn $",I_/10," worth of tokens for each successful referral"]}),a?C.jsx("div",{className:"text-center py-4",children:"Loading..."}):C.jsxs(C.Fragment,{children:[C.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6 mb-6",children:[C.jsxs("div",{className:"bg-white rounded-lg p-4 shadow",children:[C.jsx("h3",{className:"text-lg font-semibold text-gray-700 mb-2",children:"Your Rewards"}),C.jsxs("p",{className:"text-2xl font-bold text-yellow-600",children:[r," Tokens"]}),C.jsxs("p",{className:"text-sm text-gray-500",children:[" $",h(r)," USD"]})]}),C.jsxs("div",{className:"bg-white rounded-lg p-4 shadow",children:[C.jsx("h3",{className:"text-lg font-semibold text-gray-700 mb-2",children:"Referral Count"}),C.jsxs("p",{className:"text-2xl font-bold text-yellow-600",children:[s," Friends"]}),C.jsxs("p",{className:"text-sm text-gray-500",children:["Earn ",I_," tokens per referral"]})]})]}),C.jsxs("div",{className:"bg-white rounded-lg p-4 shadow mb-4",children:[C.jsx("h3",{className:"text-lg font-semibold text-gray-700 mb-2",children:"Your Referral Link"}),C.jsxs("div",{className:"flex items-center",children:[C.jsx("input",{type:"text",value:c,readOnly:!0,className:"flex-1 p-2 border border-gray-300 rounded-l-lg focus:outline-none focus:ring-2 focus:ring-red-500 text-sm"}),C.jsx(xH.CopyToClipboard,{text:c,onCopy:d,children:C.jsx("button",{className:"bg-gradient-to-r from-red-700 to-yellow-500 text-white px-4 py-2 rounded-r-lg hover:from-red-600 hover:to-yellow-400",children:e?"Copied!":"Copy"})})]})]}),C.jsx("div",{className:"text-center mt-6",children:C.jsx("p",{className:"text-sm text-gray-500",children:"Share your referral link with friends. When they purchase a package, you'll receive tokens as a reward."})})]})]})})}):C.jsx("section",{className:"py-10 px-4",children:C.jsxs("div",{className:"max-w-4xl mx-auto text-center",children:[C.jsx("h2",{className:"text-2xl font-bold text-red-800 mb-4",children:"Referral Program"}),C.jsx("p",{className:"text-gray-600",children:"Connect your wallet to get your referral link"})]})})},PH="/assets/bobcoin-crown-d40fb2f6.svg",RH=()=>{const[n,e]=G.useState([]),[t,r]=G.useState(!0),[i,s]=G.useState("count"),o=l=>{const c=BD();return(l*c*400).toFixed(2)};G.useEffect(()=>{(async()=>{try{r(!0);const c=RA(vA(pn,li),q2(i==="count"?"referralCount":"referralRewards",">",0),W2(i==="count"?"referralCount":"referralRewards","desc"),xz(10)),h=await DA(c),d=[];h.forEach(p=>{const g=p.data();d.push({address:p.id,referralCount:g.referralCount||0,referralRewards:g.referralRewards||0})}),e(d)}catch(c){console.error("Error fetching leaderboard data:",c)}finally{r(!1)}})()},[i]);const a=l=>l?`${l.substring(0,6)}...${l.substring(l.length-4)}`:"";return C.jsxs("div",{className:"bg-gradient-to-r from-red-900 to-red-700 text-white p-8 rounded-lg shadow-xl",children:[C.jsx("h2",{className:"text-2xl font-bold mb-6 text-center",children:"Referral Leaderboard"}),C.jsxs("div",{className:"flex mb-6",children:[C.jsx("button",{className:`flex-1 py-2 text-center ${i==="count"?"bg-yellow-600 text-white":"bg-red-800 text-gray-300"} rounded-l-lg`,onClick:()=>s("count"),children:"Top by Referral Count"}),C.jsx("button",{className:`flex-1 py-2 text-center ${i==="value"?"bg-yellow-600 text-white":"bg-red-800 text-gray-300"} rounded-r-lg`,onClick:()=>s("value"),children:"Top by Referral Value"})]}),t?C.jsx("div",{className:"text-center py-8",children:C.jsx("p",{children:"Loading leaderboard data..."})}):C.jsx("div",{className:"overflow-x-auto",children:C.jsxs("table",{className:"min-w-full bg-red-800 rounded-lg overflow-hidden",children:[C.jsx("thead",{className:"bg-red-900",children:C.jsxs("tr",{children:[C.jsx("th",{className:"py-3 px-4 text-left text-sm font-medium text-yellow-200",children:"Rank"}),C.jsx("th",{className:"py-3 px-4 text-left text-sm font-medium text-yellow-200",children:"Wallet"}),i==="count"?C.jsx("th",{className:"py-3 px-4 text-right text-sm font-medium text-yellow-200",children:"Referrals"}):C.jsx("th",{className:"py-3 px-4 text-right text-sm font-medium text-yellow-200",children:"Tokens Earned"}),C.jsx("th",{className:"py-3 px-4 text-right text-sm font-medium text-yellow-200",children:"Value"})]})}),C.jsxs("tbody",{className:"divide-y divide-red-700",children:[n.map((l,c)=>C.jsxs("tr",{className:c<3?"bg-red-700 bg-opacity-50":"hover:bg-red-700",children:[C.jsxs("td",{className:"py-3 px-4 text-sm",children:[c===0&&C.jsx("img",{src:PH,alt:"Crown",className:"inline-block w-5 h-5 mr-1"}),c+1]}),C.jsx("td",{className:"py-3 px-4 text-sm font-mono",children:a(l.address)}),i==="count"?C.jsx("td",{className:"py-3 px-4 text-right text-sm font-medium",children:l.referralCount}):C.jsx("td",{className:"py-3 px-4 text-right text-sm font-medium",children:l.referralRewards}),C.jsxs("td",{className:"py-3 px-4 text-right text-sm text-yellow-200",children:["$",o(l.referralRewards)]})]},l.address)),n.length===0&&C.jsx("tr",{children:C.jsx("td",{colSpan:4,className:"py-8 text-center text-gray-300",children:"No referral data available yet"})})]})]})}),C.jsxs("div",{className:"mt-6 text-center text-sm text-yellow-200",children:[C.jsx("p",{children:"Join the leaderboard by referring friends to KINGBOB!"}),C.jsx("p",{className:"mt-1",children:"Top referrers will receive special rewards at launch "})]})]})},CH=[{id:"starter",name:"Starter",priceBNB:"0.01",tokenAmount:1e3,refillCount:0},{id:"standard",name:"Standard",priceBNB:"0.05",tokenAmount:5e3,refillCount:4},{id:"premium",name:"Premium",priceBNB:"0.1",tokenAmount:1e4,refillCount:8}],kH=({userAddress:n})=>{var x;const[e,t]=G.useState(null),[r,i]=G.useState(!0),[s,o]=G.useState(!1),[a,l]=G.useState(!1);G.useState(!1);const[c,h]=G.useState("0"),[d,p]=G.useState(!1);G.useEffect(()=>{const w=async()=>{if(n)try{const T=Hi(pn,li,n),L=await Za(T);if(L.exists()){const S=L.data();t(S)}else t(null);const[F,M,b,_]=await Promise.all([eH(n),tH(n),nH(n),sH()]);h(M),p(b),o(_&&!b)}catch(T){console.error("Error fetching user data:",T),Je.error("Error fetching your data. Please try again later.")}finally{i(!1)}};w();const E=setInterval(w,3e4);return()=>clearInterval(E)},[n]);const g=()=>!e||!e.package?null:CH.find(w=>w.id===e.package),A=async()=>{if(!(a||!s||d)){l(!0);try{const w=await iH(n);Je.success("Tokens claimed successfully!"),console.log("Claim transaction:",w),p(!0),o(!1)}catch(w){console.error("Error claiming tokens:",w),Je.error(w.message||"Error claiming tokens. Please try again later.")}finally{l(!1)}}};if(!n)return C.jsx("section",{className:"py-12 px-4",children:C.jsxs("div",{className:"max-w-4xl mx-auto text-center",children:[C.jsx("h2",{className:"text-3xl font-bold text-red-800 mb-4",children:"Your Dashboard"}),C.jsx("p",{className:"text-gray-600 mb-8",children:"Connect your wallet to view your dashboard"})]})});const v=g();return C.jsx("section",{className:"py-12 px-4",children:C.jsxs("div",{className:"max-w-4xl mx-auto",children:[C.jsx("h2",{className:"text-3xl font-bold text-center text-red-800 mb-8",children:"Your Dashboard"}),C.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-8",children:[C.jsxs("div",{className:"bg-gradient-to-r from-red-50 to-yellow-50 rounded-xl shadow-lg p-6 border border-yellow-200",children:[C.jsx("h3",{className:"text-xl font-bold text-red-800 mb-4",children:"Package Information"}),e!=null&&e.package?C.jsxs("div",{children:[C.jsxs("div",{className:"flex justify-between mb-3",children:[C.jsx("span",{className:"text-gray-600",children:"Package:"}),C.jsx("span",{className:"font-bold",children:(v==null?void 0:v.name)||"Unknown"})]}),C.jsxs("div",{className:"flex justify-between mb-3",children:[C.jsx("span",{className:"text-gray-600",children:"Price Paid:"}),C.jsxs("p",{className:"text-sm text-gray-500",children:["$",parseFloat((v==null?void 0:v.priceBNB)||"0")*300," USD"]})]}),C.jsxs("div",{className:"flex justify-between mb-3",children:[C.jsx("span",{className:"text-gray-600",children:"Tokens Purchased:"}),C.jsx("span",{className:"font-bold",children:((x=v==null?void 0:v.tokenAmount)==null?void 0:x.toLocaleString())||0})]})]}):C.jsx("div",{className:"text-center py-4 text-gray-500",children:C.jsx("p",{children:"No package purchased yet"})})]}),C.jsxs("div",{className:"bg-gradient-to-r from-red-50 to-yellow-50 rounded-xl shadow-lg p-6 border border-yellow-200",children:[C.jsx("h3",{className:"text-xl font-bold text-red-800 mb-4",children:"Token Balance"}),C.jsxs("div",{className:"text-center py-4",children:[C.jsx("p",{className:"text-4xl font-bold text-yellow-600 mb-2",children:((e==null?void 0:e.tokenBalance)||0).toLocaleString()}),C.jsx("p",{className:"text-gray-600",children:"Total Tokens"}),e&&e.referralRewards>0&&C.jsx("div",{className:"mt-4 p-3 bg-yellow-100 rounded-lg",children:C.jsxs("p",{className:"text-sm text-gray-700",children:["Includes ",C.jsx("span",{className:"font-bold",children:e.referralRewards})," tokens from referrals"]})}),C.jsxs("div",{className:"mt-6",children:[C.jsx("button",{onClick:A,disabled:!s||a,className:`w-full py-3 px-4 rounded-lg font-bold shadow-md transition-all duration-300 ${s?"bg-gradient-to-r from-red-700 to-yellow-500 text-white hover:from-red-600 hover:to-yellow-400":"bg-gray-300 text-gray-500 cursor-not-allowed"}`,children:a?"Claiming...":"Claim Tokens"}),C.jsx("p",{className:"text-sm text-gray-500 mt-2",children:e!=null&&e.claimed?"Tokens already claimed":s?"Claiming is now enabled!":"Claiming will be enabled after launch"})]})]})]})]})]})})},NH=()=>{const[n,e]=G.useState(""),[t,r]=G.useState(""),[i,s]=G.useState(!1),[o,a]=G.useState(!1),[l,c]=G.useState([]),[h,d]=G.useState(""),[p,g]=G.useState(!1),[A,v]=G.useState(""),[x,w]=G.useState("createdAt"),[E,T]=G.useState("desc");G.useEffect(()=>{const N=ID(Im,Te=>{const q=!!Te;s(q),q?(M(),b(),localStorage.setItem("kingbob_admin_auth","true")):localStorage.removeItem("kingbob_admin_auth")});return localStorage.getItem("kingbob_admin_auth")==="true"&&!i&&(s(!0),M(),b()),()=>N()},[]);const L=async N=>{N.preventDefault(),d(""),a(!0);try{if(n==="kenesistele18@gmail.com"&&t==="Toby@2018")s(!0),localStorage.setItem("kingbob_admin_auth","true"),M(),b();else try{await SG(Im,n,t),s(!0),M(),b()}catch{throw new Error("Invalid email or password")}}catch(R){d(R.message||"Failed to login")}finally{a(!1)}},F=async()=>{try{await CG(Im),s(!1)}catch(N){d(N.message||"Failed to logout")}},M=async()=>{a(!0);try{const N=RA(vA(pn,li),W2(x,E)),R=await DA(N),Te=[];R.forEach(q=>{Te.push({id:q.id,...q.data()})}),c(Te)}catch(N){d(N.message||"Failed to fetch users")}finally{a(!1)}},b=async()=>{try{const N=Hi(pn,"config","claimSettings"),R=await Za(N);R.exists()&&g(R.data().claimActive||!1)}catch(N){console.error("Error fetching settings:",N)}},_=async()=>{try{const N=Hi(pn,"config","claimSettings");await OA(N,{claimActive:!p,updatedAt:new Date().toISOString()}),g(!p),Je.success(`Claim ${p?"disabled":"enabled"} successfully!`),M()}catch(N){d(N.message||"Failed to update claim status"),Je.error("Failed to update claim status")}},S=async(N,R)=>{try{const Te=Hi(pn,li,N);await Fy(Te,{claimEnabled:!R}),c(l.map(q=>q.id===N?{...q,claimEnabled:!R}:q))}catch(Te){d(Te.message||"Failed to update user claim status")}},P=N=>{N===x?T(E==="asc"?"desc":"asc"):(w(N),T("desc"))},D=l.filter(N=>{if(!A)return!0;const R=A.toLowerCase();return N.address.toLowerCase().includes(R)||N.package&&N.package.toLowerCase().includes(R)});return i?C.jsx("section",{className:"py-12 px-4",children:C.jsxs("div",{className:"max-w-6xl mx-auto",children:[C.jsxs("div",{className:"flex justify-between items-center mb-6",children:[C.jsx("h2",{className:"text-3xl font-bold text-red-800",children:"Admin Panel"}),C.jsx("button",{onClick:F,className:"px-4 py-2 bg-red-600 text-white rounded-lg hover:bg-red-700 transition-colors",children:"Logout"})]}),C.jsxs("div",{className:"mb-8 p-6 bg-gradient-to-r from-red-50 to-yellow-50 rounded-xl shadow-lg border border-yellow-200",children:[C.jsx("h3",{className:"text-xl font-bold text-red-800 mb-4",children:"Global Settings"}),C.jsxs("div",{className:"flex items-center justify-between",children:[C.jsxs("div",{children:[C.jsx("h4",{className:"font-bold",children:"Token Claiming"}),C.jsx("p",{className:"text-gray-600",children:p?"Users can claim tokens":"Token claiming is disabled"})]}),C.jsx("button",{onClick:_,className:`px-4 py-2 rounded-lg text-white font-medium ${p?"bg-red-600 hover:bg-red-700":"bg-green-600 hover:bg-green-700"} transition-colors`,children:p?"Disable Claiming":"Enable Claiming"})]})]}),C.jsxs("div",{className:"p-6 bg-gradient-to-r from-red-50 to-yellow-50 rounded-xl shadow-lg border border-yellow-200",children:[C.jsx("h3",{className:"text-xl font-bold text-red-800 mb-4",children:"User Management"}),C.jsx("div",{className:"mb-4",children:C.jsx("input",{type:"text",placeholder:"Search by address or package...",value:A,onChange:N=>v(N.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-red-500"})}),C.jsx("div",{className:"overflow-x-auto",children:C.jsxs("table",{className:"w-full border-collapse",children:[C.jsx("thead",{className:"bg-gradient-to-r from-red-100 to-yellow-100",children:C.jsxs("tr",{children:[C.jsx("th",{className:"py-3 px-4 text-left text-gray-700 cursor-pointer hover:bg-yellow-200",onClick:()=>P("address"),children:"Address"}),C.jsx("th",{className:"py-3 px-4 text-center text-gray-700 cursor-pointer hover:bg-yellow-200",onClick:()=>P("package"),children:"Package"}),C.jsx("th",{className:"py-3 px-4 text-center text-gray-700 cursor-pointer hover:bg-yellow-200",onClick:()=>P("tokenBalance"),children:"Token Balance"}),C.jsx("th",{className:"py-3 px-4 text-center text-gray-700 cursor-pointer hover:bg-yellow-200",onClick:()=>P("referralRewards"),children:"Referral Rewards"}),C.jsx("th",{className:"py-3 px-4 text-center text-gray-700 cursor-pointer hover:bg-yellow-200",onClick:()=>P("claimEnabled"),children:"Claim Status"}),C.jsx("th",{className:"py-3 px-4 text-center text-gray-700",children:"Actions"})]})}),C.jsxs("tbody",{children:[D.map(N=>{var R,Te;return C.jsxs("tr",{className:"border-b border-gray-200 hover:bg-yellow-50",children:[C.jsxs("td",{className:"py-3 px-4 font-mono text-sm",children:[N.address.slice(0,6),"...",N.address.slice(-4)]}),C.jsx("td",{className:"py-3 px-4 text-center",children:N.package||"None"}),C.jsx("td",{className:"py-3 px-4 text-center",children:((R=N.tokenBalance)==null?void 0:R.toLocaleString())||0}),C.jsx("td",{className:"py-3 px-4 text-center",children:((Te=N.referralRewards)==null?void 0:Te.toLocaleString())||0}),C.jsx("td",{className:"py-3 px-4 text-center",children:C.jsx("span",{className:`px-2 py-1 rounded-full text-xs ${N.claimEnabled?"bg-green-100 text-green-800":"bg-gray-100 text-gray-800"}`,children:N.claimEnabled?"Enabled":"Disabled"})}),C.jsx("td",{className:"py-3 px-4 text-center",children:C.jsx("button",{onClick:()=>S(N.id,N.claimEnabled),className:`px-3 py-1 rounded text-xs font-medium ${N.claimEnabled?"bg-red-100 text-red-800 hover:bg-red-200":"bg-green-100 text-green-800 hover:bg-green-200"} transition-colors`,children:N.claimEnabled?"Disable Claim":"Enable Claim"})})]},N.id)}),D.length===0&&C.jsx("tr",{children:C.jsx("td",{colSpan:6,className:"py-4 text-center text-gray-500",children:"No users found"})})]})]})})]})]})}):C.jsx("section",{className:"py-12 px-4",children:C.jsxs("div",{className:"max-w-md mx-auto",children:[C.jsx("h2",{className:"text-3xl font-bold text-center mb-6 text-red-800",children:"Admin Login"}),C.jsxs("form",{onSubmit:L,className:"bg-gradient-to-r from-red-50 to-yellow-50 rounded-xl shadow-lg p-6 border border-yellow-200",children:[h&&C.jsx("div",{className:"mb-4 p-3 bg-red-100 text-red-700 rounded-lg",children:h}),C.jsxs("div",{className:"mb-4",children:[C.jsx("label",{className:"block text-gray-700 mb-2",htmlFor:"email",children:"Email"}),C.jsx("input",{id:"email",type:"email",value:n,onChange:N=>e(N.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-red-500",required:!0})]}),C.jsxs("div",{className:"mb-6",children:[C.jsx("label",{className:"block text-gray-700 mb-2",htmlFor:"password",children:"Password"}),C.jsx("input",{id:"password",type:"password",value:t,onChange:N=>r(N.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-red-500",required:!0})]}),C.jsx("button",{type:"submit",disabled:o,className:"w-full bg-gradient-to-r from-red-700 to-yellow-500 text-white py-2 rounded-lg font-bold shadow-md hover:from-red-600 hover:to-yellow-400 transition-all duration-300 disabled:opacity-70",children:o?"Logging in...":"Login"})]})]})})},DH=()=>{const[n,e]=G.useState(""),[t,r]=G.useState(!1);G.useEffect(()=>{$7().catch(a=>{console.error("Failed to initialize Firestore:",a)});const s=ID(Im,a=>{console.log("Auth state changed:",a?"User authenticated":"User not authenticated"),r(!!a),a?localStorage.setItem("kingbob_admin_auth","true"):localStorage.removeItem("kingbob_admin_auth")});return localStorage.getItem("kingbob_admin_auth")==="true"&&r(!0),()=>s()},[]);const i=s=>{e(s)};return C.jsx(HM,{children:C.jsxs("div",{className:"min-h-screen bg-gradient-to-br from-red-50 to-yellow-50",children:[C.jsx(MB,{position:"top-right"}),C.jsx("nav",{className:"bg-gradient-to-r from-red-900 to-yellow-700 text-white shadow-lg",children:C.jsx("div",{className:"max-w-6xl mx-auto px-4",children:C.jsxs("div",{className:"flex justify-between items-center h-16",children:[C.jsx("div",{className:"flex items-center",children:C.jsxs(mh,{to:"/",className:"flex items-center group",children:[C.jsx("div",{className:"w-8 h-8 mr-2 rounded-full overflow-hidden border-2 border-yellow-300 flex-shrink-0 group-hover:animate-spin transition-transform duration-1000",children:C.jsx("img",{src:"/bobcoi-n-removebg-preview.png",alt:"KINGBOB Logo",className:"w-full h-full object-cover"})}),C.jsx("span",{className:"font-bold text-xl tracking-wide",children:"KINGBOB Presale"})]})}),C.jsxs("div",{className:"flex items-center space-x-4",children:[C.jsx(mh,{to:"/",className:"hover:text-yellow-200 transition-colors",children:"Home"}),C.jsx(mh,{to:"/dashboard",className:"hover:text-yellow-200 transition-colors",children:"Dashboard"}),C.jsx(mh,{to:"/leaderboard",className:"hover:text-yellow-200 transition-colors",children:"Leaderboard"}),t&&C.jsx(mh,{to:"/admin",className:"hover:text-yellow-200 transition-colors",children:"Admin"})]})]})})}),C.jsx("main",{children:C.jsxs(MM,{children:[C.jsx(Ph,{path:"/",element:C.jsxs("div",{children:[C.jsx(aH,{onConnect:i}),C.jsx("div",{id:"packages",children:C.jsx(lH,{userAddress:n})}),C.jsx(SH,{userAddress:n})]})}),C.jsx(Ph,{path:"/dashboard",element:C.jsx(kH,{userAddress:n})}),C.jsx(Ph,{path:"/leaderboard",element:C.jsx(RH,{})}),C.jsx(Ph,{path:"/admin",element:C.jsx(NH,{})})]})}),C.jsx("footer",{className:"bg-gradient-to-r from-red-900 to-yellow-700 text-white py-8",children:C.jsxs("div",{className:"max-w-6xl mx-auto px-4",children:[C.jsxs("div",{className:"flex flex-col md:flex-row justify-between items-center",children:[C.jsxs("div",{className:"mb-4 md:mb-0",children:[C.jsxs("div",{className:"flex items-center",children:[C.jsx("div",{className:"w-6 h-6 mr-2 rounded-full overflow-hidden border border-yellow-300 flex-shrink-0",children:C.jsx("img",{src:"/kingbob-favicon.png",alt:"KINGBOB Logo",className:"w-full h-full object-cover"})}),C.jsx("span",{className:"font-bold",children:"KINGBOB Presale"})]}),C.jsx("p",{className:"text-sm text-yellow-200 mt-2",children:"Secure your position in our exclusive token launch"})]}),C.jsxs("div",{className:"flex space-x-4",children:[C.jsxs("a",{href:"#",className:"text-white hover:text-yellow-200 transition-colors",children:[C.jsx("span",{className:"sr-only",children:"Twitter"}),C.jsx("svg",{className:"w-6 h-6",fill:"currentColor",viewBox:"0 0 24 24","aria-hidden":"true",children:C.jsx("path",{d:"M8.29 20.251c7.547 0 11.675-6.253 11.675-11.675 0-.178 0-.355-.012-.53A8.348 8.348 0 0022 5.92a8.19 8.19 0 01-2.357.646 4.118 4.118 0 001.804-2.27 8.224 8.224 0 01-2.605.996 4.107 4.107 0 00-6.993 3.743 11.65 11.65 0 01-8.457-4.287 4.106 4.106 0 001.27 5.477A4.072 4.072 0 012.8 9.713v.052a4.105 4.105 0 003.292 4.022 4.095 4.095 0 01-1.853.07 4.108 4.108 0 003.834 2.85A8.233 8.233 0 012 18.407a11.616 11.616 0 006.29 1.84"})})]}),C.jsxs("a",{href:"#",className:"text-white hover:text-yellow-200 transition-colors",children:[C.jsx("span",{className:"sr-only",children:"Telegram"}),C.jsx("svg",{className:"w-6 h-6",fill:"currentColor",viewBox:"0 0 24 24","aria-hidden":"true",children:C.jsx("path",{d:"M12 0C5.373 0 0 5.373 0 12s5.373 12 12 12 12-5.373 12-12S18.627 0 12 0zm5.894 8.221l-1.97 9.28c-.145.658-.537.818-1.084.508l-3-2.21-1.446 1.394c-.14.18-.357.295-.6.295-.002 0-.003 0-.005 0l.213-3.054 5.56-5.022c.24-.213-.054-.334-.373-.121l-6.869 4.326-2.96-.924c-.64-.203-.657-.64.134-.954l11.59-4.47c.538-.196 1.006.128.83.952z"})})]}),C.jsxs("a",{href:"#",className:"text-white hover:text-yellow-200 transition-colors",children:[C.jsx("span",{className:"sr-only",children:"Discord"}),C.jsx("svg",{className:"w-6 h-6",fill:"currentColor",viewBox:"0 0 24 24","aria-hidden":"true",children:C.jsx("path",{d:"M20.317 4.37a19.791 19.791 0 00-4.885-1.515.074.074 0 00-.079.037c-.21.375-.444.864-.608 1.25a18.27 18.27 0 00-5.487 0 12.64 12.64 0 00-.617-1.25.077.077 0 00-.079-.037A19.736 19.736 0 003.677 4.37a.07.07 0 00-.032.027C.533 9.046-.32 13.58.099 18.057a.082.082 0 00.031.057 19.9 19.9 0 005.993 3.03.078.078 0 00.084-.028c.462-.63.874-1.295 1.226-1.994a.076.076 0 00-.041-.106 13.107 13.107 0 01-1.872-.892.077.077 0 01-.008-.128 10.2 10.2 0 00.372-.292.074.074 0 01.077-.01c3.928 1.793 8.18 1.793 12.062 0a.074.074 0 01.078.01c.12.098.246.198.373.292a.077.077 0 01-.006.127 12.299 12.299 0 01-1.873.892.077.077 0 00-.041.107c.36.698.772 1.362 1.225 1.993a.076.076 0 00.084.028 19.839 19.839 0 006.002-3.03.077.077 0 00.032-.054c.5-5.177-.838-9.674-3.549-13.66a.061.061 0 00-.031-.03zM8.02 15.33c-1.183 0-2.157-1.085-2.157-2.419 0-1.333.956-2.419 2.157-2.419 1.21 0 2.176 1.096 2.157 2.42 0 1.333-.956 2.418-2.157 2.418zm7.975 0c-1.183 0-2.157-1.085-2.157-2.419 0-1.333.955-2.419 2.157-2.419 1.21 0 2.176 1.096 2.157 2.42 0 1.333-.946 2.418-2.157 2.418z"})})]})]})]}),C.jsx("div",{className:"mt-8 border-t border-red-800 pt-6 text-center text-sm text-yellow-200",children:C.jsx("p",{children:" 2025 KINGBOB Presale. All rights reserved."})})]})})]})})};pw.createRoot(document.getElementById("root")).render(C.jsx(AS.StrictMode,{children:C.jsx(DH,{})}));
